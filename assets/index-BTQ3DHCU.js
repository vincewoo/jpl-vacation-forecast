var mT=Object.defineProperty;var gT=(n,e,t)=>e in n?mT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ya=(n,e,t)=>gT(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function o_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dd={exports:{}},Qa={},Nd={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function yT(){if(sy)return Le;sy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function I(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,L={};function j(M,q,Te){this.props=M,this.context=q,this.refs=L,this.updater=Te||P}j.prototype.isReactComponent={},j.prototype.setState=function(M,q){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,q,"setState")},j.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function H(){}H.prototype=j.prototype;function K(M,q,Te){this.props=M,this.context=q,this.refs=L,this.updater=Te||P}var oe=K.prototype=new H;oe.constructor=K,z(oe,j.prototype),oe.isPureReactComponent=!0;var ne=Array.isArray,be=Object.prototype.hasOwnProperty,ye={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function A(M,q,Te){var Ee,Ne={},De=null,Z=null;if(q!=null)for(Ee in q.ref!==void 0&&(Z=q.ref),q.key!==void 0&&(De=""+q.key),q)be.call(q,Ee)&&!D.hasOwnProperty(Ee)&&(Ne[Ee]=q[Ee]);var he=arguments.length-2;if(he===1)Ne.children=Te;else if(1<he){for(var de=Array(he),Se=0;Se<he;Se++)de[Se]=arguments[Se+2];Ne.children=de}if(M&&M.defaultProps)for(Ee in he=M.defaultProps,he)Ne[Ee]===void 0&&(Ne[Ee]=he[Ee]);return{$$typeof:n,type:M,key:De,ref:Z,props:Ne,_owner:ye.current}}function R(M,q){return{$$typeof:n,type:M.type,key:q,ref:M.ref,props:M.props,_owner:M._owner}}function N(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function x(M){var q={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Te){return q[Te]})}var V=/\/+/g;function C(M,q){return typeof M=="object"&&M!==null&&M.key!=null?x(""+M.key):q.toString(36)}function Ve(M,q,Te,Ee,Ne){var De=typeof M;(De==="undefined"||De==="boolean")&&(M=null);var Z=!1;if(M===null)Z=!0;else switch(De){case"string":case"number":Z=!0;break;case"object":switch(M.$$typeof){case n:case e:Z=!0}}if(Z)return Z=M,Ne=Ne(Z),M=Ee===""?"."+C(Z,0):Ee,ne(Ne)?(Te="",M!=null&&(Te=M.replace(V,"$&/")+"/"),Ve(Ne,q,Te,"",function(Se){return Se})):Ne!=null&&(N(Ne)&&(Ne=R(Ne,Te+(!Ne.key||Z&&Z.key===Ne.key?"":(""+Ne.key).replace(V,"$&/")+"/")+M)),q.push(Ne)),1;if(Z=0,Ee=Ee===""?".":Ee+":",ne(M))for(var he=0;he<M.length;he++){De=M[he];var de=Ee+C(De,he);Z+=Ve(De,q,Te,de,Ne)}else if(de=I(M),typeof de=="function")for(M=de.call(M),he=0;!(De=M.next()).done;)De=De.value,de=Ee+C(De,he++),Z+=Ve(De,q,Te,de,Ne);else if(De==="object")throw q=String(M),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return Z}function je(M,q,Te){if(M==null)return M;var Ee=[],Ne=0;return Ve(M,Ee,"","",function(De){return q.call(Te,De,Ne++)}),Ee}function Ge(M){if(M._status===-1){var q=M._result;q=q(),q.then(function(Te){(M._status===0||M._status===-1)&&(M._status=1,M._result=Te)},function(Te){(M._status===0||M._status===-1)&&(M._status=2,M._result=Te)}),M._status===-1&&(M._status=0,M._result=q)}if(M._status===1)return M._result.default;throw M._result}var $e={current:null},re={transition:null},ue={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:re,ReactCurrentOwner:ye};function te(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:je,forEach:function(M,q,Te){je(M,function(){q.apply(this,arguments)},Te)},count:function(M){var q=0;return je(M,function(){q++}),q},toArray:function(M){return je(M,function(q){return q})||[]},only:function(M){if(!N(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Le.Component=j,Le.Fragment=t,Le.Profiler=o,Le.PureComponent=K,Le.StrictMode=i,Le.Suspense=m,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Le.act=te,Le.cloneElement=function(M,q,Te){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Ee=z({},M.props),Ne=M.key,De=M.ref,Z=M._owner;if(q!=null){if(q.ref!==void 0&&(De=q.ref,Z=ye.current),q.key!==void 0&&(Ne=""+q.key),M.type&&M.type.defaultProps)var he=M.type.defaultProps;for(de in q)be.call(q,de)&&!D.hasOwnProperty(de)&&(Ee[de]=q[de]===void 0&&he!==void 0?he[de]:q[de])}var de=arguments.length-2;if(de===1)Ee.children=Te;else if(1<de){he=Array(de);for(var Se=0;Se<de;Se++)he[Se]=arguments[Se+2];Ee.children=he}return{$$typeof:n,type:M.type,key:Ne,ref:De,props:Ee,_owner:Z}},Le.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},Le.createElement=A,Le.createFactory=function(M){var q=A.bind(null,M);return q.type=M,q},Le.createRef=function(){return{current:null}},Le.forwardRef=function(M){return{$$typeof:f,render:M}},Le.isValidElement=N,Le.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:Ge}},Le.memo=function(M,q){return{$$typeof:y,type:M,compare:q===void 0?null:q}},Le.startTransition=function(M){var q=re.transition;re.transition={};try{M()}finally{re.transition=q}},Le.unstable_act=te,Le.useCallback=function(M,q){return $e.current.useCallback(M,q)},Le.useContext=function(M){return $e.current.useContext(M)},Le.useDebugValue=function(){},Le.useDeferredValue=function(M){return $e.current.useDeferredValue(M)},Le.useEffect=function(M,q){return $e.current.useEffect(M,q)},Le.useId=function(){return $e.current.useId()},Le.useImperativeHandle=function(M,q,Te){return $e.current.useImperativeHandle(M,q,Te)},Le.useInsertionEffect=function(M,q){return $e.current.useInsertionEffect(M,q)},Le.useLayoutEffect=function(M,q){return $e.current.useLayoutEffect(M,q)},Le.useMemo=function(M,q){return $e.current.useMemo(M,q)},Le.useReducer=function(M,q,Te){return $e.current.useReducer(M,q,Te)},Le.useRef=function(M){return $e.current.useRef(M)},Le.useState=function(M){return $e.current.useState(M)},Le.useSyncExternalStore=function(M,q,Te){return $e.current.useSyncExternalStore(M,q,Te)},Le.useTransition=function(){return $e.current.useTransition()},Le.version="18.3.1",Le}var oy;function Gf(){return oy||(oy=1,Nd.exports=yT()),Nd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay;function vT(){if(ay)return Qa;ay=1;var n=Gf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,m,y){var _,E={},I=null,P=null;y!==void 0&&(I=""+y),m.key!==void 0&&(I=""+m.key),m.ref!==void 0&&(P=m.ref);for(_ in m)i.call(m,_)&&!l.hasOwnProperty(_)&&(E[_]=m[_]);if(f&&f.defaultProps)for(_ in m=f.defaultProps,m)E[_]===void 0&&(E[_]=m[_]);return{$$typeof:e,type:f,key:I,ref:P,props:E,_owner:o.current}}return Qa.Fragment=t,Qa.jsx=h,Qa.jsxs=h,Qa}var ly;function _T(){return ly||(ly=1,Dd.exports=vT()),Dd.exports}var T=_T(),se=Gf();const a_=o_(se);var Fu={},xd={exports:{}},gn={},bd={exports:{}},Od={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function wT(){return uy||(uy=1,(function(n){function e(re,ue){var te=re.length;re.push(ue);e:for(;0<te;){var M=te-1>>>1,q=re[M];if(0<o(q,ue))re[M]=ue,re[te]=q,te=M;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var ue=re[0],te=re.pop();if(te!==ue){re[0]=te;e:for(var M=0,q=re.length,Te=q>>>1;M<Te;){var Ee=2*(M+1)-1,Ne=re[Ee],De=Ee+1,Z=re[De];if(0>o(Ne,te))De<q&&0>o(Z,Ne)?(re[M]=Z,re[De]=te,M=De):(re[M]=Ne,re[Ee]=te,M=Ee);else if(De<q&&0>o(Z,te))re[M]=Z,re[De]=te,M=De;else break e}}return ue}function o(re,ue){var te=re.sortIndex-ue.sortIndex;return te!==0?te:re.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var m=[],y=[],_=1,E=null,I=3,P=!1,z=!1,L=!1,j=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(re){for(var ue=t(y);ue!==null;){if(ue.callback===null)i(y);else if(ue.startTime<=re)i(y),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(y)}}function ne(re){if(L=!1,oe(re),!z)if(t(m)!==null)z=!0,Ge(be);else{var ue=t(y);ue!==null&&$e(ne,ue.startTime-re)}}function be(re,ue){z=!1,L&&(L=!1,H(A),A=-1),P=!0;var te=I;try{for(oe(ue),E=t(m);E!==null&&(!(E.expirationTime>ue)||re&&!x());){var M=E.callback;if(typeof M=="function"){E.callback=null,I=E.priorityLevel;var q=M(E.expirationTime<=ue);ue=n.unstable_now(),typeof q=="function"?E.callback=q:E===t(m)&&i(m),oe(ue)}else i(m);E=t(m)}if(E!==null)var Te=!0;else{var Ee=t(y);Ee!==null&&$e(ne,Ee.startTime-ue),Te=!1}return Te}finally{E=null,I=te,P=!1}}var ye=!1,D=null,A=-1,R=5,N=-1;function x(){return!(n.unstable_now()-N<R)}function V(){if(D!==null){var re=n.unstable_now();N=re;var ue=!0;try{ue=D(!0,re)}finally{ue?C():(ye=!1,D=null)}}else ye=!1}var C;if(typeof K=="function")C=function(){K(V)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,je=Ve.port2;Ve.port1.onmessage=V,C=function(){je.postMessage(null)}}else C=function(){j(V,0)};function Ge(re){D=re,ye||(ye=!0,C())}function $e(re,ue){A=j(function(){re(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){z||P||(z=!0,Ge(be))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(re){switch(I){case 1:case 2:case 3:var ue=3;break;default:ue=I}var te=I;I=ue;try{return re()}finally{I=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,ue){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var te=I;I=re;try{return ue()}finally{I=te}},n.unstable_scheduleCallback=function(re,ue,te){var M=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?M+te:M):te=M,re){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=te+q,re={id:_++,callback:ue,priorityLevel:re,startTime:te,expirationTime:q,sortIndex:-1},te>M?(re.sortIndex=te,e(y,re),t(m)===null&&re===t(y)&&(L?(H(A),A=-1):L=!0,$e(ne,te-M))):(re.sortIndex=q,e(m,re),z||P||(z=!0,Ge(be))),re},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(re){var ue=I;return function(){var te=I;I=ue;try{return re.apply(this,arguments)}finally{I=te}}}})(Od)),Od}var cy;function ET(){return cy||(cy=1,bd.exports=wT()),bd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function TT(){if(hy)return gn;hy=1;var n=Gf(),e=ET();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function I(r){return m.call(E,r)?!0:m.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function P(r,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function z(r,s,a,c){if(s===null||typeof s>"u"||P(r,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function L(r,s,a,c,d,p,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=p,this.removeEmptyString=w}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){j[r]=new L(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];j[s]=new L(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){j[r]=new L(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){j[r]=new L(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){j[r]=new L(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){j[r]=new L(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){j[r]=new L(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){j[r]=new L(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){j[r]=new L(r,5,!1,r.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function K(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(H,K);j[s]=new L(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(H,K);j[s]=new L(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(H,K);j[s]=new L(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){j[r]=new L(r,1,!1,r.toLowerCase(),null,!1,!1)}),j.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){j[r]=new L(r,1,!1,r.toLowerCase(),null,!0,!0)});function oe(r,s,a,c){var d=j.hasOwnProperty(s)?j[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(z(s,a,d,c)&&(a=null),c||d===null?I(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?r.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?r.setAttributeNS(c,s,a):r.setAttribute(s,a))))}var ne=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,be=Symbol.for("react.element"),ye=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),x=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),je=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),re=Symbol.iterator;function ue(r){return r===null||typeof r!="object"?null:(r=re&&r[re]||r["@@iterator"],typeof r=="function"?r:null)}var te=Object.assign,M;function q(r){if(M===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||""}return`
`+M+r}var Te=!1;function Ee(r,s){if(!r||Te)return"";Te=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){c=$}r.call(s.prototype)}else{try{throw Error()}catch($){c=$}r()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,k=p.length-1;1<=w&&0<=k&&d[w]!==p[k];)k--;for(;1<=w&&0<=k;w--,k--)if(d[w]!==p[k]){if(w!==1||k!==1)do if(w--,k--,0>k||d[w]!==p[k]){var b=`
`+d[w].replace(" at new "," at ");return r.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",r.displayName)),b}while(1<=w&&0<=k);break}}}finally{Te=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?q(r):""}function Ne(r){switch(r.tag){case 5:return q(r.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return r=Ee(r.type,!1),r;case 11:return r=Ee(r.type.render,!1),r;case 1:return r=Ee(r.type,!0),r;default:return""}}function De(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case ye:return"Portal";case R:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case Ve:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case x:return(r.displayName||"Context")+".Consumer";case N:return(r._context.displayName||"Context")+".Provider";case V:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case je:return s=r.displayName||null,s!==null?s:De(r.type)||"Memo";case Ge:s=r._payload,r=r._init;try{return De(r(s))}catch{}}return null}function Z(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function he(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function de(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Se(r){var s=de(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Me(r){r._valueTracker||(r._valueTracker=Se(r))}function vt(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=de(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function St(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function He(r,s){var a=s.checked;return te({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function bn(r,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=he(s.value!=null?s.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Pt(r,s){s=s.checked,s!=null&&oe(r,"checked",s,!1)}function On(r,s){Pt(r,s);var a=he(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?ht(r,s.type,a):s.hasOwnProperty("defaultValue")&&ht(r,s.type,he(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function gi(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function ht(r,s,a){(s!=="number"||St(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var dt=Array.isArray;function vn(r,s,a,c){if(r=r.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=s.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&c&&(r[a].defaultSelected=!0)}else{for(a=""+he(a),s=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,c&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function us(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function yi(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(dt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:he(a)}}function eo(r,s){var a=he(s.value),c=he(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function lr(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function cs(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vi(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?cs(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ur,_i=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return r(s,a,c,d)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(ur=ur||document.createElement("div"),ur.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ur.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function cr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Kn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},to=["Webkit","ms","Moz","O"];Object.keys(Kn).forEach(function(r){to.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Kn[s]=Kn[r]})});function _n(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Kn.hasOwnProperty(r)&&Kn[r]?(""+s).trim():s+"px"}function Ur(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=_n(a,s[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,d):r[a]=d}}var hs=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ln(r,s){if(s){if(hs[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Br(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vn=null;function wi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Mn=null,Yn=null,rt=null;function It(r){if(r=Oa(r)){if(typeof Mn!="function")throw Error(t(280));var s=r.stateNode;s&&(s=eu(s),Mn(r.stateNode,r.type,s))}}function ft(r){Yn?rt?rt.push(r):rt=[r]:Yn=r}function wn(){if(Yn){var r=Yn,s=rt;if(rt=Yn=null,It(r),s)for(r=0;r<s.length;r++)It(s[r])}}function Je(r,s){return r(s)}function sn(){}var Ln=!1;function Ei(r,s,a){if(Ln)return r(s,a);Ln=!0;try{return Je(r,s,a)}finally{Ln=!1,(Yn!==null||rt!==null)&&(sn(),wn())}}function hr(r,s){var a=r.stateNode;if(a===null)return null;var c=eu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Qn=!1;if(f)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){Qn=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{Qn=!1}function zr(r,s,a,c,d,p,w,k,b){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(X){this.onError(X)}}var En=!1,un=null,dr=!1,cn=null,Ti={onError:function(r){En=!0,un=r}};function ds(r,s,a,c,d,p,w,k,b){En=!1,un=null,zr.apply(Ti,arguments)}function fs(r,s,a,c,d,p,w,k,b){if(ds.apply(this,arguments),En){if(En){var $=un;En=!1,un=null}else throw Error(t(198));dr||(dr=!0,cn=$)}}function Tn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function xe(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Ze(r){if(Tn(r)!==r)throw Error(t(188))}function it(r){var s=r.alternate;if(!s){if(s=Tn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,c=s;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Ze(d),r;if(p===c)return Ze(d),s;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,k=d.child;k;){if(k===a){w=!0,a=d,c=p;break}if(k===c){w=!0,c=d,a=p;break}k=k.sibling}if(!w){for(k=p.child;k;){if(k===a){w=!0,a=p,c=d;break}if(k===c){w=!0,c=p,a=d;break}k=k.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function Kt(r){return r=it(r),r!==null?Dt(r):null}function Dt(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Dt(r);if(s!==null)return s;r=r.sibling}return null}var $r=e.unstable_scheduleCallback,Si=e.unstable_cancelCallback,Wr=e.unstable_shouldYield,Hr=e.unstable_requestPaint,st=e.unstable_now,ah=e.unstable_getCurrentPriorityLevel,no=e.unstable_ImmediatePriority,ha=e.unstable_UserBlockingPriority,ps=e.unstable_NormalPriority,da=e.unstable_LowPriority,ro=e.unstable_IdlePriority,ms=null,Sn=null;function Ll(r){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(ms,r,void 0,(r.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:gs,fr=Math.log,Fn=Math.LN2;function gs(r){return r>>>=0,r===0?32:31-(fr(r)/Fn|0)|0}var pr=64,Ii=4194304;function Ye(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function qr(r,s){var a=r.pendingLanes;if(a===0)return 0;var c=0,d=r.suspendedLanes,p=r.pingedLanes,w=a&268435455;if(w!==0){var k=w&~d;k!==0?c=Ye(k):(p&=w,p!==0&&(c=Ye(p)))}else w=a&~d,w!==0?c=Ye(w):p!==0&&(c=Ye(p));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,p=s&-s,d>=p||d===16&&(p&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)a=31-In(s),d=1<<a,c|=r[a],s&=~d;return c}function ys(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vs(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,p=r.pendingLanes;0<p;){var w=31-In(p),k=1<<w,b=d[w];b===-1?((k&a)===0||(k&c)!==0)&&(d[w]=ys(k,s)):b<=s&&(r.expiredLanes|=k),p&=~k}}function fa(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function pa(){var r=pr;return pr<<=1,(pr&4194240)===0&&(pr=64),r}function ma(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function _s(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-In(s),r[s]=a}function lh(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-In(a),p=1<<d;s[d]=0,c[d]=-1,r[d]=-1,a&=~p}}function ga(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-In(a),d=1<<c;d&s|r[c]&s&&(r[c]|=s),a&=~d}}var ze=0;function mr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ya,io,va,_a,wa,gr=!1,so=[],yr=null,vr=null,Ut=null,ws=new Map,Gr=new Map,An=[],jl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ai(r,s){switch(r){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":ws.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(s.pointerId)}}function Xn(r,s,a,c,d,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},s!==null&&(s=Oa(s),s!==null&&io(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function Fl(r,s,a,c,d){switch(s){case"focusin":return yr=Xn(yr,r,s,a,c,d),!0;case"dragenter":return vr=Xn(vr,r,s,a,c,d),!0;case"mouseover":return Ut=Xn(Ut,r,s,a,c,d),!0;case"pointerover":var p=d.pointerId;return ws.set(p,Xn(ws.get(p)||null,r,s,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Gr.set(p,Xn(Gr.get(p)||null,r,s,a,c,d)),!0}return!1}function oo(r){var s=Is(r.target);if(s!==null){var a=Tn(s);if(a!==null){if(s=a.tag,s===13){if(s=xe(a),s!==null){r.blockedOn=s,wa(r.priority,function(){va(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function et(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=ao(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);Vn=c,a.target.dispatchEvent(c),Vn=null}else return s=Oa(a),s!==null&&io(s),r.blockedOn=a,!1;s.shift()}return!0}function Ul(r,s,a){et(r)&&a.delete(s)}function uh(){gr=!1,yr!==null&&et(yr)&&(yr=null),vr!==null&&et(vr)&&(vr=null),Ut!==null&&et(Ut)&&(Ut=null),ws.forEach(Ul),Gr.forEach(Ul)}function Ci(r,s){r.blockedOn===s&&(r.blockedOn=null,gr||(gr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uh)))}function ki(r){function s(d){return Ci(d,r)}if(0<so.length){Ci(so[0],r);for(var a=1;a<so.length;a++){var c=so[a];c.blockedOn===r&&(c.blockedOn=null)}}for(yr!==null&&Ci(yr,r),vr!==null&&Ci(vr,r),Ut!==null&&Ci(Ut,r),ws.forEach(s),Gr.forEach(s),a=0;a<An.length;a++)c=An[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<An.length&&(a=An[0],a.blockedOn===null);)oo(a),a.blockedOn===null&&An.shift()}var Kr=ne.ReactCurrentBatchConfig,Yr=!0;function _r(r,s,a,c){var d=ze,p=Kr.transition;Kr.transition=null;try{ze=1,Ea(r,s,a,c)}finally{ze=d,Kr.transition=p}}function Bl(r,s,a,c){var d=ze,p=Kr.transition;Kr.transition=null;try{ze=4,Ea(r,s,a,c)}finally{ze=d,Kr.transition=p}}function Ea(r,s,a,c){if(Yr){var d=ao(r,s,a,c);if(d===null)wh(r,s,c,wr,a),Ai(r,c);else if(Fl(d,r,s,a,c))c.stopPropagation();else if(Ai(r,c),s&4&&-1<jl.indexOf(r)){for(;d!==null;){var p=Oa(d);if(p!==null&&ya(p),p=ao(r,s,a,c),p===null&&wh(r,s,c,wr,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else wh(r,s,c,null,a)}}var wr=null;function ao(r,s,a,c){if(wr=null,r=wi(c),r=Is(r),r!==null)if(s=Tn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=xe(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return wr=r,null}function lo(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ah()){case no:return 1;case ha:return 4;case ps:case da:return 16;case ro:return 536870912;default:return 16}default:return 16}}var Cn=null,uo=null,Qr=null;function zl(){if(Qr)return Qr;var r,s=uo,a=s.length,c,d="value"in Cn?Cn.value:Cn.textContent,p=d.length;for(r=0;r<a&&s[r]===d[r];r++);var w=a-r;for(c=1;c<=w&&s[a-c]===d[p-c];c++);return Qr=d.slice(r,1<c?1-c:void 0)}function Es(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Er(){return!0}function Ta(){return!1}function Yt(r){function s(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(a=r[k],this[k]=a?a(p):p[k]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Er:Ta,this.isPropagationStopped=Ta,this}return te(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),s}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ts=Yt(Tr),Ri=te({},Tr,{view:0,detail:0}),co=Yt(Ri),ho,fo,kn,Ss=te({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==kn&&(kn&&r.type==="mousemove"?(ho=r.screenX-kn.screenX,fo=r.screenY-kn.screenY):fo=ho=0,kn=r),ho)},movementY:function(r){return"movementY"in r?r.movementY:fo}}),Sa=Yt(Ss),$l=te({},Ss,{dataTransfer:0}),Wl=Yt($l),po=te({},Ri,{relatedTarget:0}),Bt=Yt(po),Hl=te({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),ql=Yt(Hl),Pi=te({},Tr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=Yt(Pi),g=te({},Tr,{data:0}),v=Yt(g),S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ie(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=W[r])?!!s[r]:!1}function Re(){return ie}var wt=te({},Ri,{key:function(r){if(r.key){var s=S[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Es(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?U[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(r){return r.type==="keypress"?Es(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Es(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Xe=Yt(wt),At=te({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rn=Yt(At),Xr=te({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),Sr=Yt(Xr),Ir=te({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),mo=Yt(Ir),Ia=te({},Ss,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),u0=Yt(Ia),c0=[9,13,27,32],ch=f&&"CompositionEvent"in window,Aa=null;f&&"documentMode"in document&&(Aa=document.documentMode);var h0=f&&"TextEvent"in window&&!Aa,Xp=f&&(!ch||Aa&&8<Aa&&11>=Aa),Jp=" ",Zp=!1;function em(r,s){switch(r){case"keyup":return c0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var go=!1;function d0(r,s){switch(r){case"compositionend":return tm(s);case"keypress":return s.which!==32?null:(Zp=!0,Jp);case"textInput":return r=s.data,r===Jp&&Zp?null:r;default:return null}}function f0(r,s){if(go)return r==="compositionend"||!ch&&em(r,s)?(r=zl(),Qr=uo=Cn=null,go=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Xp&&s.locale!=="ko"?null:s.data;default:return null}}var p0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!p0[r.type]:s==="textarea"}function rm(r,s,a,c){ft(c),s=Xl(s,"onChange"),0<s.length&&(a=new Ts("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var Ca=null,ka=null;function m0(r){Em(r,0)}function Gl(r){var s=Eo(r);if(vt(s))return r}function g0(r,s){if(r==="change")return s}var im=!1;if(f){var hh;if(f){var dh="oninput"in document;if(!dh){var sm=document.createElement("div");sm.setAttribute("oninput","return;"),dh=typeof sm.oninput=="function"}hh=dh}else hh=!1;im=hh&&(!document.documentMode||9<document.documentMode)}function om(){Ca&&(Ca.detachEvent("onpropertychange",am),ka=Ca=null)}function am(r){if(r.propertyName==="value"&&Gl(ka)){var s=[];rm(s,ka,r,wi(r)),Ei(m0,s)}}function y0(r,s,a){r==="focusin"?(om(),Ca=s,ka=a,Ca.attachEvent("onpropertychange",am)):r==="focusout"&&om()}function v0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Gl(ka)}function _0(r,s){if(r==="click")return Gl(s)}function w0(r,s){if(r==="input"||r==="change")return Gl(s)}function E0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Jn=typeof Object.is=="function"?Object.is:E0;function Ra(r,s){if(Jn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!m.call(s,d)||!Jn(r[d],s[d]))return!1}return!0}function lm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function um(r,s){var a=lm(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=lm(a)}}function cm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?cm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function hm(){for(var r=window,s=St();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=St(r.document)}return s}function fh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function T0(r){var s=hm(),a=r.focusedElem,c=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&cm(a.ownerDocument.documentElement,a)){if(c!==null&&fh(a)){if(s=c.start,r=c.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!r.extend&&p>c&&(d=c,c=p,p=d),d=um(a,p);var w=um(a,c);d&&w&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),r.removeAllRanges(),p>c?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var S0=f&&"documentMode"in document&&11>=document.documentMode,yo=null,ph=null,Pa=null,mh=!1;function dm(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;mh||yo==null||yo!==St(c)||(c=yo,"selectionStart"in c&&fh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Pa&&Ra(Pa,c)||(Pa=c,c=Xl(ph,"onSelect"),0<c.length&&(s=new Ts("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=yo)))}function Kl(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var vo={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},gh={},fm={};f&&(fm=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function Yl(r){if(gh[r])return gh[r];if(!vo[r])return r;var s=vo[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in fm)return gh[r]=s[a];return r}var pm=Yl("animationend"),mm=Yl("animationiteration"),gm=Yl("animationstart"),ym=Yl("transitionend"),vm=new Map,_m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(r,s){vm.set(r,s),l(s,[r])}for(var yh=0;yh<_m.length;yh++){var vh=_m[yh],I0=vh.toLowerCase(),A0=vh[0].toUpperCase()+vh.slice(1);Di(I0,"on"+A0)}Di(pm,"onAnimationEnd"),Di(mm,"onAnimationIteration"),Di(gm,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(ym,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Da));function wm(r,s,a){var c=r.type||"unknown-event";r.currentTarget=a,fs(c,s,void 0,r),r.currentTarget=null}function Em(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],d=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var w=c.length-1;0<=w;w--){var k=c[w],b=k.instance,$=k.currentTarget;if(k=k.listener,b!==p&&d.isPropagationStopped())break e;wm(d,k,$),p=b}else for(w=0;w<c.length;w++){if(k=c[w],b=k.instance,$=k.currentTarget,k=k.listener,b!==p&&d.isPropagationStopped())break e;wm(d,k,$),p=b}}}if(dr)throw r=cn,dr=!1,cn=null,r}function ot(r,s){var a=s[Ch];a===void 0&&(a=s[Ch]=new Set);var c=r+"__bubble";a.has(c)||(Tm(s,r,2,!1),a.add(c))}function _h(r,s,a){var c=0;s&&(c|=4),Tm(a,r,c,s)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Na(r){if(!r[Ql]){r[Ql]=!0,i.forEach(function(a){a!=="selectionchange"&&(C0.has(a)||_h(a,!1,r),_h(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Ql]||(s[Ql]=!0,_h("selectionchange",!1,s))}}function Tm(r,s,a,c){switch(lo(s)){case 1:var d=_r;break;case 4:d=Bl;break;default:d=Ea}a=d.bind(null,s,a,r),d=void 0,!Qn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?r.addEventListener(s,a,{capture:!0,passive:d}):r.addEventListener(s,a,!0):d!==void 0?r.addEventListener(s,a,{passive:d}):r.addEventListener(s,a,!1)}function wh(r,s,a,c,d){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var k=c.stateNode.containerInfo;if(k===d||k.nodeType===8&&k.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var b=w.tag;if((b===3||b===4)&&(b=w.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;w=w.return}for(;k!==null;){if(w=Is(k),w===null)return;if(b=w.tag,b===5||b===6){c=p=w;continue e}k=k.parentNode}}c=c.return}Ei(function(){var $=p,X=wi(a),J=[];e:{var Y=vm.get(r);if(Y!==void 0){var ae=Ts,fe=r;switch(r){case"keypress":if(Es(a)===0)break e;case"keydown":case"keyup":ae=Xe;break;case"focusin":fe="focus",ae=Bt;break;case"focusout":fe="blur",ae=Bt;break;case"beforeblur":case"afterblur":ae=Bt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Sa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Wl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Sr;break;case pm:case mm:case gm:ae=ql;break;case ym:ae=mo;break;case"scroll":ae=co;break;case"wheel":ae=u0;break;case"copy":case"cut":case"paste":ae=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Rn}var pe=(s&4)!==0,Et=!pe&&r==="scroll",F=pe?Y!==null?Y+"Capture":null:Y;pe=[];for(var O=$,B;O!==null;){B=O;var ee=B.stateNode;if(B.tag===5&&ee!==null&&(B=ee,F!==null&&(ee=hr(O,F),ee!=null&&pe.push(xa(O,ee,B)))),Et)break;O=O.return}0<pe.length&&(Y=new ae(Y,fe,null,a,X),J.push({event:Y,listeners:pe}))}}if((s&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",Y&&a!==Vn&&(fe=a.relatedTarget||a.fromElement)&&(Is(fe)||fe[Jr]))break e;if((ae||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,ae?(fe=a.relatedTarget||a.toElement,ae=$,fe=fe?Is(fe):null,fe!==null&&(Et=Tn(fe),fe!==Et||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ae=null,fe=$),ae!==fe)){if(pe=Sa,ee="onMouseLeave",F="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(pe=Rn,ee="onPointerLeave",F="onPointerEnter",O="pointer"),Et=ae==null?Y:Eo(ae),B=fe==null?Y:Eo(fe),Y=new pe(ee,O+"leave",ae,a,X),Y.target=Et,Y.relatedTarget=B,ee=null,Is(X)===$&&(pe=new pe(F,O+"enter",fe,a,X),pe.target=B,pe.relatedTarget=Et,ee=pe),Et=ee,ae&&fe)t:{for(pe=ae,F=fe,O=0,B=pe;B;B=_o(B))O++;for(B=0,ee=F;ee;ee=_o(ee))B++;for(;0<O-B;)pe=_o(pe),O--;for(;0<B-O;)F=_o(F),B--;for(;O--;){if(pe===F||F!==null&&pe===F.alternate)break t;pe=_o(pe),F=_o(F)}pe=null}else pe=null;ae!==null&&Sm(J,Y,ae,pe,!1),fe!==null&&Et!==null&&Sm(J,Et,fe,pe,!0)}}e:{if(Y=$?Eo($):window,ae=Y.nodeName&&Y.nodeName.toLowerCase(),ae==="select"||ae==="input"&&Y.type==="file")var me=g0;else if(nm(Y))if(im)me=w0;else{me=v0;var ve=y0}else(ae=Y.nodeName)&&ae.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(me=_0);if(me&&(me=me(r,$))){rm(J,me,a,X);break e}ve&&ve(r,Y,$),r==="focusout"&&(ve=Y._wrapperState)&&ve.controlled&&Y.type==="number"&&ht(Y,"number",Y.value)}switch(ve=$?Eo($):window,r){case"focusin":(nm(ve)||ve.contentEditable==="true")&&(yo=ve,ph=$,Pa=null);break;case"focusout":Pa=ph=yo=null;break;case"mousedown":mh=!0;break;case"contextmenu":case"mouseup":case"dragend":mh=!1,dm(J,a,X);break;case"selectionchange":if(S0)break;case"keydown":case"keyup":dm(J,a,X)}var _e;if(ch)e:{switch(r){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else go?em(r,a)&&(Ae="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(Xp&&a.locale!=="ko"&&(go||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&go&&(_e=zl()):(Cn=X,uo="value"in Cn?Cn.value:Cn.textContent,go=!0)),ve=Xl($,Ae),0<ve.length&&(Ae=new v(Ae,r,null,a,X),J.push({event:Ae,listeners:ve}),_e?Ae.data=_e:(_e=tm(a),_e!==null&&(Ae.data=_e)))),(_e=h0?d0(r,a):f0(r,a))&&($=Xl($,"onBeforeInput"),0<$.length&&(X=new v("onBeforeInput","beforeinput",null,a,X),J.push({event:X,listeners:$}),X.data=_e))}Em(J,s)})}function xa(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Xl(r,s){for(var a=s+"Capture",c=[];r!==null;){var d=r,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=hr(r,a),p!=null&&c.unshift(xa(r,p,d)),p=hr(r,s),p!=null&&c.push(xa(r,p,d))),r=r.return}return c}function _o(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Sm(r,s,a,c,d){for(var p=s._reactName,w=[];a!==null&&a!==c;){var k=a,b=k.alternate,$=k.stateNode;if(b!==null&&b===c)break;k.tag===5&&$!==null&&(k=$,d?(b=hr(a,p),b!=null&&w.unshift(xa(a,b,k))):d||(b=hr(a,p),b!=null&&w.push(xa(a,b,k)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var k0=/\r\n?/g,R0=/\u0000|\uFFFD/g;function Im(r){return(typeof r=="string"?r:""+r).replace(k0,`
`).replace(R0,"")}function Jl(r,s,a){if(s=Im(s),Im(r)!==s&&a)throw Error(t(425))}function Zl(){}var Eh=null,Th=null;function Sh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ih=typeof setTimeout=="function"?setTimeout:void 0,P0=typeof clearTimeout=="function"?clearTimeout:void 0,Am=typeof Promise=="function"?Promise:void 0,D0=typeof queueMicrotask=="function"?queueMicrotask:typeof Am<"u"?function(r){return Am.resolve(null).then(r).catch(N0)}:Ih;function N0(r){setTimeout(function(){throw r})}function Ah(r,s){var a=s,c=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){r.removeChild(d),ki(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ki(s)}function Ni(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Cm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var wo=Math.random().toString(36).slice(2),Ar="__reactFiber$"+wo,ba="__reactProps$"+wo,Jr="__reactContainer$"+wo,Ch="__reactEvents$"+wo,x0="__reactListeners$"+wo,b0="__reactHandles$"+wo;function Is(r){var s=r[Ar];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Jr]||a[Ar]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Cm(r);r!==null;){if(a=r[Ar])return a;r=Cm(r)}return s}r=a,a=r.parentNode}return null}function Oa(r){return r=r[Ar]||r[Jr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Eo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function eu(r){return r[ba]||null}var kh=[],To=-1;function xi(r){return{current:r}}function at(r){0>To||(r.current=kh[To],kh[To]=null,To--)}function tt(r,s){To++,kh[To]=r.current,r.current=s}var bi={},Qt=xi(bi),hn=xi(!1),As=bi;function So(r,s){var a=r.type.contextTypes;if(!a)return bi;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=s[p];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=d),d}function dn(r){return r=r.childContextTypes,r!=null}function tu(){at(hn),at(Qt)}function km(r,s,a){if(Qt.current!==bi)throw Error(t(168));tt(Qt,s),tt(hn,a)}function Rm(r,s,a){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Z(r)||"Unknown",d));return te({},a,c)}function nu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||bi,As=Qt.current,tt(Qt,r),tt(hn,hn.current),!0}function Pm(r,s,a){var c=r.stateNode;if(!c)throw Error(t(169));a?(r=Rm(r,s,As),c.__reactInternalMemoizedMergedChildContext=r,at(hn),at(Qt),tt(Qt,r)):at(hn),tt(hn,a)}var Zr=null,ru=!1,Rh=!1;function Dm(r){Zr===null?Zr=[r]:Zr.push(r)}function O0(r){ru=!0,Dm(r)}function Oi(){if(!Rh&&Zr!==null){Rh=!0;var r=0,s=ze;try{var a=Zr;for(ze=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}Zr=null,ru=!1}catch(d){throw Zr!==null&&(Zr=Zr.slice(r+1)),$r(no,Oi),d}finally{ze=s,Rh=!1}}return null}var Io=[],Ao=0,iu=null,su=0,Un=[],Bn=0,Cs=null,ei=1,ti="";function ks(r,s){Io[Ao++]=su,Io[Ao++]=iu,iu=r,su=s}function Nm(r,s,a){Un[Bn++]=ei,Un[Bn++]=ti,Un[Bn++]=Cs,Cs=r;var c=ei;r=ti;var d=32-In(c)-1;c&=~(1<<d),a+=1;var p=32-In(s)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,ei=1<<32-In(s)+d|a<<d|c,ti=p+r}else ei=1<<p|a<<d|c,ti=r}function Ph(r){r.return!==null&&(ks(r,1),Nm(r,1,0))}function Dh(r){for(;r===iu;)iu=Io[--Ao],Io[Ao]=null,su=Io[--Ao],Io[Ao]=null;for(;r===Cs;)Cs=Un[--Bn],Un[Bn]=null,ti=Un[--Bn],Un[Bn]=null,ei=Un[--Bn],Un[Bn]=null}var Pn=null,Dn=null,ut=!1,Zn=null;function xm(r,s){var a=Hn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function bm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Pn=r,Dn=Ni(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Pn=r,Dn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Cs!==null?{id:ei,overflow:ti}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Hn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,Pn=r,Dn=null,!0):!1;default:return!1}}function Nh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function xh(r){if(ut){var s=Dn;if(s){var a=s;if(!bm(r,s)){if(Nh(r))throw Error(t(418));s=Ni(a.nextSibling);var c=Pn;s&&bm(r,s)?xm(c,a):(r.flags=r.flags&-4097|2,ut=!1,Pn=r)}}else{if(Nh(r))throw Error(t(418));r.flags=r.flags&-4097|2,ut=!1,Pn=r}}}function Om(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Pn=r}function ou(r){if(r!==Pn)return!1;if(!ut)return Om(r),ut=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Sh(r.type,r.memoizedProps)),s&&(s=Dn)){if(Nh(r))throw Vm(),Error(t(418));for(;s;)xm(r,s),s=Ni(s.nextSibling)}if(Om(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){Dn=Ni(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}Dn=null}}else Dn=Pn?Ni(r.stateNode.nextSibling):null;return!0}function Vm(){for(var r=Dn;r;)r=Ni(r.nextSibling)}function Co(){Dn=Pn=null,ut=!1}function bh(r){Zn===null?Zn=[r]:Zn.push(r)}var V0=ne.ReactCurrentBatchConfig;function Va(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,r));var d=c,p=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(w){var k=d.refs;w===null?delete k[p]:k[p]=w},s._stringRef=p,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function au(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Mm(r){var s=r._init;return s(r._payload)}function Lm(r){function s(F,O){if(r){var B=F.deletions;B===null?(F.deletions=[O],F.flags|=16):B.push(O)}}function a(F,O){if(!r)return null;for(;O!==null;)s(F,O),O=O.sibling;return null}function c(F,O){for(F=new Map;O!==null;)O.key!==null?F.set(O.key,O):F.set(O.index,O),O=O.sibling;return F}function d(F,O){return F=zi(F,O),F.index=0,F.sibling=null,F}function p(F,O,B){return F.index=B,r?(B=F.alternate,B!==null?(B=B.index,B<O?(F.flags|=2,O):B):(F.flags|=2,O)):(F.flags|=1048576,O)}function w(F){return r&&F.alternate===null&&(F.flags|=2),F}function k(F,O,B,ee){return O===null||O.tag!==6?(O=Id(B,F.mode,ee),O.return=F,O):(O=d(O,B),O.return=F,O)}function b(F,O,B,ee){var me=B.type;return me===D?X(F,O,B.props.children,ee,B.key):O!==null&&(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ge&&Mm(me)===O.type)?(ee=d(O,B.props),ee.ref=Va(F,O,B),ee.return=F,ee):(ee=Nu(B.type,B.key,B.props,null,F.mode,ee),ee.ref=Va(F,O,B),ee.return=F,ee)}function $(F,O,B,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=Ad(B,F.mode,ee),O.return=F,O):(O=d(O,B.children||[]),O.return=F,O)}function X(F,O,B,ee,me){return O===null||O.tag!==7?(O=Vs(B,F.mode,ee,me),O.return=F,O):(O=d(O,B),O.return=F,O)}function J(F,O,B){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Id(""+O,F.mode,B),O.return=F,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case be:return B=Nu(O.type,O.key,O.props,null,F.mode,B),B.ref=Va(F,null,O),B.return=F,B;case ye:return O=Ad(O,F.mode,B),O.return=F,O;case Ge:var ee=O._init;return J(F,ee(O._payload),B)}if(dt(O)||ue(O))return O=Vs(O,F.mode,B,null),O.return=F,O;au(F,O)}return null}function Y(F,O,B,ee){var me=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return me!==null?null:k(F,O,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case be:return B.key===me?b(F,O,B,ee):null;case ye:return B.key===me?$(F,O,B,ee):null;case Ge:return me=B._init,Y(F,O,me(B._payload),ee)}if(dt(B)||ue(B))return me!==null?null:X(F,O,B,ee,null);au(F,B)}return null}function ae(F,O,B,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return F=F.get(B)||null,k(O,F,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case be:return F=F.get(ee.key===null?B:ee.key)||null,b(O,F,ee,me);case ye:return F=F.get(ee.key===null?B:ee.key)||null,$(O,F,ee,me);case Ge:var ve=ee._init;return ae(F,O,B,ve(ee._payload),me)}if(dt(ee)||ue(ee))return F=F.get(B)||null,X(O,F,ee,me,null);au(O,ee)}return null}function fe(F,O,B,ee){for(var me=null,ve=null,_e=O,Ae=O=0,jt=null;_e!==null&&Ae<B.length;Ae++){_e.index>Ae?(jt=_e,_e=null):jt=_e.sibling;var Ke=Y(F,_e,B[Ae],ee);if(Ke===null){_e===null&&(_e=jt);break}r&&_e&&Ke.alternate===null&&s(F,_e),O=p(Ke,O,Ae),ve===null?me=Ke:ve.sibling=Ke,ve=Ke,_e=jt}if(Ae===B.length)return a(F,_e),ut&&ks(F,Ae),me;if(_e===null){for(;Ae<B.length;Ae++)_e=J(F,B[Ae],ee),_e!==null&&(O=p(_e,O,Ae),ve===null?me=_e:ve.sibling=_e,ve=_e);return ut&&ks(F,Ae),me}for(_e=c(F,_e);Ae<B.length;Ae++)jt=ae(_e,F,Ae,B[Ae],ee),jt!==null&&(r&&jt.alternate!==null&&_e.delete(jt.key===null?Ae:jt.key),O=p(jt,O,Ae),ve===null?me=jt:ve.sibling=jt,ve=jt);return r&&_e.forEach(function($i){return s(F,$i)}),ut&&ks(F,Ae),me}function pe(F,O,B,ee){var me=ue(B);if(typeof me!="function")throw Error(t(150));if(B=me.call(B),B==null)throw Error(t(151));for(var ve=me=null,_e=O,Ae=O=0,jt=null,Ke=B.next();_e!==null&&!Ke.done;Ae++,Ke=B.next()){_e.index>Ae?(jt=_e,_e=null):jt=_e.sibling;var $i=Y(F,_e,Ke.value,ee);if($i===null){_e===null&&(_e=jt);break}r&&_e&&$i.alternate===null&&s(F,_e),O=p($i,O,Ae),ve===null?me=$i:ve.sibling=$i,ve=$i,_e=jt}if(Ke.done)return a(F,_e),ut&&ks(F,Ae),me;if(_e===null){for(;!Ke.done;Ae++,Ke=B.next())Ke=J(F,Ke.value,ee),Ke!==null&&(O=p(Ke,O,Ae),ve===null?me=Ke:ve.sibling=Ke,ve=Ke);return ut&&ks(F,Ae),me}for(_e=c(F,_e);!Ke.done;Ae++,Ke=B.next())Ke=ae(_e,F,Ae,Ke.value,ee),Ke!==null&&(r&&Ke.alternate!==null&&_e.delete(Ke.key===null?Ae:Ke.key),O=p(Ke,O,Ae),ve===null?me=Ke:ve.sibling=Ke,ve=Ke);return r&&_e.forEach(function(pT){return s(F,pT)}),ut&&ks(F,Ae),me}function Et(F,O,B,ee){if(typeof B=="object"&&B!==null&&B.type===D&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case be:e:{for(var me=B.key,ve=O;ve!==null;){if(ve.key===me){if(me=B.type,me===D){if(ve.tag===7){a(F,ve.sibling),O=d(ve,B.props.children),O.return=F,F=O;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ge&&Mm(me)===ve.type){a(F,ve.sibling),O=d(ve,B.props),O.ref=Va(F,ve,B),O.return=F,F=O;break e}a(F,ve);break}else s(F,ve);ve=ve.sibling}B.type===D?(O=Vs(B.props.children,F.mode,ee,B.key),O.return=F,F=O):(ee=Nu(B.type,B.key,B.props,null,F.mode,ee),ee.ref=Va(F,O,B),ee.return=F,F=ee)}return w(F);case ye:e:{for(ve=B.key;O!==null;){if(O.key===ve)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){a(F,O.sibling),O=d(O,B.children||[]),O.return=F,F=O;break e}else{a(F,O);break}else s(F,O);O=O.sibling}O=Ad(B,F.mode,ee),O.return=F,F=O}return w(F);case Ge:return ve=B._init,Et(F,O,ve(B._payload),ee)}if(dt(B))return fe(F,O,B,ee);if(ue(B))return pe(F,O,B,ee);au(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,O!==null&&O.tag===6?(a(F,O.sibling),O=d(O,B),O.return=F,F=O):(a(F,O),O=Id(B,F.mode,ee),O.return=F,F=O),w(F)):a(F,O)}return Et}var ko=Lm(!0),jm=Lm(!1),lu=xi(null),uu=null,Ro=null,Oh=null;function Vh(){Oh=Ro=uu=null}function Mh(r){var s=lu.current;at(lu),r._currentValue=s}function Lh(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function Po(r,s){uu=r,Oh=Ro=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(fn=!0),r.firstContext=null)}function zn(r){var s=r._currentValue;if(Oh!==r)if(r={context:r,memoizedValue:s,next:null},Ro===null){if(uu===null)throw Error(t(308));Ro=r,uu.dependencies={lanes:0,firstContext:r}}else Ro=Ro.next=r;return s}var Rs=null;function jh(r){Rs===null?Rs=[r]:Rs.push(r)}function Fm(r,s,a,c){var d=s.interleaved;return d===null?(a.next=a,jh(s)):(a.next=d.next,d.next=a),s.interleaved=a,ni(r,c)}function ni(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Vi=!1;function Fh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Um(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ri(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Mi(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(qe&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,ni(r,a)}return d=c.interleaved,d===null?(s.next=s,jh(c)):(s.next=d.next,d.next=s),c.interleaved=s,ni(r,a)}function cu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ga(r,a)}}function Bm(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=s:p=p.next=s}else d=p=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function hu(r,s,a,c){var d=r.updateQueue;Vi=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var b=k,$=b.next;b.next=null,w===null?p=$:w.next=$,w=b;var X=r.alternate;X!==null&&(X=X.updateQueue,k=X.lastBaseUpdate,k!==w&&(k===null?X.firstBaseUpdate=$:k.next=$,X.lastBaseUpdate=b))}if(p!==null){var J=d.baseState;w=0,X=$=b=null,k=p;do{var Y=k.lane,ae=k.eventTime;if((c&Y)===Y){X!==null&&(X=X.next={eventTime:ae,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var fe=r,pe=k;switch(Y=s,ae=a,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){J=fe.call(ae,J,Y);break e}J=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,Y=typeof fe=="function"?fe.call(ae,J,Y):fe,Y==null)break e;J=te({},J,Y);break e;case 2:Vi=!0}}k.callback!==null&&k.lane!==0&&(r.flags|=64,Y=d.effects,Y===null?d.effects=[k]:Y.push(k))}else ae={eventTime:ae,lane:Y,tag:k.tag,payload:k.payload,callback:k.callback,next:null},X===null?($=X=ae,b=J):X=X.next=ae,w|=Y;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;Y=k,k=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(X===null&&(b=J),d.baseState=b,d.firstBaseUpdate=$,d.lastBaseUpdate=X,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else p===null&&(d.shared.lanes=0);Ns|=w,r.lanes=w,r.memoizedState=J}}function zm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Ma={},Cr=xi(Ma),La=xi(Ma),ja=xi(Ma);function Ps(r){if(r===Ma)throw Error(t(174));return r}function Uh(r,s){switch(tt(ja,s),tt(La,r),tt(Cr,Ma),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vi(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=vi(s,r)}at(Cr),tt(Cr,s)}function Do(){at(Cr),at(La),at(ja)}function $m(r){Ps(ja.current);var s=Ps(Cr.current),a=vi(s,r.type);s!==a&&(tt(La,r),tt(Cr,a))}function Bh(r){La.current===r&&(at(Cr),at(La))}var pt=xi(0);function du(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var zh=[];function $h(){for(var r=0;r<zh.length;r++)zh[r]._workInProgressVersionPrimary=null;zh.length=0}var fu=ne.ReactCurrentDispatcher,Wh=ne.ReactCurrentBatchConfig,Ds=0,mt=null,Nt=null,Mt=null,pu=!1,Fa=!1,Ua=0,M0=0;function Xt(){throw Error(t(321))}function Hh(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Jn(r[a],s[a]))return!1;return!0}function qh(r,s,a,c,d,p){if(Ds=p,mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,fu.current=r===null||r.memoizedState===null?U0:B0,r=a(c,d),Fa){p=0;do{if(Fa=!1,Ua=0,25<=p)throw Error(t(301));p+=1,Mt=Nt=null,s.updateQueue=null,fu.current=z0,r=a(c,d)}while(Fa)}if(fu.current=yu,s=Nt!==null&&Nt.next!==null,Ds=0,Mt=Nt=mt=null,pu=!1,s)throw Error(t(300));return r}function Gh(){var r=Ua!==0;return Ua=0,r}function kr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?mt.memoizedState=Mt=r:Mt=Mt.next=r,Mt}function $n(){if(Nt===null){var r=mt.alternate;r=r!==null?r.memoizedState:null}else r=Nt.next;var s=Mt===null?mt.memoizedState:Mt.next;if(s!==null)Mt=s,Nt=r;else{if(r===null)throw Error(t(310));Nt=r,r={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Mt===null?mt.memoizedState=Mt=r:Mt=Mt.next=r}return Mt}function Ba(r,s){return typeof s=="function"?s(r):s}function Kh(r){var s=$n(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=Nt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var k=w=null,b=null,$=p;do{var X=$.lane;if((Ds&X)===X)b!==null&&(b=b.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:r(c,$.action);else{var J={lane:X,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};b===null?(k=b=J,w=c):b=b.next=J,mt.lanes|=X,Ns|=X}$=$.next}while($!==null&&$!==p);b===null?w=c:b.next=k,Jn(c,s.memoizedState)||(fn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=b,a.lastRenderedState=c}if(r=a.interleaved,r!==null){d=r;do p=d.lane,mt.lanes|=p,Ns|=p,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Yh(r){var s=$n(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=a.dispatch,d=a.pending,p=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=r(p,w.action),w=w.next;while(w!==d);Jn(p,s.memoizedState)||(fn=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,c]}function Wm(){}function Hm(r,s){var a=mt,c=$n(),d=s(),p=!Jn(c.memoizedState,d);if(p&&(c.memoizedState=d,fn=!0),c=c.queue,Qh(Km.bind(null,a,c,r),[r]),c.getSnapshot!==s||p||Mt!==null&&Mt.memoizedState.tag&1){if(a.flags|=2048,za(9,Gm.bind(null,a,c,d,s),void 0,null),Lt===null)throw Error(t(349));(Ds&30)!==0||qm(a,s,d)}return d}function qm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=mt.updateQueue,s===null?(s={lastEffect:null,stores:null},mt.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Gm(r,s,a,c){s.value=a,s.getSnapshot=c,Ym(s)&&Qm(r)}function Km(r,s,a){return a(function(){Ym(s)&&Qm(r)})}function Ym(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Jn(r,a)}catch{return!0}}function Qm(r){var s=ni(r,1);s!==null&&rr(s,r,1,-1)}function Xm(r){var s=kr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:r},s.queue=r,r=r.dispatch=F0.bind(null,mt,r),[s.memoizedState,r]}function za(r,s,a,c){return r={tag:r,create:s,destroy:a,deps:c,next:null},s=mt.updateQueue,s===null?(s={lastEffect:null,stores:null},mt.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r)),r}function Jm(){return $n().memoizedState}function mu(r,s,a,c){var d=kr();mt.flags|=r,d.memoizedState=za(1|s,a,void 0,c===void 0?null:c)}function gu(r,s,a,c){var d=$n();c=c===void 0?null:c;var p=void 0;if(Nt!==null){var w=Nt.memoizedState;if(p=w.destroy,c!==null&&Hh(c,w.deps)){d.memoizedState=za(s,a,p,c);return}}mt.flags|=r,d.memoizedState=za(1|s,a,p,c)}function Zm(r,s){return mu(8390656,8,r,s)}function Qh(r,s){return gu(2048,8,r,s)}function eg(r,s){return gu(4,2,r,s)}function tg(r,s){return gu(4,4,r,s)}function ng(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function rg(r,s,a){return a=a!=null?a.concat([r]):null,gu(4,4,ng.bind(null,s,r),a)}function Xh(){}function ig(r,s){var a=$n();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Hh(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function sg(r,s){var a=$n();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Hh(s,c[1])?c[0]:(r=r(),a.memoizedState=[r,s],r)}function og(r,s,a){return(Ds&21)===0?(r.baseState&&(r.baseState=!1,fn=!0),r.memoizedState=a):(Jn(a,s)||(a=pa(),mt.lanes|=a,Ns|=a,r.baseState=!0),s)}function L0(r,s){var a=ze;ze=a!==0&&4>a?a:4,r(!0);var c=Wh.transition;Wh.transition={};try{r(!1),s()}finally{ze=a,Wh.transition=c}}function ag(){return $n().memoizedState}function j0(r,s,a){var c=Ui(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},lg(r))ug(s,a);else if(a=Fm(r,s,a,c),a!==null){var d=an();rr(a,r,c,d),cg(a,s,c)}}function F0(r,s,a){var c=Ui(r),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(lg(r))ug(s,d);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var w=s.lastRenderedState,k=p(w,a);if(d.hasEagerState=!0,d.eagerState=k,Jn(k,w)){var b=s.interleaved;b===null?(d.next=d,jh(s)):(d.next=b.next,b.next=d),s.interleaved=d;return}}catch{}finally{}a=Fm(r,s,d,c),a!==null&&(d=an(),rr(a,r,c,d),cg(a,s,c))}}function lg(r){var s=r.alternate;return r===mt||s!==null&&s===mt}function ug(r,s){Fa=pu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function cg(r,s,a){if((a&4194240)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ga(r,a)}}var yu={readContext:zn,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},U0={readContext:zn,useCallback:function(r,s){return kr().memoizedState=[r,s===void 0?null:s],r},useContext:zn,useEffect:Zm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,mu(4194308,4,ng.bind(null,s,r),a)},useLayoutEffect:function(r,s){return mu(4194308,4,r,s)},useInsertionEffect:function(r,s){return mu(4,2,r,s)},useMemo:function(r,s){var a=kr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var c=kr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=j0.bind(null,mt,r),[c.memoizedState,r]},useRef:function(r){var s=kr();return r={current:r},s.memoizedState=r},useState:Xm,useDebugValue:Xh,useDeferredValue:function(r){return kr().memoizedState=r},useTransition:function(){var r=Xm(!1),s=r[0];return r=L0.bind(null,r[1]),kr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var c=mt,d=kr();if(ut){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Lt===null)throw Error(t(349));(Ds&30)!==0||qm(c,s,a)}d.memoizedState=a;var p={value:a,getSnapshot:s};return d.queue=p,Zm(Km.bind(null,c,p,r),[r]),c.flags|=2048,za(9,Gm.bind(null,c,p,a,s),void 0,null),a},useId:function(){var r=kr(),s=Lt.identifierPrefix;if(ut){var a=ti,c=ei;a=(c&~(1<<32-In(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ua++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=M0++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},B0={readContext:zn,useCallback:ig,useContext:zn,useEffect:Qh,useImperativeHandle:rg,useInsertionEffect:eg,useLayoutEffect:tg,useMemo:sg,useReducer:Kh,useRef:Jm,useState:function(){return Kh(Ba)},useDebugValue:Xh,useDeferredValue:function(r){var s=$n();return og(s,Nt.memoizedState,r)},useTransition:function(){var r=Kh(Ba)[0],s=$n().memoizedState;return[r,s]},useMutableSource:Wm,useSyncExternalStore:Hm,useId:ag,unstable_isNewReconciler:!1},z0={readContext:zn,useCallback:ig,useContext:zn,useEffect:Qh,useImperativeHandle:rg,useInsertionEffect:eg,useLayoutEffect:tg,useMemo:sg,useReducer:Yh,useRef:Jm,useState:function(){return Yh(Ba)},useDebugValue:Xh,useDeferredValue:function(r){var s=$n();return Nt===null?s.memoizedState=r:og(s,Nt.memoizedState,r)},useTransition:function(){var r=Yh(Ba)[0],s=$n().memoizedState;return[r,s]},useMutableSource:Wm,useSyncExternalStore:Hm,useId:ag,unstable_isNewReconciler:!1};function er(r,s){if(r&&r.defaultProps){s=te({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Jh(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:te({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var vu={isMounted:function(r){return(r=r._reactInternals)?Tn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var c=an(),d=Ui(r),p=ri(c,d);p.payload=s,a!=null&&(p.callback=a),s=Mi(r,p,d),s!==null&&(rr(s,r,d,c),cu(s,r,d))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=an(),d=Ui(r),p=ri(c,d);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=Mi(r,p,d),s!==null&&(rr(s,r,d,c),cu(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=an(),c=Ui(r),d=ri(a,c);d.tag=2,s!=null&&(d.callback=s),s=Mi(r,d,c),s!==null&&(rr(s,r,c,a),cu(s,r,c))}};function hg(r,s,a,c,d,p,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,p,w):s.prototype&&s.prototype.isPureReactComponent?!Ra(a,c)||!Ra(d,p):!0}function dg(r,s,a){var c=!1,d=bi,p=s.contextType;return typeof p=="object"&&p!==null?p=zn(p):(d=dn(s)?As:Qt.current,c=s.contextTypes,p=(c=c!=null)?So(r,d):bi),s=new s(a,p),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=vu,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=p),s}function fg(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&vu.enqueueReplaceState(s,s.state,null)}function Zh(r,s,a,c){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Fh(r);var p=s.contextType;typeof p=="object"&&p!==null?d.context=zn(p):(p=dn(s)?As:Qt.current,d.context=So(r,p)),d.state=r.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Jh(r,s,p,a),d.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&vu.enqueueReplaceState(d,d.state,null),hu(r,a,d,c),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function No(r,s){try{var a="",c=s;do a+=Ne(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:r,source:s,stack:d,digest:null}}function ed(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function td(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var $0=typeof WeakMap=="function"?WeakMap:Map;function pg(r,s,a){a=ri(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Au||(Au=!0,gd=c),td(r,s)},a}function mg(r,s,a){a=ri(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){td(r,s)}}var p=r.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){td(r,s),typeof c!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function gg(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new $0;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),r=rT.bind(null,r,s,a),s.then(r,r))}function yg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function vg(r,s,a,c,d){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=ri(-1,1),s.tag=2,Mi(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var W0=ne.ReactCurrentOwner,fn=!1;function on(r,s,a,c){s.child=r===null?jm(s,null,a,c):ko(s,r.child,a,c)}function _g(r,s,a,c,d){a=a.render;var p=s.ref;return Po(s,d),c=qh(r,s,a,c,p,d),a=Gh(),r!==null&&!fn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,ii(r,s,d)):(ut&&a&&Ph(s),s.flags|=1,on(r,s,c,d),s.child)}function wg(r,s,a,c,d){if(r===null){var p=a.type;return typeof p=="function"&&!Sd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,Eg(r,s,p,c,d)):(r=Nu(a.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,(r.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ra,a(w,c)&&r.ref===s.ref)return ii(r,s,d)}return s.flags|=1,r=zi(p,c),r.ref=s.ref,r.return=s,s.child=r}function Eg(r,s,a,c,d){if(r!==null){var p=r.memoizedProps;if(Ra(p,c)&&r.ref===s.ref)if(fn=!1,s.pendingProps=c=p,(r.lanes&d)!==0)(r.flags&131072)!==0&&(fn=!0);else return s.lanes=r.lanes,ii(r,s,d)}return nd(r,s,a,c,d)}function Tg(r,s,a){var c=s.pendingProps,d=c.children,p=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(bo,Nn),Nn|=a;else{if((a&1073741824)===0)return r=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,tt(bo,Nn),Nn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,tt(bo,Nn),Nn|=c}else p!==null?(c=p.baseLanes|a,s.memoizedState=null):c=a,tt(bo,Nn),Nn|=c;return on(r,s,d,a),s.child}function Sg(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function nd(r,s,a,c,d){var p=dn(a)?As:Qt.current;return p=So(s,p),Po(s,d),a=qh(r,s,a,c,p,d),c=Gh(),r!==null&&!fn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,ii(r,s,d)):(ut&&c&&Ph(s),s.flags|=1,on(r,s,a,d),s.child)}function Ig(r,s,a,c,d){if(dn(a)){var p=!0;nu(s)}else p=!1;if(Po(s,d),s.stateNode===null)wu(r,s),dg(s,a,c),Zh(s,a,c,d),c=!0;else if(r===null){var w=s.stateNode,k=s.memoizedProps;w.props=k;var b=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=zn($):($=dn(a)?As:Qt.current,$=So(s,$));var X=a.getDerivedStateFromProps,J=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function";J||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==c||b!==$)&&fg(s,w,c,$),Vi=!1;var Y=s.memoizedState;w.state=Y,hu(s,c,w,d),b=s.memoizedState,k!==c||Y!==b||hn.current||Vi?(typeof X=="function"&&(Jh(s,a,X,c),b=s.memoizedState),(k=Vi||hg(s,a,k,c,Y,b,$))?(J||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=b),w.props=c,w.state=b,w.context=$,c=k):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Um(r,s),k=s.memoizedProps,$=s.type===s.elementType?k:er(s.type,k),w.props=$,J=s.pendingProps,Y=w.context,b=a.contextType,typeof b=="object"&&b!==null?b=zn(b):(b=dn(a)?As:Qt.current,b=So(s,b));var ae=a.getDerivedStateFromProps;(X=typeof ae=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==J||Y!==b)&&fg(s,w,c,b),Vi=!1,Y=s.memoizedState,w.state=Y,hu(s,c,w,d);var fe=s.memoizedState;k!==J||Y!==fe||hn.current||Vi?(typeof ae=="function"&&(Jh(s,a,ae,c),fe=s.memoizedState),($=Vi||hg(s,a,$,c,Y,fe,b)||!1)?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,fe,b),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,fe,b)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=fe),w.props=c,w.state=fe,w.context=b,c=$):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),c=!1)}return rd(r,s,a,c,p,d)}function rd(r,s,a,c,d,p){Sg(r,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&Pm(s,a,!1),ii(r,s,p);c=s.stateNode,W0.current=s;var k=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&w?(s.child=ko(s,r.child,null,p),s.child=ko(s,null,k,p)):on(r,s,k,p),s.memoizedState=c.state,d&&Pm(s,a,!0),s.child}function Ag(r){var s=r.stateNode;s.pendingContext?km(r,s.pendingContext,s.pendingContext!==s.context):s.context&&km(r,s.context,!1),Uh(r,s.containerInfo)}function Cg(r,s,a,c,d){return Co(),bh(d),s.flags|=256,on(r,s,a,c),s.child}var id={dehydrated:null,treeContext:null,retryLane:0};function sd(r){return{baseLanes:r,cachePool:null,transitions:null}}function kg(r,s,a){var c=s.pendingProps,d=pt.current,p=!1,w=(s.flags&128)!==0,k;if((k=w)||(k=r!==null&&r.memoizedState===null?!1:(d&2)!==0),k?(p=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),tt(pt,d&1),r===null)return xh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,r=c.fallback,p?(c=s.mode,p=s.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=xu(w,c,0,null),r=Vs(r,c,a,null),p.return=s,r.return=s,p.sibling=r,s.child=p,s.child.memoizedState=sd(a),s.memoizedState=id,r):od(s,w));if(d=r.memoizedState,d!==null&&(k=d.dehydrated,k!==null))return H0(r,s,w,c,k,d,a);if(p){p=c.fallback,w=s.mode,d=r.child,k=d.sibling;var b={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=b,s.deletions=null):(c=zi(d,b),c.subtreeFlags=d.subtreeFlags&14680064),k!==null?p=zi(k,p):(p=Vs(p,w,a,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,w=r.child.memoizedState,w=w===null?sd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=r.childLanes&~a,s.memoizedState=id,c}return p=r.child,r=p.sibling,c=zi(p,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=c,s.memoizedState=null,c}function od(r,s){return s=xu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function _u(r,s,a,c){return c!==null&&bh(c),ko(s,r.child,null,a),r=od(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function H0(r,s,a,c,d,p,w){if(a)return s.flags&256?(s.flags&=-257,c=ed(Error(t(422))),_u(r,s,w,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(p=c.fallback,d=s.mode,c=xu({mode:"visible",children:c.children},d,0,null),p=Vs(p,d,w,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,(s.mode&1)!==0&&ko(s,r.child,null,w),s.child.memoizedState=sd(w),s.memoizedState=id,p);if((s.mode&1)===0)return _u(r,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var k=c.dgst;return c=k,p=Error(t(419)),c=ed(p,c,void 0),_u(r,s,w,c)}if(k=(w&r.childLanes)!==0,fn||k){if(c=Lt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,ni(r,d),rr(c,r,d,-1))}return Td(),c=ed(Error(t(421))),_u(r,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=r.child,s=iT.bind(null,r),d._reactRetry=s,null):(r=p.treeContext,Dn=Ni(d.nextSibling),Pn=s,ut=!0,Zn=null,r!==null&&(Un[Bn++]=ei,Un[Bn++]=ti,Un[Bn++]=Cs,ei=r.id,ti=r.overflow,Cs=s),s=od(s,c.children),s.flags|=4096,s)}function Rg(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Lh(r.return,s,a)}function ad(r,s,a,c,d){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Pg(r,s,a){var c=s.pendingProps,d=c.revealOrder,p=c.tail;if(on(r,s,c.children,a),c=pt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Rg(r,a,s);else if(r.tag===19)Rg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(tt(pt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)r=a.alternate,r!==null&&du(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),ad(s,!1,d,a,p);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&du(r)===null){s.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}ad(s,!0,a,null,p);break;case"together":ad(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function wu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function ii(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),Ns|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=zi(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=zi(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function q0(r,s,a){switch(s.tag){case 3:Ag(s),Co();break;case 5:$m(s);break;case 1:dn(s.type)&&nu(s);break;case 4:Uh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;tt(lu,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(tt(pt,pt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?kg(r,s,a):(tt(pt,pt.current&1),r=ii(r,s,a),r!==null?r.sibling:null);tt(pt,pt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(r.flags&128)!==0){if(c)return Pg(r,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),tt(pt,pt.current),c)break;return null;case 22:case 23:return s.lanes=0,Tg(r,s,a)}return ii(r,s,a)}var Dg,ld,Ng,xg;Dg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ld=function(){},Ng=function(r,s,a,c){var d=r.memoizedProps;if(d!==c){r=s.stateNode,Ps(Cr.current);var p=null;switch(a){case"input":d=He(r,d),c=He(r,c),p=[];break;case"select":d=te({},d,{value:void 0}),c=te({},c,{value:void 0}),p=[];break;case"textarea":d=us(r,d),c=us(r,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=Zl)}ln(a,c);var w;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var k=d[$];for(w in k)k.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?p||(p=[]):(p=p||[]).push($,null));for($ in c){var b=c[$];if(k=d!=null?d[$]:void 0,c.hasOwnProperty($)&&b!==k&&(b!=null||k!=null))if($==="style")if(k){for(w in k)!k.hasOwnProperty(w)||b&&b.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in b)b.hasOwnProperty(w)&&k[w]!==b[w]&&(a||(a={}),a[w]=b[w])}else a||(p||(p=[]),p.push($,a)),a=b;else $==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,k=k?k.__html:void 0,b!=null&&k!==b&&(p=p||[]).push($,b)):$==="children"?typeof b!="string"&&typeof b!="number"||(p=p||[]).push($,""+b):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(b!=null&&$==="onScroll"&&ot("scroll",r),p||k===b||(p=[])):(p=p||[]).push($,b))}a&&(p=p||[]).push("style",a);var $=p;(s.updateQueue=$)&&(s.flags|=4)}},xg=function(r,s,a,c){a!==c&&(s.flags|=4)};function $a(r,s){if(!ut)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Jt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function G0(r,s,a){var c=s.pendingProps;switch(Dh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(s),null;case 1:return dn(s.type)&&tu(),Jt(s),null;case 3:return c=s.stateNode,Do(),at(hn),at(Qt),$h(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(ou(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Zn!==null&&(_d(Zn),Zn=null))),ld(r,s),Jt(s),null;case 5:Bh(s);var d=Ps(ja.current);if(a=s.type,r!==null&&s.stateNode!=null)Ng(r,s,a,c,d),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Jt(s),null}if(r=Ps(Cr.current),ou(s)){c=s.stateNode,a=s.type;var p=s.memoizedProps;switch(c[Ar]=s,c[ba]=p,r=(s.mode&1)!==0,a){case"dialog":ot("cancel",c),ot("close",c);break;case"iframe":case"object":case"embed":ot("load",c);break;case"video":case"audio":for(d=0;d<Da.length;d++)ot(Da[d],c);break;case"source":ot("error",c);break;case"img":case"image":case"link":ot("error",c),ot("load",c);break;case"details":ot("toggle",c);break;case"input":bn(c,p),ot("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},ot("invalid",c);break;case"textarea":yi(c,p),ot("invalid",c)}ln(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var k=p[w];w==="children"?typeof k=="string"?c.textContent!==k&&(p.suppressHydrationWarning!==!0&&Jl(c.textContent,k,r),d=["children",k]):typeof k=="number"&&c.textContent!==""+k&&(p.suppressHydrationWarning!==!0&&Jl(c.textContent,k,r),d=["children",""+k]):o.hasOwnProperty(w)&&k!=null&&w==="onScroll"&&ot("scroll",c)}switch(a){case"input":Me(c),gi(c,p,!0);break;case"textarea":Me(c),lr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=Zl)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=cs(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=w.createElement(a,{is:c.is}):(r=w.createElement(a),a==="select"&&(w=r,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):r=w.createElementNS(r,a),r[Ar]=s,r[ba]=c,Dg(r,s,!1,!1),s.stateNode=r;e:{switch(w=Br(a,c),a){case"dialog":ot("cancel",r),ot("close",r),d=c;break;case"iframe":case"object":case"embed":ot("load",r),d=c;break;case"video":case"audio":for(d=0;d<Da.length;d++)ot(Da[d],r);d=c;break;case"source":ot("error",r),d=c;break;case"img":case"image":case"link":ot("error",r),ot("load",r),d=c;break;case"details":ot("toggle",r),d=c;break;case"input":bn(r,c),d=He(r,c),ot("invalid",r);break;case"option":d=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},d=te({},c,{value:void 0}),ot("invalid",r);break;case"textarea":yi(r,c),d=us(r,c),ot("invalid",r);break;default:d=c}ln(a,d),k=d;for(p in k)if(k.hasOwnProperty(p)){var b=k[p];p==="style"?Ur(r,b):p==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&_i(r,b)):p==="children"?typeof b=="string"?(a!=="textarea"||b!=="")&&cr(r,b):typeof b=="number"&&cr(r,""+b):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?b!=null&&p==="onScroll"&&ot("scroll",r):b!=null&&oe(r,p,b,w))}switch(a){case"input":Me(r),gi(r,c,!1);break;case"textarea":Me(r),lr(r);break;case"option":c.value!=null&&r.setAttribute("value",""+he(c.value));break;case"select":r.multiple=!!c.multiple,p=c.value,p!=null?vn(r,!!c.multiple,p,!1):c.defaultValue!=null&&vn(r,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=Zl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Jt(s),null;case 6:if(r&&s.stateNode!=null)xg(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Ps(ja.current),Ps(Cr.current),ou(s)){if(c=s.stateNode,a=s.memoizedProps,c[Ar]=s,(p=c.nodeValue!==a)&&(r=Pn,r!==null))switch(r.tag){case 3:Jl(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Jl(c.nodeValue,a,(r.mode&1)!==0)}p&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Ar]=s,s.stateNode=c}return Jt(s),null;case 13:if(at(pt),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ut&&Dn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Vm(),Co(),s.flags|=98560,p=!1;else if(p=ou(s),c!==null&&c.dehydrated!==null){if(r===null){if(!p)throw Error(t(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[Ar]=s}else Co(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Jt(s),p=!1}else Zn!==null&&(_d(Zn),Zn=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(pt.current&1)!==0?xt===0&&(xt=3):Td())),s.updateQueue!==null&&(s.flags|=4),Jt(s),null);case 4:return Do(),ld(r,s),r===null&&Na(s.stateNode.containerInfo),Jt(s),null;case 10:return Mh(s.type._context),Jt(s),null;case 17:return dn(s.type)&&tu(),Jt(s),null;case 19:if(at(pt),p=s.memoizedState,p===null)return Jt(s),null;if(c=(s.flags&128)!==0,w=p.rendering,w===null)if(c)$a(p,!1);else{if(xt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=du(r),w!==null){for(s.flags|=128,$a(p,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)p=a,r=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=r,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,r=w.dependencies,p.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return tt(pt,pt.current&1|2),s.child}r=r.sibling}p.tail!==null&&st()>Oo&&(s.flags|=128,c=!0,$a(p,!1),s.lanes=4194304)}else{if(!c)if(r=du(w),r!==null){if(s.flags|=128,c=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),$a(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!ut)return Jt(s),null}else 2*st()-p.renderingStartTime>Oo&&a!==1073741824&&(s.flags|=128,c=!0,$a(p,!1),s.lanes=4194304);p.isBackwards?(w.sibling=s.child,s.child=w):(a=p.last,a!==null?a.sibling=w:s.child=w,p.last=w)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=st(),s.sibling=null,a=pt.current,tt(pt,c?a&1|2:a&1),s):(Jt(s),null);case 22:case 23:return Ed(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Nn&1073741824)!==0&&(Jt(s),s.subtreeFlags&6&&(s.flags|=8192)):Jt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function K0(r,s){switch(Dh(s),s.tag){case 1:return dn(s.type)&&tu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Do(),at(hn),at(Qt),$h(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(at(pt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Co()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return at(pt),null;case 4:return Do(),null;case 10:return Mh(s.type._context),null;case 22:case 23:return Ed(),null;case 24:return null;default:return null}}var Eu=!1,Zt=!1,Y0=typeof WeakSet=="function"?WeakSet:Set,ce=null;function xo(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){_t(r,s,c)}else a.current=null}function ud(r,s,a){try{a()}catch(c){_t(r,s,c)}}var bg=!1;function Q0(r,s){if(Eh=Yr,r=hm(),fh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,k=-1,b=-1,$=0,X=0,J=r,Y=null;t:for(;;){for(var ae;J!==a||d!==0&&J.nodeType!==3||(k=w+d),J!==p||c!==0&&J.nodeType!==3||(b=w+c),J.nodeType===3&&(w+=J.nodeValue.length),(ae=J.firstChild)!==null;)Y=J,J=ae;for(;;){if(J===r)break t;if(Y===a&&++$===d&&(k=w),Y===p&&++X===c&&(b=w),(ae=J.nextSibling)!==null)break;J=Y,Y=J.parentNode}J=ae}a=k===-1||b===-1?null:{start:k,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Th={focusedElem:r,selectionRange:a},Yr=!1,ce=s;ce!==null;)if(s=ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ce=r;else for(;ce!==null;){s=ce;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,Et=fe.memoizedState,F=s.stateNode,O=F.getSnapshotBeforeUpdate(s.elementType===s.type?pe:er(s.type,pe),Et);F.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){_t(s,s.return,ee)}if(r=s.sibling,r!==null){r.return=s.return,ce=r;break}ce=s.return}return fe=bg,bg=!1,fe}function Wa(r,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&r)===r){var p=d.destroy;d.destroy=void 0,p!==void 0&&ud(s,a,p)}d=d.next}while(d!==c)}}function Tu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function cd(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Og(r){var s=r.alternate;s!==null&&(r.alternate=null,Og(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Ar],delete s[ba],delete s[Ch],delete s[x0],delete s[b0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Vg(r){return r.tag===5||r.tag===3||r.tag===4}function Mg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Vg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function hd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Zl));else if(c!==4&&(r=r.child,r!==null))for(hd(r,s,a),r=r.sibling;r!==null;)hd(r,s,a),r=r.sibling}function dd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(dd(r,s,a),r=r.sibling;r!==null;)dd(r,s,a),r=r.sibling}var zt=null,tr=!1;function Li(r,s,a){for(a=a.child;a!==null;)Lg(r,s,a),a=a.sibling}function Lg(r,s,a){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(ms,a)}catch{}switch(a.tag){case 5:Zt||xo(a,s);case 6:var c=zt,d=tr;zt=null,Li(r,s,a),zt=c,tr=d,zt!==null&&(tr?(r=zt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):zt.removeChild(a.stateNode));break;case 18:zt!==null&&(tr?(r=zt,a=a.stateNode,r.nodeType===8?Ah(r.parentNode,a):r.nodeType===1&&Ah(r,a),ki(r)):Ah(zt,a.stateNode));break;case 4:c=zt,d=tr,zt=a.stateNode.containerInfo,tr=!0,Li(r,s,a),zt=c,tr=d;break;case 0:case 11:case 14:case 15:if(!Zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&ud(a,s,w),d=d.next}while(d!==c)}Li(r,s,a);break;case 1:if(!Zt&&(xo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(k){_t(a,s,k)}Li(r,s,a);break;case 21:Li(r,s,a);break;case 22:a.mode&1?(Zt=(c=Zt)||a.memoizedState!==null,Li(r,s,a),Zt=c):Li(r,s,a);break;default:Li(r,s,a)}}function jg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new Y0),s.forEach(function(c){var d=sT.bind(null,r,c);a.has(c)||(a.add(c),c.then(d,d))})}}function nr(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=r,w=s,k=w;e:for(;k!==null;){switch(k.tag){case 5:zt=k.stateNode,tr=!1;break e;case 3:zt=k.stateNode.containerInfo,tr=!0;break e;case 4:zt=k.stateNode.containerInfo,tr=!0;break e}k=k.return}if(zt===null)throw Error(t(160));Lg(p,w,d),zt=null,tr=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch($){_t(d,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Fg(s,r),s=s.sibling}function Fg(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(nr(s,r),Rr(r),c&4){try{Wa(3,r,r.return),Tu(3,r)}catch(pe){_t(r,r.return,pe)}try{Wa(5,r,r.return)}catch(pe){_t(r,r.return,pe)}}break;case 1:nr(s,r),Rr(r),c&512&&a!==null&&xo(a,a.return);break;case 5:if(nr(s,r),Rr(r),c&512&&a!==null&&xo(a,a.return),r.flags&32){var d=r.stateNode;try{cr(d,"")}catch(pe){_t(r,r.return,pe)}}if(c&4&&(d=r.stateNode,d!=null)){var p=r.memoizedProps,w=a!==null?a.memoizedProps:p,k=r.type,b=r.updateQueue;if(r.updateQueue=null,b!==null)try{k==="input"&&p.type==="radio"&&p.name!=null&&Pt(d,p),Br(k,w);var $=Br(k,p);for(w=0;w<b.length;w+=2){var X=b[w],J=b[w+1];X==="style"?Ur(d,J):X==="dangerouslySetInnerHTML"?_i(d,J):X==="children"?cr(d,J):oe(d,X,J,$)}switch(k){case"input":On(d,p);break;case"textarea":eo(d,p);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ae=p.value;ae!=null?vn(d,!!p.multiple,ae,!1):Y!==!!p.multiple&&(p.defaultValue!=null?vn(d,!!p.multiple,p.defaultValue,!0):vn(d,!!p.multiple,p.multiple?[]:"",!1))}d[ba]=p}catch(pe){_t(r,r.return,pe)}}break;case 6:if(nr(s,r),Rr(r),c&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,p=r.memoizedProps;try{d.nodeValue=p}catch(pe){_t(r,r.return,pe)}}break;case 3:if(nr(s,r),Rr(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ki(s.containerInfo)}catch(pe){_t(r,r.return,pe)}break;case 4:nr(s,r),Rr(r);break;case 13:nr(s,r),Rr(r),d=r.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(md=st())),c&4&&jg(r);break;case 22:if(X=a!==null&&a.memoizedState!==null,r.mode&1?(Zt=($=Zt)||X,nr(s,r),Zt=$):nr(s,r),Rr(r),c&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!X&&(r.mode&1)!==0)for(ce=r,X=r.child;X!==null;){for(J=ce=X;ce!==null;){switch(Y=ce,ae=Y.child,Y.tag){case 0:case 11:case 14:case 15:Wa(4,Y,Y.return);break;case 1:xo(Y,Y.return);var fe=Y.stateNode;if(typeof fe.componentWillUnmount=="function"){c=Y,a=Y.return;try{s=c,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(pe){_t(c,a,pe)}}break;case 5:xo(Y,Y.return);break;case 22:if(Y.memoizedState!==null){zg(J);continue}}ae!==null?(ae.return=Y,ce=ae):zg(J)}X=X.sibling}e:for(X=null,J=r;;){if(J.tag===5){if(X===null){X=J;try{d=J.stateNode,$?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(k=J.stateNode,b=J.memoizedProps.style,w=b!=null&&b.hasOwnProperty("display")?b.display:null,k.style.display=_n("display",w))}catch(pe){_t(r,r.return,pe)}}}else if(J.tag===6){if(X===null)try{J.stateNode.nodeValue=$?"":J.memoizedProps}catch(pe){_t(r,r.return,pe)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===r)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===r)break e;for(;J.sibling===null;){if(J.return===null||J.return===r)break e;X===J&&(X=null),J=J.return}X===J&&(X=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:nr(s,r),Rr(r),c&4&&jg(r);break;case 21:break;default:nr(s,r),Rr(r)}}function Rr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Vg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(cr(d,""),c.flags&=-33);var p=Mg(r);dd(r,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,k=Mg(r);hd(r,k,w);break;default:throw Error(t(161))}}catch(b){_t(r,r.return,b)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function X0(r,s,a){ce=r,Ug(r)}function Ug(r,s,a){for(var c=(r.mode&1)!==0;ce!==null;){var d=ce,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Eu;if(!w){var k=d.alternate,b=k!==null&&k.memoizedState!==null||Zt;k=Eu;var $=Zt;if(Eu=w,(Zt=b)&&!$)for(ce=d;ce!==null;)w=ce,b=w.child,w.tag===22&&w.memoizedState!==null?$g(d):b!==null?(b.return=w,ce=b):$g(d);for(;p!==null;)ce=p,Ug(p),p=p.sibling;ce=d,Eu=k,Zt=$}Bg(r)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ce=p):Bg(r)}}function Bg(r){for(;ce!==null;){var s=ce;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Zt||Tu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Zt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:er(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&zm(s,p,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}zm(s,w,a)}break;case 5:var k=s.stateNode;if(a===null&&s.flags&4){a=k;var b=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&a.focus();break;case"img":b.src&&(a.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var X=$.memoizedState;if(X!==null){var J=X.dehydrated;J!==null&&ki(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zt||s.flags&512&&cd(s)}catch(Y){_t(s,s.return,Y)}}if(s===r){ce=null;break}if(a=s.sibling,a!==null){a.return=s.return,ce=a;break}ce=s.return}}function zg(r){for(;ce!==null;){var s=ce;if(s===r){ce=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ce=a;break}ce=s.return}}function $g(r){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Tu(4,s)}catch(b){_t(s,a,b)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(b){_t(s,d,b)}}var p=s.return;try{cd(s)}catch(b){_t(s,p,b)}break;case 5:var w=s.return;try{cd(s)}catch(b){_t(s,w,b)}}}catch(b){_t(s,s.return,b)}if(s===r){ce=null;break}var k=s.sibling;if(k!==null){k.return=s.return,ce=k;break}ce=s.return}}var J0=Math.ceil,Su=ne.ReactCurrentDispatcher,fd=ne.ReactCurrentOwner,Wn=ne.ReactCurrentBatchConfig,qe=0,Lt=null,Ct=null,$t=0,Nn=0,bo=xi(0),xt=0,Ha=null,Ns=0,Iu=0,pd=0,qa=null,pn=null,md=0,Oo=1/0,si=null,Au=!1,gd=null,ji=null,Cu=!1,Fi=null,ku=0,Ga=0,yd=null,Ru=-1,Pu=0;function an(){return(qe&6)!==0?st():Ru!==-1?Ru:Ru=st()}function Ui(r){return(r.mode&1)===0?1:(qe&2)!==0&&$t!==0?$t&-$t:V0.transition!==null?(Pu===0&&(Pu=pa()),Pu):(r=ze,r!==0||(r=window.event,r=r===void 0?16:lo(r.type)),r)}function rr(r,s,a,c){if(50<Ga)throw Ga=0,yd=null,Error(t(185));_s(r,a,c),((qe&2)===0||r!==Lt)&&(r===Lt&&((qe&2)===0&&(Iu|=a),xt===4&&Bi(r,$t)),mn(r,c),a===1&&qe===0&&(s.mode&1)===0&&(Oo=st()+500,ru&&Oi()))}function mn(r,s){var a=r.callbackNode;vs(r,s);var c=qr(r,r===Lt?$t:0);if(c===0)a!==null&&Si(a),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(a!=null&&Si(a),s===1)r.tag===0?O0(Hg.bind(null,r)):Dm(Hg.bind(null,r)),D0(function(){(qe&6)===0&&Oi()}),a=null;else{switch(mr(c)){case 1:a=no;break;case 4:a=ha;break;case 16:a=ps;break;case 536870912:a=ro;break;default:a=ps}a=Zg(a,Wg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Wg(r,s){if(Ru=-1,Pu=0,(qe&6)!==0)throw Error(t(327));var a=r.callbackNode;if(Vo()&&r.callbackNode!==a)return null;var c=qr(r,r===Lt?$t:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||s)s=Du(r,c);else{s=c;var d=qe;qe|=2;var p=Gg();(Lt!==r||$t!==s)&&(si=null,Oo=st()+500,bs(r,s));do try{tT();break}catch(k){qg(r,k)}while(!0);Vh(),Su.current=p,qe=d,Ct!==null?s=0:(Lt=null,$t=0,s=xt)}if(s!==0){if(s===2&&(d=fa(r),d!==0&&(c=d,s=vd(r,d))),s===1)throw a=Ha,bs(r,0),Bi(r,c),mn(r,st()),a;if(s===6)Bi(r,c);else{if(d=r.current.alternate,(c&30)===0&&!Z0(d)&&(s=Du(r,c),s===2&&(p=fa(r),p!==0&&(c=p,s=vd(r,p))),s===1))throw a=Ha,bs(r,0),Bi(r,c),mn(r,st()),a;switch(r.finishedWork=d,r.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:Os(r,pn,si);break;case 3:if(Bi(r,c),(c&130023424)===c&&(s=md+500-st(),10<s)){if(qr(r,0)!==0)break;if(d=r.suspendedLanes,(d&c)!==c){an(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=Ih(Os.bind(null,r,pn,si),s);break}Os(r,pn,si);break;case 4:if(Bi(r,c),(c&4194240)===c)break;for(s=r.eventTimes,d=-1;0<c;){var w=31-In(c);p=1<<w,w=s[w],w>d&&(d=w),c&=~p}if(c=d,c=st()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*J0(c/1960))-c,10<c){r.timeoutHandle=Ih(Os.bind(null,r,pn,si),c);break}Os(r,pn,si);break;case 5:Os(r,pn,si);break;default:throw Error(t(329))}}}return mn(r,st()),r.callbackNode===a?Wg.bind(null,r):null}function vd(r,s){var a=qa;return r.current.memoizedState.isDehydrated&&(bs(r,s).flags|=256),r=Du(r,s),r!==2&&(s=pn,pn=a,s!==null&&_d(s)),r}function _d(r){pn===null?pn=r:pn.push.apply(pn,r)}function Z0(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Jn(p(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Bi(r,s){for(s&=~pd,s&=~Iu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-In(s),c=1<<a;r[a]=-1,s&=~c}}function Hg(r){if((qe&6)!==0)throw Error(t(327));Vo();var s=qr(r,0);if((s&1)===0)return mn(r,st()),null;var a=Du(r,s);if(r.tag!==0&&a===2){var c=fa(r);c!==0&&(s=c,a=vd(r,c))}if(a===1)throw a=Ha,bs(r,0),Bi(r,s),mn(r,st()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,Os(r,pn,si),mn(r,st()),null}function wd(r,s){var a=qe;qe|=1;try{return r(s)}finally{qe=a,qe===0&&(Oo=st()+500,ru&&Oi())}}function xs(r){Fi!==null&&Fi.tag===0&&(qe&6)===0&&Vo();var s=qe;qe|=1;var a=Wn.transition,c=ze;try{if(Wn.transition=null,ze=1,r)return r()}finally{ze=c,Wn.transition=a,qe=s,(qe&6)===0&&Oi()}}function Ed(){Nn=bo.current,at(bo)}function bs(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,P0(a)),Ct!==null)for(a=Ct.return;a!==null;){var c=a;switch(Dh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&tu();break;case 3:Do(),at(hn),at(Qt),$h();break;case 5:Bh(c);break;case 4:Do();break;case 13:at(pt);break;case 19:at(pt);break;case 10:Mh(c.type._context);break;case 22:case 23:Ed()}a=a.return}if(Lt=r,Ct=r=zi(r.current,null),$t=Nn=s,xt=0,Ha=null,pd=Iu=Ns=0,pn=qa=null,Rs!==null){for(s=0;s<Rs.length;s++)if(a=Rs[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}Rs=null}return r}function qg(r,s){do{var a=Ct;try{if(Vh(),fu.current=yu,pu){for(var c=mt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}pu=!1}if(Ds=0,Mt=Nt=mt=null,Fa=!1,Ua=0,fd.current=null,a===null||a.return===null){xt=1,Ha=s,Ct=null;break}e:{var p=r,w=a.return,k=a,b=s;if(s=$t,k.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var $=b,X=k,J=X.tag;if((X.mode&1)===0&&(J===0||J===11||J===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var ae=yg(w);if(ae!==null){ae.flags&=-257,vg(ae,w,k,p,s),ae.mode&1&&gg(p,$,s),s=ae,b=$;var fe=s.updateQueue;if(fe===null){var pe=new Set;pe.add(b),s.updateQueue=pe}else fe.add(b);break e}else{if((s&1)===0){gg(p,$,s),Td();break e}b=Error(t(426))}}else if(ut&&k.mode&1){var Et=yg(w);if(Et!==null){(Et.flags&65536)===0&&(Et.flags|=256),vg(Et,w,k,p,s),bh(No(b,k));break e}}p=b=No(b,k),xt!==4&&(xt=2),qa===null?qa=[p]:qa.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var F=pg(p,b,s);Bm(p,F);break e;case 1:k=b;var O=p.type,B=p.stateNode;if((p.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(ji===null||!ji.has(B)))){p.flags|=65536,s&=-s,p.lanes|=s;var ee=mg(p,k,s);Bm(p,ee);break e}}p=p.return}while(p!==null)}Yg(a)}catch(me){s=me,Ct===a&&a!==null&&(Ct=a=a.return);continue}break}while(!0)}function Gg(){var r=Su.current;return Su.current=yu,r===null?yu:r}function Td(){(xt===0||xt===3||xt===2)&&(xt=4),Lt===null||(Ns&268435455)===0&&(Iu&268435455)===0||Bi(Lt,$t)}function Du(r,s){var a=qe;qe|=2;var c=Gg();(Lt!==r||$t!==s)&&(si=null,bs(r,s));do try{eT();break}catch(d){qg(r,d)}while(!0);if(Vh(),qe=a,Su.current=c,Ct!==null)throw Error(t(261));return Lt=null,$t=0,xt}function eT(){for(;Ct!==null;)Kg(Ct)}function tT(){for(;Ct!==null&&!Wr();)Kg(Ct)}function Kg(r){var s=Jg(r.alternate,r,Nn);r.memoizedProps=r.pendingProps,s===null?Yg(r):Ct=s,fd.current=null}function Yg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=G0(a,s,Nn),a!==null){Ct=a;return}}else{if(a=K0(a,s),a!==null){a.flags&=32767,Ct=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{xt=6,Ct=null;return}}if(s=s.sibling,s!==null){Ct=s;return}Ct=s=r}while(s!==null);xt===0&&(xt=5)}function Os(r,s,a){var c=ze,d=Wn.transition;try{Wn.transition=null,ze=1,nT(r,s,a,c)}finally{Wn.transition=d,ze=c}return null}function nT(r,s,a,c){do Vo();while(Fi!==null);if((qe&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var p=a.lanes|a.childLanes;if(lh(r,p),r===Lt&&(Ct=Lt=null,$t=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Cu||(Cu=!0,Zg(ps,function(){return Vo(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Wn.transition,Wn.transition=null;var w=ze;ze=1;var k=qe;qe|=4,fd.current=null,Q0(r,a),Fg(a,r),T0(Th),Yr=!!Eh,Th=Eh=null,r.current=a,X0(a),Hr(),qe=k,ze=w,Wn.transition=p}else r.current=a;if(Cu&&(Cu=!1,Fi=r,ku=d),p=r.pendingLanes,p===0&&(ji=null),Ll(a.stateNode),mn(r,st()),s!==null)for(c=r.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Au)throw Au=!1,r=gd,gd=null,r;return(ku&1)!==0&&r.tag!==0&&Vo(),p=r.pendingLanes,(p&1)!==0?r===yd?Ga++:(Ga=0,yd=r):Ga=0,Oi(),null}function Vo(){if(Fi!==null){var r=mr(ku),s=Wn.transition,a=ze;try{if(Wn.transition=null,ze=16>r?16:r,Fi===null)var c=!1;else{if(r=Fi,Fi=null,ku=0,(qe&6)!==0)throw Error(t(331));var d=qe;for(qe|=4,ce=r.current;ce!==null;){var p=ce,w=p.child;if((ce.flags&16)!==0){var k=p.deletions;if(k!==null){for(var b=0;b<k.length;b++){var $=k[b];for(ce=$;ce!==null;){var X=ce;switch(X.tag){case 0:case 11:case 15:Wa(8,X,p)}var J=X.child;if(J!==null)J.return=X,ce=J;else for(;ce!==null;){X=ce;var Y=X.sibling,ae=X.return;if(Og(X),X===$){ce=null;break}if(Y!==null){Y.return=ae,ce=Y;break}ce=ae}}}var fe=p.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var Et=pe.sibling;pe.sibling=null,pe=Et}while(pe!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,ce=w;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Wa(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,ce=F;break e}ce=p.return}}var O=r.current;for(ce=O;ce!==null;){w=ce;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,ce=B;else e:for(w=O;ce!==null;){if(k=ce,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Tu(9,k)}}catch(me){_t(k,k.return,me)}if(k===w){ce=null;break e}var ee=k.sibling;if(ee!==null){ee.return=k.return,ce=ee;break e}ce=k.return}}if(qe=d,Oi(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(ms,r)}catch{}c=!0}return c}finally{ze=a,Wn.transition=s}}return!1}function Qg(r,s,a){s=No(a,s),s=pg(r,s,1),r=Mi(r,s,1),s=an(),r!==null&&(_s(r,1,s),mn(r,s))}function _t(r,s,a){if(r.tag===3)Qg(r,r,a);else for(;s!==null;){if(s.tag===3){Qg(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ji===null||!ji.has(c))){r=No(a,r),r=mg(s,r,1),s=Mi(s,r,1),r=an(),s!==null&&(_s(s,1,r),mn(s,r));break}}s=s.return}}function rT(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),s=an(),r.pingedLanes|=r.suspendedLanes&a,Lt===r&&($t&a)===a&&(xt===4||xt===3&&($t&130023424)===$t&&500>st()-md?bs(r,0):pd|=a),mn(r,s)}function Xg(r,s){s===0&&((r.mode&1)===0?s=1:(s=Ii,Ii<<=1,(Ii&130023424)===0&&(Ii=4194304)));var a=an();r=ni(r,s),r!==null&&(_s(r,s,a),mn(r,a))}function iT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Xg(r,a)}function sT(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Xg(r,a)}var Jg;Jg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||hn.current)fn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return fn=!1,q0(r,s,a);fn=(r.flags&131072)!==0}else fn=!1,ut&&(s.flags&1048576)!==0&&Nm(s,su,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;wu(r,s),r=s.pendingProps;var d=So(s,Qt.current);Po(s,a),d=qh(null,s,c,r,d,a);var p=Gh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,dn(c)?(p=!0,nu(s)):p=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Fh(s),d.updater=vu,s.stateNode=d,d._reactInternals=s,Zh(s,c,r,a),s=rd(null,s,c,!0,p,a)):(s.tag=0,ut&&p&&Ph(s),on(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(wu(r,s),r=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=aT(c),r=er(c,r),d){case 0:s=nd(null,s,c,r,a);break e;case 1:s=Ig(null,s,c,r,a);break e;case 11:s=_g(null,s,c,r,a);break e;case 14:s=wg(null,s,c,er(c.type,r),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:er(c,d),nd(r,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:er(c,d),Ig(r,s,c,d,a);case 3:e:{if(Ag(s),r===null)throw Error(t(387));c=s.pendingProps,p=s.memoizedState,d=p.element,Um(r,s),hu(s,c,null,a);var w=s.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){d=No(Error(t(423)),s),s=Cg(r,s,c,a,d);break e}else if(c!==d){d=No(Error(t(424)),s),s=Cg(r,s,c,a,d);break e}else for(Dn=Ni(s.stateNode.containerInfo.firstChild),Pn=s,ut=!0,Zn=null,a=jm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Co(),c===d){s=ii(r,s,a);break e}on(r,s,c,a)}s=s.child}return s;case 5:return $m(s),r===null&&xh(s),c=s.type,d=s.pendingProps,p=r!==null?r.memoizedProps:null,w=d.children,Sh(c,d)?w=null:p!==null&&Sh(c,p)&&(s.flags|=32),Sg(r,s),on(r,s,w,a),s.child;case 6:return r===null&&xh(s),null;case 13:return kg(r,s,a);case 4:return Uh(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=ko(s,null,c,a):on(r,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:er(c,d),_g(r,s,c,d,a);case 7:return on(r,s,s.pendingProps,a),s.child;case 8:return on(r,s,s.pendingProps.children,a),s.child;case 12:return on(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,p=s.memoizedProps,w=d.value,tt(lu,c._currentValue),c._currentValue=w,p!==null)if(Jn(p.value,w)){if(p.children===d.children&&!hn.current){s=ii(r,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var k=p.dependencies;if(k!==null){w=p.child;for(var b=k.firstContext;b!==null;){if(b.context===c){if(p.tag===1){b=ri(-1,a&-a),b.tag=2;var $=p.updateQueue;if($!==null){$=$.shared;var X=$.pending;X===null?b.next=b:(b.next=X.next,X.next=b),$.pending=b}}p.lanes|=a,b=p.alternate,b!==null&&(b.lanes|=a),Lh(p.return,a,s),k.lanes|=a;break}b=b.next}}else if(p.tag===10)w=p.type===s.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,k=w.alternate,k!==null&&(k.lanes|=a),Lh(w,a,s),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===s){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}on(r,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,Po(s,a),d=zn(d),c=c(d),s.flags|=1,on(r,s,c,a),s.child;case 14:return c=s.type,d=er(c,s.pendingProps),d=er(c.type,d),wg(r,s,c,d,a);case 15:return Eg(r,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:er(c,d),wu(r,s),s.tag=1,dn(c)?(r=!0,nu(s)):r=!1,Po(s,a),dg(s,c,d),Zh(s,c,d,a),rd(null,s,c,!0,r,a);case 19:return Pg(r,s,a);case 22:return Tg(r,s,a)}throw Error(t(156,s.tag))};function Zg(r,s){return $r(r,s)}function oT(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(r,s,a,c){return new oT(r,s,a,c)}function Sd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function aT(r){if(typeof r=="function")return Sd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===V)return 11;if(r===je)return 14}return 2}function zi(r,s){var a=r.alternate;return a===null?(a=Hn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Nu(r,s,a,c,d,p){var w=2;if(c=r,typeof r=="function")Sd(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case D:return Vs(a.children,d,p,s);case A:w=8,d|=8;break;case R:return r=Hn(12,a,s,d|2),r.elementType=R,r.lanes=p,r;case C:return r=Hn(13,a,s,d),r.elementType=C,r.lanes=p,r;case Ve:return r=Hn(19,a,s,d),r.elementType=Ve,r.lanes=p,r;case $e:return xu(a,d,p,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:w=10;break e;case x:w=9;break e;case V:w=11;break e;case je:w=14;break e;case Ge:w=16,c=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Hn(w,a,s,d),s.elementType=r,s.type=c,s.lanes=p,s}function Vs(r,s,a,c){return r=Hn(7,r,c,s),r.lanes=a,r}function xu(r,s,a,c){return r=Hn(22,r,c,s),r.elementType=$e,r.lanes=a,r.stateNode={isHidden:!1},r}function Id(r,s,a){return r=Hn(6,r,null,s),r.lanes=a,r}function Ad(r,s,a){return s=Hn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function lT(r,s,a,c,d){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ma(0),this.expirationTimes=ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Cd(r,s,a,c,d,p,w,k,b){return r=new lT(r,s,a,k,b),s===1?(s=1,p===!0&&(s|=8)):s=0,p=Hn(3,null,null,s),r.current=p,p.stateNode=r,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fh(p),r}function uT(r,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:c==null?null:""+c,children:r,containerInfo:s,implementation:a}}function ey(r){if(!r)return bi;r=r._reactInternals;e:{if(Tn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(dn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(dn(a))return Rm(r,a,s)}return s}function ty(r,s,a,c,d,p,w,k,b){return r=Cd(a,c,!0,r,d,p,w,k,b),r.context=ey(null),a=r.current,c=an(),d=Ui(a),p=ri(c,d),p.callback=s??null,Mi(a,p,d),r.current.lanes=d,_s(r,d,c),mn(r,c),r}function bu(r,s,a,c){var d=s.current,p=an(),w=Ui(d);return a=ey(a),s.context===null?s.context=a:s.pendingContext=a,s=ri(p,w),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=Mi(d,s,w),r!==null&&(rr(r,d,w,p),cu(r,d,w)),w}function Ou(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ny(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function kd(r,s){ny(r,s),(r=r.alternate)&&ny(r,s)}function cT(){return null}var ry=typeof reportError=="function"?reportError:function(r){console.error(r)};function Rd(r){this._internalRoot=r}Vu.prototype.render=Rd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));bu(r,s,null,null)},Vu.prototype.unmount=Rd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;xs(function(){bu(null,r,null,null)}),s[Jr]=null}};function Vu(r){this._internalRoot=r}Vu.prototype.unstable_scheduleHydration=function(r){if(r){var s=_a();r={blockedOn:null,target:r,priority:s};for(var a=0;a<An.length&&s!==0&&s<An[a].priority;a++);An.splice(a,0,r),a===0&&oo(r)}};function Pd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Mu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function iy(){}function hT(r,s,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var $=Ou(w);p.call($)}}var w=ty(s,c,r,0,null,!1,!1,"",iy);return r._reactRootContainer=w,r[Jr]=w.current,Na(r.nodeType===8?r.parentNode:r),xs(),w}for(;d=r.lastChild;)r.removeChild(d);if(typeof c=="function"){var k=c;c=function(){var $=Ou(b);k.call($)}}var b=Cd(r,0,!1,null,null,!1,!1,"",iy);return r._reactRootContainer=b,r[Jr]=b.current,Na(r.nodeType===8?r.parentNode:r),xs(function(){bu(s,b,a,c)}),b}function Lu(r,s,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var k=d;d=function(){var b=Ou(w);k.call(b)}}bu(s,w,r,d)}else w=hT(a,s,r,d,c);return Ou(w)}ya=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ye(s.pendingLanes);a!==0&&(ga(s,a|1),mn(s,st()),(qe&6)===0&&(Oo=st()+500,Oi()))}break;case 13:xs(function(){var c=ni(r,1);if(c!==null){var d=an();rr(c,r,1,d)}}),kd(r,1)}},io=function(r){if(r.tag===13){var s=ni(r,134217728);if(s!==null){var a=an();rr(s,r,134217728,a)}kd(r,134217728)}},va=function(r){if(r.tag===13){var s=Ui(r),a=ni(r,s);if(a!==null){var c=an();rr(a,r,s,c)}kd(r,s)}},_a=function(){return ze},wa=function(r,s){var a=ze;try{return ze=r,s()}finally{ze=a}},Mn=function(r,s,a){switch(s){case"input":if(On(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var d=eu(c);if(!d)throw Error(t(90));vt(c),On(c,d)}}}break;case"textarea":eo(r,a);break;case"select":s=a.value,s!=null&&vn(r,!!a.multiple,s,!1)}},Je=wd,sn=xs;var dT={usingClientEntryPoint:!1,Events:[Oa,Eo,eu,ft,wn,wd]},Ka={findFiberByHostInstance:Is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fT={bundleType:Ka.bundleType,version:Ka.version,rendererPackageName:Ka.rendererPackageName,rendererConfig:Ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Kt(r),r===null?null:r.stateNode},findFiberByHostInstance:Ka.findFiberByHostInstance||cT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{ms=ju.inject(fT),Sn=ju}catch{}}return gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dT,gn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pd(s))throw Error(t(200));return uT(r,s,null,a)},gn.createRoot=function(r,s){if(!Pd(r))throw Error(t(299));var a=!1,c="",d=ry;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Cd(r,1,!1,null,null,a,!1,c,d),r[Jr]=s.current,Na(r.nodeType===8?r.parentNode:r),new Rd(s)},gn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Kt(s),r=r===null?null:r.stateNode,r},gn.flushSync=function(r){return xs(r)},gn.hydrate=function(r,s,a){if(!Mu(s))throw Error(t(200));return Lu(null,r,s,!0,a)},gn.hydrateRoot=function(r,s,a){if(!Pd(r))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=ry;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=ty(s,null,r,1,a??null,d,!1,p,w),r[Jr]=s.current,Na(r),c)for(r=0;r<c.length;r++)a=c[r],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Vu(s)},gn.render=function(r,s,a){if(!Mu(s))throw Error(t(200));return Lu(null,r,s,!1,a)},gn.unmountComponentAtNode=function(r){if(!Mu(r))throw Error(t(40));return r._reactRootContainer?(xs(function(){Lu(null,null,r,!1,function(){r._reactRootContainer=null,r[Jr]=null})}),!0):!1},gn.unstable_batchedUpdates=wd,gn.unstable_renderSubtreeIntoContainer=function(r,s,a,c){if(!Mu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Lu(r,s,a,!1,c)},gn.version="18.3.1-next-f1338f8080-20240426",gn}var dy;function ST(){if(dy)return xd.exports;dy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xd.exports=TT(),xd.exports}var fy;function IT(){if(fy)return Fu;fy=1;var n=ST();return Fu.createRoot=n.createRoot,Fu.hydrateRoot=n.hydrateRoot,Fu}var AT=IT();const CT=o_(AT),py=n=>{const e=new Date(n),t=e.getDay(),o=(t===0?7:t)-1;return e.setDate(e.getDate()-o),e.setHours(0,0,0,0),e},kT=n=>{const e=new Date(n),t=e.getDay(),o=7-(t===0?7:t);return e.setDate(e.getDate()+o),e.setHours(23,59,59,999),e},RT=(n,e)=>{const t=[];let i=py(new Date(n));const o=py(new Date(e));for(;i<=o;)t.push(new Date(i)),i.setDate(i.getDate()+7);return t},nt=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`},Oe=n=>{const[e,t,i]=n.split("-").map(Number);if(e===void 0||t===void 0||i===void 0)throw new Error(`Invalid date string: ${n}`);return new Date(e,t-1,i)},Xu=(n,e,t)=>{const i=n.getTime(),o=e.getTime(),l=t.getTime();return i>=o&&i<=l},Kf=(n,e)=>{const t=[],i=new Date(n);for(;i<=e;)t.push(new Date(i)),i.setDate(i.getDate()+1);return t},my=[{yearsOfService:0,hoursPerMonth:10},{yearsOfService:4,hoursPerMonth:12},{yearsOfService:9,hoursPerMonth:14}],Vd={"5/40":{hoursPerDay:8},"9/80":{hoursPerRegularDay:9,hoursPerNonRDOFriday:8}},gy=(n,e)=>{const t=e.getFullYear()-n.getFullYear(),i=e.getMonth()-n.getMonth(),o=e.getDate()-n.getDate();return i<0||i===0&&o<0?t-1:t},PT=n=>{var t;const e=my.filter(i=>n>=i.yearsOfService).sort((i,o)=>o.yearsOfService-i.yearsOfService)[0];return(e==null?void 0:e.hoursPerMonth)??((t=my[0])==null?void 0:t.hoursPerMonth)??10},l_=(n,e,t)=>{const i=new Date(e);i.setHours(0,0,0,0);const o=new Date(t);o.setHours(0,0,0,0);const l=Math.round((o.getTime()-i.getTime())/(1e3*60*60*24))+1,h=gy(n,e),f=gy(n,t),m=Math.max(h,f),y=PT(m),E=365.25/12,P=y/E*7/7*l;return Math.round(P*100)/100},bc=n=>{const e=n.getDay();return e===0||e===6},Yf=(n,e)=>{if(n.getDay()!==5)return!1;const o=(l=>{const h=new Date(l.valueOf()),f=(l.getDay()+6)%7;h.setDate(h.getDate()-f+3);const m=new Date(h.getFullYear(),0,4),y=h.getTime()-m.getTime(),_=1e3*60*60*24*7;return 1+Math.floor(y/_)})(n)%2===0;return e==="even-fridays"?o:!o},Qf=(n,e)=>bc(n)?0:e.type==="5/40"?Vd["5/40"].hoursPerDay:n.getDay()===5?e.rdoPattern&&Yf(n,e.rdoPattern)?0:Vd["9/80"].hoursPerNonRDOFriday:Vd["9/80"].hoursPerRegularDay,DT=(n,e,t)=>{const i=[],o=new Date(n);for(;o<=e;)o.getDay()===5&&Yf(o,t)&&i.push(new Date(o)),o.setDate(o.getDate()+1);return i},Fs=(n,e,t,i=[])=>{let o=0;const l=Kf(n,e),h=new Set(i.map(f=>Oe(f.date).toISOString().split("T")[0]));for(const f of l){const m=f.toISOString().split("T")[0];h.has(m)||(o+=Qf(f,t))}return o},Oc=(n,e)=>e.type!=="9/80"||!e.rdoPattern?!1:Yf(n,e.rdoPattern),Xf=(n,e,t=[])=>{const i=Oe(n.startDate),o=Oe(n.endDate);return Fs(i,o,e,t)},u_=320,NT=280,xT=40,bT=(n,e,t,i,o)=>{const l=RT(e,t),h=[];let f=n.currentBalance;const m=Oe(n.startDate),y=Oe(n.balanceAsOfDate),_=new Set(i.filter(E=>E.personalDayUsed).map(E=>Oe(E.startDate).getFullYear()));if(n.personalDayUsedInStartYear){const E=Oe(n.balanceAsOfDate).getFullYear();_.add(E)}for(const E of l){const I=kT(E);let P=E>=y?l_(m,E,I):0;const z=E.getFullYear();(I.getFullYear()>z||I.getMonth()===11&&I.getDate()===31)&&(_.has(z)||(P+=8));const j=i.filter(D=>{const A=Oe(D.startDate),R=Oe(D.endDate);return Xu(A,E,I)||Xu(R,E,I)||A<E&&R>I}),H=o.filter(D=>Xu(Oe(D.date),E,I)),K=n.workSchedule.type==="9/80"&&n.workSchedule.rdoPattern?DT(E,I,n.workSchedule.rdoPattern):[],oe=j.reduce((D,A)=>{const R=Oe(A.startDate),N=Oe(A.endDate),x=R>E?R:E,V=N<I?N:I,C=Fs(x,V,n.workSchedule,o);let Ve=0;A.personalDayUsed&&R>=E&&R<=I&&(Ve=8);const je=Math.max(0,C-Ve);return D+je},0),ne=f,be=ne+P-oe,ye=Math.min(be,u_);h.push({weekStartDate:nt(E),weekEndDate:nt(I),startingBalance:ne,accrued:P,used:oe,endingBalance:ye,plannedVacations:j,holidays:H,rdoDays:K.map(nt)}),f=ye}return h},yy=(n,e)=>{var y,_;const t=n.filter(E=>Oe(E.weekStartDate).getFullYear()===e);if(t.length===0)return{year:e,startingBalance:0,totalAccrued:0,totalUsed:0,endingBalance:0,totalPlannedVacations:0,totalHolidayHours:0};const i=((y=t[0])==null?void 0:y.startingBalance)??0,o=t.reduce((E,I)=>E+I.accrued,0),l=t.reduce((E,I)=>E+I.used,0),h=((_=t[t.length-1])==null?void 0:_.endingBalance)??0,f=new Set(t.flatMap(E=>E.plannedVacations.map(I=>I.id))),m=t.reduce((E,I)=>E+I.holidays.reduce((P,z)=>P+z.hours,0),0);return{year:e,startingBalance:i,totalAccrued:o,totalUsed:l,endingBalance:h,totalPlannedVacations:f.size,totalHolidayHours:m}},OT=(n,e,t,i=[])=>{const o=new Date,l=Oe(n.startDate),h=l_(l,o,e),f=t.filter(m=>Oe(m.endDate)<=e).reduce((m,y)=>{const _=Xf(y,n.workSchedule,i),E=y.personalDayUsed?8:0;return m+Math.max(0,_-E)},0);return n.currentBalance+h-f},VT=()=>{};var vy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},MT=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],h=n[t++],f=n[t++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],h=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},h_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],h=o+1<n.length,f=h?n[o+1]:0,m=o+2<n.length,y=m?n[o+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let I=(f&15)<<2|y>>6,P=y&63;m||(P=64,h||(I=64)),i.push(t[_],t[E],t[I],t[P])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(c_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):MT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new LT;const I=l<<2|f>>4;if(i.push(I),y!==64){const P=f<<4&240|y>>2;if(i.push(P),E!==64){const z=y<<6&192|E;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class LT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jT=function(n){const e=c_(n);return h_.encodeByteArray(e,!0)},cc=function(n){return jT(n).replace(/\./g,"")},d_=function(n){try{return h_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=()=>FT().__FIREBASE_DEFAULTS__,BT=()=>{if(typeof process>"u"||typeof vy>"u")return;const n=vy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&d_(n[1]);return e&&JSON.parse(e)},Vc=()=>{try{return VT()||UT()||BT()||zT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},f_=n=>{var e,t;return(t=(e=Vc())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},$T=n=>{const e=f_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},p_=()=>{var n;return(n=Vc())==null?void 0:n.config},m_=n=>{var e;return(e=Vc())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function g_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[cc(JSON.stringify(t)),cc(JSON.stringify(h)),""].join(".")}const sl={};function qT(){const n={prod:[],emulator:[]};for(const e of Object.keys(sl))sl[e]?n.emulator.push(e):n.prod.push(e);return n}function GT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let _y=!1;function y_(n,e){if(typeof window>"u"||typeof document>"u"||!na(window.location.host)||sl[n]===e||sl[n]||_y)return;sl[n]=e;function t(I){return`__firebase__banner__${I}`}const i="__firebase__banner",l=qT().prod.length>0;function h(){const I=document.getElementById(i);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function m(I,P){I.setAttribute("width","24"),I.setAttribute("id",P),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{_y=!0,h()},I}function _(I,P){I.setAttribute("id",P),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function E(){const I=GT(i),P=t("text"),z=document.getElementById(P)||document.createElement("span"),L=t("learnmore"),j=document.getElementById(L)||document.createElement("a"),H=t("preprendIcon"),K=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const oe=I.element;f(oe),_(j,L);const ne=y();m(K,H),oe.append(K,z,j,ne),document.body.appendChild(oe)}l?(z.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function YT(){var e;const n=(e=Vc())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function JT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZT(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function eS(){return!YT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tS(){try{return typeof indexedDB=="object"}catch{return!1}}function nS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="FirebaseError";class pi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=rS,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sl.prototype.create)}}class Sl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?iS(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new pi(o,f,i)}}function iS(n,e){return n.replace(sS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const sS=/\{\$([^}]+)}/g;function oS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $s(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],h=e[o];if(wy(l)&&wy(h)){if(!$s(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function wy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function aS(n,e){const t=new lS(n,e);return t.subscribe.bind(t)}class lS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");uS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Md),o.error===void 0&&(o.error=Md),o.complete===void 0&&(o.complete=Md);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Md(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){return n&&n._delegate?n._delegate:n}class Ws{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new WT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dS(e))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ms){return this.instances.has(e)}getOptions(e=Ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:hS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ms){return this.component?this.component.multipleInstances?e:Ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hS(n){return n===Ms?void 0:n}function dS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const pS={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},mS=Fe.INFO,gS={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},yS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=gS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jf{constructor(e){this.name=e,this._logLevel=mS,this._logHandler=yS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const vS=(n,e)=>e.some(t=>n instanceof t);let Ey,Ty;function _S(){return Ey||(Ey=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wS(){return Ty||(Ty=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const v_=new WeakMap,af=new WeakMap,__=new WeakMap,Ld=new WeakMap,Zf=new WeakMap;function ES(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(Yi(n.result)),o()},h=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&v_.set(t,n)}).catch(()=>{}),Zf.set(e,n),e}function TS(n){if(af.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});af.set(n,e)}let lf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return af.get(n);if(e==="objectStoreNames")return n.objectStoreNames||__.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SS(n){lf=n(lf)}function IS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(jd(this),e,...t);return __.set(i,e.sort?e.sort():[e]),Yi(i)}:wS().includes(n)?function(...e){return n.apply(jd(this),e),Yi(v_.get(this))}:function(...e){return Yi(n.apply(jd(this),e))}}function AS(n){return typeof n=="function"?IS(n):(n instanceof IDBTransaction&&TS(n),vS(n,_S())?new Proxy(n,lf):n)}function Yi(n){if(n instanceof IDBRequest)return ES(n);if(Ld.has(n))return Ld.get(n);const e=AS(n);return e!==n&&(Ld.set(n,e),Zf.set(e,n)),e}const jd=n=>Zf.get(n);function CS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(n,e),f=Yi(h);return i&&h.addEventListener("upgradeneeded",m=>{i(Yi(h.result),m.oldVersion,m.newVersion,Yi(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const kS=["get","getKey","getAll","getAllKeys","count"],RS=["put","add","delete","clear"],Fd=new Map;function Sy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Fd.get(e))return Fd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=RS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||kS.includes(t)))return;const l=async function(h,...f){const m=this.transaction(h,o?"readwrite":"readonly");let y=m.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&m.done]))[0]};return Fd.set(e,l),l}SS(n=>({...n,get:(e,t,i)=>Sy(e,t)||n.get(e,t,i),has:(e,t)=>!!Sy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function DS(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const uf="@firebase/app",Iy="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new Jf("@firebase/app"),NS="@firebase/app-compat",xS="@firebase/analytics-compat",bS="@firebase/analytics",OS="@firebase/app-check-compat",VS="@firebase/app-check",MS="@firebase/auth",LS="@firebase/auth-compat",jS="@firebase/database",FS="@firebase/data-connect",US="@firebase/database-compat",BS="@firebase/functions",zS="@firebase/functions-compat",$S="@firebase/installations",WS="@firebase/installations-compat",HS="@firebase/messaging",qS="@firebase/messaging-compat",GS="@firebase/performance",KS="@firebase/performance-compat",YS="@firebase/remote-config",QS="@firebase/remote-config-compat",XS="@firebase/storage",JS="@firebase/storage-compat",ZS="@firebase/firestore",eI="@firebase/ai",tI="@firebase/firestore-compat",nI="firebase",rI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="[DEFAULT]",iI={[uf]:"fire-core",[NS]:"fire-core-compat",[bS]:"fire-analytics",[xS]:"fire-analytics-compat",[VS]:"fire-app-check",[OS]:"fire-app-check-compat",[MS]:"fire-auth",[LS]:"fire-auth-compat",[jS]:"fire-rtdb",[FS]:"fire-data-connect",[US]:"fire-rtdb-compat",[BS]:"fire-fn",[zS]:"fire-fn-compat",[$S]:"fire-iid",[WS]:"fire-iid-compat",[HS]:"fire-fcm",[qS]:"fire-fcm-compat",[GS]:"fire-perf",[KS]:"fire-perf-compat",[YS]:"fire-rc",[QS]:"fire-rc-compat",[XS]:"fire-gcs",[JS]:"fire-gcs-compat",[ZS]:"fire-fst",[tI]:"fire-fst-compat",[eI]:"fire-vertex","fire-js":"fire-js",[nI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,sI=new Map,hf=new Map;function Ay(n,e){try{n.container.addComponent(e)}catch(t){ci.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ko(n){const e=n.name;if(hf.has(e))return ci.debug(`There were multiple attempts to register component ${e}.`),!1;hf.set(e,n);for(const t of hc.values())Ay(t,n);for(const t of sI.values())Ay(t,n);return!0}function ep(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ir(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new Sl("app","Firebase",oI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=rI;function w_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:cf,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Qi.create("bad-app-name",{appName:String(o)});if(t||(t=p_()),!t)throw Qi.create("no-options");const l=hc.get(o);if(l){if($s(t,l.options)&&$s(i,l.config))return l;throw Qi.create("duplicate-app",{appName:o})}const h=new fS(o);for(const m of hf.values())h.addComponent(m);const f=new aI(t,i,h);return hc.set(o,f),f}function E_(n=cf){const e=hc.get(n);if(!e&&n===cf&&p_())return w_();if(!e)throw Qi.create("no-app",{appName:n});return e}function Xi(n,e,t){let i=iI[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ci.warn(h.join(" "));return}Ko(new Ws(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="firebase-heartbeat-database",uI=1,hl="firebase-heartbeat-store";let Ud=null;function T_(){return Ud||(Ud=CS(lI,uI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(hl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qi.create("idb-open",{originalErrorMessage:n.message})})),Ud}async function cI(n){try{const t=(await T_()).transaction(hl),i=await t.objectStore(hl).get(S_(n));return await t.done,i}catch(e){if(e instanceof pi)ci.warn(e.message);else{const t=Qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ci.warn(t.message)}}}async function Cy(n,e){try{const i=(await T_()).transaction(hl,"readwrite");await i.objectStore(hl).put(e,S_(n)),await i.done}catch(t){if(t instanceof pi)ci.warn(t.message);else{const i=Qi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ci.warn(i.message)}}}function S_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=1024,dI=30;class fI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ky();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>dI){const h=gI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ci.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ky(),{heartbeatsToSend:i,unsentEntries:o}=pI(this._heartbeatsCache.heartbeats),l=cc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ci.warn(t),""}}}function ky(){return new Date().toISOString().substring(0,10)}function pI(n,e=hI){const t=[];let i=n.slice();for(const o of n){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Ry(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ry(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class mI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tS()?nS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Cy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Cy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ry(n){return cc(JSON.stringify({version:2,heartbeats:n})).length}function gI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(n){Ko(new Ws("platform-logger",e=>new PS(e),"PRIVATE")),Ko(new Ws("heartbeat",e=>new fI(e),"PRIVATE")),Xi(uf,Iy,n),Xi(uf,Iy,"esm2020"),Xi("fire-js","")}yI("");var Py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ji,I_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function R(){}R.prototype=A.prototype,D.F=A.prototype,D.prototype=new R,D.prototype.constructor=D,D.D=function(N,x,V){for(var C=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)C[Ve-2]=arguments[Ve];return A.prototype[x].apply(N,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,A,R){R||(R=0);const N=Array(16);if(typeof A=="string")for(var x=0;x<16;++x)N[x]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(x=0;x<16;++x)N[x]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=D.g[0],R=D.g[1],x=D.g[2];let V=D.g[3],C;C=A+(V^R&(x^V))+N[0]+3614090360&4294967295,A=R+(C<<7&4294967295|C>>>25),C=V+(x^A&(R^x))+N[1]+3905402710&4294967295,V=A+(C<<12&4294967295|C>>>20),C=x+(R^V&(A^R))+N[2]+606105819&4294967295,x=V+(C<<17&4294967295|C>>>15),C=R+(A^x&(V^A))+N[3]+3250441966&4294967295,R=x+(C<<22&4294967295|C>>>10),C=A+(V^R&(x^V))+N[4]+4118548399&4294967295,A=R+(C<<7&4294967295|C>>>25),C=V+(x^A&(R^x))+N[5]+1200080426&4294967295,V=A+(C<<12&4294967295|C>>>20),C=x+(R^V&(A^R))+N[6]+2821735955&4294967295,x=V+(C<<17&4294967295|C>>>15),C=R+(A^x&(V^A))+N[7]+4249261313&4294967295,R=x+(C<<22&4294967295|C>>>10),C=A+(V^R&(x^V))+N[8]+1770035416&4294967295,A=R+(C<<7&4294967295|C>>>25),C=V+(x^A&(R^x))+N[9]+2336552879&4294967295,V=A+(C<<12&4294967295|C>>>20),C=x+(R^V&(A^R))+N[10]+4294925233&4294967295,x=V+(C<<17&4294967295|C>>>15),C=R+(A^x&(V^A))+N[11]+2304563134&4294967295,R=x+(C<<22&4294967295|C>>>10),C=A+(V^R&(x^V))+N[12]+1804603682&4294967295,A=R+(C<<7&4294967295|C>>>25),C=V+(x^A&(R^x))+N[13]+4254626195&4294967295,V=A+(C<<12&4294967295|C>>>20),C=x+(R^V&(A^R))+N[14]+2792965006&4294967295,x=V+(C<<17&4294967295|C>>>15),C=R+(A^x&(V^A))+N[15]+1236535329&4294967295,R=x+(C<<22&4294967295|C>>>10),C=A+(x^V&(R^x))+N[1]+4129170786&4294967295,A=R+(C<<5&4294967295|C>>>27),C=V+(R^x&(A^R))+N[6]+3225465664&4294967295,V=A+(C<<9&4294967295|C>>>23),C=x+(A^R&(V^A))+N[11]+643717713&4294967295,x=V+(C<<14&4294967295|C>>>18),C=R+(V^A&(x^V))+N[0]+3921069994&4294967295,R=x+(C<<20&4294967295|C>>>12),C=A+(x^V&(R^x))+N[5]+3593408605&4294967295,A=R+(C<<5&4294967295|C>>>27),C=V+(R^x&(A^R))+N[10]+38016083&4294967295,V=A+(C<<9&4294967295|C>>>23),C=x+(A^R&(V^A))+N[15]+3634488961&4294967295,x=V+(C<<14&4294967295|C>>>18),C=R+(V^A&(x^V))+N[4]+3889429448&4294967295,R=x+(C<<20&4294967295|C>>>12),C=A+(x^V&(R^x))+N[9]+568446438&4294967295,A=R+(C<<5&4294967295|C>>>27),C=V+(R^x&(A^R))+N[14]+3275163606&4294967295,V=A+(C<<9&4294967295|C>>>23),C=x+(A^R&(V^A))+N[3]+4107603335&4294967295,x=V+(C<<14&4294967295|C>>>18),C=R+(V^A&(x^V))+N[8]+1163531501&4294967295,R=x+(C<<20&4294967295|C>>>12),C=A+(x^V&(R^x))+N[13]+2850285829&4294967295,A=R+(C<<5&4294967295|C>>>27),C=V+(R^x&(A^R))+N[2]+4243563512&4294967295,V=A+(C<<9&4294967295|C>>>23),C=x+(A^R&(V^A))+N[7]+1735328473&4294967295,x=V+(C<<14&4294967295|C>>>18),C=R+(V^A&(x^V))+N[12]+2368359562&4294967295,R=x+(C<<20&4294967295|C>>>12),C=A+(R^x^V)+N[5]+4294588738&4294967295,A=R+(C<<4&4294967295|C>>>28),C=V+(A^R^x)+N[8]+2272392833&4294967295,V=A+(C<<11&4294967295|C>>>21),C=x+(V^A^R)+N[11]+1839030562&4294967295,x=V+(C<<16&4294967295|C>>>16),C=R+(x^V^A)+N[14]+4259657740&4294967295,R=x+(C<<23&4294967295|C>>>9),C=A+(R^x^V)+N[1]+2763975236&4294967295,A=R+(C<<4&4294967295|C>>>28),C=V+(A^R^x)+N[4]+1272893353&4294967295,V=A+(C<<11&4294967295|C>>>21),C=x+(V^A^R)+N[7]+4139469664&4294967295,x=V+(C<<16&4294967295|C>>>16),C=R+(x^V^A)+N[10]+3200236656&4294967295,R=x+(C<<23&4294967295|C>>>9),C=A+(R^x^V)+N[13]+681279174&4294967295,A=R+(C<<4&4294967295|C>>>28),C=V+(A^R^x)+N[0]+3936430074&4294967295,V=A+(C<<11&4294967295|C>>>21),C=x+(V^A^R)+N[3]+3572445317&4294967295,x=V+(C<<16&4294967295|C>>>16),C=R+(x^V^A)+N[6]+76029189&4294967295,R=x+(C<<23&4294967295|C>>>9),C=A+(R^x^V)+N[9]+3654602809&4294967295,A=R+(C<<4&4294967295|C>>>28),C=V+(A^R^x)+N[12]+3873151461&4294967295,V=A+(C<<11&4294967295|C>>>21),C=x+(V^A^R)+N[15]+530742520&4294967295,x=V+(C<<16&4294967295|C>>>16),C=R+(x^V^A)+N[2]+3299628645&4294967295,R=x+(C<<23&4294967295|C>>>9),C=A+(x^(R|~V))+N[0]+4096336452&4294967295,A=R+(C<<6&4294967295|C>>>26),C=V+(R^(A|~x))+N[7]+1126891415&4294967295,V=A+(C<<10&4294967295|C>>>22),C=x+(A^(V|~R))+N[14]+2878612391&4294967295,x=V+(C<<15&4294967295|C>>>17),C=R+(V^(x|~A))+N[5]+4237533241&4294967295,R=x+(C<<21&4294967295|C>>>11),C=A+(x^(R|~V))+N[12]+1700485571&4294967295,A=R+(C<<6&4294967295|C>>>26),C=V+(R^(A|~x))+N[3]+2399980690&4294967295,V=A+(C<<10&4294967295|C>>>22),C=x+(A^(V|~R))+N[10]+4293915773&4294967295,x=V+(C<<15&4294967295|C>>>17),C=R+(V^(x|~A))+N[1]+2240044497&4294967295,R=x+(C<<21&4294967295|C>>>11),C=A+(x^(R|~V))+N[8]+1873313359&4294967295,A=R+(C<<6&4294967295|C>>>26),C=V+(R^(A|~x))+N[15]+4264355552&4294967295,V=A+(C<<10&4294967295|C>>>22),C=x+(A^(V|~R))+N[6]+2734768916&4294967295,x=V+(C<<15&4294967295|C>>>17),C=R+(V^(x|~A))+N[13]+1309151649&4294967295,R=x+(C<<21&4294967295|C>>>11),C=A+(x^(R|~V))+N[4]+4149444226&4294967295,A=R+(C<<6&4294967295|C>>>26),C=V+(R^(A|~x))+N[11]+3174756917&4294967295,V=A+(C<<10&4294967295|C>>>22),C=x+(A^(V|~R))+N[2]+718787259&4294967295,x=V+(C<<15&4294967295|C>>>17),C=R+(V^(x|~A))+N[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+x&4294967295,D.g[3]=D.g[3]+V&4294967295}i.prototype.v=function(D,A){A===void 0&&(A=D.length);const R=A-this.blockSize,N=this.C;let x=this.h,V=0;for(;V<A;){if(x==0)for(;V<=R;)o(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<A;)if(N[x++]=D.charCodeAt(V++),x==this.blockSize){o(this,N),x=0;break}}else for(;V<A;)if(N[x++]=D[V++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=A},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;A=this.o*8;for(var R=D.length-8;R<D.length;++R)D[R]=A&255,A/=256;for(this.v(D),D=Array(16),A=0,R=0;R<4;++R)for(let N=0;N<32;N+=8)D[A++]=this.g[R]>>>N&255;return D};function l(D,A){var R=f;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=A(D)}function h(D,A){this.h=A;const R=[];let N=!0;for(let x=D.length-1;x>=0;x--){const V=D[x]|0;N&&V==A||(R[x]=V,N=!1)}this.g=R}var f={};function m(D){return-128<=D&&D<128?l(D,function(A){return new h([A|0],A<0?-1:0)}):new h([D|0],D<0?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return E;if(D<0)return j(y(-D));const A=[];let R=1;for(let N=0;D>=R;N++)A[N]=D/R|0,R*=4294967296;return new h(A,0)}function _(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return j(_(D.substring(1),A));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(A,8));let N=E;for(let V=0;V<D.length;V+=8){var x=Math.min(8,D.length-V);const C=parseInt(D.substring(V,V+x),A);x<8?(x=y(Math.pow(A,x)),N=N.j(x).add(y(C))):(N=N.j(R),N=N.add(y(C)))}return N}var E=m(0),I=m(1),P=m(16777216);n=h.prototype,n.m=function(){if(L(this))return-j(this).m();let D=0,A=1;for(let R=0;R<this.g.length;R++){const N=this.i(R);D+=(N>=0?N:4294967296+N)*A,A*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(z(this))return"0";if(L(this))return"-"+j(this).toString(D);const A=y(Math.pow(D,6));var R=this;let N="";for(;;){const x=ne(R,A).g;R=H(R,x.j(A));let V=((R.g.length>0?R.g[0]:R.h)>>>0).toString(D);if(R=x,z(R))return V+N;for(;V.length<6;)V="0"+V;N=V+N}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function z(D){if(D.h!=0)return!1;for(let A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function L(D){return D.h==-1}n.l=function(D){return D=H(this,D),L(D)?-1:z(D)?0:1};function j(D){const A=D.g.length,R=[];for(let N=0;N<A;N++)R[N]=~D.g[N];return new h(R,~D.h).add(I)}n.abs=function(){return L(this)?j(this):this},n.add=function(D){const A=Math.max(this.g.length,D.g.length),R=[];let N=0;for(let x=0;x<=A;x++){let V=N+(this.i(x)&65535)+(D.i(x)&65535),C=(V>>>16)+(this.i(x)>>>16)+(D.i(x)>>>16);N=C>>>16,V&=65535,C&=65535,R[x]=C<<16|V}return new h(R,R[R.length-1]&-2147483648?-1:0)};function H(D,A){return D.add(j(A))}n.j=function(D){if(z(this)||z(D))return E;if(L(this))return L(D)?j(this).j(j(D)):j(j(this).j(D));if(L(D))return j(this.j(j(D)));if(this.l(P)<0&&D.l(P)<0)return y(this.m()*D.m());const A=this.g.length+D.g.length,R=[];for(var N=0;N<2*A;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<D.g.length;x++){const V=this.i(N)>>>16,C=this.i(N)&65535,Ve=D.i(x)>>>16,je=D.i(x)&65535;R[2*N+2*x]+=C*je,K(R,2*N+2*x),R[2*N+2*x+1]+=V*je,K(R,2*N+2*x+1),R[2*N+2*x+1]+=C*Ve,K(R,2*N+2*x+1),R[2*N+2*x+2]+=V*Ve,K(R,2*N+2*x+2)}for(D=0;D<A;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=A;D<2*A;D++)R[D]=0;return new h(R,0)};function K(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function oe(D,A){this.g=D,this.h=A}function ne(D,A){if(z(A))throw Error("division by zero");if(z(D))return new oe(E,E);if(L(D))return A=ne(j(D),A),new oe(j(A.g),j(A.h));if(L(A))return A=ne(D,j(A)),new oe(j(A.g),A.h);if(D.g.length>30){if(L(D)||L(A))throw Error("slowDivide_ only works with positive integers.");for(var R=I,N=A;N.l(D)<=0;)R=be(R),N=be(N);var x=ye(R,1),V=ye(N,1);for(N=ye(N,2),R=ye(R,2);!z(N);){var C=V.add(N);C.l(D)<=0&&(x=x.add(R),V=C),N=ye(N,1),R=ye(R,1)}return A=H(D,x.j(A)),new oe(x,A)}for(x=E;D.l(A)>=0;){for(R=Math.max(1,Math.floor(D.m()/A.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),V=y(R),C=V.j(A);L(C)||C.l(D)>0;)R-=N,V=y(R),C=V.j(A);z(V)&&(V=I),x=x.add(V),D=H(D,C)}return new oe(x,D)}n.B=function(D){return ne(this,D).h},n.and=function(D){const A=Math.max(this.g.length,D.g.length),R=[];for(let N=0;N<A;N++)R[N]=this.i(N)&D.i(N);return new h(R,this.h&D.h)},n.or=function(D){const A=Math.max(this.g.length,D.g.length),R=[];for(let N=0;N<A;N++)R[N]=this.i(N)|D.i(N);return new h(R,this.h|D.h)},n.xor=function(D){const A=Math.max(this.g.length,D.g.length),R=[];for(let N=0;N<A;N++)R[N]=this.i(N)^D.i(N);return new h(R,this.h^D.h)};function be(D){const A=D.g.length+1,R=[];for(let N=0;N<A;N++)R[N]=D.i(N)<<1|D.i(N-1)>>>31;return new h(R,D.h)}function ye(D,A){const R=A>>5;A%=32;const N=D.g.length-R,x=[];for(let V=0;V<N;V++)x[V]=A>0?D.i(V+R)>>>A|D.i(V+R+1)<<32-A:D.i(V+R);return new h(x,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,I_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=_,Ji=h}).apply(typeof Py<"u"?Py:typeof self<"u"?self:typeof window<"u"?window:{});var Uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var A_,el,C_,Ju,df,k_,R_,P_;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uu=="object"&&Uu];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,g){if(g)e:{var v=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var U=u[S];if(!(U in v))break e;v=v[U]}u=u[u.length-1],S=v[u],g=g(S),g!=S&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var v=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&v.push([S,g[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function m(u,g,v){return u.call.apply(u.bind,arguments)}function y(u,g,v){return y=m,y.apply(null,arguments)}function _(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function E(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(S,U,W){for(var ie=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)ie[Re-2]=arguments[Re];return g.prototype[U].apply(S,ie)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const g=u.length;if(g>0){const v=Array(g);for(let S=0;S<g;S++)v[S]=u[S];return v}return[]}function z(u,g){for(let S=1;S<arguments.length;S++){const U=arguments[S];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=u.length||0;const W=U.length||0;u.length=v+W;for(let ie=0;ie<W;ie++)u[v+ie]=U[ie]}else u.push(U)}}class L{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function j(u){h.setTimeout(()=>{throw u},0)}function H(){var u=D;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class K{constructor(){this.h=this.g=null}add(g,v){const S=oe.get();S.set(g,v),this.h?this.h.next=S:this.g=S,this.h=S}}var oe=new L(()=>new ne,u=>u.reset());class ne{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ye=!1,D=new K,A=()=>{const u=Promise.resolve(void 0);be=()=>{u.then(R)}};function R(){for(var u;u=H();){try{u.h.call(u.g)}catch(v){j(v)}var g=oe;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}ye=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,g),h.removeEventListener("test",v,g)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function Ve(u,g){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}E(Ve,x),Ve.prototype.init=function(u,g){const v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),Ge=0;function $e(u,g,v,S,U){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!S,this.ha=U,this.key=++Ge,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ue(u,g,v){for(const S in u)g.call(v,u[S],S,u)}function te(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function M(u){const g={};for(const v in u)g[v]=u[v];return g}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(u,g){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)u[v]=S[v];for(let W=0;W<q.length;W++)v=q[W],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function Ee(u){this.src=u,this.g={},this.h=0}Ee.prototype.add=function(u,g,v,S,U){const W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);const ie=De(u,g,S,U);return ie>-1?(g=u[ie],v||(g.fa=!1)):(g=new $e(g,this.src,W,!!S,U),g.fa=v,u.push(g)),g};function Ne(u,g){const v=g.type;if(v in u.g){var S=u.g[v],U=Array.prototype.indexOf.call(S,g,void 0),W;(W=U>=0)&&Array.prototype.splice.call(S,U,1),W&&(re(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function De(u,g,v,S){for(let U=0;U<u.length;++U){const W=u[U];if(!W.da&&W.listener==g&&W.capture==!!v&&W.ha==S)return U}return-1}var Z="closure_lm_"+(Math.random()*1e6|0),he={};function de(u,g,v,S,U){if(Array.isArray(g)){for(let W=0;W<g.length;W++)de(u,g[W],v,S,U);return null}return v=gi(v),u&&u[je]?u.J(g,v,f(S)?!!S.capture:!1,U):Se(u,g,v,!1,S,U)}function Se(u,g,v,S,U,W){if(!g)throw Error("Invalid event type");const ie=f(U)?!!U.capture:!!U;let Re=Pt(u);if(Re||(u[Z]=Re=new Ee(u)),v=Re.add(g,v,S,ie,W),v.proxy)return v;if(S=Me(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)V||(U=ie),U===void 0&&(U=!1),u.addEventListener(g.toString(),S,U);else if(u.attachEvent)u.attachEvent(He(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Me(){function u(v){return g.call(u.src,u.listener,v)}const g=bn;return u}function vt(u,g,v,S,U){if(Array.isArray(g))for(var W=0;W<g.length;W++)vt(u,g[W],v,S,U);else S=f(S)?!!S.capture:!!S,v=gi(v),u&&u[je]?(u=u.i,W=String(g).toString(),W in u.g&&(g=u.g[W],v=De(g,v,S,U),v>-1&&(re(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[W],u.h--)))):u&&(u=Pt(u))&&(g=u.g[g.toString()],u=-1,g&&(u=De(g,v,S,U)),(v=u>-1?g[u]:null)&&St(v))}function St(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[je])Ne(g.i,u);else{var v=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(v,S,u.capture):g.detachEvent?g.detachEvent(He(v),S):g.addListener&&g.removeListener&&g.removeListener(S),(v=Pt(g))?(Ne(v,u),v.h==0&&(v.src=null,g[Z]=null)):re(u)}}}function He(u){return u in he?he[u]:he[u]="on"+u}function bn(u,g){if(u.da)u=!0;else{g=new Ve(g,this);const v=u.listener,S=u.ha||u.src;u.fa&&St(u),u=v.call(S,g)}return u}function Pt(u){return u=u[Z],u instanceof Ee?u:null}var On="__closure_events_fn_"+(Math.random()*1e9>>>0);function gi(u){return typeof u=="function"?u:(u[On]||(u[On]=function(g){return u.handleEvent(g)}),u[On])}function ht(){N.call(this),this.i=new Ee(this),this.M=this,this.G=null}E(ht,N),ht.prototype[je]=!0,ht.prototype.removeEventListener=function(u,g,v,S){vt(this,u,g,v,S)};function dt(u,g){var v,S=u.G;if(S)for(v=[];S;S=S.G)v.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new x(g,u);else if(g instanceof x)g.target=g.target||u;else{var U=g;g=new x(S,u),Te(g,U)}U=!0;let W,ie;if(v)for(ie=v.length-1;ie>=0;ie--)W=g.g=v[ie],U=vn(W,S,!0,g)&&U;if(W=g.g=u,U=vn(W,S,!0,g)&&U,U=vn(W,S,!1,g)&&U,v)for(ie=0;ie<v.length;ie++)W=g.g=v[ie],U=vn(W,S,!1,g)&&U}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let S=0;S<v.length;S++)re(v[S]);delete u.g[g],u.h--}}this.G=null},ht.prototype.J=function(u,g,v,S){return this.i.add(String(u),g,!1,v,S)},ht.prototype.K=function(u,g,v,S){return this.i.add(String(u),g,!0,v,S)};function vn(u,g,v,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let U=!0;for(let W=0;W<g.length;++W){const ie=g[W];if(ie&&!ie.da&&ie.capture==v){const Re=ie.listener,wt=ie.ha||ie.src;ie.fa&&Ne(u.i,ie),U=Re.call(wt,S)!==!1&&U}}return U&&!S.defaultPrevented}function us(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:h.setTimeout(u,g||0)}function yi(u){u.g=us(()=>{u.g=null,u.i&&(u.i=!1,yi(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class eo extends N{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:yi(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lr(u){N.call(this),this.h=u,this.g={}}E(lr,N);var cs=[];function vi(u){ue(u.g,function(g,v){this.g.hasOwnProperty(v)&&St(g)},u),u.g={}}lr.prototype.N=function(){lr.Z.N.call(this),vi(this)},lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ur=h.JSON.stringify,_i=h.JSON.parse,cr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Kn(){}function to(){}var _n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ur(){x.call(this,"d")}E(Ur,x);function hs(){x.call(this,"c")}E(hs,x);var ln={},Br=null;function Vn(){return Br=Br||new ht}ln.Ia="serverreachability";function wi(u){x.call(this,ln.Ia,u)}E(wi,x);function Mn(u){const g=Vn();dt(g,new wi(g))}ln.STAT_EVENT="statevent";function Yn(u,g){x.call(this,ln.STAT_EVENT,u),this.stat=g}E(Yn,x);function rt(u){const g=Vn();dt(g,new Yn(g,u))}ln.Ja="timingevent";function It(u,g){x.call(this,ln.Ja,u),this.size=g}E(It,x);function ft(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},g)}function wn(){this.g=!0}wn.prototype.ua=function(){this.g=!1};function Je(u,g,v,S,U,W){u.info(function(){if(u.g)if(W){var ie="",Re=W.split("&");for(let Xe=0;Xe<Re.length;Xe++){var wt=Re[Xe].split("=");if(wt.length>1){const At=wt[0];wt=wt[1];const Rn=At.split("_");ie=Rn.length>=2&&Rn[1]=="type"?ie+(At+"="+wt+"&"):ie+(At+"=redacted&")}}}else ie=null;else ie=W;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+g+`
`+v+`
`+ie})}function sn(u,g,v,S,U,W,ie){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+g+`
`+v+`
`+W+" "+ie})}function Ln(u,g,v,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+hr(u,v)+(S?" "+S:"")})}function Ei(u,g){u.info(function(){return"TIMEOUT: "+g})}wn.prototype.info=function(){};function hr(u,g){if(!u.g)return g;if(!g)return null;try{const W=JSON.parse(g);if(W){for(u=0;u<W.length;u++)if(Array.isArray(W[u])){var v=W[u];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var U=S[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ie=1;ie<S.length;ie++)S[ie]=""}}}}return ur(W)}catch{return g}}var Qn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},jn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zr;function En(){}E(En,Kn),En.prototype.g=function(){return new XMLHttpRequest},zr=new En;function un(u){return encodeURIComponent(String(u))}function dr(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function cn(u,g,v,S){this.j=u,this.i=g,this.l=v,this.S=S||1,this.V=new lr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ti}function Ti(){this.i=null,this.g="",this.h=!1}var ds={},fs={};function Tn(u,g,v){u.M=1,u.A=qr(Fn(g)),u.u=v,u.R=!0,xe(u,null)}function xe(u,g){u.F=Date.now(),Dt(u),u.B=Fn(u.A);var v=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),_a(v.i,"t",S),u.C=0,v=u.j.L,u.h=new Ti,u.g=$l(u.j,v?g:null,!u.u),u.P>0&&(u.O=new eo(y(u.Y,u,u.g),u.P)),g=u.V,v=u.g,S=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(cs[0]=U.toString()),U=cs);for(let W=0;W<U.length;W++){const ie=de(v,U[W],S||g.handleEvent,!1,g.h||g);if(!ie)break;g.g[ie.key]=ie}g=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Mn(),Je(u.i,u.v,u.B,u.l,u.S,u.u)}cn.prototype.ba=function(u){u=u.target;const g=this.O;g&&_r(u)==3?g.j():this.Y(u)},cn.prototype.Y=function(u){try{if(u==this.g)e:{const Re=_r(this.g),wt=this.g.ya(),Xe=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Bl(this.g)))){this.K||Re!=4||wt==7||(wt==8||Xe<=0?Mn(3):Mn(2)),Si(this);var g=this.g.ca();this.X=g;var v=Ze(this);if(this.o=g==200,sn(this.i,this.v,this.B,this.l,this.S,Re,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,U=this.g;if((S=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var W=S;break t}}W=null}if(u=W)Ln(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,st(this,u);else{this.o=!1,this.m=3,rt(12),Hr(this),Wr(this);break e}}if(this.R){u=!0;let At;for(;!this.K&&this.C<v.length;)if(At=Kt(this,v),At==fs){Re==4&&(this.m=4,rt(14),u=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(At==ds){this.m=4,rt(15),Ln(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Ln(this.i,this.l,At,null),st(this,At);if(it(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||v.length!=0||this.h.h||(this.m=1,rt(16),u=!1),this.o=this.o&&u,!u)Ln(this.i,this.l,v,"[Invalid Chunked Response]"),Hr(this),Wr(this);else if(v.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ts(ie),ie.P=!0,rt(11))}}else Ln(this.i,this.l,v,null),st(this,v);Re==4&&Hr(this),this.o&&!this.K&&(Re==4?ho(this.j,this):(this.o=!1,Dt(this)))}else Ea(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,rt(12)):(this.m=0,rt(13)),Hr(this),Wr(this)}}}catch{}finally{}};function Ze(u){if(!it(u))return u.g.la();const g=Bl(u.g);if(g==="")return"";let v="";const S=g.length,U=_r(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Hr(u),Wr(u),"";u.h.i=new h.TextDecoder}for(let W=0;W<S;W++)u.h.h=!0,v+=u.h.i.decode(g[W],{stream:!(U&&W==S-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function it(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Kt(u,g){var v=u.C,S=g.indexOf(`
`,v);return S==-1?fs:(v=Number(g.substring(v,S)),isNaN(v)?ds:(S+=1,S+v>g.length?fs:(g=g.slice(S,S+v),u.C=S+v,g)))}cn.prototype.cancel=function(){this.K=!0,Hr(this)};function Dt(u){u.T=Date.now()+u.H,$r(u,u.H)}function $r(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ft(y(u.aa,u),g)}function Si(u){u.D&&(h.clearTimeout(u.D),u.D=null)}cn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ei(this.i,this.B),this.M!=2&&(Mn(),rt(17)),Hr(this),this.m=2,Wr(this)):$r(this,this.T-u)};function Wr(u){u.j.I==0||u.K||ho(u.j,u)}function Hr(u){Si(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,vi(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function st(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||da(v.h,u))){if(!u.L&&da(v.h,u)&&v.I==3){try{var S=v.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)co(v),Cn(v);else break e;Tr(v),rt(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ft(y(v.Va,v),6e3));ps(v.h)<=1&&v.ta&&(v.ta=void 0)}else kn(v,11)}else if((u.L||v.g==u)&&co(v),!C(g))for(U=v.Ba.g.parse(g),g=0;g<U.length;g++){let Xe=U[g];const At=Xe[0];if(!(At<=v.K))if(v.K=At,Xe=Xe[1],v.I==2)if(Xe[0]=="c"){v.M=Xe[1],v.ba=Xe[2];const Rn=Xe[3];Rn!=null&&(v.ka=Rn,v.j.info("VER="+v.ka));const Xr=Xe[4];Xr!=null&&(v.za=Xr,v.j.info("SVER="+v.za));const Sr=Xe[5];Sr!=null&&typeof Sr=="number"&&Sr>0&&(S=1.5*Sr,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Ir=u.g;if(Ir){const mo=Ir.g?Ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mo){var W=S.h;W.g||mo.indexOf("spdy")==-1&&mo.indexOf("quic")==-1&&mo.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ro(W,W.h),W.h=null))}if(S.G){const Ia=Ir.g?Ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(S.wa=Ia,Ye(S.J,S.G,Ia))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var ie=u;if(S.na=Sa(S,S.L?S.ba:null,S.W),ie.L){ms(S.h,ie);var Re=ie,wt=S.O;wt&&(Re.H=wt),Re.D&&(Si(Re),Dt(Re)),S.g=ie}else Yt(S);v.i.length>0&&Qr(v)}else Xe[0]!="stop"&&Xe[0]!="close"||kn(v,7);else v.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?kn(v,7):lo(v):Xe[0]!="noop"&&v.l&&v.l.qa(Xe),v.A=0)}}Mn(4)}catch{}}var ah=class{constructor(u,g){this.g=u,this.map=g}};function no(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ha(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ps(u){return u.h?1:u.g?u.g.size:0}function da(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function ro(u,g){u.g?u.g.add(g):u.h=g}function ms(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}no.prototype.cancel=function(){if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Sn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return P(u.i)}var Ll=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function In(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const S=u[v].indexOf("=");let U,W=null;S>=0?(U=u[v].substring(0,S),W=u[v].substring(S+1)):U=u[v],g(U,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function fr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof fr?(this.l=u.l,gs(this,u.j),this.o=u.o,this.g=u.g,pr(this,u.u),this.h=u.h,Ii(this,wa(u.i)),this.m=u.m):u&&(g=String(u).match(Ll))?(this.l=!1,gs(this,g[1]||"",!0),this.o=ys(g[2]||""),this.g=ys(g[3]||"",!0),pr(this,g[4]),this.h=ys(g[5]||"",!0),Ii(this,g[6]||"",!0),this.m=ys(g[7]||"")):(this.l=!1,this.i=new ze(null,this.l))}fr.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(vs(g,pa,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(vs(g,pa,!0),"@"),u.push(un(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(vs(v,v.charAt(0)=="/"?_s:ma,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",vs(v,ga)),u.join("")},fr.prototype.resolve=function(u){const g=Fn(this);let v=!!u.j;v?gs(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var S=u.h;if(v)pr(g,u.u);else if(v=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var U=g.h.lastIndexOf("/");U!=-1&&(S=g.h.slice(0,U+1)+S)}if(U=S,U==".."||U==".")S="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){S=U.lastIndexOf("/",0)==0,U=U.split("/");const W=[];for(let ie=0;ie<U.length;){const Re=U[ie++];Re=="."?S&&ie==U.length&&W.push(""):Re==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),S&&ie==U.length&&W.push("")):(W.push(Re),S=!0)}S=W.join("/")}else S=U}return v?g.h=S:v=u.i.toString()!=="",v?Ii(g,wa(u.i)):v=!!u.m,v&&(g.m=u.m),g};function Fn(u){return new fr(u)}function gs(u,g,v){u.j=v?ys(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function pr(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Ii(u,g,v){g instanceof ze?(u.i=g,so(u.i,u.l)):(v||(g=vs(g,lh)),u.i=new ze(g,u.l))}function Ye(u,g,v){u.i.set(g,v)}function qr(u){return Ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ys(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function vs(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,fa),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var pa=/[#\/\?@]/g,ma=/[#\?:]/g,_s=/[#\?]/g,lh=/[#\?@]/g,ga=/#/g;function ze(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function mr(u){u.g||(u.g=new Map,u.h=0,u.i&&In(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=ze.prototype,n.add=function(u,g){mr(this),this.i=null,u=gr(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function ya(u,g){mr(u),g=gr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function io(u,g){return mr(u),g=gr(u,g),u.g.has(g)}n.forEach=function(u,g){mr(this),this.g.forEach(function(v,S){v.forEach(function(U){u.call(g,U,S,this)},this)},this)};function va(u,g){mr(u);let v=[];if(typeof g=="string")io(u,g)&&(v=v.concat(u.g.get(gr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}n.set=function(u,g){return mr(this),this.i=null,u=gr(this,u),io(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=va(this,u),u.length>0?String(u[0]):g):g};function _a(u,g,v){ya(u,g),v.length>0&&(u.i=null,u.g.set(gr(u,g),P(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var v=g[S];const U=un(v);v=va(this,v);for(let W=0;W<v.length;W++){let ie=U;v[W]!==""&&(ie+="="+un(v[W])),u.push(ie)}}return this.i=u.join("&")};function wa(u){const g=new ze;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function gr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function so(u,g){g&&!u.j&&(mr(u),u.i=null,u.g.forEach(function(v,S){const U=S.toLowerCase();S!=U&&(ya(this,S),_a(this,U,v))},u)),u.j=g}function yr(u,g){const v=new wn;if(h.Image){const S=new Image;S.onload=_(Ut,v,"TestLoadImage: loaded",!0,g,S),S.onerror=_(Ut,v,"TestLoadImage: error",!1,g,S),S.onabort=_(Ut,v,"TestLoadImage: abort",!1,g,S),S.ontimeout=_(Ut,v,"TestLoadImage: timeout",!1,g,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function vr(u,g){const v=new wn,S=new AbortController,U=setTimeout(()=>{S.abort(),Ut(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(W=>{clearTimeout(U),W.ok?Ut(v,"TestPingServer: ok",!0,g):Ut(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),Ut(v,"TestPingServer: error",!1,g)})}function Ut(u,g,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function ws(){this.g=new cr}function Gr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Gr,Kn),Gr.prototype.g=function(){return new An(this.i,this.h)};function An(u,g){ht.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(An,ht),n=An.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Xn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||h).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function jl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ai(this):Xn(this),this.readyState==3&&jl(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Ai(this))},n.Na=function(u){this.g&&(this.response=u,Ai(this))},n.ga=function(){this.g&&Ai(this)};function Ai(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Xn(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Xn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(An.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Fl(u){let g="";return ue(u,function(v,S){g+=S,g+=":",g+=v,g+=`\r
`}),g}function oo(u,g,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Fl(v),typeof u=="string"?v!=null&&un(v):Ye(u,g,v))}function et(u){ht.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(et,ht);var Ul=/^https?$/i,uh=["POST","PUT"];n=et.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zr.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(W){Ci(this,W);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())v.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),U=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(uh,g,void 0)>=0)||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ie]of v)this.g.setRequestHeader(W,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(W){Ci(this,W)}};function Ci(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,ki(u),Yr(u)}function ki(u){u.A||(u.A=!0,dt(u,"complete"),dt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,dt(this,"complete"),dt(this,"abort"),Yr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Kr(this):this.Xa())},n.Xa=function(){Kr(this)};function Kr(u){if(u.h&&typeof l<"u"){if(u.v&&_r(u)==4)setTimeout(u.Ca.bind(u),0);else if(dt(u,"readystatechange"),_r(u)==4){u.h=!1;try{const W=u.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var S;if(S=W===0){let ie=String(u.D).match(Ll)[1]||null;!ie&&h.self&&h.self.location&&(ie=h.self.location.protocol.slice(0,-1)),S=!Ul.test(ie?ie.toLowerCase():"")}v=S}if(v)dt(u,"complete"),dt(u,"success");else{u.o=6;try{var U=_r(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",ki(u)}}finally{Yr(u)}}}}function Yr(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||dt(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function _r(u){return u.g?u.g.readyState:0}n.ca=function(){try{return _r(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),_i(g)}};function Bl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ea(u){const g={};u=(u.g&&_r(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(C(u[S]))continue;var v=dr(u[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=g[U]||[];g[U]=W,W.push(v)}te(g,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function ao(u){this.za=0,this.i=[],this.j=new wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wr("baseRetryDelayMs",5e3,u),this.Za=wr("retryDelaySeedMs",1e4,u),this.Ta=wr("forwardChannelMaxRetries",2,u),this.va=wr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new no(u&&u.concurrentRequestLimit),this.Ba=new ws,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ao.prototype,n.ka=8,n.I=1,n.connect=function(u,g,v,S){rt(0),this.W=u,this.H=g||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Sa(this,null,this.W),Qr(this)};function lo(u){if(uo(u),u.I==3){var g=u.V++,v=Fn(u.J);if(Ye(v,"SID",u.M),Ye(v,"RID",g),Ye(v,"TYPE","terminate"),Er(u,v),g=new cn(u,u.j,g),g.M=2,g.A=qr(Fn(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=g.A,v=!0),v||(g.g=$l(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Dt(g)}Ss(u)}function Cn(u){u.g&&(Ts(u),u.g.cancel(),u.g=null)}function uo(u){Cn(u),u.v&&(h.clearTimeout(u.v),u.v=null),co(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Qr(u){if(!ha(u.h)&&!u.m){u.m=!0;var g=u.Ea;be||A(),ye||(be(),ye=!0),D.add(g,u),u.D=0}}function zl(u,g){return ps(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ft(y(u.Ea,u,g),fo(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new cn(this,this.j,u);let W=this.o;if(this.U&&(W?(W=M(W),Te(W,this.U)):W=this.U),this.u!==null||this.R||(U.J=W,W=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Ta(this,U,g),v=Fn(this.J),Ye(v,"RID",u),Ye(v,"CVER",22),this.G&&Ye(v,"X-HTTP-Session-Id",this.G),Er(this,v),W&&(this.R?g="headers="+un(Fl(W))+"&"+g:this.u&&oo(v,this.u,W)),ro(this.h,U),this.Ra&&Ye(v,"TYPE","init"),this.S?(Ye(v,"$req",g),Ye(v,"SID","null"),U.U=!0,Tn(U,v,null)):Tn(U,v,g),this.I=2}}else this.I==3&&(u?Es(this,u):this.i.length==0||ha(this.h)||Es(this))};function Es(u,g){var v;g?v=g.l:v=u.V++;const S=Fn(u.J);Ye(S,"SID",u.M),Ye(S,"RID",v),Ye(S,"AID",u.K),Er(u,S),u.u&&u.o&&oo(S,u.u,u.o),v=new cn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Ta(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ro(u.h,v),Tn(v,S,g)}function Er(u,g){u.H&&ue(u.H,function(v,S){Ye(g,S,v)}),u.l&&ue({},function(v,S){Ye(g,S,v)})}function Ta(u,g,v){v=Math.min(u.i.length,v);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var U=u.i;let Re=-1;for(;;){const wt=["count="+v];Re==-1?v>0?(Re=U[0].g,wt.push("ofs="+Re)):Re=0:wt.push("ofs="+Re);let Xe=!0;for(let At=0;At<v;At++){var W=U[At].g;const Rn=U[At].map;if(W-=Re,W<0)Re=Math.max(0,U[At].g-100),Xe=!1;else try{W="req"+W+"_"||"";try{var ie=Rn instanceof Map?Rn:Object.entries(Rn);for(const[Xr,Sr]of ie){let Ir=Sr;f(Sr)&&(Ir=ur(Sr)),wt.push(W+Xr+"="+encodeURIComponent(Ir))}}catch(Xr){throw wt.push(W+"type="+encodeURIComponent("_badmap")),Xr}}catch{S&&S(Rn)}}if(Xe){ie=wt.join("&");break e}}ie=void 0}return u=u.i.splice(0,v),g.G=u,ie}function Yt(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;be||A(),ye||(be(),ye=!0),D.add(g,u),u.A=0}}function Tr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ft(y(u.Da,u),fo(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Ri(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ft(y(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rt(10),Cn(this),Ri(this))};function Ts(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Ri(u){u.g=new cn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Fn(u.na);Ye(g,"RID","rpc"),Ye(g,"SID",u.M),Ye(g,"AID",u.K),Ye(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ye(g,"TO",u.ia),Ye(g,"TYPE","xmlhttp"),Er(u,g),u.u&&u.o&&oo(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=qr(Fn(g)),v.u=null,v.R=!0,xe(v,u)}n.Va=function(){this.C!=null&&(this.C=null,Cn(this),Tr(this),rt(19))};function co(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function ho(u,g){var v=null;if(u.g==g){co(u),Ts(u),u.g=null;var S=2}else if(da(u.h,g))v=g.G,ms(u.h,g),S=1;else return;if(u.I!=0){if(g.o)if(S==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var U=u.D;S=Vn(),dt(S,new It(S,v)),Qr(u)}else Yt(u);else if(U=g.m,U==3||U==0&&g.X>0||!(S==1&&zl(u,g)||S==2&&Tr(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),U){case 1:kn(u,5);break;case 4:kn(u,10);break;case 3:kn(u,6);break;default:kn(u,2)}}}function fo(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function kn(u,g){if(u.j.info("Error code "+g),g==2){var v=y(u.bb,u),S=u.Ua;const U=!S;S=new fr(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||gs(S,"https"),qr(S),U?yr(S.toString(),v):vr(S.toString(),v)}else rt(2);u.I=0,u.l&&u.l.pa(g),Ss(u),uo(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Ss(u){if(u.I=0,u.ja=[],u.l){const g=Sn(u.h);(g.length!=0||u.i.length!=0)&&(z(u.ja,g),z(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function Sa(u,g,v){var S=v instanceof fr?Fn(v):new fr(v);if(S.g!="")g&&(S.g=g+"."+S.g),pr(S,S.u);else{var U=h.location;S=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;const W=new fr(null);S&&gs(W,S),g&&(W.g=g),U&&pr(W,U),v&&(W.h=v),S=W}return v=u.G,g=u.wa,v&&g&&Ye(S,v,g),Ye(S,"VER",u.ka),Er(u,S),S}function $l(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new et(new Gr({ab:v})):new et(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wl(){}n=Wl.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function po(){}po.prototype.g=function(u,g){return new Bt(u,g)};function Bt(u,g){ht.call(this),this.g=new ao(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Pi(this)}E(Bt,ht),Bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){lo(this.g)},Bt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=ur(u),u=v);g.i.push(new ah(g.Ya++,u)),g.I==3&&Qr(g)},Bt.prototype.N=function(){this.g.l=null,delete this.j,lo(this.g),delete this.g,Bt.Z.N.call(this)};function Hl(u){Ur.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}E(Hl,Ur);function ql(){hs.call(this),this.status=1}E(ql,hs);function Pi(u){this.g=u}E(Pi,Wl),Pi.prototype.ra=function(){dt(this.g,"a")},Pi.prototype.qa=function(u){dt(this.g,new Hl(u))},Pi.prototype.pa=function(u){dt(this.g,new ql)},Pi.prototype.oa=function(){dt(this.g,"b")},po.prototype.createWebChannel=po.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,P_=function(){return new po},R_=function(){return Vn()},k_=ln,df={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qn.NO_ERROR=0,Qn.TIMEOUT=8,Qn.HTTP_ERROR=6,Ju=Qn,jn.COMPLETE="complete",C_=jn,to.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",ht.prototype.listen=ht.prototype.J,el=to,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,A_=et}).apply(typeof Uu<"u"?Uu:typeof self<"u"?self:typeof window<"u"?window:{});const Dy="@firebase/firestore",Ny="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new Jf("@firebase/firestore");function Mo(){return Hs.logLevel}function le(n,...e){if(Hs.logLevel<=Fe.DEBUG){const t=e.map(tp);Hs.debug(`Firestore (${ia}): ${n}`,...t)}}function hi(n,...e){if(Hs.logLevel<=Fe.ERROR){const t=e.map(tp);Hs.error(`Firestore (${ia}): ${n}`,...t)}}function Yo(n,...e){if(Hs.logLevel<=Fe.WARN){const t=e.map(tp);Hs.warn(`Firestore (${ia}): ${n}`,...t)}}function tp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,D_(n,i,t)}function D_(n,e,t){let i=`FIRESTORE (${ia}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw hi(i),new Error(i)}function Qe(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||D_(e,o,i)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class _I{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class wI{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Zi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Zi,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},f=m=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Zi)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new N_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class EI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new EI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,le("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=II(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ue(n,e){return n<e?-1:n>e?1:0}function ff(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),l=e.charAt(i);if(o!==l)return Bd(o)===Bd(l)?Ue(o,l):Bd(o)?1:-1}return Ue(n.length,e.length)}const AI=55296,CI=57343;function Bd(n){const e=n.charCodeAt(0);return e>=AI&&e<=CI}function Qo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="__name__";class Nr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Nr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Nr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ue(e.length,t.length)}static compareSegments(e,t){const i=Nr.isNumericId(e),o=Nr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Nr.extractNumericId(e).compare(Nr.extractNumericId(t)):ff(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ji.fromString(e.substring(4,e.length-2))}}class gt extends Nr{construct(e,t,i){return new gt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new gt(t)}static emptyPath(){return new gt([])}}const kI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Nr{construct(e,t,i){return new Ht(e,t,i)}static isValidIdentifier(e){return kI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===by}static keyField(){return new Ht([by])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ge(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ge(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ge(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ge(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(t)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(gt.fromString(e))}static fromName(e){return new we(gt.fromString(e).popFirst(5))}static empty(){return new we(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(n,e,t){if(!t)throw new ge(Q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PI(n,e,t,i){if(e===!0&&i===!0)throw new ge(Q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Oy(n){if(!we.isDocumentKey(n))throw new ge(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function x_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function rp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function es(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rp(n);throw new ge(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Al(n,e){if(!x_(n))throw new ge(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const h=n[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ge(Q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=-62135596800,My=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*My);return new lt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Vy)throw new ge(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/My}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Al(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Rt("string",lt._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new lt(0,0))}static max(){return new ke(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=-1;function DI(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(i===1e9?new lt(t+1,0):new lt(t,i));return new ts(o,we.empty(),e)}function NI(n){return new ts(n.readTime,n.key,dl)}class ts{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ts(ke.min(),we.empty(),dl)}static max(){return new ts(ke.max(),we.empty(),dl)}}function xI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(n){if(n.code!==Q.FAILED_PRECONDITION||n.message!==bI)throw n;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,i)=>{t(e)}))}static reject(e){return new G(((t,i)=>{i(e)}))}static waitFor(e){return new G(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(m=>i(m)))})),h=!0,l===o&&t()}))}static or(e){let t=G.resolve(!1);for(const i of e)t=t.next((o=>o?G.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new G(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let m=0;m<l;m++){const y=m;t(e[y]).next((_=>{h[y]=_,++f,f===l&&i(h)}),(_=>o(_)))}}))}static doWhile(e,t){return new G(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function VI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=-1;function Lc(n){return n==null}function dc(n){return n===0&&1/n==-1/0}function MI(n){return typeof n=="number"&&Number.isInteger(n)&&!dc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="";function LI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ly(e)),e=jI(n.get(t),e);return Ly(e)}function jI(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case b_:t+="";break;default:t+=l}}return t}function Ly(n){return n+b_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ks(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function O_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bu(this.root,e,this.comparator,!0)}}class Bu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Wt.RED,this.left=o??Wt.EMPTY,this.right=l??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Wt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Wt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fy(this.data.getIterator())}getIteratorFrom(e){return new Fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Vt(this.comparator);return t.data=e,t}}class Fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new sr([])}unionWith(e){let t=new Vt(Ht.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new V_("Invalid base64 string: "+l):l}})(e);return new Gt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const FI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=FI.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rs(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="server_timestamp",L_="__type__",j_="__previous_value__",F_="__local_write_time__";function sp(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[L_])==null?void 0:i.stringValue)===M_}function jc(n){const e=n.mapValue.fields[j_];return sp(e)?jc(e):e}function fl(n){const e=ns(n.mapValue.fields[F_].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,t,i,o,l,h,f,m,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=y,this.isUsingEmulator=_}}const fc="(default)";class pl{constructor(e,t){this.projectId=e,this.database=t||fc}static empty(){return new pl("","")}get isDefaultDatabase(){return this.database===fc}isEqual(e){return e instanceof pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="__type__",BI="__max__",zu={mapValue:{}},B_="__vector__",pc="value";function is(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sp(n)?4:$I(n)?9007199254740991:zI(n)?10:11:Ie(28295,{value:n})}function Lr(n,e){if(n===e)return!0;const t=is(n);if(t!==is(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fl(n).isEqual(fl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=ns(o.timestampValue),f=ns(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return rs(o.bytesValue).isEqual(rs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Tt(o.geoPointValue.latitude)===Tt(l.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Tt(o.integerValue)===Tt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=Tt(o.doubleValue),f=Tt(l.doubleValue);return h===f?dc(h)===dc(f):isNaN(h)&&isNaN(f)}return!1})(n,e);case 9:return Qo(n.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(jy(h)!==jy(f))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(f[m]===void 0||!Lr(h[m],f[m])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function ml(n,e){return(n.values||[]).find((t=>Lr(t,e)))!==void 0}function Xo(n,e){if(n===e)return 0;const t=is(n),i=is(e);if(t!==i)return Ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=Tt(l.integerValue||l.doubleValue),m=Tt(h.integerValue||h.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return Uy(n.timestampValue,e.timestampValue);case 4:return Uy(fl(n),fl(e));case 5:return ff(n.stringValue,e.stringValue);case 6:return(function(l,h){const f=rs(l),m=rs(h);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),m=h.split("/");for(let y=0;y<f.length&&y<m.length;y++){const _=Ue(f[y],m[y]);if(_!==0)return _}return Ue(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Ue(Tt(l.latitude),Tt(h.latitude));return f!==0?f:Ue(Tt(l.longitude),Tt(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return By(n.arrayValue,e.arrayValue);case 10:return(function(l,h){var I,P,z,L;const f=l.fields||{},m=h.fields||{},y=(I=f[pc])==null?void 0:I.arrayValue,_=(P=m[pc])==null?void 0:P.arrayValue,E=Ue(((z=y==null?void 0:y.values)==null?void 0:z.length)||0,((L=_==null?void 0:_.values)==null?void 0:L.length)||0);return E!==0?E:By(y,_)})(n.mapValue,e.mapValue);case 11:return(function(l,h){if(l===zu.mapValue&&h===zu.mapValue)return 0;if(l===zu.mapValue)return 1;if(h===zu.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),y=h.fields||{},_=Object.keys(y);m.sort(),_.sort();for(let E=0;E<m.length&&E<_.length;++E){const I=ff(m[E],_[E]);if(I!==0)return I;const P=Xo(f[m[E]],y[_[E]]);if(P!==0)return P}return Ue(m.length,_.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function Uy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=ns(n),i=ns(e),o=Ue(t.seconds,i.seconds);return o!==0?o:Ue(t.nanos,i.nanos)}function By(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Xo(t[o],i[o]);if(l)return l}return Ue(t.length,i.length)}function Jo(n){return pf(n)}function pf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ns(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return rs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=pf(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${pf(t.fields[h])}`;return o+"}"})(n.mapValue):Ie(61005,{value:n})}function Zu(n){switch(is(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jc(n);return e?16+Zu(e):16;case 5:return 2*n.stringValue.length;case 6:return rs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Zu(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Ks(i.fields,((l,h)=>{o+=l.length+Zu(h)})),o})(n.mapValue);default:throw Ie(13486,{value:n})}}function mf(n){return!!n&&"integerValue"in n}function op(n){return!!n&&"arrayValue"in n}function zy(n){return!!n&&"nullValue"in n}function $y(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ec(n){return!!n&&"mapValue"in n}function zI(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[U_])==null?void 0:i.stringValue)===B_}function ol(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ks(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ol(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ol(n.arrayValue.values[t]);return e}return{...n}}function $I(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===BI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ol(t)}setAll(e){let t=Ht.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=ol(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ec(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ks(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new qn(ol(this.value))}}function z_(n){const e=[];return Ks(n.fields,((t,i)=>{const o=new Ht([t]);if(ec(i)){const l=z_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new nn(e,0,ke.min(),ke.min(),ke.min(),qn.empty(),0)}static newFoundDocument(e,t,i,o){return new nn(e,1,t,ke.min(),i,o,0)}static newNoDocument(e,t){return new nn(e,2,t,ke.min(),ke.min(),qn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,ke.min(),ke.min(),qn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.position=e,this.inclusive=t}}function Wy(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(l.field.isKeyField()?i=we.comparator(we.fromName(h.referenceValue),t.key):i=Xo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Hy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function WI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{}class bt extends $_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new qI(e,t,i):t==="array-contains"?new YI(e,i):t==="in"?new QI(e,i):t==="not-in"?new XI(e,i):t==="array-contains-any"?new JI(e,i):new bt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new GI(e,i):new KI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xo(t,this.value)):t!==null&&is(this.value)===is(t)&&this.matchesComparison(Xo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jr extends $_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new jr(e,t)}matches(e){return W_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function W_(n){return n.op==="and"}function H_(n){return HI(n)&&W_(n)}function HI(n){for(const e of n.filters)if(e instanceof jr)return!1;return!0}function gf(n){if(n instanceof bt)return n.field.canonicalString()+n.op.toString()+Jo(n.value);if(H_(n))return n.filters.map((e=>gf(e))).join(",");{const e=n.filters.map((t=>gf(t))).join(",");return`${n.op}(${e})`}}function q_(n,e){return n instanceof bt?(function(i,o){return o instanceof bt&&i.op===o.op&&i.field.isEqual(o.field)&&Lr(i.value,o.value)})(n,e):n instanceof jr?(function(i,o){return o instanceof jr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&q_(h,o.filters[f])),!0):!1})(n,e):void Ie(19439)}function G_(n){return n instanceof bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Jo(t.value)}`})(n):n instanceof jr?(function(t){return t.op.toString()+" {"+t.getFilters().map(G_).join(" ,")+"}"})(n):"Filter"}class qI extends bt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class GI extends bt{constructor(e,t){super(e,"in",t),this.keys=K_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class KI extends bt{constructor(e,t){super(e,"not-in",t),this.keys=K_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function K_(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>we.fromName(i.referenceValue)))}class YI extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return op(t)&&ml(t.arrayValue,this.value)}}class QI extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ml(this.value.arrayValue,t)}}class XI extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ml(this.value.arrayValue,t)}}class JI extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!op(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>ml(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function qy(n,e=null,t=[],i=[],o=null,l=null,h=null){return new ZI(n,e,t,i,o,l,h)}function ap(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>gf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Lc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Jo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Jo(i))).join(",")),e.Te=t}return e.Te}function lp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!WI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!q_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Hy(n.startAt,e.startAt)&&Hy(n.endAt,e.endAt)}function yf(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function e1(n,e,t,i,o,l,h,f){return new Fc(n,e,t,i,o,l,h,f)}function Uc(n){return new Fc(n)}function Gy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function t1(n){return n.collectionGroup!==null}function al(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Vt(Ht.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new gc(l,i))})),t.has(Ht.keyField().canonicalString())||e.Ie.push(new gc(Ht.keyField(),i))}return e.Ie}function xr(n){const e=Pe(n);return e.Ee||(e.Ee=n1(e,al(n))),e.Ee}function n1(n,e){if(n.limitType==="F")return qy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new gc(o.field,l)}));const t=n.endAt?new mc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new mc(n.startAt.position,n.startAt.inclusive):null;return qy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function vf(n,e,t){return new Fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bc(n,e){return lp(xr(n),xr(e))&&n.limitType===e.limitType}function Y_(n){return`${ap(xr(n))}|lt:${n.limitType}`}function Lo(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>G_(o))).join(", ")}]`),Lc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Jo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Jo(o))).join(",")),`Target(${i})`})(xr(n))}; limitType=${n.limitType})`}function zc(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):we.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of al(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,m){const y=Wy(h,f,m);return h.inclusive?y<=0:y<0})(i.startAt,al(i),o)||i.endAt&&!(function(h,f,m){const y=Wy(h,f,m);return h.inclusive?y>=0:y>0})(i.endAt,al(i),o))})(n,e)}function r1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Q_(n){return(e,t)=>{let i=!1;for(const o of al(n)){const l=i1(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function i1(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):(function(l,h,f){const m=h.data.field(l),y=f.data.field(l);return m!==null&&y!==null?Xo(m,y):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return O_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=new yt(we.comparator);function di(){return s1}const X_=new yt(we.comparator);function tl(...n){let e=X_;for(const t of n)e=e.insert(t.key,t);return e}function J_(n){let e=X_;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ls(){return ll()}function Z_(){return ll()}function ll(){return new Ys((n=>n.toString()),((n,e)=>n.isEqual(e)))}const o1=new yt(we.comparator),a1=new Vt(we.comparator);function Be(...n){let e=a1;for(const t of n)e=e.add(t);return e}const l1=new Vt(Ue);function u1(){return l1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(e)?"-0":e}}function ew(n){return{integerValue:""+n}}function c1(n,e){return MI(e)?ew(e):up(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(){this._=void 0}}function h1(n,e,t){return n instanceof yc?(function(o,l){const h={fields:{[L_]:{stringValue:M_},[F_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&sp(l)&&(l=jc(l)),l&&(h.fields[j_]=l),{mapValue:h}})(t,e):n instanceof gl?nw(n,e):n instanceof yl?rw(n,e):(function(o,l){const h=tw(o,l),f=Ky(h)+Ky(o.Ae);return mf(h)&&mf(o.Ae)?ew(f):up(o.serializer,f)})(n,e)}function d1(n,e,t){return n instanceof gl?nw(n,e):n instanceof yl?rw(n,e):t}function tw(n,e){return n instanceof vc?(function(i){return mf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class yc extends $c{}class gl extends $c{constructor(e){super(),this.elements=e}}function nw(n,e){const t=iw(e);for(const i of n.elements)t.some((o=>Lr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class yl extends $c{constructor(e){super(),this.elements=e}}function rw(n,e){let t=iw(e);for(const i of n.elements)t=t.filter((o=>!Lr(o,i)));return{arrayValue:{values:t}}}class vc extends $c{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ky(n){return Tt(n.integerValue||n.doubleValue)}function iw(n){return op(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function f1(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof gl&&o instanceof gl||i instanceof yl&&o instanceof yl?Qo(i.elements,o.elements,Lr):i instanceof vc&&o instanceof vc?Lr(i.Ae,o.Ae):i instanceof yc&&o instanceof yc})(n.transform,e.transform)}class p1{constructor(e,t){this.version=e,this.transformResults=t}}class ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Wc{}function sw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new aw(n.key,ui.none()):new Cl(n.key,n.data,ui.none());{const t=n.data,i=qn.empty();let o=new Vt(Ht.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Qs(n.key,i,new sr(o.toArray()),ui.none())}}function m1(n,e,t){n instanceof Cl?(function(o,l,h){const f=o.value.clone(),m=Qy(o.fieldTransforms,l,h.transformResults);f.setAll(m),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Qs?(function(o,l,h){if(!tc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Qy(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(ow(o)),m.setAll(f),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(n,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function ul(n,e,t,i){return n instanceof Cl?(function(l,h,f,m){if(!tc(l.precondition,h))return f;const y=l.value.clone(),_=Xy(l.fieldTransforms,m,h);return y.setAll(_),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Qs?(function(l,h,f,m){if(!tc(l.precondition,h))return f;const y=Xy(l.fieldTransforms,m,h),_=h.data;return _.setAll(ow(l)),_.setAll(y),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,h,f){return tc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(n,e,t)}function g1(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=tw(i.transform,o||null);l!=null&&(t===null&&(t=qn.empty()),t.set(i.field,l))}return t||null}function Yy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Qo(i,o,((l,h)=>f1(l,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Cl extends Wc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Qs extends Wc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ow(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Qy(n,e,t){const i=new Map;Qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,d1(h,f,t[o]))}return i}function Xy(n,e,t){const i=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);i.set(o.field,h1(l,h,e))}return i}class aw extends Wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y1 extends Wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&m1(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ul(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ul(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Z_();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const m=sw(h,f);m!==null&&i.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,((t,i)=>Yy(t,i)))&&Qo(this.baseMutations,e.baseMutations,((t,i)=>Yy(t,i)))}}class cp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return o1})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new cp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,We;function E1(n){switch(n){case Q.OK:return Ie(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function lw(n){if(n===void 0)return hi("GRPC error has no .code"),Q.UNKNOWN;switch(n){case kt.OK:return Q.OK;case kt.CANCELLED:return Q.CANCELLED;case kt.UNKNOWN:return Q.UNKNOWN;case kt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case kt.INTERNAL:return Q.INTERNAL;case kt.UNAVAILABLE:return Q.UNAVAILABLE;case kt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case kt.NOT_FOUND:return Q.NOT_FOUND;case kt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case kt.ABORTED:return Q.ABORTED;case kt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case kt.DATA_LOSS:return Q.DATA_LOSS;default:return Ie(39323,{code:n})}}(We=kt||(kt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=new Ji([4294967295,4294967295],0);function Jy(n){const e=T1().encode(n),t=new I_;return t.update(e),new Uint8Array(t.digest())}function Zy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ji([t,i],0),new Ji([o,l],0)]}class hp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new nl(`Invalid padding: ${t}`);if(i<0)throw new nl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new nl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new nl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ji.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ji.fromNumber(i)));return o.compare(S1)===1&&(o=new Ji([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Jy(e),[i,o]=Zy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new hp(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=Jy(e),[i,o]=Zy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,kl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Hc(ke.min(),o,new yt(Ue),di(),Be())}}class kl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new kl(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class uw{constructor(e,t){this.targetId=e,this.Ce=t}}class cw{constructor(e,t,i=Gt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class ev{constructor(){this.ve=0,this.Fe=tv(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie(38017,{changeType:l})}})),new kl(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=tv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class I1{constructor(e){this.Ge=e,this.ze=new Map,this.je=di(),this.Je=$u(),this.He=$u(),this.Ye=new yt(Ue)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(yf(l))if(i===0){const h=new we(l.path);this.et(t,h,nn.newNoDocument(h,ke.min()))}else Qe(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const f=this.ut(e),m=f?this.ct(f,e,h):1;if(m!==0){this.it(t);const y=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=rs(i).toUint8Array()}catch(m){if(m instanceof V_)return Yo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new hp(h,o,l)}catch(m){return Yo(m instanceof nl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&yf(f.target)){const m=new we(f.target.path);this.It(m).has(h)||this.Et(h,m)||this.et(h,m,nn.newNoDocument(m,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=Be();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((m=>{const y=this.ot(m);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Hc(e,t,this.Ye,this.je,i);return this.je=di(),this.Je=$u(),this.He=$u(),this.Ye=new yt(Ue),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ev,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Vt(Ue),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Vt(Ue),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ev),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function $u(){return new yt(we.comparator)}function tv(){return new yt(we.comparator)}const A1={asc:"ASCENDING",desc:"DESCENDING"},C1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k1={and:"AND",or:"OR"};class R1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _f(n,e){return n.useProto3Json||Lc(e)?e:{value:e}}function _c(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function P1(n,e){return _c(n,e.toTimestamp())}function br(n){return Qe(!!n,49232),ke.fromTimestamp((function(t){const i=ns(t);return new lt(i.seconds,i.nanos)})(n))}function dp(n,e){return wf(n,e).canonicalString()}function wf(n,e){const t=(function(o){return new gt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function dw(n){const e=gt.fromString(n);return Qe(yw(e),10190,{key:e.toString()}),e}function Ef(n,e){return dp(n.databaseId,e.path)}function zd(n,e){const t=dw(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(pw(t))}function fw(n,e){return dp(n.databaseId,e)}function D1(n){const e=dw(n);return e.length===4?gt.emptyPath():pw(e)}function Tf(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pw(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function nv(n,e,t){return{name:Ef(n,e),fields:t.value.mapValue.fields}}function N1(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(Qe(_===void 0||typeof _=="string",58123),Gt.fromBase64String(_||"")):(Qe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Gt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const _=y.code===void 0?Q.UNKNOWN:lw(y.code);return new ge(_,y.message||"")})(h);t=new cw(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=zd(n,i.document.name),l=br(i.document.updateTime),h=i.document.createTime?br(i.document.createTime):ke.min(),f=new qn({mapValue:{fields:i.document.fields}}),m=nn.newFoundDocument(o,l,h,f),y=i.targetIds||[],_=i.removedTargetIds||[];t=new nc(y,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=zd(n,i.document),l=i.readTime?br(i.readTime):ke.min(),h=nn.newNoDocument(o,l),f=i.removedTargetIds||[];t=new nc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=zd(n,i.document),l=i.removedTargetIds||[];t=new nc([],l,o,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new w1(o,l),f=i.targetId;t=new uw(f,h)}}return t}function x1(n,e){let t;if(e instanceof Cl)t={update:nv(n,e.key,e.value)};else if(e instanceof aw)t={delete:Ef(n,e.key)};else if(e instanceof Qs)t={update:nv(n,e.key,e.data),updateMask:B1(e.fieldMask)};else{if(!(e instanceof y1))return Ie(16599,{Vt:e.type});t={verify:Ef(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof yc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof gl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof yl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof vc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw Ie(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:P1(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie(27497)})(n,e.precondition)),t}function b1(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(o,l){let h=o.updateTime?br(o.updateTime):br(l);return h.isEqual(ke.min())&&(h=br(l)),new p1(h,o.transformResults||[])})(t,e)))):[]}function O1(n,e){return{documents:[fw(n,e.path)]}}function V1(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=fw(n,o);const l=(function(y){if(y.length!==0)return gw(jr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((_=>(function(I){return{field:jo(I.field),direction:j1(I.dir)}})(_)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=_f(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function M1(n){let e=D1(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Qe(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const I=mw(E);return I instanceof jr&&H_(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((I=>(function(z){return new gc(Fo(z.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let I;return I=typeof E=="object"?E.value:E,Lc(I)?null:I})(t.limit));let m=null;t.startAt&&(m=(function(E){const I=!!E.before,P=E.values||[];return new mc(P,I)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const I=!E.before,P=E.values||[];return new mc(P,I)})(t.endAt)),e1(e,o,h,l,f,"F",m,y)}function L1(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Fo(t.unaryFilter.field);return bt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Fo(t.unaryFilter.field);return bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Fo(t.unaryFilter.field);return bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Fo(t.unaryFilter.field);return bt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return bt.create(Fo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return jr.create(t.compositeFilter.filters.map((i=>mw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function j1(n){return A1[n]}function F1(n){return C1[n]}function U1(n){return k1[n]}function jo(n){return{fieldPath:n.canonicalString()}}function Fo(n){return Ht.fromServerFormat(n.fieldPath)}function gw(n){return n instanceof bt?(function(t){if(t.op==="=="){if($y(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NAN"}};if(zy(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($y(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NAN"}};if(zy(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(t.field),op:F1(t.op),value:t.value}}})(n):n instanceof jr?(function(t){const i=t.getFilters().map((o=>gw(o)));return i.length===1?i[0]:{compositeFilter:{op:U1(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function B1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t,i,o,l=ke.min(),h=ke.min(),f=Gt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.yt=e}}function $1(n){const e=M1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.Cn=new H1}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(ts.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class H1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Vt(gt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Vt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vw=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(vw,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zo(0)}static cr(){return new Zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="LruGarbageCollector",q1=1048576;function sv([n,e],[t,i]){const o=Ue(n,t);return o===0?Ue(e,i):o}class G1{constructor(e){this.Ir=e,this.buffer=new Vt(sv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();sv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class K1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(iv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){oa(t)?le(iv,"Ignoring IndexedDB error during garbage collection: ",t):await sa(t)}await this.Vr(3e5)}))}}class Y1{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Mc.ce);const i=new G1(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(rv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,f,m,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,f=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),Mo()<=Fe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(y-m)+`ms
Total Duration: ${y-_}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function Q1(n,e){return new Y1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.changes=new Ys((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ul(i.mutation,o,sr.empty(),lt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const o=Ls();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=tl();return l.forEach(((f,m)=>{h=h.insert(f,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Ls();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=di();const h=ll(),f=(function(){return ll()})();return t.forEach(((m,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Qs)?l=l.insert(y.key,y):_!==void 0?(h.set(y.key,_.mutation.getFieldMask()),ul(_.mutation,y,_.mutation.getFieldMask(),lt.now())):h.set(y.key,sr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((y,_)=>h.set(y,_))),t.forEach(((y,_)=>f.set(y,new J1(_,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=ll();let o=new yt(((h,f)=>h-f)),l=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((m=>{const y=t.get(m);if(y===null)return;let _=i.get(m)||sr.empty();_=f.applyToLocalView(y,_),i.set(m,_);const E=(o.get(f.batchId)||Be()).add(m);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),y=m.key,_=m.value,E=Z_();_.forEach((I=>{if(!l.has(I)){const P=sw(t.get(I),i.get(I));P!==null&&E.set(I,P),l=l.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return G.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return we.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):t1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):G.resolve(Ls());let f=dl,m=l;return h.next((y=>G.forEach(y,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?G.resolve():this.remoteDocumentCache.getEntry(e,_).next((I=>{m=m.insert(_,I)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,m,y,Be()))).next((_=>({batchId:f,changes:J_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((i=>{let o=tl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=tl();return this.indexManager.getCollectionParents(e,l).next((f=>G.forEach(f,(m=>{const y=(function(E,I){return new Fc(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,I)=>{h=h.insert(E,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((m,y)=>{const _=y.getKey();h.get(_)===null&&(h=h.insert(_,nn.newInvalidDocument(_)))}));let f=tl();return h.forEach(((m,y)=>{const _=l.get(m);_!==void 0&&ul(_.mutation,y,sr.empty(),lt.now()),zc(t,y)&&(f=f.insert(m,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:br(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:$1(o.bundledQuery),readTime:br(o.readTime)}})(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.overlays=new yt(we.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ls();return G.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),G.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){const o=Ls(),l=t.length+1,h=new we(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const m=f.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new yt(((y,_)=>y-_));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=Ls(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const f=Ls(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((y,_)=>f.set(y,_))),!(f.size()>=o)););return G.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new _1(t,i));let l=this.qr.get(t);l===void 0&&(l=Be(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this.Qr=new Vt(Ft.$r),this.Ur=new Vt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ft(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new we(new gt([])),i=new Ft(t,e),o=new Ft(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new gt([])),i=new Ft(t,e),o=new Ft(t,e+1);let l=Be();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Ft(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Ue(e.Yr,t.Yr)}static Kr(e,t){return Ue(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(Ft.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new v1(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new Ft(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?ip:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ft(t,0),o=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Vt(Ue);return t.forEach((o=>{const l=new Ft(o,0),h=new Ft(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{i=i.add(f.Yr)}))})),G.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;we.isDocumentKey(l)||(l=l.child(""));const h=new Ft(new we(l),0);let f=new Vt(Ue);return this.Zr.forEachWhile((m=>{const y=m.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(m.Yr)),!0)}),h),G.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return G.forEach(t.mutations,(o=>{const l=new Ft(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ft(t,0),o=this.Zr.firstAfterOrEqual(i);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.ri=e,this.docs=(function(){return new yt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let i=di();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():nn.newInvalidDocument(o))})),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=di();const h=t.path,f=new we(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:y,value:{document:_}}=m.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||xI(NI(_),i)<=0||(o.has(_.key)||zc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ie(9500)}ii(e,t){return G.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new sA(this)}getSize(e){return G.resolve(this.size)}}class sA extends X1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.persistence=e,this.si=new Ys((t=>ap(t)),lp),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new fp,this.targetCount=0,this.ai=Zo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Zo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),G.waitFor(l).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),G.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,t){this.ui={},this.overlays={},this.ci=new Mc(0),this.li=!1,this.li=!0,this.hi=new nA,this.referenceDelegate=e(this),this.Pi=new oA(this),this.indexManager=new W1,this.remoteDocumentCache=(function(o){return new iA(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new z1(t),this.Ii=new eA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new rA(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){le("MemoryPersistence","Starting transaction:",e);const o=new aA(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return G.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class aA extends OI{constructor(e){super(),this.currentSequenceNumber=e}}class pp{constructor(e){this.persistence=e,this.Ri=new fp,this.Vi=null}static mi(e){return new pp(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,(i=>{const o=we.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class wc{constructor(e,t){this.persistence=e,this.pi=new Ys((i=>LI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=Q1(this,t)}static mi(e,t){return new wc(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return G.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?G.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(i++,l.removeEntry(h,ke.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zu(e.data.value)),t}br(e,t,i){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return G.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Be(),o=Be();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new mp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return eS()?8:VI(rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new lA;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Mo()<=Fe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Mo()<=Fe.DEBUG&&le("QueryEngine","Query:",Lo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Mo()<=Fe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(t))):G.resolve())}ys(e,t){if(Gy(t))return G.resolve(null);let i=xr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=vf(t,null,"F"),i=xr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Be(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const y=this.Ds(t,f);return this.Cs(t,y,h,m.readTime)?this.ys(e,vf(t,null,"F")):this.vs(e,y,t,m)}))))})))))}ws(e,t,i,o){return Gy(t)||o.isEqual(ke.min())?G.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?G.resolve(null):(Mo()<=Fe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Lo(t)),this.vs(e,h,t,DI(o,dl)).next((f=>f)))}))}Ds(e,t){let i=new Vt(Q_(e));return t.forEach(((o,l)=>{zc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return Mo()<=Fe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Lo(t)),this.ps.getDocumentsMatchingQuery(e,t,ts.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="LocalStore",cA=3e8;class hA{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new yt(Ue),this.xs=new Ys((l=>ap(l)),lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function dA(n,e,t,i){return new hA(n,e,t,i)}async function ww(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let m=Be();for(const y of o){h.push(y.batchId);for(const _ of y.mutations)m=m.add(_.key)}for(const y of l){f.push(y.batchId);for(const _ of y.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(i,m).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function fA(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,m,y,_){const E=y.batch,I=E.keys();let P=G.resolve();return I.forEach((z=>{P=P.next((()=>_.getEntry(m,z))).next((L=>{const j=y.docVersions.get(z);Qe(j!==null,48541),L.version.compareTo(j)<0&&(E.applyToRemoteDocument(L,y),L.isValidDocument()&&(L.setReadTime(y.commitVersion),_.addEntry(L)))}))})),P.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=Be();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(m=m.add(f.batch.mutations[y].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Ew(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function pA(n,e){const t=Pe(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((_,E)=>{const I=o.get(E);if(!I)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,E))));let P=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?P=P.withResumeToken(Gt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,i)),o=o.insert(E,P),(function(L,j,H){return L.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=cA?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(I,P,_)&&f.push(t.Pi.updateTargetData(l,P))}));let m=di(),y=Be();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(mA(l,h,e.documentUpdates).next((_=>{m=_.ks,y=_.qs}))),!i.isEqual(ke.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return G.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,y))).next((()=>m))})).then((l=>(t.Ms=o,l)))}function mA(n,e,t){let i=Be(),o=Be();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let h=di();return t.forEach(((f,m)=>{const y=l.get(f);m.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),m.isNoDocument()&&m.version.isEqual(ke.min())?(e.removeEntry(f,m.readTime),h=h.insert(f,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||m.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(m),h=h.insert(f,m)):le(gp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",m.version)})),{ks:h,qs:o}}))}function gA(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ip),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function yA(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,G.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new Ki(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Sf(n,e,t){const i=Pe(n),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!oa(h))throw h;le(gp,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function ov(n,e,t){const i=Pe(n);let o=ke.min(),l=Be();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,y,_){const E=Pe(m),I=E.xs.get(_);return I!==void 0?G.resolve(E.Ms.get(I)):E.Pi.getTargetData(y,_)})(i,h,xr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,f.targetId).next((m=>{l=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:ke.min(),t?l:Be()))).next((f=>(vA(i,r1(e),f),{documents:f,Qs:l})))))}function vA(n,e,t){let i=n.Os.get(e)||ke.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class av{constructor(){this.activeTargetIds=u1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _A{constructor(){this.Mo=new av,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new av,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="ConnectivityMonitor";class uv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(lv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(lv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu=null;function If(){return Wu===null?Wu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wu++,"0x"+Wu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="RestConnection",EA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===fc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=If(),f=this.zo(e,t.toUriEncodedString());le($d,`Sending RPC '${e}' ${h}:`,f,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,l);const{host:y}=new URL(f),_=na(y);return this.Jo(e,f,m,i,_).then((E=>(le($d,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Yo($d,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",i),E}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ia})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=EA[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class IA extends TA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=If();return new Promise(((f,m)=>{const y=new A_;y.setWithCredentials(!0),y.listenOnce(C_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ju.NO_ERROR:const E=y.getResponseJson();le(en,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case Ju.TIMEOUT:le(en,`RPC '${e}' ${h} timed out`),m(new ge(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const I=y.getStatus();if(le(en,`RPC '${e}' ${h} failed with status:`,I,"response text:",y.getResponseText()),I>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const z=P==null?void 0:P.error;if(z&&z.status&&z.message){const L=(function(H){const K=H.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(K)>=0?K:Q.UNKNOWN})(z.status);m(new ge(L,z.message))}else m(new ge(Q.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new ge(Q.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{le(en,`RPC '${e}' ${h} completed.`)}}));const _=JSON.stringify(o);le(en,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=If(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=P_(),f=R_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const _=l.join("");le(en,`Creating RPC '${e}' stream ${o}: ${_}`,m);const E=h.createWebChannel(_,m);this.I_(E);let I=!1,P=!1;const z=new SA({Yo:j=>{P?le(en,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(I||(le(en,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),le(en,`RPC '${e}' stream ${o} sending:`,j),E.send(j))},Zo:()=>E.close()}),L=(j,H,K)=>{j.listen(H,(oe=>{try{K(oe)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return L(E,el.EventType.OPEN,(()=>{P||(le(en,`RPC '${e}' stream ${o} transport opened.`),z.o_())})),L(E,el.EventType.CLOSE,(()=>{P||(P=!0,le(en,`RPC '${e}' stream ${o} transport closed`),z.a_(),this.E_(E))})),L(E,el.EventType.ERROR,(j=>{P||(P=!0,Yo(en,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),z.a_(new ge(Q.UNAVAILABLE,"The operation could not be completed")))})),L(E,el.EventType.MESSAGE,(j=>{var H;if(!P){const K=j.data[0];Qe(!!K,16349);const oe=K,ne=(oe==null?void 0:oe.error)||((H=oe[0])==null?void 0:H.error);if(ne){le(en,`RPC '${e}' stream ${o} received error:`,ne);const be=ne.status;let ye=(function(R){const N=kt[R];if(N!==void 0)return lw(N)})(be),D=ne.message;ye===void 0&&(ye=Q.INTERNAL,D="Unknown error status: "+be+" with message "+ne.message),P=!0,z.a_(new ge(ye,D)),E.close()}else le(en,`RPC '${e}' stream ${o} received:`,K),z.u_(K)}})),L(f,k_.STAT_EVENT,(j=>{j.stat===df.PROXY?le(en,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===df.NOPROXY&&le(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(n){return new R1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="PersistentStream";class Sw{constructor(e,t,i,o,l,h,f,m){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Tw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(hi(t.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ge(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(cv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(le(cv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class AA extends Sw{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=N1(this.serializer,e),i=(function(l){if(!("targetChange"in l))return ke.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?ke.min():h.readTime?br(h.readTime):ke.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Tf(this.serializer),t.addTarget=(function(l,h){let f;const m=h.target;if(f=yf(m)?{documents:O1(l,m)}:{query:V1(l,m).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=hw(l,h.resumeToken);const y=_f(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(ke.min())>0){f.readTime=_c(l,h.snapshotVersion.toTimestamp());const y=_f(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=L1(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Tf(this.serializer),t.removeTarget=e,this.q_(t)}}class CA extends Sw{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=b1(e.writeResults,e.commitTime),i=br(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Tf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>x1(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{}class RA extends kA{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,wf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(Q.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,wf(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ge(Q.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class PA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hi(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="RemoteStore";class DA{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Xs(this)&&(le(qs,"Restarting streams for network reachability change."),await(async function(m){const y=Pe(m);y.Ea.add(4),await Rl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Gc(y)})(this))}))})),this.Ra=new PA(i,o)}}async function Gc(n){if(Xs(n))for(const e of n.da)await e(!0)}async function Rl(n){for(const e of n.da)await e(!1)}function Iw(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),wp(t)?_p(t):aa(t).O_()&&vp(t,e))}function yp(n,e){const t=Pe(n),i=aa(t);t.Ia.delete(e),i.O_()&&Aw(t,e),t.Ia.size===0&&(i.O_()?i.L_():Xs(t)&&t.Ra.set("Unknown"))}function vp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}aa(n).Y_(e)}function Aw(n,e){n.Va.Ue(e),aa(n).Z_(e)}function _p(n){n.Va=new I1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),aa(n).start(),n.Ra.ua()}function wp(n){return Xs(n)&&!aa(n).x_()&&n.Ia.size>0}function Xs(n){return Pe(n).Ea.size===0}function Cw(n){n.Va=void 0}async function NA(n){n.Ra.set("Online")}async function xA(n){n.Ia.forEach(((e,t)=>{vp(n,e)}))}async function bA(n,e){Cw(n),wp(n)?(n.Ra.ha(e),_p(n)):n.Ra.set("Unknown")}async function OA(n,e,t){if(n.Ra.set("Online"),e instanceof cw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(n,e)}catch(i){le(qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ec(n,i)}else if(e instanceof nc?n.Va.Ze(e):e instanceof uw?n.Va.st(e):n.Va.tt(e),!t.isEqual(ke.min()))try{const i=await Ew(n.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((m,y)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(y);_&&l.Ia.set(y,_.withResumeToken(m.resumeToken,h))}})),f.targetMismatches.forEach(((m,y)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(Gt.EMPTY_BYTE_STRING,_.snapshotVersion)),Aw(l,m);const E=new Ki(_.target,m,y,_.sequenceNumber);vp(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){le(qs,"Failed to raise snapshot:",i),await Ec(n,i)}}async function Ec(n,e,t){if(!oa(e))throw e;n.Ea.add(1),await Rl(n),n.Ra.set("Offline"),t||(t=()=>Ew(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(qs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Gc(n)}))}function kw(n,e){return e().catch((t=>Ec(n,t,e)))}async function Kc(n){const e=Pe(n),t=ss(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ip;for(;VA(e);)try{const o=await gA(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,MA(e,o)}catch(o){await Ec(e,o)}Rw(e)&&Pw(e)}function VA(n){return Xs(n)&&n.Ta.length<10}function MA(n,e){n.Ta.push(e);const t=ss(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Rw(n){return Xs(n)&&!ss(n).x_()&&n.Ta.length>0}function Pw(n){ss(n).start()}async function LA(n){ss(n).ra()}async function jA(n){const e=ss(n);for(const t of n.Ta)e.ea(t.mutations)}async function FA(n,e,t){const i=n.Ta.shift(),o=cp.from(i,e,t);await kw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Kc(n)}async function UA(n,e){e&&ss(n).X_&&await(async function(i,o){if((function(h){return E1(h)&&h!==Q.ABORTED})(o.code)){const l=i.Ta.shift();ss(i).B_(),await kw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Kc(i)}})(n,e),Rw(n)&&Pw(n)}async function hv(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),le(qs,"RemoteStore received new credentials");const i=Xs(t);t.Ea.add(3),await Rl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gc(t)}async function BA(n,e){const t=Pe(n);e?(t.Ea.delete(2),await Gc(t)):e||(t.Ea.add(2),await Rl(t),t.Ra.set("Unknown"))}function aa(n){return n.ma||(n.ma=(function(t,i,o){const l=Pe(t);return l.sa(),new AA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:NA.bind(null,n),t_:xA.bind(null,n),r_:bA.bind(null,n),H_:OA.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),wp(n)?_p(n):n.Ra.set("Unknown")):(await n.ma.stop(),Cw(n))}))),n.ma}function ss(n){return n.fa||(n.fa=(function(t,i,o){const l=Pe(t);return l.sa(),new CA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:LA.bind(null,n),r_:UA.bind(null,n),ta:jA.bind(null,n),na:FA.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Kc(n)):(await n.fa.stop(),n.Ta.length>0&&(le(qs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new Ep(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tp(n,e){if(hi("AsyncQueue",`${e}: ${n}`),oa(n))return new ge(Q.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{static emptySet(e){return new $o(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=tl(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $o)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new $o;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.ga=new yt(we.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ea{constructor(e,t,i,o,l,h,f,m,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new ea(e,t,$o.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class $A{constructor(){this.queries=fv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Pe(t),l=o.queries;o.queries=fv(),l.forEach(((h,f)=>{for(const m of f.Sa)m.onError(i)}))})(this,new ge(Q.ABORTED,"Firestore shutting down"))}}function fv(){return new Ys((n=>Y_(n)),Bc)}async function Dw(n,e){const t=Pe(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new zA,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Tp(h,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Sp(t)}async function Nw(n,e){const t=Pe(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function WA(n,e){const t=Pe(n);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(i=!0);h.wa=o}}i&&Sp(t)}function HA(n,e,t){const i=Pe(n),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Sp(n){n.Ca.forEach((e=>{e.next()}))}var Af,pv;(pv=Af||(Af={})).Ma="default",pv.Cache="cache";class xw{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ea(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Af.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.key=e}}class Ow{constructor(e){this.key=e}}class qA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=Q_(e),this.tu=new $o(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new dv,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const I=o.get(_),P=zc(this.query,E)?E:null,z=!!I&&this.mutatedKeys.has(I.key),L=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let j=!1;I&&P?I.data.isEqual(P.data)?z!==L&&(i.track({type:3,doc:P}),j=!0):this.su(I,P)||(i.track({type:2,doc:P}),j=!0,(m&&this.eu(P,m)>0||y&&this.eu(P,y)<0)&&(f=!0)):!I&&P?(i.track({type:0,doc:P}),j=!0):I&&!P&&(i.track({type:1,doc:I}),j=!0,(m||y)&&(f=!0)),j&&(P?(h=h.add(P),l=L?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:h,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((_,E)=>(function(P,z){const L=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:j})}};return L(P)-L(z)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,y=m!==this.Za;return this.Za=m,h.length!==0||y?{snapshot:new ea(this.query,e.tu,l,h,e.mutatedKeys,m===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new Ow(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new bw(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ea.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ip="SyncEngine";class GA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class KA{constructor(e){this.key=e,this.hu=!1}}class YA{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ys((f=>Y_(f)),Bc),this.Iu=new Map,this.Eu=new Set,this.du=new yt(we.comparator),this.Au=new Map,this.Ru=new fp,this.Vu={},this.mu=new Map,this.fu=Zo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QA(n,e,t=!0){const i=Uw(n);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Vw(i,e,t,!0),o}async function XA(n,e){const t=Uw(n);await Vw(t,e,!0,!1)}async function Vw(n,e,t,i){const o=await yA(n.localStore,xr(e)),l=o.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await JA(n,e,l,h==="current",o.resumeToken)),n.isPrimaryClient&&t&&Iw(n.remoteStore,o),f}async function JA(n,e,t,i,o){n.pu=(E,I,P)=>(async function(L,j,H,K){let oe=j.view.ru(H);oe.Cs&&(oe=await ov(L.localStore,j.query,!1).then((({documents:D})=>j.view.ru(D,oe))));const ne=K&&K.targetChanges.get(j.targetId),be=K&&K.targetMismatches.get(j.targetId)!=null,ye=j.view.applyChanges(oe,L.isPrimaryClient,ne,be);return gv(L,j.targetId,ye.au),ye.snapshot})(n,E,I,P);const l=await ov(n.localStore,e,!0),h=new qA(e,l.Qs),f=h.ru(l.documents),m=kl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=h.applyChanges(f,n.isPrimaryClient,m);gv(n,t,y.au);const _=new GA(e,t,h);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function ZA(n,e,t){const i=Pe(n),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Bc(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Sf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&yp(i.remoteStore,o.targetId),Cf(i,o.targetId)})).catch(sa)):(Cf(i,o.targetId),await Sf(i.localStore,o.targetId,!0))}async function eC(n,e){const t=Pe(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),yp(t.remoteStore,i.targetId))}async function tC(n,e,t){const i=lC(n);try{const o=await(function(h,f){const m=Pe(h),y=lt.now(),_=f.reduce(((P,z)=>P.add(z.key)),Be());let E,I;return m.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let z=di(),L=Be();return m.Ns.getEntries(P,_).next((j=>{z=j,z.forEach(((H,K)=>{K.isValidDocument()||(L=L.add(H))}))})).next((()=>m.localDocuments.getOverlayedDocuments(P,z))).next((j=>{E=j;const H=[];for(const K of f){const oe=g1(K,E.get(K.key).overlayedDocument);oe!=null&&H.push(new Qs(K.key,oe,z_(oe.value.mapValue),ui.exists(!0)))}return m.mutationQueue.addMutationBatch(P,y,H,f)})).next((j=>{I=j;const H=j.applyToLocalDocumentSet(E,L);return m.documentOverlayCache.saveOverlays(P,j.batchId,H)}))})).then((()=>({batchId:I.batchId,changes:J_(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,m){let y=h.Vu[h.currentUser.toKey()];y||(y=new yt(Ue)),y=y.insert(f,m),h.Vu[h.currentUser.toKey()]=y})(i,o.batchId,t),await Pl(i,o.changes),await Kc(i.remoteStore)}catch(o){const l=Tp(o,"Failed to persist write");t.reject(l)}}async function Mw(n,e){const t=Pe(n);try{const i=await pA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Qe(h.hu,14607):o.removedDocuments.size>0&&(Qe(h.hu,42227),h.hu=!1))})),await Pl(t,i,e)}catch(i){await sa(i)}}function mv(n,e,t){const i=Pe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const m=Pe(h);m.onlineState=f;let y=!1;m.queries.forEach(((_,E)=>{for(const I of E.Sa)I.va(f)&&(y=!0)})),y&&Sp(m)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function nC(n,e,t){const i=Pe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new yt(we.comparator);h=h.insert(l,nn.newNoDocument(l,ke.min()));const f=Be().add(l),m=new Hc(ke.min(),new Map,new yt(Ue),h,f);await Mw(i,m),i.du=i.du.remove(l),i.Au.delete(e),Ap(i)}else await Sf(i.localStore,e,!1).then((()=>Cf(i,e,t))).catch(sa)}async function rC(n,e){const t=Pe(n),i=e.batch.batchId;try{const o=await fA(t.localStore,e);jw(t,i,null),Lw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Pl(t,o)}catch(o){await sa(o)}}async function iC(n,e,t){const i=Pe(n);try{const o=await(function(h,f){const m=Pe(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return m.mutationQueue.lookupMutationBatch(y,f).next((E=>(Qe(E!==null,37113),_=E.keys(),m.mutationQueue.removeMutationBatch(y,E)))).next((()=>m.mutationQueue.performConsistencyCheck(y))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(y,_,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>m.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);jw(i,e,t),Lw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Pl(i,o)}catch(o){await sa(o)}}function Lw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function jw(n,e,t){const i=Pe(n);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Cf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Fw(n,i)}))}function Fw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(yp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ap(n))}function gv(n,e,t){for(const i of t)i instanceof bw?(n.Ru.addReference(i.key,e),sC(n,i)):i instanceof Ow?(le(Ip,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Fw(n,i.key)):Ie(19791,{wu:i})}function sC(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(le(Ip,"New document in limbo: "+t),n.Eu.add(i),Ap(n))}function Ap(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new we(gt.fromString(e)),i=n.fu.next();n.Au.set(i,new KA(t)),n.du=n.du.insert(t,i),Iw(n.remoteStore,new Ki(xr(Uc(t.path)),i,"TargetPurposeLimboResolution",Mc.ce))}}async function Pl(n,e,t){const i=Pe(n),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{h.push(i.pu(m,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(y){o.push(y);const E=mp.As(m.targetId,y);l.push(E)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(m,y){const _=Pe(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>G.forEach(y,(I=>G.forEach(I.Es,(P=>_.persistence.referenceDelegate.addReference(E,I.targetId,P))).next((()=>G.forEach(I.ds,(P=>_.persistence.referenceDelegate.removeReference(E,I.targetId,P)))))))))}catch(E){if(!oa(E))throw E;le(gp,"Failed to update sequence numbers: "+E)}for(const E of y){const I=E.targetId;if(!E.fromCache){const P=_.Ms.get(I),z=P.snapshotVersion,L=P.withLastLimboFreeSnapshotVersion(z);_.Ms=_.Ms.insert(I,L)}}})(i.localStore,l))}async function oC(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){le(Ip,"User change. New user:",e.toKey());const i=await ww(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new ge(Q.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pl(t,i.Ls)}}function aC(n,e){const t=Pe(n),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let o=Be();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function Uw(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nC.bind(null,e),e.Pu.H_=WA.bind(null,e.eventManager),e.Pu.yu=HA.bind(null,e.eventManager),e}function lC(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iC.bind(null,e),e}class Tc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return dA(this.persistence,new uA,e.initialUser,this.serializer)}Cu(e){return new _w(pp.mi,this.serializer)}Du(e){return new _A}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tc.provider={build:()=>new Tc};class uC extends Tc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof wc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new K1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new _w((i=>wc.mi(i,t)),this.serializer)}}class kf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oC.bind(null,this.syncEngine),await BA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $A})()}createDatastore(e){const t=qc(e.databaseInfo.databaseId),i=(function(l){return new IA(l)})(e.databaseInfo);return(function(l,h,f,m){return new RA(l,h,f,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new DA(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>mv(this.syncEngine,t,0)),(function(){return uv.v()?new uv:new wA})())}createSyncEngine(e,t){return(function(o,l,h,f,m,y,_){const E=new YA(o,l,h,f,m,y);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Pe(o);le(qs,"RemoteStore shutting down."),l.Ea.add(5),await Rl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}kf.provider={build:()=>new kf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="FirestoreClient";class cC{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{le(os,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(le(os,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Tp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Hd(n,e){n.asyncQueue.verifyOperationInProgress(),le(os,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await ww(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function yv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await hC(n);le(os,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>hv(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>hv(e.remoteStore,o))),n._onlineComponents=e}async function hC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(os,"Using user provided OfflineComponentProvider");try{await Hd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Yo("Error using user provided cache. Falling back to memory cache: "+t),await Hd(n,new Tc)}}else le(os,"Using default OfflineComponentProvider"),await Hd(n,new uC(void 0));return n._offlineComponents}async function zw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(os,"Using user provided OnlineComponentProvider"),await yv(n,n._uninitializedComponentsProvider._online)):(le(os,"Using default OnlineComponentProvider"),await yv(n,new kf))),n._onlineComponents}function dC(n){return zw(n).then((e=>e.syncEngine))}async function Rf(n){const e=await zw(n),t=e.eventManager;return t.onListen=QA.bind(null,e.syncEngine),t.onUnlisten=ZA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eC.bind(null,e.syncEngine),t}function fC(n,e,t={}){const i=new Zi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,m,y){const _=new Bw({next:I=>{_.Nu(),h.enqueueAndForget((()=>Nw(l,E)));const P=I.docs.has(f);!P&&I.fromCache?y.reject(new ge(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&I.fromCache&&m&&m.source==="server"?y.reject(new ge(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),E=new xw(Uc(f.path),_,{includeMetadataChanges:!0,qa:!0});return Dw(l,E)})(await Rf(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="firestore.googleapis.com",_v=!0;class wv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ww,this.ssl=_v}else this.host=e.host,this.ssl=e.ssl??_v;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<q1)throw new ge(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$w(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cp{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new vI;switch(i.type){case"firstParty":return new TI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=vv.get(t);i&&(le("ComponentProvider","Removing Datastore"),vv.delete(t),i.terminate())})(this),Promise.resolve()}}function pC(n,e,t,i={}){var y;n=es(n,Cp);const o=na(e),l=n._getSettings(),h={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(g_(`https://${f}`),y_("Firestore",!0)),l.host!==Ww&&l.host!==f&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:o,emulatorOptions:i};if(!$s(m,h)&&(n._setSettings(m),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=tn.MOCK_USER;else{_=HT(i.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new ge(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new tn(I)}n._authCredentials=new _I(new N_(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Yc(this.firestore,e,this._query)}}class Ot{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Al(t,Ot._jsonSchema))return new Ot(e,i||null,new we(gt.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Rt("string",Ot._jsonSchemaVersion),referencePath:Rt("string")};class vl extends Yc{constructor(e,t,i){super(e,t,Uc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new we(e))}withConverter(e){return new vl(this.firestore,e,this._path)}}function Xa(n,e,...t){if(n=xn(n),arguments.length===1&&(e=np.newId()),RI("doc","path",e),n instanceof Cp){const i=gt.fromString(e,...t);return Oy(i),new Ot(n,null,new we(i))}{if(!(n instanceof Ot||n instanceof vl))throw new ge(Q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(gt.fromString(e,...t));return Oy(i),new Ot(n.firestore,n instanceof vl?n.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="AsyncQueue";class Tv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tw(this,"async_queue_retry"),this._c=()=>{const i=Wd();i&&le(Ev,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Wd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Wd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Zi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!oa(e))throw e;le(Ev,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,hi("INTERNAL UNHANDLED ERROR: ",Sv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Ep.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ie(47125,{Pc:Sv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Sv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class _l extends Cp{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Tv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tv(e),this._firestoreClient=void 0,await e}}}function mC(n,e){const t=typeof n=="object"?n:E_(),i=typeof n=="string"?n:fc,o=ep(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=$T("firestore");l&&pC(o,...l)}return o}function kp(n){if(n._terminated)throw new ge(Q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gC(n),n._firestoreClient}function gC(n){var i,o,l;const e=n._freezeSettings(),t=(function(f,m,y,_){return new UI(f,m,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,$w(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new cC(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(Gt.fromBase64String(e))}catch(t){throw new ge(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Al(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:Rt("string",Gn._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Or._jsonSchemaVersion}}static fromJSON(e){if(Al(e,Or._jsonSchema))return new Or(e.latitude,e.longitude)}}Or._jsonSchemaVersion="firestore/geoPoint/1.0",Or._jsonSchema={type:Rt("string",Or._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Al(e,Vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vr(e.vectorValues);throw new ge(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vr._jsonSchemaVersion="firestore/vectorValue/1.0",Vr._jsonSchema={type:Rt("string",Vr._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=/^__.*__$/;class vC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Qs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cl(e,this.data,t,this.fieldTransforms)}}function qw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class Pp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Pp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qw(this.Ac)&&yC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _C{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||qc(e)}Cc(e,t,i,o=!1){return new Pp({Ac:e,methodName:t,Dc:i,path:Ht.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wC(n){const e=n._freezeSettings(),t=qc(n._databaseId);return new _C(n._databaseId,!!e.ignoreUndefinedProperties,t)}function EC(n,e,t,i,o,l={}){const h=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);Qw("Data must be an object, but it was:",h,i);const f=Kw(i,h);let m,y;if(l.merge)m=new sr(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const I=TC(e,E,t);if(!h.contains(I))throw new ge(Q.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);IC(_,I)||_.push(I)}m=new sr(_),y=h.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,y=h.fieldTransforms;return new vC(new qn(f),m,y)}function Gw(n,e){if(Yw(n=xn(n)))return Qw("Unsupported field value:",e,n),Kw(n,e);if(n instanceof Hw)return(function(i,o){if(!qw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let m=Gw(f,o.wc(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=xn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return c1(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=lt.fromDate(i);return{timestampValue:_c(o.serializer,l)}}if(i instanceof lt){const l=new lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_c(o.serializer,l)}}if(i instanceof Or)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Gn)return{bytesValue:hw(o.serializer,i._byteString)};if(i instanceof Ot){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:dp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Vr)return(function(h,f){return{mapValue:{fields:{[U_]:{stringValue:B_},[pc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return up(f.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${rp(i)}`)})(n,e)}function Kw(n,e){const t={};return O_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(n,((i,o)=>{const l=Gw(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Yw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof Or||n instanceof Gn||n instanceof Ot||n instanceof Hw||n instanceof Vr)}function Qw(n,e,t){if(!Yw(t)||!x_(t)){const i=rp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function TC(n,e,t){if((e=xn(e))instanceof Rp)return e._internalPath;if(typeof e=="string")return Xw(n,e);throw Sc("Field path arguments must be of type string or ",n,!1,void 0,t)}const SC=new RegExp("[~\\*/\\[\\]]");function Xw(n,e,t){if(e.search(SC)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rp(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sc(n,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${i}`),h&&(m+=` in document ${o}`),m+=")"),new ge(Q.INVALID_ARGUMENT,f+n+m)}function IC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class AC extends Jw{data(){return super.data()}}function Zw(n,e){return typeof e=="string"?Xw(n,e):e instanceof Rp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kC{convertValue(e,t="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ks(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[pc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>Tt(h.doubleValue)));return new Vr(t)}convertGeoPoint(e){return new Or(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=jc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){const t=ns(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=gt.fromString(e);Qe(yw(i),9688,{name:e});const o=new pl(i.get(1),i.get(3)),l=new we(i.popFirst(5));return o.isEqual(t)||hi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Us extends Jw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Zw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Us._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Us._jsonSchemaVersion="firestore/documentSnapshot/1.0",Us._jsonSchema={type:Rt("string",Us._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class rc extends Us{data(e={}){return super.data(e)}}class Wo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new rl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new rc(this._firestore,this._userDataWriter,i.key,i,new rl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const m=new rc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new rl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new rc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new rl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),_=h.indexOf(f.doc.key)),{type:PC(f.type),doc:m,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(n){n=es(n,Ot);const e=es(n.firestore,_l);return fC(kp(e),n._key).then((t=>tE(e,n,t)))}Wo._jsonSchemaVersion="firestore/querySnapshot/1.0",Wo._jsonSchema={type:Rt("string",Wo._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class eE extends kC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function Cv(n,e,t){n=es(n,Ot);const i=es(n.firestore,_l),o=RC(n.converter,e);return NC(i,[EC(wC(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ui.none())])}function DC(n,...e){var m,y,_;n=xn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Iv(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Iv(e[i])){const E=e[i];e[i]=(m=E.next)==null?void 0:m.bind(E),e[i+1]=(y=E.error)==null?void 0:y.bind(E),e[i+2]=(_=E.complete)==null?void 0:_.bind(E)}let l,h,f;if(n instanceof Ot)h=es(n.firestore,_l),f=Uc(n._key.path),l={next:E=>{e[i]&&e[i](tE(h,n,E))},error:e[i+1],complete:e[i+2]};else{const E=es(n,Yc);h=es(E.firestore,_l),f=E._query;const I=new eE(h);l={next:P=>{e[i]&&e[i](new Wo(h,I,E,P))},error:e[i+1],complete:e[i+2]},CC(n._query)}return(function(I,P,z,L){const j=new Bw(L),H=new xw(P,j,z);return I.asyncQueue.enqueueAndForget((async()=>Dw(await Rf(I),H))),()=>{j.Nu(),I.asyncQueue.enqueueAndForget((async()=>Nw(await Rf(I),H)))}})(kp(h),f,o,l)}function NC(n,e){return(function(i,o){const l=new Zi;return i.asyncQueue.enqueueAndForget((async()=>tC(await dC(i),o,l))),l.promise})(kp(n),e)}function tE(n,e,t){const i=t.docs.get(e._key),o=new eE(n);return new Us(n,o,e._key,i,new rl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ia=o})(ra),Ko(new Ws("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new _l(new wI(i.getProvider("auth-internal")),new SI(h,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ge(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(y.options.projectId,_)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Xi(Dy,Ny,e),Xi(Dy,Ny,"esm2020")})();var xC="firebase",bC="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(xC,bC,"app");function nE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OC=nE,rE=new Sl("auth","Firebase",nE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Jf("@firebase/auth");function VC(n,...e){Ic.logLevel<=Fe.WARN&&Ic.warn(`Auth (${ra}): ${n}`,...e)}function ic(n,...e){Ic.logLevel<=Fe.ERROR&&Ic.error(`Auth (${ra}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(n,...e){throw Np(n,...e)}function ar(n,...e){return Np(n,...e)}function Dp(n,e,t){const i={...OC(),[e]:t};return new Sl("auth","Firebase",i).create(e,{appName:n.name})}function Bs(n){return Dp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function MC(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Fr(n,"argument-error"),Dp(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Np(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return rE.create(n,...e)}function Ce(n,e,...t){if(!n)throw Np(e,...t)}function ai(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ic(e),new Error(e)}function fi(n,e){n||ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function LC(){return kv()==="http:"||kv()==="https:"}function kv(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LC()||XT()||"connection"in navigator)?navigator.onLine:!0}function FC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t){this.shortDelay=e,this.longDelay=t,fi(t>e,"Short delay should be less than long delay!"),this.isMobile=KT()||JT()}get(){return jC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(n,e){fi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zC=new Dl(3e4,6e4);function bp(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function la(n,e,t,i,o={}){return sE(n,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=Il({key:n.config.apiKey,...h}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:m,...l};return QT()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&na(n.emulatorConfig.host)&&(y.credentials="include"),iE.fetch()(await oE(n,n.config.apiHost,t,f),y)})}async function sE(n,e,t){n._canInitEmulator=!1;const i={...UC,...e};try{const o=new WC(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Hu(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[m,y]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hu(n,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw Hu(n,"email-already-in-use",h);if(m==="USER_DISABLED")throw Hu(n,"user-disabled",h);const _=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Dp(n,_,y);Fr(n,_)}}catch(o){if(o instanceof pi)throw o;Fr(n,"network-request-failed",{message:String(o)})}}async function $C(n,e,t,i,o={}){const l=await la(n,e,t,i,o);return"mfaPendingCredential"in l&&Fr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function oE(n,e,t,i){const o=`${e}${t}?${i}`,l=n,h=l.config.emulator?xp(n.config,o):`${n.config.apiScheme}://${o}`;return BC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class WC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ar(this.auth,"network-request-failed")),zC.get())})}}function Hu(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ar(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(n,e){return la(n,"POST","/v1/accounts:delete",e)}async function Ac(n,e){return la(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qC(n,e=!1){const t=xn(n),i=await t.getIdToken(e),o=Op(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:cl(qd(o.auth_time)),issuedAtTime:cl(qd(o.iat)),expirationTime:cl(qd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function qd(n){return Number(n)*1e3}function Op(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ic("JWT malformed, contained fewer than 3 sections"),null;try{const o=d_(t);return o?JSON.parse(o):(ic("Failed to decode base64 JWT payload"),null)}catch(o){return ic("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Rv(n){const e=Op(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof pi&&GC(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function GC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cl(this.lastLoginAt),this.creationTime=cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(n){var E;const e=n.auth,t=await n.getIdToken(),i=await wl(n,Ac(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?aE(o.providerUserInfo):[],h=QC(n.providerData,l),f=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),y=f?m:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Df(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,_)}async function YC(n){const e=xn(n);await Cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QC(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function aE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(n,e){const t=await sE(n,{},async()=>{const i=Il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,h=await oE(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&na(n.emulatorConfig.host)&&(m.credentials="include"),iE.fetch()(h,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function JC(n,e){return la(n,"POST","/v2/accounts:revokeToken",bp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=Rv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await XC(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Ho;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ce(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class or{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new KC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Df(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await wl(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qC(this,e)}reload(){return YC(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new or({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Cc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Bs(this.auth));const e=await this.getIdToken();return await wl(this,HC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,y=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:I,isAnonymous:P,providerData:z,stsTokenManager:L}=t;Ce(E&&L,e,"internal-error");const j=Ho.fromJSON(this.name,L);Ce(typeof E=="string",e,"internal-error"),Wi(i,e.name),Wi(o,e.name),Ce(typeof I=="boolean",e,"internal-error"),Ce(typeof P=="boolean",e,"internal-error"),Wi(l,e.name),Wi(h,e.name),Wi(f,e.name),Wi(m,e.name),Wi(y,e.name),Wi(_,e.name);const H=new or({uid:E,auth:e,email:o,emailVerified:I,displayName:i,isAnonymous:P,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:j,createdAt:y,lastLoginAt:_});return z&&Array.isArray(z)&&(H.providerData=z.map(K=>({...K}))),m&&(H._redirectEventId=m),H}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ho;o.updateFromServerResponse(t);const l=new or({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Cc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?aE(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Ho;f.updateFromIdToken(i);const m=new or({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Df(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,y),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new Map;function li(n){fi(n instanceof Function,"Expected a class definition");let e=Pv.get(n);return e?(fi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Pv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lE.type="NONE";const Dv=lE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(n,e,t){return`firebase:${n}:${e}:${t}`}class qo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=sc(this.userKey,o.apiKey,l),this.fullPersistenceKey=sc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ac(this.auth,{idToken:e}).catch(()=>{});return t?or._fromGetAccountInfoResponse(this.auth,t,e):null}return or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new qo(li(Dv),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||li(Dv);const h=sc(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const _=await y._get(h);if(_){let E;if(typeof _=="string"){const I=await Ac(e,{idToken:_}).catch(()=>{});if(!I)break;E=await or._fromGetAccountInfoResponse(e,I,_)}else E=or._fromJSON(e,_);y!==l&&(f=E),l=y;break}}catch{}const m=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new qo(l,e,i):(l=m[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new qo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pE(e))return"Blackberry";if(mE(e))return"Webos";if(cE(e))return"Safari";if((e.includes("chrome/")||hE(e))&&!e.includes("edge/"))return"Chrome";if(fE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function uE(n=rn()){return/firefox\//i.test(n)}function cE(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hE(n=rn()){return/crios\//i.test(n)}function dE(n=rn()){return/iemobile/i.test(n)}function fE(n=rn()){return/android/i.test(n)}function pE(n=rn()){return/blackberry/i.test(n)}function mE(n=rn()){return/webos/i.test(n)}function Vp(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ZC(n=rn()){var e;return Vp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function ek(){return ZT()&&document.documentMode===10}function gE(n=rn()){return Vp(n)||fE(n)||mE(n)||pE(n)||/windows phone/i.test(n)||dE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(n,e=[]){let t;switch(n){case"Browser":t=Nv(rn());break;case"Worker":t=`${Nv(rn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ra}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const m=e(l);h(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(n,e={}){return la(n,"GET","/v2/passwordPolicy",bp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=6;class ik{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??rk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xv(this),this.idTokenSubscription=new xv(this),this.beforeStateQueue=new tk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=li(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await qo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ac(this,{idToken:e}),i=await or._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ir(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===f)&&(m!=null&&m.user)&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Bs(this));const t=e?xn(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nk(this),t=new ik(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await JC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&li(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await qo.create(this,[li(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&VC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Qc(n){return xn(n)}class xv{constructor(e){this.auth=e,this.observer=null,this.addObserver=aS(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ok(n){Mp=n}function ak(n){return Mp.loadJS(n)}function lk(){return Mp.gapiScript}function uk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(n,e){const t=ep(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if($s(l,e??{}))return o;Fr(o,"already-initialized")}return t.initialize({options:e})}function hk(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(li);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function dk(n,e,t){const i=Qc(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=vE(e),{host:h,port:f}=fk(e),m=f===null?"":`:${f}`,y={url:`${l}//${h}${m}/`},_=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce($s(y,i.config.emulator)&&$s(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,na(h)?(g_(`${l}//${h}${m}`),y_("Auth",!0)):pk()}function vE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function fk(n){const e=vE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:bv(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:bv(h)}}}function bv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function pk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ai("not implemented")}_getIdTokenResponse(e){return ai("not implemented")}_linkToIdToken(e,t){return ai("not implemented")}_getReauthenticationResolver(e){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(n,e){return $C(n,"POST","/v1/accounts:signInWithIdp",bp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="http://localhost";class Gs extends _E{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new Gs(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Go(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Go(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Go(e,t)}buildRequest(){const e={requestUri:mk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Il(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl extends Lp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Nl{constructor(){super("facebook.com")}static credential(e){return Gs._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Nl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Gs._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return oi.credential(t,i)}catch{return null}}}oi.GOOGLE_SIGN_IN_METHOD="google.com";oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Nl{constructor(){super("github.com")}static credential(e){return Gs._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Nl{constructor(){super("twitter.com")}static credential(e,t){return Gs._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Gi.credential(t,i)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await or._fromIdTokenResponse(e,i,o),h=Ov(i);return new ta({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Ov(i);return new ta({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Ov(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends pi{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,kc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new kc(e,t,i,o)}}function wE(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?kc._fromErrorAndOperation(n,l,e,i):l})}async function gk(n,e,t=!1){const i=await wl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ta._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(n,e,t=!1){const{auth:i}=n;if(ir(i.app))return Promise.reject(Bs(i));const o="reauthenticate";try{const l=await wl(n,wE(i,o,e,n),t);Ce(l.idToken,i,"internal-error");const h=Op(l.idToken);Ce(h,i,"internal-error");const{sub:f}=h;return Ce(n.uid===f,i,"user-mismatch"),ta._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Fr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(n,e,t=!1){if(ir(n.app))return Promise.reject(Bs(n));const i="signIn",o=await wE(n,i,e),l=await ta._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}function _k(n,e,t,i){return xn(n).onIdTokenChanged(e,t,i)}function wk(n,e,t){return xn(n).beforeAuthStateChanged(e,t)}function Ek(n,e,t,i){return xn(n).onAuthStateChanged(e,t,i)}function Tk(n){return xn(n).signOut()}const Rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rc,"1"),this.storage.removeItem(Rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=1e3,Ik=10;class TE extends EE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,m)=>{this.notifyListeners(h,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);ek()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Ik):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Sk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}TE.type="LOCAL";const Ak=TE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE extends EE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}SE.type="SESSION";const IE=SE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Xc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),m=await Ck(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,m)=>{const y=jp("",20);o.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(E){const I=E;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(){return window}function Rk(n){Mr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(){return typeof Mr().WorkerGlobalScope<"u"&&typeof Mr().importScripts=="function"}async function Pk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Dk(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Nk(){return AE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firebaseLocalStorageDb",xk=1,Pc="firebaseLocalStorage",kE="fbase_key";class xl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jc(n,e){return n.transaction([Pc],e?"readwrite":"readonly").objectStore(Pc)}function bk(){const n=indexedDB.deleteDatabase(CE);return new xl(n).toPromise()}function Nf(){const n=indexedDB.open(CE,xk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Pc,{keyPath:kE})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Pc)?e(i):(i.close(),await bk(),e(await Nf()))})})}async function Vv(n,e,t){const i=Jc(n,!0).put({[kE]:e,value:t});return new xl(i).toPromise()}async function Ok(n,e){const t=Jc(n,!1).get(e),i=await new xl(t).toPromise();return i===void 0?null:i.value}function Mv(n,e){const t=Jc(n,!0).delete(e);return new xl(t).toPromise()}const Vk=800,Mk=3;class RE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Mk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(Nk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Pk(),!this.activeServiceWorker)return;this.sender=new kk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Dk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nf();return await Vv(e,Rc,"1"),await Mv(e,Rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Vv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Ok(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Mv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Jc(o,!1).getAll();return new xl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Vk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RE.type="LOCAL";const Lk=RE;new Dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n,e){return e?li(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends _E{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Go(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Go(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Go(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jk(n){return vk(n.auth,new Fp(n),n.bypassAuthState)}function Fk(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),yk(t,new Fp(n),n.bypassAuthState)}async function Uk(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),gk(t,new Fp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jk;case"linkViaPopup":case"linkViaRedirect":return Uk;case"reauthViaPopup":case"reauthViaRedirect":return Fk;default:Fr(this.auth,"internal-error")}}resolve(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=new Dl(2e3,1e4);async function zk(n,e,t){if(ir(n.app))return Promise.reject(ar(n,"operation-not-supported-in-this-environment"));const i=Qc(n);MC(n,e,Lp);const o=PE(i,t);return new js(i,"signInViaPopup",e,o).executeNotNull()}class js extends DE{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,js.currentPopupAction&&js.currentPopupAction.cancel(),js.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");const e=jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,js.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Bk.get())};e()}}js.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="pendingRedirect",oc=new Map;class Wk extends DE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=oc.get(this.auth._key());if(!e){try{const i=await Hk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}oc.set(this.auth._key(),e)}return this.bypassAuthState||oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Hk(n,e){const t=Kk(e),i=Gk(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function qk(n,e){oc.set(n._key(),e)}function Gk(n){return li(n._redirectPersistence)}function Kk(n){return sc($k,n.config.apiKey,n.name)}async function Yk(n,e,t=!1){if(ir(n.app))return Promise.reject(Bs(n));const i=Qc(n),o=PE(i,e),h=await new Wk(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=600*1e3;class Xk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Jk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!NE(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(ar(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Qk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lv(e))}saveEventToCache(e){this.cachedEventUids.add(Lv(e)),this.lastProcessedEventTime=Date.now()}}function Lv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function NE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Jk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zk(n,e={}){return la(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tR=/^https?/;async function nR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Zk(n);for(const t of e)try{if(rR(t))return}catch{}Fr(n,"unauthorized-domain")}function rR(n){const e=Pf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!tR.test(t))return!1;if(eR.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=new Dl(3e4,6e4);function jv(){const n=Mr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function sR(n){return new Promise((e,t)=>{var o,l,h;function i(){jv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jv(),t(ar(n,"network-request-failed"))},timeout:iR.get()})}if((l=(o=Mr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=Mr().gapi)!=null&&h.load)i();else{const f=uk("iframefcb");return Mr()[f]=()=>{gapi.load?i():t(ar(n,"network-request-failed"))},ak(`${lk()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw ac=null,e})}let ac=null;function oR(n){return ac=ac||sR(n),ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new Dl(5e3,15e3),lR="__/auth/iframe",uR="emulator/auth/iframe",cR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dR(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?xp(e,uR):`https://${n.config.authDomain}/${lR}`,i={apiKey:e.apiKey,appName:n.name,v:ra},o=hR.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Il(i).slice(1)}`}async function fR(n){const e=await oR(n),t=Mr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:dR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cR,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=ar(n,"network-request-failed"),f=Mr().setTimeout(()=>{l(h)},aR.get());function m(){Mr().clearTimeout(f),o(i)}i.ping(m).then(m,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mR=500,gR=600,yR="_blank",vR="http://localhost";class Fv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _R(n,e,t,i=mR,o=gR){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...pR,width:i.toString(),height:o.toString(),top:l,left:h},y=rn().toLowerCase();t&&(f=hE(y)?yR:t),uE(y)&&(e=e||vR,m.scrollbars="yes");const _=Object.entries(m).reduce((I,[P,z])=>`${I}${P}=${z},`,"");if(ZC(y)&&f!=="_self")return wR(e||"",f),new Fv(null);const E=window.open(e||"",f,_);Ce(E,n,"popup-blocked");try{E.focus()}catch{}return new Fv(E)}function wR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="__/auth/handler",TR="emulator/auth/handler",SR=encodeURIComponent("fac");async function Uv(n,e,t,i,o,l){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ra,eventId:o};if(e instanceof Lp){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",oS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))h[_]=E}if(e instanceof Nl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(h.scopes=_.join(","))}n.tenantId&&(h.tid=n.tenantId);const f=h;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const m=await n._getAppCheckToken(),y=m?`#${SR}=${encodeURIComponent(m)}`:"";return`${IR(n)}?${Il(f).slice(1)}${y}`}function IR({config:n}){return n.emulator?xp(n,TR):`https://${n.authDomain}/${ER}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="webStorageSupport";class AR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IE,this._completeRedirectFn=Yk,this._overrideRedirectResult=qk}async _openPopup(e,t,i,o){var h;fi((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await Uv(e,t,i,Pf(),o);return _R(e,l,jp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Uv(e,t,i,Pf(),o);return Rk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(fi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await fR(e),i=new Xk(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gd,{type:Gd},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Gd];l!==void 0&&t(!!l),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gE()||cE()||Vp()}}const CR=AR;var Bv="@firebase/auth",zv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PR(n){Ko(new Ws("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;Ce(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:h,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yE(n)},y=new sk(i,o,l,m);return hk(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ko(new Ws("auth-internal",e=>{const t=Qc(e.getProvider("auth").getImmediate());return(i=>new kR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi(Bv,zv,RR(n)),Xi(Bv,zv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=300,NR=m_("authIdTokenMaxAge")||DR;let $v=null;const xR=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>NR)return;const o=t==null?void 0:t.token;$v!==o&&($v=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function bR(n=E_()){const e=ep(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ck(n,{popupRedirectResolver:CR,persistence:[Lk,Ak,IE]}),i=m_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=xR(l.toString());wk(t,h,()=>h(t.currentUser)),_k(t,f=>h(f))}}const o=f_("auth");return o&&dk(t,`http://${o}`),t}function OR(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}ok({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=ar("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",OR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PR("Browser");const lc={apiKey:"AIzaSyCXxatUkVDpVnR0BKkZTNlB_G_3agOfoY0",authDomain:"jpl-vacation-forecast.firebaseapp.com",projectId:"jpl-vacation-forecast",storageBucket:"jpl-vacation-forecast.firebasestorage.app",messagingSenderId:"732269508238",appId:"1:732269508238:web:464689fab6d9d91aeefbdf"};let Ja=null,Dc=null,Nc=null;const xE=()=>!!(lc.apiKey&&lc.authDomain&&lc.projectId),bE=()=>{if(!xE())return console.log("Firebase not configured - cloud sync disabled"),{app:null,auth:null,db:null};try{return Ja||(Ja=w_(lc),Dc=bR(Ja),Nc=mC(Ja),console.log("Firebase initialized successfully")),{app:Ja,auth:Dc,db:Nc}}catch(n){return console.error("Failed to initialize Firebase:",n),{app:null,auth:null,db:null}}},Kd=()=>{if(!Dc){const{auth:n}=bE();return n}return Dc},Za=()=>{if(!Nc){const{db:n}=bE();return n}return Nc};class VR{constructor(){Ya(this,"mode","localStorage");Ya(this,"userId",null);Ya(this,"listeners",new Map);Ya(this,"unsubscribers",new Map)}getMode(){return this.mode}setMode(e,t){const i=this.mode==="cloud-sync";this.mode=e,this.userId=t||null,i&&e==="localStorage"&&this.cleanupFirebaseListeners(),console.log(`Storage mode set to: ${e}`,t?`User: ${t}`:"")}async get(e,t){try{const i=window.localStorage.getItem(e);if(i)return JSON.parse(i)}catch(i){console.error(`Error reading ${e} from localStorage:`,i)}if(this.mode==="cloud-sync"&&this.userId)try{const i=Za();if(i){const o=Xa(i,"users",this.userId,"data",e),l=await Av(o);if(l.exists())return l.data().value}}catch(i){console.error(`Error reading ${e} from Firebase:`,i)}return t}async set(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(i){console.error(`Error writing ${e} to localStorage:`,i)}if(this.mode==="cloud-sync"&&this.userId)try{const i=Za();if(i){const o=Xa(i,"users",this.userId,"data",e);await Cv(o,{value:t,updatedAt:new Date().toISOString()}),console.log(`Synced ${e} to Firebase`)}}catch(i){console.error(`Error writing ${e} to Firebase:`,i)}this.notifyListeners(e,t)}subscribe(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),this.mode==="cloud-sync"&&this.userId&&!this.unsubscribers.has(e)&&this.setupFirebaseListener(e),()=>{const i=this.listeners.get(e);if(i&&(i.delete(t),i.size===0)){this.listeners.delete(e);const o=this.unsubscribers.get(e);o&&(o(),this.unsubscribers.delete(e))}}}async syncToCloud(e){if(this.mode!=="cloud-sync"||!this.userId)throw new Error("Cloud sync not enabled");const t=Za();if(!t)throw new Error("Firebase not configured");for(const i of e)try{const o=window.localStorage.getItem(i);if(o){const l=JSON.parse(o),h=Xa(t,"users",this.userId,"data",i);await Cv(h,{value:l,updatedAt:new Date().toISOString()}),console.log(`Initial sync of ${i} to Firebase`)}}catch(o){console.error(`Error syncing ${i} to Firebase:`,o)}}async syncFromCloud(e){if(this.mode!=="cloud-sync"||!this.userId)throw new Error("Cloud sync not enabled");const t=Za();if(!t)throw new Error("Firebase not configured");for(const i of e)try{const o=Xa(t,"users",this.userId,"data",i),l=await Av(o);if(l.exists()){const h=l.data();window.localStorage.setItem(i,JSON.stringify(h.value)),console.log(`Loaded ${i} from Firebase to localStorage`),this.notifyListeners(i,h.value)}}catch(o){console.error(`Error loading ${i} from Firebase:`,o)}}setupFirebaseListener(e){if(!this.userId)return;const t=Za();if(t)try{const i=Xa(t,"users",this.userId,"data",e),o=DC(i,l=>{if(l.exists()){const f=l.data().value;window.localStorage.setItem(e,JSON.stringify(f)),this.notifyListeners(e,f),console.log(`Real-time update for ${e} from Firebase`)}},l=>{console.error(`Firebase listener error for ${e}:`,l)});this.unsubscribers.set(e,o)}catch(i){console.error(`Error setting up Firebase listener for ${e}:`,i)}}notifyListeners(e,t){const i=this.listeners.get(e);i&&i.forEach(o=>{try{o(t)}catch(l){console.error("Error in storage listener:",l)}})}cleanupFirebaseListeners(){this.unsubscribers.forEach(e=>e()),this.unsubscribers.clear()}}const Dr=new VR;function Yd(n,e){const[t,i]=se.useState(()=>{try{const l=window.localStorage.getItem(n);return l?JSON.parse(l):e}catch(l){return console.error(`Error loading ${n} from localStorage:`,l),e}});return se.useEffect(()=>Dr.subscribe(n,h=>{i(h)}),[n]),[t,l=>{try{const h=l instanceof Function?l(t):l;i(h),Dr.set(n,h).catch(f=>{console.error(`Error saving ${n}:`,f)})}catch(h){console.error(`Error saving ${n}:`,h)}}]}const MR=()=>{const[n,e]=Yd("jpl-vacation-user-profile",null),[t,i]=Yd("jpl-vacation-planned-vacations",[]),[o,l]=Yd("jpl-vacation-holidays",[]);se.useEffect(()=>{n&&n.workSchedule.type==="9/80"&&n.workSchedule.rdoPattern==="even-fridays"&&e({...n,workSchedule:{...n.workSchedule,rdoPattern:"odd-fridays"}})},[n,e]);const h=se.useMemo(()=>{if(!n){const L=new Date;return{startDate:new Date(L.getFullYear(),0,1),endDate:new Date(L.getFullYear()+1,11,31)}}const P=Oe(n.balanceAsOfDate),z=new Date(P.getFullYear()+10,11,31);return{startDate:P,endDate:z}},[n]),f=se.useMemo(()=>n?bT(n,h.startDate,h.endDate,t,o):[],[n,h,t,o]),m=se.useMemo(()=>{if(f.length===0)return[];const P=new Date().getFullYear();return[yy(f,P),yy(f,P+1)]},[f]);return{userProfile:n,setUserProfile:e,plannedVacations:t,addPlannedVacation:P=>{const z={...P,id:crypto.randomUUID()};i([...t,z])},updatePlannedVacation:(P,z)=>{i(t.map(L=>L.id===P?{...L,...z}:L))},deletePlannedVacation:P=>{i(t.filter(z=>z.id!==P))},holidays:o,setHolidays:l,weeklyBalances:f,annualSummaries:m,forecastPeriod:h,canAffordVacation:(P,z)=>{if(!n)return{canAfford:!1,projectedBalance:0};const L=Oe(P.endDate),j=z?t.filter(K=>K.id!==z):t,H=OT(n,L,[...j,{...P,id:P.id||"temp"}],o);return{canAfford:H>=0,projectedBalance:H}}}},LR="1.2",jR={2025:[{name:"Christmas",date:"2025-12-25",type:"federal"},{name:"JPL Floating",date:"2025-12-24",type:"jpl"},{name:"JPL Floating",date:"2025-12-23",type:"jpl",scheduleFilter:"9/80-only"},{name:"JPL Floating",date:"2025-12-26",type:"jpl",scheduleFilter:"5/40-only"}],2026:[{name:"New Year's Day",date:"2026-01-01",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2026-01-19",type:"federal"},{name:"Presidents' Day",date:"2026-02-16",type:"federal"},{name:"Memorial Day",date:"2026-05-25",type:"federal"},{name:"Juneteenth",date:"2026-06-19",type:"federal"},{name:"Independence Day",date:"2026-07-03",type:"federal",notes:"Observed"},{name:"Labor Day",date:"2026-09-07",type:"federal"},{name:"Thanksgiving",date:"2026-11-26",type:"federal"},{name:"Day After Thanksgiving",date:"2026-11-25",type:"federal",scheduleFilter:"9/80-only"},{name:"Day After Thanksgiving",date:"2026-11-27",type:"federal",scheduleFilter:"5/40-only"},{name:"Christmas",date:"2026-12-24",type:"federal",scheduleFilter:"9/80-only"},{name:"Christmas",date:"2026-12-25",type:"federal",scheduleFilter:"5/40-only"},{name:"JPL Floating",date:"2026-01-02",type:"jpl"},{name:"JPL Floating",date:"2026-12-28",type:"jpl"}]},OE={version:LR,holidays:jR},FR=(n,e,t)=>{const i=[];for(let o=n;o<=e;o++){const l=o.toString(),h=OE.holidays[l];h&&i.push(...h.filter(f=>!f.scheduleFilter||f.scheduleFilter==="All"||!t?!0:t==="5/40"?f.scheduleFilter!=="9/80-only":t==="9/80"?f.scheduleFilter!=="5/40-only":!0).map(f=>({name:f.name,date:f.date})))}return i},UR=(n,e,t)=>({defaultHolidays:se.useMemo(()=>{if(!n)return[];const o=new Date,l=e||o,h=t||new Date(o.getFullYear()+10,11,31),f=l.getFullYear(),m=h.getFullYear();return FR(f,m,n.type).map(_=>({..._,hours:Qf(Oe(_.date),n)}))},[n,e,t])}),Qd=["jpl-vacation-user-profile","jpl-vacation-planned-vacations","theme","jpl-vacation-calendar-view-mode"];function Zc(){const[n,e]=se.useState(null),[t,i]=se.useState(!0),[o,l]=se.useState(null),[h]=se.useState(xE()),[f,m]=se.useState(!1);return se.useEffect(()=>{if(!h){i(!1);return}const E=Kd();if(!E){i(!1);return}const I=Ek(E,async P=>{if(e(P),i(!1),P){Dr.setMode("cloud-sync",P.uid);try{await Dr.syncFromCloud(Qd)}catch{console.log("No cloud data found, will sync local data to cloud");try{await Dr.syncToCloud(Qd)}catch(L){console.error("Error syncing to cloud:",L)}}finally{m(!0)}}else Dr.setMode("localStorage"),m(!0)});return()=>I()},[h]),{user:n,loading:t,error:o,isFirebaseAvailable:h,initialSyncComplete:f,signInWithGoogle:async()=>{if(!h){l("Firebase is not configured. Cloud sync is not available.");return}l(null),i(!0);try{const E=Kd();if(!E)throw new Error("Firebase auth not initialized");const I=new oi,P=await zk(E,I);console.log("Signed in as:",P.user.email),Dr.setMode("cloud-sync",P.user.uid),await Dr.syncToCloud(Qd),e(P.user)}catch(E){console.error("Sign in error:",E),l(E.message||"Failed to sign in"),Dr.setMode("localStorage")}finally{i(!1)}},signOut:async()=>{if(h){l(null),i(!0);try{const E=Kd();if(!E)throw new Error("Firebase auth not initialized");await Tk(E),Dr.setMode("localStorage"),e(null),console.log("Signed out successfully")}catch(E){console.error("Sign out error:",E),l(E.message||"Failed to sign out")}finally{i(!1)}}}}}const Wv=({onSubmit:n,onBack:e})=>{const[t,i]=se.useState(""),[o,l]=se.useState(""),[h,f]=se.useState(""),[m,y]=se.useState("5/40"),[_,E]=se.useState(!1),I=P=>{P.preventDefault();const z={startDate:t,currentBalance:parseFloat(o),balanceAsOfDate:h,workSchedule:{type:m,rdoPattern:m==="9/80"?"odd-fridays":void 0},personalDayUsedInStartYear:_};n(z)};return T.jsxs("div",{className:"user-input-form-container",children:[e&&T.jsx("button",{onClick:e,className:"back-button",type:"button",children:" Back"}),T.jsx("h2",{children:"Welcome to JPL Vacation Forecast"}),T.jsx("p",{children:"Let's set up your vacation tracking profile"}),T.jsxs("form",{onSubmit:I,className:"user-input-form",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"startDate",children:"JPL Start Date"}),T.jsx("input",{type:"date",id:"startDate",value:t,onChange:P=>i(P.target.value),required:!0}),T.jsx("small",{children:"This determines your vacation accrual rate"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"currentBalance",children:"Current Vacation Balance (hours)"}),T.jsx("input",{type:"number",id:"currentBalance",value:o,onChange:P=>l(P.target.value),min:"0",step:"0.01",required:!0}),T.jsx("small",{children:"Include any carryover from previous year"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"balanceAsOfDate",children:"Balance As Of Date"}),T.jsx("input",{type:"date",id:"balanceAsOfDate",value:h,onChange:P=>f(P.target.value),required:!0}),T.jsx("small",{children:"When was this balance taken? Should be the start of a week (Sunday)"})]}),T.jsxs("div",{className:"form-group checkbox-group",children:[T.jsxs("label",{children:[T.jsx("input",{type:"checkbox",checked:_,onChange:P=>E(P.target.checked)}),T.jsx("span",{children:"I already used my Personal Day this year"})]}),T.jsxs("small",{children:["Check this if you took a personal day before ",h||"your balance date"]})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Work Schedule"}),T.jsxs("div",{className:"radio-group",children:[T.jsxs("label",{className:"radio-label",children:[T.jsx("input",{type:"radio",name:"scheduleType",value:"5/40",checked:m==="5/40",onChange:()=>y("5/40")}),T.jsx("span",{children:"5/40 (Five 8-hour days per week)"})]}),T.jsxs("label",{className:"radio-label",children:[T.jsx("input",{type:"radio",name:"scheduleType",value:"9/80",checked:m==="9/80",onChange:()=>y("9/80")}),T.jsx("span",{children:"9/80 (Nine 9-hour days + one 8-hour day over 2 weeks, alternating Friday off)"})]})]})]}),T.jsx("button",{type:"submit",className:"submit-button",children:"Start Forecasting"})]})]})};function VE(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=VE(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function eh(){for(var n,e,t=0,i="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=VE(n))&&(i&&(i+=" "),i+=e);return i}const BR=(n,e,t,i)=>{if(t==="length"||t==="prototype"||t==="arguments"||t==="caller")return;const o=Object.getOwnPropertyDescriptor(n,t),l=Object.getOwnPropertyDescriptor(e,t);!zR(o,l)&&i||Object.defineProperty(n,t,l)},zR=function(n,e){return n===void 0||n.configurable||n.writable===e.writable&&n.enumerable===e.enumerable&&n.configurable===e.configurable&&(n.writable||n.value===e.value)},$R=(n,e)=>{const t=Object.getPrototypeOf(e);t!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,t)},WR=(n,e)=>`/* Wrapped ${n}*/
${e}`,HR=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),qR=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),GR=(n,e,t)=>{const i=t===""?"":`with ${t.trim()}() `,o=WR.bind(null,i,e.toString());Object.defineProperty(o,"name",qR);const{writable:l,enumerable:h,configurable:f}=HR;Object.defineProperty(n,"toString",{value:o,writable:l,enumerable:h,configurable:f})};function KR(n,e,{ignoreNonConfigurable:t=!1}={}){const{name:i}=n;for(const o of Reflect.ownKeys(e))BR(n,e,o,t);return $R(n,e),GR(n,e,i),n}const qu=2147483647,YR=new WeakMap,Xd=new WeakMap,QR=new WeakMap;function XR(n,e){const t=n.get(e);if(t){if(t.maxAge<=Date.now()){n.delete(e);return}return t}}function ME(n,{cacheKey:e,cache:t=new Map,maxAge:i}={}){if(i===0)return n;if(typeof i=="number"&&Number.isFinite(i)){if(i>qu)throw new TypeError(`The \`maxAge\` option cannot exceed ${qu}.`);if(i<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const o=function(...l){var _;const h=e?e(l):l[0],f=XR(t,h);if(f)return f.data;const m=n.apply(this,l),y=typeof i=="function"?i(...l):i;if(y!==void 0&&y!==Number.POSITIVE_INFINITY){if(!Number.isFinite(y))throw new TypeError("The `maxAge` function must return a finite number, `0`, or `Infinity`.");if(y<=0)return m;if(y>qu)throw new TypeError(`The \`maxAge\` function result cannot exceed ${qu}.`)}if(t.set(h,{data:m,maxAge:y===void 0||y===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:Date.now()+y}),y!==void 0&&y!==Number.POSITIVE_INFINITY){const E=setTimeout(()=>{var P;t.delete(h),(P=Xd.get(o))==null||P.delete(E)},y);(_=E.unref)==null||_.call(E);const I=Xd.get(o)??new Set;I.add(E),Xd.set(o,I)}return m};return KR(o,n,{ignoreNonConfigurable:!0}),YR.set(o,t),QR.set(o,e??(l=>l[0])),o}function JR(n){return typeof n=="string"}function ZR(n,e,t){return t.indexOf(n)===e}function eP(n){return n.toLowerCase()===n}function Hv(n){return n.indexOf(",")===-1?n:n.split(",")}function xf(n){if(!n)return n;if(n==="C"||n==="posix"||n==="POSIX")return"en-US";if(n.indexOf(".")!==-1){var e=n.split(".")[0],t=e===void 0?"":e;return xf(t)}if(n.indexOf("@")!==-1){var i=n.split("@")[0],t=i===void 0?"":i;return xf(t)}if(n.indexOf("-")===-1||!eP(n))return n;var o=n.split("-"),l=o[0],h=o[1],f=h===void 0?"":h;return"".concat(l,"-").concat(f.toUpperCase())}function tP(n){var e=n===void 0?{}:n,t=e.useFallbackLocale,i=t===void 0?!0:t,o=e.fallbackLocale,l=o===void 0?"en-US":o,h=[];if(typeof navigator<"u"){for(var f=navigator.languages||[],m=[],y=0,_=f;y<_.length;y++){var E=_[y];m=m.concat(Hv(E))}var I=navigator.language,P=I&&Hv(I);h=h.concat(m,P)}return i&&h.push(l),h.filter(JR).map(xf).filter(ZR)}var nP=ME(tP,{cacheKey:JSON.stringify});function rP(n){return nP(n)[0]||null}var LE=ME(rP,{cacheKey:JSON.stringify});function mi(n,e,t){return function(o,l=t){const h=n(o)+l;return e(h)}}function bl(n){return function(t){return new Date(n(t).getTime()-1)}}function Ol(n,e){return function(i){return[n(i),e(i)]}}function ct(n){if(n instanceof Date)return n.getFullYear();if(typeof n=="number")return n;const e=Number.parseInt(n,10);if(typeof n=="string"&&!Number.isNaN(e))return e;throw new Error(`Failed to get year from date: ${n}.`)}function as(n){if(n instanceof Date)return n.getMonth();throw new Error(`Failed to get month from date: ${n}.`)}function th(n){if(n instanceof Date)return n.getDate();throw new Error(`Failed to get year from date: ${n}.`)}function ua(n){const e=ct(n),t=e+(-e+1)%100,i=new Date;return i.setFullYear(t,0,1),i.setHours(0,0,0,0),i}const iP=mi(ct,ua,-100),jE=mi(ct,ua,100),Up=bl(jE),sP=mi(ct,Up,-100),FE=Ol(ua,Up);function ls(n){const e=ct(n),t=e+(-e+1)%10,i=new Date;return i.setFullYear(t,0,1),i.setHours(0,0,0,0),i}const UE=mi(ct,ls,-10),Bp=mi(ct,ls,10),nh=bl(Bp),BE=mi(ct,nh,-10),zE=Ol(ls,nh);function ca(n){const e=ct(n),t=new Date;return t.setFullYear(e,0,1),t.setHours(0,0,0,0),t}const $E=mi(ct,ca,-1),zp=mi(ct,ca,1),rh=bl(zp),WE=mi(ct,rh,-1),oP=Ol(ca,rh);function $p(n,e){return function(i,o=e){const l=ct(i),h=as(i)+o,f=new Date;return f.setFullYear(l,h,1),f.setHours(0,0,0,0),n(f)}}function Js(n){const e=ct(n),t=as(n),i=new Date;return i.setFullYear(e,t,1),i.setHours(0,0,0,0),i}const HE=$p(Js,-1),Wp=$p(Js,1),Vl=bl(Wp),qE=$p(Vl,-1),aP=Ol(Js,Vl);function lP(n,e){return function(i,o=e){const l=ct(i),h=as(i),f=th(i)+o,m=new Date;return m.setFullYear(l,h,f),m.setHours(0,0,0,0),n(m)}}function Ml(n){const e=ct(n),t=as(n),i=th(n),o=new Date;return o.setFullYear(e,t,i),o.setHours(0,0,0,0),o}const uP=lP(Ml,1),Hp=bl(uP),cP=Ol(Ml,Hp);function GE(n){return th(Vl(n))}var qt={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},hP={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},qp=[0,1,2,3,4,5,6],Jd=new Map;function dP(n){return function(t,i){var o=t||LE();Jd.has(o)||Jd.set(o,new Map);var l=Jd.get(o);return l.has(n)||l.set(n,new Intl.DateTimeFormat(o||void 0,n).format),l.get(n)(i)}}function fP(n){var e=new Date(n);return new Date(e.setHours(12))}function Zs(n){return function(e,t){return dP(n)(e,fP(t))}}var pP={day:"numeric"},mP={day:"numeric",month:"long",year:"numeric"},gP={month:"long"},yP={month:"long",year:"numeric"},vP={weekday:"short"},_P={weekday:"long"},wP={year:"numeric"},EP=Zs(pP),TP=Zs(mP),SP=Zs(gP),KE=Zs(yP),IP=Zs(vP),AP=Zs(_P),ih=Zs(wP),CP=qp[0],kP=qp[5],qv=qp[6];function El(n,e){e===void 0&&(e=qt.ISO_8601);var t=n.getDay();switch(e){case qt.ISO_8601:return(t+6)%7;case qt.ISLAMIC:return(t+1)%7;case qt.HEBREW:case qt.GREGORY:return t;default:throw new Error("Unsupported calendar type.")}}function RP(n){var e=ua(n);return ct(e)}function PP(n){var e=ls(n);return ct(e)}function bf(n,e){e===void 0&&(e=qt.ISO_8601);var t=ct(n),i=as(n),o=n.getDate()-El(n,e);return new Date(t,i,o)}function DP(n,e){e===void 0&&(e=qt.ISO_8601);var t=e===qt.GREGORY?qt.GREGORY:qt.ISO_8601,i=bf(n,e),o=ct(n)+1,l,h;do l=new Date(o,0,t===qt.ISO_8601?4:1),h=bf(l,e),o-=1;while(n<h);return Math.round((i.getTime()-h.getTime())/(864e5*7))+1}function zs(n,e){switch(n){case"century":return ua(e);case"decade":return ls(e);case"year":return ca(e);case"month":return Js(e);case"day":return Ml(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function NP(n,e){switch(n){case"century":return iP(e);case"decade":return UE(e);case"year":return $E(e);case"month":return HE(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function YE(n,e){switch(n){case"century":return jE(e);case"decade":return Bp(e);case"year":return zp(e);case"month":return Wp(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function xP(n,e){switch(n){case"decade":return UE(e,-100);case"year":return $E(e,-10);case"month":return HE(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function bP(n,e){switch(n){case"decade":return Bp(e,100);case"year":return zp(e,10);case"month":return Wp(e,12);default:throw new Error("Invalid rangeType: ".concat(n))}}function QE(n,e){switch(n){case"century":return Up(e);case"decade":return nh(e);case"year":return rh(e);case"month":return Vl(e);case"day":return Hp(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function OP(n,e){switch(n){case"century":return sP(e);case"decade":return BE(e);case"year":return WE(e);case"month":return qE(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function VP(n,e){switch(n){case"decade":return BE(e,-100);case"year":return WE(e,-10);case"month":return qE(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function Gv(n,e){switch(n){case"century":return FE(e);case"decade":return zE(e);case"year":return oP(e);case"month":return aP(e);case"day":return cP(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function MP(n,e,t){var i=[e,t].sort(function(o,l){return o.getTime()-l.getTime()});return[zs(n,i[0]),QE(n,i[1])]}function XE(n,e,t){return t.map(function(i){return(e||ih)(n,i)}).join("  ")}function LP(n,e,t){return XE(n,e,FE(t))}function JE(n,e,t){return XE(n,e,zE(t))}function jP(n){return n.getDay()===new Date().getDay()}function ZE(n,e){e===void 0&&(e=qt.ISO_8601);var t=n.getDay();switch(e){case qt.ISLAMIC:case qt.HEBREW:return t===kP||t===qv;case qt.ISO_8601:case qt.GREGORY:return t===qv||t===CP;default:throw new Error("Unsupported calendar type.")}}var Pr="react-calendar__navigation";function FP(n){var e=n.activeStartDate,t=n.drillUp,i=n.formatMonthYear,o=i===void 0?KE:i,l=n.formatYear,h=l===void 0?ih:l,f=n.locale,m=n.maxDate,y=n.minDate,_=n.navigationAriaLabel,E=_===void 0?"":_,I=n.navigationAriaLive,P=n.navigationLabel,z=n.next2AriaLabel,L=z===void 0?"":z,j=n.next2Label,H=j===void 0?"":j,K=n.nextAriaLabel,oe=K===void 0?"":K,ne=n.nextLabel,be=ne===void 0?"":ne,ye=n.prev2AriaLabel,D=ye===void 0?"":ye,A=n.prev2Label,R=A===void 0?"":A,N=n.prevAriaLabel,x=N===void 0?"":N,V=n.prevLabel,C=V===void 0?"":V,Ve=n.setActiveStartDate,je=n.showDoubleView,Ge=n.view,$e=n.views,re=$e.indexOf(Ge)>0,ue=Ge!=="century",te=NP(Ge,e),M=ue?xP(Ge,e):void 0,q=YE(Ge,e),Te=ue?bP(Ge,e):void 0,Ee=(function(){if(te.getFullYear()<0)return!0;var He=OP(Ge,e);return y&&y>=He})(),Ne=ue&&(function(){if(M.getFullYear()<0)return!0;var He=VP(Ge,e);return y&&y>=He})(),De=m&&m<q,Z=ue&&m&&m<Te;function he(){Ve(te,"prev")}function de(){Ve(M,"prev2")}function Se(){Ve(q,"next")}function Me(){Ve(Te,"next2")}function vt(He){var bn=(function(){switch(Ge){case"century":return LP(f,h,He);case"decade":return JE(f,h,He);case"year":return h(f,He);case"month":return o(f,He);default:throw new Error("Invalid view: ".concat(Ge,"."))}})();return P?P({date:He,label:bn,locale:f||LE()||void 0,view:Ge}):bn}function St(){var He="".concat(Pr,"__label");return T.jsxs("button",{"aria-label":E,"aria-live":I,className:He,disabled:!re,onClick:t,style:{flexGrow:1},type:"button",children:[T.jsx("span",{className:"".concat(He,"__labelText ").concat(He,"__labelText--from"),children:vt(e)}),je?T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"".concat(He,"__divider"),children:"  "}),T.jsx("span",{className:"".concat(He,"__labelText ").concat(He,"__labelText--to"),children:vt(q)})]}):null]})}return T.jsxs("div",{className:Pr,children:[R!==null&&ue?T.jsx("button",{"aria-label":D,className:"".concat(Pr,"__arrow ").concat(Pr,"__prev2-button"),disabled:Ne,onClick:de,type:"button",children:R}):null,C!==null&&T.jsx("button",{"aria-label":x,className:"".concat(Pr,"__arrow ").concat(Pr,"__prev-button"),disabled:Ee,onClick:he,type:"button",children:C}),St(),be!==null&&T.jsx("button",{"aria-label":oe,className:"".concat(Pr,"__arrow ").concat(Pr,"__next-button"),disabled:De,onClick:Se,type:"button",children:be}),H!==null&&ue?T.jsx("button",{"aria-label":L,className:"".concat(Pr,"__arrow ").concat(Pr,"__next2-button"),disabled:Z,onClick:Me,type:"button",children:H}):null]})}var Uo=function(){return Uo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Uo.apply(this,arguments)},UP=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function Kv(n){return"".concat(n,"%")}function Gp(n){var e=n.children,t=n.className,i=n.count,o=n.direction,l=n.offset,h=n.style,f=n.wrap,m=UP(n,["children","className","count","direction","offset","style","wrap"]);return T.jsx("div",Uo({className:t,style:Uo({display:"flex",flexDirection:o,flexWrap:f?"wrap":"nowrap"},h)},m,{children:se.Children.map(e,function(y,_){var E=l&&_===0?Kv(100*l/i):null;return se.cloneElement(y,Uo(Uo({},y.props),{style:{flexBasis:Kv(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:E,marginInlineStart:E,marginInlineEnd:0}}))})}))}function BP(n,e,t){return e&&e>n?e:t&&t<n?t:n}function Tl(n,e){return e[0]<=n&&e[1]>=n}function zP(n,e){return n[0]<=e[0]&&n[1]>=e[1]}function e0(n,e){return Tl(n[0],e)||Tl(n[1],e)}function Yv(n,e,t){var i=e0(e,n),o=[];if(i){o.push(t);var l=Tl(n[0],e),h=Tl(n[1],e);l&&o.push("".concat(t,"Start")),h&&o.push("".concat(t,"End")),l&&h&&o.push("".concat(t,"BothEnds"))}return o}function $P(n){return Array.isArray(n)?n[0]!==null&&n[1]!==null:n!==null}function WP(n){if(!n)throw new Error("args is required");var e=n.value,t=n.date,i=n.hover,o="react-calendar__tile",l=[o];if(!t)return l;var h=new Date,f=(function(){if(Array.isArray(t))return t;var P=n.dateType;if(!P)throw new Error("dateType is required when date is not an array of two dates");return Gv(P,t)})();if(Tl(h,f)&&l.push("".concat(o,"--now")),!e||!$P(e))return l;var m=(function(){if(Array.isArray(e))return e;var P=n.valueType;if(!P)throw new Error("valueType is required when value is not an array of two dates");return Gv(P,e)})();zP(m,f)?l.push("".concat(o,"--active")):e0(m,f)&&l.push("".concat(o,"--hasActive"));var y=Yv(m,f,"".concat(o,"--range"));l.push.apply(l,y);var _=Array.isArray(e)?e:[e];if(i&&_.length===1){var E=i>m[0]?[m[0],i]:[i,m[0]],I=Yv(E,f,"".concat(o,"--hover"));l.push.apply(l,I)}return l}function sh(n){for(var e=n.className,t=n.count,i=t===void 0?3:t,o=n.dateTransform,l=n.dateType,h=n.end,f=n.hover,m=n.offset,y=n.renderTile,_=n.start,E=n.step,I=E===void 0?1:E,P=n.value,z=n.valueType,L=[],j=_;j<=h;j+=I){var H=o(j);L.push(y({classes:WP({date:H,dateType:l,hover:f,value:P,valueType:z}),date:H}))}return T.jsx(Gp,{className:e,count:i,offset:m,wrap:!0,children:L})}function oh(n){var e=n.activeStartDate,t=n.children,i=n.classes,o=n.date,l=n.formatAbbr,h=n.locale,f=n.maxDate,m=n.maxDateTransform,y=n.minDate,_=n.minDateTransform,E=n.onClick,I=n.onMouseOver,P=n.style,z=n.tileClassName,L=n.tileContent,j=n.tileDisabled,H=n.view,K=se.useMemo(function(){var ne={activeStartDate:e,date:o,view:H};return typeof z=="function"?z(ne):z},[e,o,z,H]),oe=se.useMemo(function(){var ne={activeStartDate:e,date:o,view:H};return typeof L=="function"?L(ne):L},[e,o,L,H]);return T.jsxs("button",{className:eh(i,K),disabled:y&&_(y)>o||f&&m(f)<o||(j==null?void 0:j({activeStartDate:e,date:o,view:H})),onClick:E?function(ne){return E(o,ne)}:void 0,onFocus:I?function(){return I(o)}:void 0,onMouseOver:I?function(){return I(o)}:void 0,style:P,type:"button",children:[l?T.jsx("abbr",{"aria-label":l(h,o),children:t}):t,oe]})}var Of=function(){return Of=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Of.apply(this,arguments)},HP=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Qv="react-calendar__century-view__decades__decade";function qP(n){var e=n.classes,t=e===void 0?[]:e,i=n.currentCentury,o=n.formatYear,l=o===void 0?ih:o,h=HP(n,["classes","currentCentury","formatYear"]),f=h.date,m=h.locale,y=[];return t&&y.push.apply(y,t),y.push(Qv),ua(f).getFullYear()!==i&&y.push("".concat(Qv,"--neighboringCentury")),T.jsx(oh,Of({},h,{classes:y,maxDateTransform:nh,minDateTransform:ls,view:"century",children:JE(m,l,f)}))}var Vf=function(){return Vf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Vf.apply(this,arguments)},Xv=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function GP(n){var e=n.activeStartDate,t=n.hover,i=n.showNeighboringCentury,o=n.value,l=n.valueType,h=Xv(n,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),f=RP(e),m=f+(i?119:99);return T.jsx(sh,{className:"react-calendar__century-view__decades",dateTransform:ls,dateType:"decade",end:m,hover:t,renderTile:function(y){var _=y.date,E=Xv(y,["date"]);return T.jsx(qP,Vf({},h,E,{activeStartDate:e,currentCentury:f,date:_}),_.getTime())},start:f,step:10,value:o,valueType:l})}var Mf=function(){return Mf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Mf.apply(this,arguments)};function KP(n){function e(){return T.jsx(GP,Mf({},n))}return T.jsx("div",{className:"react-calendar__century-view",children:e()})}var Lf=function(){return Lf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Lf.apply(this,arguments)},YP=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Jv="react-calendar__decade-view__years__year";function QP(n){var e=n.classes,t=e===void 0?[]:e,i=n.currentDecade,o=n.formatYear,l=o===void 0?ih:o,h=YP(n,["classes","currentDecade","formatYear"]),f=h.date,m=h.locale,y=[];return t&&y.push.apply(y,t),y.push(Jv),ls(f).getFullYear()!==i&&y.push("".concat(Jv,"--neighboringDecade")),T.jsx(oh,Lf({},h,{classes:y,maxDateTransform:rh,minDateTransform:ca,view:"decade",children:l(m,f)}))}var jf=function(){return jf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},jf.apply(this,arguments)},Zv=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function XP(n){var e=n.activeStartDate,t=n.hover,i=n.showNeighboringDecade,o=n.value,l=n.valueType,h=Zv(n,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),f=PP(e),m=f+(i?11:9);return T.jsx(sh,{className:"react-calendar__decade-view__years",dateTransform:ca,dateType:"year",end:m,hover:t,renderTile:function(y){var _=y.date,E=Zv(y,["date"]);return T.jsx(QP,jf({},h,E,{activeStartDate:e,currentDecade:f,date:_}),_.getTime())},start:f,value:o,valueType:l})}var Ff=function(){return Ff=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Ff.apply(this,arguments)};function JP(n){function e(){return T.jsx(XP,Ff({},n))}return T.jsx("div",{className:"react-calendar__decade-view",children:e()})}var Uf=function(){return Uf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Uf.apply(this,arguments)},ZP=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},e_=function(n,e,t){if(t||arguments.length===2)for(var i=0,o=e.length,l;i<o;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return n.concat(l||Array.prototype.slice.call(e))},eD="react-calendar__year-view__months__month";function tD(n){var e=n.classes,t=e===void 0?[]:e,i=n.formatMonth,o=i===void 0?SP:i,l=n.formatMonthYear,h=l===void 0?KE:l,f=ZP(n,["classes","formatMonth","formatMonthYear"]),m=f.date,y=f.locale;return T.jsx(oh,Uf({},f,{classes:e_(e_([],t,!0),[eD],!1),formatAbbr:h,maxDateTransform:Vl,minDateTransform:Js,view:"year",children:o(y,m)}))}var Bf=function(){return Bf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Bf.apply(this,arguments)},t_=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function nD(n){var e=n.activeStartDate,t=n.hover,i=n.value,o=n.valueType,l=t_(n,["activeStartDate","hover","value","valueType"]),h=0,f=11,m=ct(e);return T.jsx(sh,{className:"react-calendar__year-view__months",dateTransform:function(y){var _=new Date;return _.setFullYear(m,y,1),Js(_)},dateType:"month",end:f,hover:t,renderTile:function(y){var _=y.date,E=t_(y,["date"]);return T.jsx(tD,Bf({},l,E,{activeStartDate:e,date:_}),_.getTime())},start:h,value:i,valueType:o})}var zf=function(){return zf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},zf.apply(this,arguments)};function rD(n){function e(){return T.jsx(nD,zf({},n))}return T.jsx("div",{className:"react-calendar__year-view",children:e()})}var $f=function(){return $f=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},$f.apply(this,arguments)},iD=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Zd="react-calendar__month-view__days__day";function sD(n){var e=n.calendarType,t=n.classes,i=t===void 0?[]:t,o=n.currentMonthIndex,l=n.formatDay,h=l===void 0?EP:l,f=n.formatLongDate,m=f===void 0?TP:f,y=iD(n,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),_=y.date,E=y.locale,I=[];return i&&I.push.apply(I,i),I.push(Zd),ZE(_,e)&&I.push("".concat(Zd,"--weekend")),_.getMonth()!==o&&I.push("".concat(Zd,"--neighboringMonth")),T.jsx(oh,$f({},y,{classes:I,formatAbbr:m,maxDateTransform:Hp,minDateTransform:Ml,view:"month",children:h(E,_)}))}var Wf=function(){return Wf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Wf.apply(this,arguments)},n_=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function oD(n){var e=n.activeStartDate,t=n.calendarType,i=n.hover,o=n.showFixedNumberOfWeeks,l=n.showNeighboringMonth,h=n.value,f=n.valueType,m=n_(n,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),y=ct(e),_=as(e),E=o||l,I=El(e,t),P=E?0:I,z=(E?-I:0)+1,L=(function(){if(o)return z+42-1;var j=GE(e);if(l){var H=new Date;H.setFullYear(y,_,j),H.setHours(0,0,0,0);var K=7-El(H,t)-1;return j+K}return j})();return T.jsx(sh,{className:"react-calendar__month-view__days",count:7,dateTransform:function(j){var H=new Date;return H.setFullYear(y,_,j),Ml(H)},dateType:"day",hover:i,end:L,renderTile:function(j){var H=j.date,K=n_(j,["date"]);return T.jsx(sD,Wf({},m,K,{activeStartDate:e,calendarType:t,currentMonthIndex:_,date:H}),H.getTime())},offset:P,start:z,value:h,valueType:f})}var t0="react-calendar__month-view__weekdays",ef="".concat(t0,"__weekday");function aD(n){for(var e=n.calendarType,t=n.formatShortWeekday,i=t===void 0?IP:t,o=n.formatWeekday,l=o===void 0?AP:o,h=n.locale,f=n.onMouseLeave,m=new Date,y=Js(m),_=ct(y),E=as(y),I=[],P=1;P<=7;P+=1){var z=new Date(_,E,P-El(y,e)),L=l(h,z);I.push(T.jsx("div",{className:eh(ef,jP(z)&&"".concat(ef,"--current"),ZE(z,e)&&"".concat(ef,"--weekend")),children:T.jsx("abbr",{"aria-label":L,title:L,children:i(h,z).replace(".","")})},P))}return T.jsx(Gp,{className:t0,count:7,onFocus:f,onMouseOver:f,children:I})}var xc=function(){return xc=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},xc.apply(this,arguments)},r_=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},i_="react-calendar__tile";function lD(n){var e=n.onClickWeekNumber,t=n.weekNumber,i=T.jsx("span",{children:t});if(e){var o=n.date,l=n.onClickWeekNumber,h=n.weekNumber,f=r_(n,["date","onClickWeekNumber","weekNumber"]);return T.jsx("button",xc({},f,{className:i_,onClick:function(m){return l(h,o,m)},type:"button",children:i}))}else{n.date,n.onClickWeekNumber,n.weekNumber;var f=r_(n,["date","onClickWeekNumber","weekNumber"]);return T.jsx("div",xc({},f,{className:i_,children:i}))}}function uD(n){var e=n.activeStartDate,t=n.calendarType,i=n.onClickWeekNumber,o=n.onMouseLeave,l=n.showFixedNumberOfWeeks,h=(function(){if(l)return 6;var y=GE(e),_=El(e,t),E=y-(7-_);return 1+Math.ceil(E/7)})(),f=(function(){for(var y=ct(e),_=as(e),E=th(e),I=[],P=0;P<h;P+=1)I.push(bf(new Date(y,_,E+P*7),t));return I})(),m=f.map(function(y){return DP(y,t)});return T.jsx(Gp,{className:"react-calendar__month-view__weekNumbers",count:h,direction:"column",onFocus:o,onMouseOver:o,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:m.map(function(y,_){var E=f[_];if(!E)throw new Error("date is not defined");return T.jsx(lD,{date:E,onClickWeekNumber:i,weekNumber:y},y)})})}var Hf=function(){return Hf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Hf.apply(this,arguments)},cD=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function hD(n){if(n)for(var e=0,t=Object.entries(hP);e<t.length;e++){var i=t[e],o=i[0],l=i[1];if(l.includes(n))return o}return qt.ISO_8601}function dD(n){var e=n.activeStartDate,t=n.locale,i=n.onMouseLeave,o=n.showFixedNumberOfWeeks,l=n.calendarType,h=l===void 0?hD(t):l,f=n.formatShortWeekday,m=n.formatWeekday,y=n.onClickWeekNumber,_=n.showWeekNumbers,E=cD(n,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function I(){return T.jsx(aD,{calendarType:h,formatShortWeekday:f,formatWeekday:m,locale:t,onMouseLeave:i})}function P(){return _?T.jsx(uD,{activeStartDate:e,calendarType:h,onClickWeekNumber:y,onMouseLeave:i,showFixedNumberOfWeeks:o}):null}function z(){return T.jsx(oD,Hf({calendarType:h},E))}var L="react-calendar__month-view";return T.jsx("div",{className:eh(L,_?"".concat(L,"--weekNumbers"):""),children:T.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[P(),T.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[I(),z()]})]})})}var Bo=function(){return Bo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Bo.apply(this,arguments)},Gu="react-calendar",uc=["century","decade","year","month"],fD=["decade","year","month","day"],Kp=new Date;Kp.setFullYear(1,0,1);Kp.setHours(0,0,0,0);var pD=new Date(864e13);function il(n){return n instanceof Date?n:new Date(n)}function n0(n,e){return uc.slice(uc.indexOf(n),uc.indexOf(e)+1)}function mD(n,e,t){var i=n0(e,t);return i.indexOf(n)!==-1}function Yp(n,e,t){return n&&mD(n,e,t)?n:t}function r0(n){var e=uc.indexOf(n);return fD[e]}function gD(n,e){var t=Array.isArray(n)?n[e]:n;if(!t)return null;var i=il(t);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(n));return i}function i0(n,e){var t=n.value,i=n.minDate,o=n.maxDate,l=n.maxDetail,h=gD(t,e);if(!h)return null;var f=r0(l),m=(function(){switch(e){case 0:return zs(f,h);case 1:return QE(f,h);default:throw new Error("Invalid index value: ".concat(e))}})();return BP(m,i,o)}var Qp=function(n){return i0(n,0)},s0=function(n){return i0(n,1)},yD=function(n){return[Qp,s0].map(function(e){return e(n)})};function o0(n){var e=n.maxDate,t=n.maxDetail,i=n.minDate,o=n.minDetail,l=n.value,h=n.view,f=Yp(h,o,t),m=Qp({value:l,minDate:i,maxDate:e,maxDetail:t})||new Date;return zs(f,m)}function vD(n){var e=n.activeStartDate,t=n.defaultActiveStartDate,i=n.defaultValue,o=n.defaultView,l=n.maxDate,h=n.maxDetail,f=n.minDate,m=n.minDetail,y=n.value,_=n.view,E=Yp(_,m,h),I=e||t;return I?zs(E,I):o0({maxDate:l,maxDetail:h,minDate:f,minDetail:m,value:y||i,view:_||o})}function tf(n){return n&&(!Array.isArray(n)||n.length===1)}function Ku(n,e){return n instanceof Date&&e instanceof Date&&n.getTime()===e.getTime()}var _D=se.forwardRef(function(e,t){var i=e.activeStartDate,o=e.allowPartialRange,l=e.calendarType,h=e.className,f=e.defaultActiveStartDate,m=e.defaultValue,y=e.defaultView,_=e.formatDay,E=e.formatLongDate,I=e.formatMonth,P=e.formatMonthYear,z=e.formatShortWeekday,L=e.formatWeekday,j=e.formatYear,H=e.goToRangeStartOnSelect,K=H===void 0?!0:H,oe=e.inputRef,ne=e.locale,be=e.maxDate,ye=be===void 0?pD:be,D=e.maxDetail,A=D===void 0?"month":D,R=e.minDate,N=R===void 0?Kp:R,x=e.minDetail,V=x===void 0?"century":x,C=e.navigationAriaLabel,Ve=e.navigationAriaLive,je=e.navigationLabel,Ge=e.next2AriaLabel,$e=e.next2Label,re=e.nextAriaLabel,ue=e.nextLabel,te=e.onActiveStartDateChange,M=e.onChange,q=e.onClickDay,Te=e.onClickDecade,Ee=e.onClickMonth,Ne=e.onClickWeekNumber,De=e.onClickYear,Z=e.onDrillDown,he=e.onDrillUp,de=e.onViewChange,Se=e.prev2AriaLabel,Me=e.prev2Label,vt=e.prevAriaLabel,St=e.prevLabel,He=e.returnValue,bn=He===void 0?"start":He,Pt=e.selectRange,On=e.showDoubleView,gi=e.showFixedNumberOfWeeks,ht=e.showNavigation,dt=ht===void 0?!0:ht,vn=e.showNeighboringCentury,us=e.showNeighboringDecade,yi=e.showNeighboringMonth,eo=yi===void 0?!0:yi,lr=e.showWeekNumbers,cs=e.tileClassName,vi=e.tileContent,ur=e.tileDisabled,_i=e.value,cr=e.view,Kn=se.useState(f),to=Kn[0],_n=Kn[1],Ur=se.useState(null),hs=Ur[0],ln=Ur[1],Br=se.useState(Array.isArray(m)?m.map(function(xe){return xe!==null?il(xe):null}):m!=null?il(m):null),Vn=Br[0],wi=Br[1],Mn=se.useState(y),Yn=Mn[0],rt=Mn[1],It=i||to||vD({activeStartDate:i,defaultActiveStartDate:f,defaultValue:m,defaultView:y,maxDate:ye,maxDetail:A,minDate:N,minDetail:V,value:_i,view:cr}),ft=(function(){var xe=(function(){return Pt&&tf(Vn)?Vn:_i!==void 0?_i:Vn})();return xe?Array.isArray(xe)?xe.map(function(Ze){return Ze!==null?il(Ze):null}):xe!==null?il(xe):null:null})(),wn=r0(A),Je=Yp(cr||Yn,V,A),sn=n0(V,A),Ln=Pt?hs:null,Ei=sn.indexOf(Je)<sn.length-1,hr=sn.indexOf(Je)>0,Qn=se.useCallback(function(xe){var Ze=(function(){switch(bn){case"start":return Qp;case"end":return s0;case"range":return yD;default:throw new Error("Invalid returnValue.")}})();return Ze({maxDate:ye,maxDetail:A,minDate:N,value:xe})},[ye,A,N,bn]),jn=se.useCallback(function(xe,Ze){_n(xe);var it={action:Ze,activeStartDate:xe,value:ft,view:Je};te&&!Ku(It,xe)&&te(it)},[It,te,ft,Je]),zr=se.useCallback(function(xe,Ze){var it=(function(){switch(Je){case"century":return Te;case"decade":return De;case"year":return Ee;case"month":return q;default:throw new Error("Invalid view: ".concat(Je,"."))}})();it&&it(xe,Ze)},[q,Te,Ee,De,Je]),En=se.useCallback(function(xe,Ze){if(Ei){zr(xe,Ze);var it=sn[sn.indexOf(Je)+1];if(!it)throw new Error("Attempted to drill down from the lowest view.");_n(xe),rt(it);var Kt={action:"drillDown",activeStartDate:xe,value:ft,view:it};te&&!Ku(It,xe)&&te(Kt),de&&Je!==it&&de(Kt),Z&&Z(Kt)}},[It,Ei,te,zr,Z,de,ft,Je,sn]),un=se.useCallback(function(){if(hr){var xe=sn[sn.indexOf(Je)-1];if(!xe)throw new Error("Attempted to drill up from the highest view.");var Ze=zs(xe,It);_n(Ze),rt(xe);var it={action:"drillUp",activeStartDate:Ze,value:ft,view:xe};te&&!Ku(It,Ze)&&te(it),de&&Je!==xe&&de(it),he&&he(it)}},[It,hr,te,he,de,ft,Je,sn]),dr=se.useCallback(function(xe,Ze){var it=ft;zr(xe,Ze);var Kt=Pt&&!tf(it),Dt;if(Pt)if(Kt)Dt=zs(wn,xe);else{if(!it)throw new Error("previousValue is required");if(Array.isArray(it))throw new Error("previousValue must not be an array");Dt=MP(wn,it,xe)}else Dt=Qn(xe);var $r=!Pt||Kt||K?o0({maxDate:ye,maxDetail:A,minDate:N,minDetail:V,value:Dt,view:Je}):null;Ze.persist(),_n($r),wi(Dt);var Si={action:"onChange",activeStartDate:$r,value:Dt,view:Je};if(te&&!Ku(It,$r)&&te(Si),M)if(Pt){var Wr=tf(Dt);if(!Wr)M(Dt||null,Ze);else if(o){if(Array.isArray(Dt))throw new Error("value must not be an array");M([Dt||null,null],Ze)}}else M(Dt||null,Ze)},[It,o,Qn,K,ye,A,N,V,te,M,zr,Pt,ft,wn,Je]);function cn(xe){ln(xe)}function Ti(){ln(null)}se.useImperativeHandle(t,function(){return{activeStartDate:It,drillDown:En,drillUp:un,onChange:dr,setActiveStartDate:jn,value:ft,view:Je}},[It,En,un,dr,jn,ft,Je]);function ds(xe){var Ze=xe?YE(Je,It):zs(Je,It),it=Ei?En:dr,Kt={activeStartDate:Ze,hover:Ln,locale:ne,maxDate:ye,minDate:N,onClick:it,onMouseOver:Pt?cn:void 0,tileClassName:cs,tileContent:vi,tileDisabled:ur,value:ft,valueType:wn};switch(Je){case"century":return T.jsx(KP,Bo({formatYear:j,showNeighboringCentury:vn},Kt));case"decade":return T.jsx(JP,Bo({formatYear:j,showNeighboringDecade:us},Kt));case"year":return T.jsx(rD,Bo({formatMonth:I,formatMonthYear:P},Kt));case"month":return T.jsx(dD,Bo({calendarType:l,formatDay:_,formatLongDate:E,formatShortWeekday:z,formatWeekday:L,onClickWeekNumber:Ne,onMouseLeave:Pt?Ti:void 0,showFixedNumberOfWeeks:typeof gi<"u"?gi:On,showNeighboringMonth:eo,showWeekNumbers:lr},Kt));default:throw new Error("Invalid view: ".concat(Je,"."))}}function fs(){return dt?T.jsx(FP,{activeStartDate:It,drillUp:un,formatMonthYear:P,formatYear:j,locale:ne,maxDate:ye,minDate:N,navigationAriaLabel:C,navigationAriaLive:Ve,navigationLabel:je,next2AriaLabel:Ge,next2Label:$e,nextAriaLabel:re,nextLabel:ue,prev2AriaLabel:Se,prev2Label:Me,prevAriaLabel:vt,prevLabel:St,setActiveStartDate:jn,showDoubleView:On,view:Je,views:sn}):null}var Tn=Array.isArray(ft)?ft:[ft];return T.jsxs("div",{className:eh(Gu,Pt&&Tn.length===1&&"".concat(Gu,"--selectRange"),On&&"".concat(Gu,"--doubleView"),h),ref:oe,children:[fs(),T.jsxs("div",{className:"".concat(Gu,"__viewContainer"),onBlur:Pt?Ti:void 0,onMouseLeave:Pt?Ti:void 0,children:[ds(),On?ds(!0):null]})]})}),zo=(n=>(n.REGULAR="regular",n.RDO="rdo",n.HOLIDAY="holiday",n.PLANNED_VACATION="planned_vacation",n.WEEKEND="weekend",n))(zo||{});const wD=(n,e,t,i,o,l)=>{const h=new Map,f=Kf(o,l);for(const m of f){const y=nt(m),_=[];bc(m)&&_.push(zo.WEEKEND);const E=Oc(m,i);E&&_.push(zo.RDO);const I=t.find(j=>j.date===y);I&&_.push(zo.HOLIDAY);const P=e.find(j=>{const H=Oe(j.startDate),K=Oe(j.endDate);return Xu(m,H,K)});P&&_.push(zo.PLANNED_VACATION);let z,L;if(m.getDay()===0){const j=n.find(H=>{const K=Oe(H.weekEndDate);return nt(K)===y});z=j==null?void 0:j.endingBalance,L=j==null?void 0:j.accrued}h.set(y,{date:m,types:_,hours:Qf(m,i),vacationHours:P?Xf(P,i,t):void 0,balance:z,accrualRate:L,isInVacation:!!P,vacationId:P==null?void 0:P.id,isHoliday:!!I,holidayName:I==null?void 0:I.name,isRDO:E,isPersonalDayStart:(P==null?void 0:P.personalDayUsed)&&nt(Oe(P.startDate))===y})}return h},ED=({dayInfo:n,isInSelectionRange:e,isSelectionStart:t,isSelectionEnd:i})=>n?T.jsxs("div",{className:"calendar-tile-content",children:[T.jsxs("div",{className:"day-indicators",children:[n.isPersonalDayStart&&T.jsx("span",{className:"indicator personal-day",title:"Personal Day Applied",children:"P"}),n.isInVacation&&T.jsx("span",{className:"indicator vacation",title:"Planned Vacation",children:"V"}),n.isHoliday&&T.jsx("span",{className:"indicator holiday",title:n.holidayName,children:"H"}),n.isRDO&&T.jsx("span",{className:"indicator rdo",title:"Regular Day Off",children:"R"})]}),n.balance!==void 0&&T.jsxs("div",{className:`balance-display ${n.balance<0?"negative":n.balance>=u_?"at-max":n.balance>NT?"warning":n.balance<=xT?"low-warning":"positive"}`,title:n.accrualRate!==void 0?`Accrual rate: +${n.accrualRate.toFixed(2)} hours`:void 0,children:[n.balance.toFixed(1),"h"]}),e&&T.jsx("div",{className:"selection-overlay"}),t&&T.jsx("div",{className:"selection-start-marker"}),i&&T.jsx("div",{className:"selection-end-marker"})]}):null,TD=a_.memo(ED),SD=({vacation:n,isOpen:e,workSchedule:t,holidays:i,onSave:o,onDelete:l,onClose:h,canAffordVacation:f})=>{const[m,y]=se.useState(""),[_,E]=se.useState(""),[I,P]=se.useState(""),[z,L]=se.useState(!1),[j,H]=se.useState(""),[K,oe]=se.useState(!1);se.useEffect(()=>{n&&(y(n.startDate),E(n.endDate),P(n.description||""),L(n.personalDayUsed||!1),H(""),oe(!1))},[n]);const ne=se.useMemo(()=>{if(!m||!_)return 0;try{const A=Fs(Oe(m),Oe(_),t,i);return z?Math.max(0,A-8):A}catch{return 0}},[m,_,t,i,z]),be=()=>{if(!n)return;if(!m||!_){H("Both start and end dates are required");return}if(Oe(_)<Oe(m)){H("End date must be after start date");return}const{canAfford:A,projectedBalance:R}=f({startDate:m,endDate:_,personalDayUsed:z},n.id);if(!A){H(`Cannot afford this change. Need ${ne}h, will have ${R.toFixed(2)}h`);return}o(n.id,{startDate:m,endDate:_,description:I.trim()||void 0,personalDayUsed:z}),h()},ye=()=>{if(n){if(!K){oe(!0);return}l(n.id),h()}},D=()=>{oe(!1),h()};return!e||!n?null:T.jsx("div",{className:"modal-overlay",onClick:D,children:T.jsxs("div",{className:"modal-content",onClick:A=>A.stopPropagation(),children:[T.jsx("h2",{children:"Edit Vacation"}),T.jsxs("form",{onSubmit:A=>{A.preventDefault(),be()},children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"edit-start-date",children:"Start Date"}),T.jsx("input",{type:"date",id:"edit-start-date",value:m,onChange:A=>y(A.target.value),required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"edit-end-date",children:"End Date"}),T.jsx("input",{type:"date",id:"edit-end-date",value:_,onChange:A=>E(A.target.value),required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"edit-description",children:"Description (optional)"}),T.jsx("input",{type:"text",id:"edit-description",value:I,onChange:A=>P(A.target.value),placeholder:"e.g., Summer vacation"})]}),T.jsx("div",{className:"form-group checkbox-group",children:T.jsxs("label",{children:[T.jsx("input",{type:"checkbox",checked:z,onChange:A=>L(A.target.checked)}),"Use Personal Day (8h credit)"]})}),T.jsxs("div",{className:"hours-estimate",children:[T.jsx("strong",{children:"Hours needed:"})," ",ne.toFixed(2)]}),j&&T.jsx("div",{className:"error-message",children:j}),T.jsxs("div",{className:"modal-actions",children:[T.jsx("button",{type:"button",onClick:ye,className:"delete-button",children:K?"Confirm Delete":"Delete"}),T.jsxs("div",{className:"right-actions",children:[T.jsx("button",{type:"button",onClick:D,className:"cancel-button",children:"Cancel"}),T.jsx("button",{type:"submit",className:"save-button",children:"Save Changes"})]})]})]})]})})},ID=({vacations:n,workSchedule:e,holidays:t,onEdit:i,onDelete:o})=>{const l=se.useMemo(()=>{if(n.length===0)return[];const m={};return n.forEach(_=>{const E=Oe(_.startDate).getFullYear();m[E]||(m[E]=[]),m[E].push(_)}),Object.keys(m).map(_=>{const E=parseInt(_,10),I=m[E];return{year:E,vacations:I?I.sort((P,z)=>P.startDate.localeCompare(z.startDate)):[]}}).sort((_,E)=>_.year-E.year)},[n]),h=m=>Oe(m).toLocaleDateString("en-US",{month:"short",day:"numeric"}),f=m=>{const y=Oe(m.startDate),_=Oe(m.endDate),E=Math.ceil((_.getTime()-y.getTime())/(1e3*60*60*24))+1;return E===1?"1 day":`${E} days`};return n.length===0?null:T.jsxs("div",{className:"vacation-list-by-year",children:[T.jsx("h3",{children:"Planned Vacations"}),l.map(m=>T.jsxs("div",{className:"vacation-year-group",children:[T.jsx("h4",{className:"vacation-year-header",children:m.year}),T.jsx("div",{className:"vacation-table-wrapper",children:T.jsxs("table",{className:"vacation-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Dates"}),T.jsx("th",{children:"Description"}),T.jsx("th",{children:"Duration"}),T.jsx("th",{children:"Vacation Hours"}),T.jsx("th",{children:"Actions"})]})}),T.jsx("tbody",{children:m.vacations.map(y=>T.jsxs("tr",{children:[T.jsxs("td",{className:"vacation-dates",children:[h(y.startDate)," - ",h(y.endDate)]}),T.jsx("td",{className:"vacation-description",children:y.description||T.jsx("span",{className:"no-description",children:""})}),T.jsx("td",{className:"vacation-duration",children:f(y)}),T.jsxs("td",{className:"vacation-hours",children:[Xf(y,e,t).toFixed(1),"h"]}),T.jsxs("td",{className:"vacation-actions",children:[T.jsx("button",{onClick:()=>i(y),className:"action-button edit-button",title:"Edit vacation",children:"Edit"}),T.jsx("button",{onClick:()=>o(y.id),className:"action-button delete-button",title:"Delete vacation",children:"Delete"})]})]},y.id))})]})})]},m.year))]})},a0=(n,e)=>{const t=nt(n);return e.some(i=>i.date===t)},Yu=(n,e,t)=>bc(n)||Oc(n,e)?!0:a0(n,t),nf=(n,e,t,i)=>{const o=new Date(n);o.setDate(o.getDate()-1);const l=Yu(n,t,i)&&!Yu(o,t,i),h=new Date(e);h.setDate(h.getDate()+1);const f=Yu(e,t,i)&&!Yu(h,t,i);return l&&f},rf=(n,e,t,i)=>{let o;i===0?o=t>=4?3:1.5:o=Math.min(n,5);const l=o/5*50,h=e?25:0,f=Math.min(Math.log(t)/Math.log(14)*25,25);return l+h+f},Qu=(n,e)=>{const t=nt(n),i=e.find(o=>o.date===t);return i?i.name:null},sf=(n,e,t,i)=>{const o=Kf(n,e);let l=0,h=0,f=0;for(const m of o)bc(m)?l++:a0(m,i)?h++:Oc(m,t)&&f++;return{weekends:l,holidays:h,rdos:f}},of=(n,e,t,i)=>{const o=[],l=new Date(n);l.setDate(l.getDate()-1);const h=new Date(e);h.setDate(h.getDate()+1);const f=Qu(l,i),m=Qu(h,i),y=Qu(n,i),_=Qu(e,i);return f&&o.push(`${f} on ${nt(l)}`),m&&o.push(`${m} on ${nt(h)}`),y&&!f&&o.push(`starts on ${y}`),_&&!m&&o.push(`ends on ${_}`),t.weekends>0&&o.push(`includes ${t.weekends} weekend day${t.weekends>1?"s":""}`),t.holidays>0&&o.push(`${t.holidays} holiday${t.holidays>1?"s":""}`),t.rdos>0&&o.push(`${t.rdos} RDO${t.rdos>1?"s":""}`),o.length>0?o.join(", "):"Extends weekend"},AD=(n,e,t,i=1)=>{const o=[];for(let h=1;h<=14;h++){const f=new Date(n);if(f.setDate(f.getDate()-h),f<new Date)continue;const m=Fs(f,n,e,t),y=h+1;let _;if(m===0)y>=4?_=999:_=10;else{const E=e.type==="9/80"?9:8,I=m/E;_=y/I}if(_>=i){const E=sf(f,n,e,t),I=of(f,n,E,t),P=nf(f,n,e,t),z=rf(_,P,y,m);o.push({id:`before-${nt(n)}-${h}`,startDate:nt(f),endDate:nt(n),totalDays:y,vacationHours:m,efficiency:_,score:z,isBracketed:P,context:I,freeDays:E})}}for(let h=1;h<=14;h++){const f=new Date(n);f.setDate(f.getDate()+h);const m=Fs(n,f,e,t),y=h+1;let _;if(m===0)y>=4?_=999:_=10;else{const E=e.type==="9/80"?9:8,I=m/E;_=y/I}if(_>=i){const E=sf(n,f,e,t),I=of(n,f,E,t),P=nf(n,f,e,t),z=rf(_,P,y,m);o.push({id:`after-${nt(n)}-${h}`,startDate:nt(n),endDate:nt(f),totalDays:y,vacationHours:m,efficiency:_,score:z,isBracketed:P,context:I,freeDays:E})}}for(let h=1;h<=9;h++)for(let f=1;f<=9;f++){const m=new Date(n);m.setDate(m.getDate()-h);const y=new Date(n);if(y.setDate(y.getDate()+f),m<new Date)continue;const _=Fs(m,y,e,t),E=h+f+1;let I;if(_===0)E>=4?I=999:I=10;else{const P=e.type==="9/80"?9:8,z=_/P;I=E/z}if(I>=i){const P=sf(m,y,e,t),z=of(m,y,P,t),L=nf(m,y,e,t),j=rf(I,L,E,_);o.push({id:`around-${nt(n)}-${h}-${f}`,startDate:nt(m),endDate:nt(y),totalDays:E,vacationHours:_,efficiency:I,score:j,isBracketed:L,context:z,freeDays:P})}}return o},CD=(n,e,t)=>{if(t.type!=="9/80"||!t.rdoPattern)return[];const i=[],o=new Date(n);for(;o<=e;)o.getDay()===5&&Oc(o,t)&&i.push(new Date(o)),o.setDate(o.getDate()+1);return i},kD=(n,e,t=new Date,i=new Date(new Date().setFullYear(new Date().getFullYear()+1)),o=[],l=10)=>{console.log("[Recommender] Starting generation:",{workSchedule:n,holidayCount:e.length,startDate:t.toISOString().split("T")[0],endDate:i.toISOString().split("T")[0],existingVacations:o.length});const h=[],f=[];for(const H of e){const K=Oe(H.date);K>=t&&K<=i&&f.push(K)}console.log("[Recommender] Found anchor holidays:",f.length);const m=CD(t,i,n);f.push(...m);const y=new Date(t);for(;y<=i;)y.getDay()===5&&f.push(new Date(y)),y.getDay()===1&&f.push(new Date(y)),y.setDate(y.getDate()+1);console.log("[Recommender] Total anchor dates:",f.length);for(const H of f){const K=AD(H,n,e,1.5);h.push(...K)}console.log("[Recommender] All recommendations found:",h.length);const _=new Map;for(const H of h){const K=`${H.startDate}-${H.endDate}`,oe=_.get(K);(!oe||H.score>oe.score)&&_.set(K,H)}const E=Array.from(_.values()).find(H=>H.startDate==="2026-11-21"&&H.endDate==="2026-11-29");E&&console.log("[Recommender] Found Nov 21-29:",E);const I=Array.from(_.values()).find(H=>H.startDate==="2026-12-19"&&H.endDate==="2026-12-28");if(I)console.log("[Recommender] Found Dec 19-28:",I);else{const H=Array.from(_.values()).filter(K=>K.startDate.startsWith("2026-12"));console.log("[Recommender] December 2026 recommendations:",H.length),H.length>0&&console.log("[Recommender] Sample Dec recs:",H.slice(0,10).map(K=>({dates:`${K.startDate} to ${K.endDate}`,days:K.totalDays,hours:K.vacationHours,efficiency:K.efficiency.toFixed(2)})))}console.log("[Recommender] Unique recommendations:",_.size);const P=o.map(H=>({start:Oe(H.startDate),end:Oe(H.endDate)})),z=Array.from(_.values()).filter(H=>{const K=Oe(H.startDate),oe=Oe(H.endDate);return!P.some(ne=>K<=ne.end&&oe>=ne.start)});console.log("[Recommender] After filtering overlaps:",z.length);const j=z.sort((H,K)=>K.score-H.score).slice(0,l);return console.log("[Recommender] Final recommendations:",j.length),j.length>0&&console.log("[Recommender] Top 3:",j.slice(0,3)),j},RD=({userProfile:n,holidays:e,plannedVacations:t,onSelectRecommendation:i})=>{const[o,l]=se.useState(!1),h=new Date().getMonth()>=9?new Date().getFullYear()+1:new Date().getFullYear(),[f,m]=se.useState(h),[y,_]=se.useState("all"),E=se.useMemo(()=>{const L=new Date(f,0,1),j=new Date(f,11,31),H=kD(n.workSchedule,e,L>new Date?L:new Date,j,t,1e4);let K=H;y==="short"?K=K.filter(ne=>ne.totalDays<=7):y==="medium"?K=K.filter(ne=>ne.totalDays>=8&&ne.totalDays<=14):y==="long"&&(K=K.filter(ne=>ne.totalDays>14));const oe=K.slice(0,10);return console.log("[VacationRecommender] Pipeline: Generated:",H.length," Filtered:",K.length," Shown:",oe.length),oe},[n.workSchedule,e,t,f,y]),I=se.useMemo(()=>{const L=new Date,j=L.getFullYear();return L.getMonth()>=9?[j+1,j+2,j+3]:[j,j+1,j+2]},[]),P=(L,j)=>{const H=Oe(L),K=Oe(j),oe={month:"short",day:"numeric",year:"numeric"},ne=H.toLocaleDateString("en-US",oe),be=K.toLocaleDateString("en-US",oe);return`${ne} - ${be}`},z=L=>L>=3?{text:"Excellent",className:"excellent"}:L>=2?{text:"Great",className:"great"}:L>=1.5?{text:"Good",className:"good"}:{text:"Fair",className:"fair"};return console.log("[VacationRecommender] Rendering, isExpanded:",o,"recommendations:",E.length),o?T.jsxs("div",{className:"vacation-recommender",children:[T.jsxs("div",{className:"recommender-header",children:[T.jsxs("div",{className:"header-content",children:[T.jsxs("h2",{children:[T.jsx("span",{className:"icon",children:""}),"Vince's Top Picks!"]}),T.jsx("p",{className:"subtitle",children:"Maximize your time off by booking around holidays, weekends, and RDOs"})]}),T.jsx("button",{className:"collapse-button",onClick:()=>l(!1),"aria-label":"Hide recommendations",children:""})]}),T.jsxs("div",{className:"year-selector",children:[T.jsx("label",{children:"Show recommendations for:"}),T.jsx("div",{className:"year-buttons",children:I.map(L=>T.jsx("button",{className:f===L?"active":"",onClick:()=>m(L),children:L},L))})]}),T.jsxs("div",{className:"trip-length-filter",children:[T.jsx("label",{children:"Trip length:"}),T.jsxs("div",{className:"filter-buttons",children:[T.jsx("button",{className:y==="all"?"active":"",onClick:()=>_("all"),children:"All"}),T.jsx("button",{className:y==="short"?"active":"",onClick:()=>_("short"),children:"Short (1 wk)"}),T.jsx("button",{className:y==="medium"?"active":"",onClick:()=>_("medium"),children:"Medium (1-2 wks)"}),T.jsx("button",{className:y==="long"?"active":"",onClick:()=>_("long"),children:"Long (2+ wks)"})]})]}),E.length===0?T.jsxs("div",{className:"no-recommendations",children:[T.jsxs("p",{children:["No high-value vacation opportunities found for ",f,"."]}),T.jsx("p",{className:"hint",children:"Try selecting a different year or check your holiday calendar."})]}):T.jsxs("div",{className:"recommendations-list",children:[T.jsxs("div",{className:"list-header",children:[T.jsxs("span",{className:"header-label",children:["Top ",E.length," Opportunities"]}),T.jsxs("div",{className:"header-definitions",children:[T.jsx("span",{className:"efficiency-hint",children:"Efficiency = Days off  Work days used"}),T.jsx("span",{className:"bracketed-hint",children:"Bracketed = Starts/ends on free day with workdays outside"})]})]}),E.map((L,j)=>{const H=z(L.efficiency);return T.jsxs("div",{className:"recommendation-card",children:[T.jsxs("div",{className:"card-header",children:[T.jsxs("div",{className:"rank-badge",children:["#",j+1]}),T.jsx("div",{className:"date-range",children:P(L.startDate,L.endDate)}),T.jsx("div",{className:`efficiency-badge ${H.className}`,children:H.text})]}),T.jsxs("div",{className:"card-stats",children:[T.jsxs("div",{className:"stat",children:[T.jsx("span",{className:"stat-value",children:L.totalDays}),T.jsx("span",{className:"stat-label",children:"days off"})]}),T.jsx("div",{className:"stat-divider",children:"for"}),T.jsxs("div",{className:"stat",children:[T.jsx("span",{className:"stat-value",children:L.vacationHours}),T.jsx("span",{className:"stat-label",children:"hours"})]}),T.jsx("div",{className:"stat-divider",children:"="}),T.jsxs("div",{className:"stat",children:[T.jsx("span",{className:"stat-value",children:L.efficiency===999?"":`${L.efficiency.toFixed(1)}x`}),T.jsx("span",{className:"stat-label",children:"value"})]})]}),T.jsxs("div",{className:"score-breakdown",children:[T.jsx("div",{className:"score-header",children:T.jsxs("span",{className:"score-title",children:["Composite Score: ",L.score.toFixed(1)]})}),T.jsxs("div",{className:"score-components",children:[T.jsxs("div",{className:"score-component",children:[T.jsx("div",{className:"score-bar-container",children:T.jsx("div",{className:"score-bar efficiency-bar",style:{width:`${Math.min(L.vacationHours===0?(L.totalDays>=4?3:1.5)/5*100:Math.min(L.efficiency,5)/5*100,100)}%`}})}),T.jsx("span",{className:"score-label",children:"Efficiency (50%)"})]}),T.jsxs("div",{className:"score-component",children:[T.jsx("div",{className:"score-bar-container",children:T.jsx("div",{className:"score-bar bracketing-bar",style:{width:L.isBracketed?"100%":"0%"}})}),T.jsx("span",{className:"score-label",children:"Bracketing (25%)"})]}),T.jsxs("div",{className:"score-component",children:[T.jsx("div",{className:"score-bar-container",children:T.jsx("div",{className:"score-bar length-bar",style:{width:`${Math.min(Math.log(L.totalDays)/Math.log(14)*100,100)}%`}})}),T.jsx("span",{className:"score-label",children:"Length (25%)"})]})]})]}),L.context&&T.jsx("div",{className:"card-context",children:L.context}),T.jsxs("div",{className:"card-breakdown",children:[L.isBracketed&&T.jsx("span",{className:"free-day-tag bracketed",children:"Bracketed"}),L.freeDays.weekends>0&&T.jsxs("span",{className:"free-day-tag weekend",children:[L.freeDays.weekends," weekend day",L.freeDays.weekends>1?"s":""]}),L.freeDays.holidays>0&&T.jsxs("span",{className:"free-day-tag holiday",children:[L.freeDays.holidays," holiday",L.freeDays.holidays>1?"s":""]}),L.freeDays.rdos>0&&T.jsxs("span",{className:"free-day-tag rdo",children:[L.freeDays.rdos," RDO",L.freeDays.rdos>1?"s":""]})]}),T.jsx("button",{className:"select-button",onClick:()=>i(L),children:"Add to Calendar"})]},L.id)})]}),T.jsx("div",{className:"recommender-footer",children:T.jsxs("p",{className:"tip",children:[T.jsx("strong",{children:"How it works:"}),' Recommendations are scored using a composite formula: 50% efficiency (days off  work days), 25% bracketing bonus (starts/ends on a free day with workdays outside), and 25% trip length. "Bracketed" vacations maximize your time off by beginning the day after your last workday and ending the day before your next workday.']})})]}):T.jsx("div",{className:"vacation-recommender-collapsed",children:T.jsxs("button",{className:"expand-button",onClick:()=>l(!0),"aria-label":"Show vacation recommendations",children:[T.jsx("span",{className:"icon",children:""}),T.jsx("span",{className:"text",children:"See Vince's Top Picks!"}),T.jsx("span",{className:"badge",children:E.length})]})})},PD=({weeklyBalances:n,plannedVacations:e,holidays:t,userProfile:i,onAddVacation:o,onUpdateVacation:l,onDeleteVacation:h,canAffordVacation:f})=>{const[m,y]=se.useState("idle"),[_,E]=se.useState(null),[I,P]=se.useState(null),[z,L]=se.useState(null),[j,H]=se.useState(!1),[K,oe]=se.useState(""),[ne,be]=se.useState(()=>localStorage.getItem("jpl-vacation-calendar-view-mode")||"2-month"),[ye,D]=se.useState(window.innerWidth>=768),[A,R]=se.useState(new Date),[N,x]=se.useState(null);se.useEffect(()=>{const Z=()=>{ne==="2-month"&&D(window.innerWidth>=768)};return window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)},[ne]);const V=se.useMemo(()=>{if(n.length===0){const de=new Date;return{start:new Date(de.getFullYear(),de.getMonth()-1,1),end:new Date(de.getFullYear(),de.getMonth()+3,0)}}const Z=n[0],he=n[n.length-1];return{start:Oe(Z.weekStartDate),end:Oe(he.weekEndDate)}},[n]),C=se.useMemo(()=>wD(n,e,t,i.workSchedule,V.start,V.end),[n,e,t,i.workSchedule,V]),je=se.useCallback(()=>m==="selecting"&&_&&I?{start:_<I?_:I,end:_<I?I:_}:null,[m,_,I])(),Ge=Z=>{const he=nt(Z),de=C.get(he);if(de!=null&&de.isInVacation&&de.vacationId){const Se=e.find(Me=>Me.id===de.vacationId);if(Se){L(Se),H(!0),$e();return}}if(m==="idle"){y("selecting"),E(Z),oe("");return}if(m==="selecting"&&_){const[Se,Me]=Z<_?[Z,_]:[_,Z],{canAfford:vt,projectedBalance:St}=f({startDate:nt(Se),endDate:nt(Me)});if(!vt){const He=Fs(Se,Me,i.workSchedule,t);oe(`Insufficient balance. Need ${He}h, will have ${St.toFixed(2)}h`),$e();return}o({startDate:nt(Se),endDate:nt(Me)}),$e()}},$e=()=>{y("idle"),E(null),P(null),oe("")};se.useEffect(()=>{const Z=he=>{he.key==="Escape"&&$e()};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[]);const re=se.useCallback(({date:Z,view:he,activeStartDate:de})=>{if(he!=="month")return!1;const Se=de.getMonth(),Me=de.getFullYear(),vt=new Date(Me,Se+1,0);if(Z<new Date(Me,Se,1))return!0;const St=vt.getDay(),He=St===6?0:(6-St+7)%7,bn=new Date(Me,Se,vt.getDate()+He);return Z>bn},[]),ue=se.useCallback(({date:Z,activeStartDate:he})=>{const de=he.getMonth(),Se=he.getFullYear(),Me=new Date(Se,de+1,0);return Z>Me},[]),te=se.useCallback(({date:Z,view:he,activeStartDate:de})=>{if(he!=="month")return"";const Se=[];if(re({date:Z,view:he,activeStartDate:de}))return Se.push("react-calendar__tile--hidden"),Se.join(" ");ue({date:Z,activeStartDate:de})&&Se.push("react-calendar__tile--next-month");const Me=C.get(nt(Z));if(Me!=null&&Me.isInVacation&&Se.push("react-calendar__tile--vacation"),Me!=null&&Me.isHoliday&&Se.push("react-calendar__tile--holiday"),Me!=null&&Me.isRDO&&Se.push("react-calendar__tile--rdo"),Me!=null&&Me.types.includes(zo.WEEKEND)&&Se.push("react-calendar__tile--weekend"),je){const vt=Z.getTime(),St=je.start.getTime(),He=je.end.getTime();vt>=St&&vt<=He&&Se.push("react-calendar__tile--in-selection"),vt===St&&Se.push("react-calendar__tile--selection-start"),vt===He&&Se.push("react-calendar__tile--selection-end")}return Se.join(" ")},[C,je,re,ue]),M=se.useCallback(({date:Z,view:he})=>{if(he!=="month")return null;const de=C.get(nt(Z)),Se=je&&Z>=je.start&&Z<=je.end,Me=_&&Z.getTime()===_.getTime(),vt=I&&Z.getTime()===I.getTime();return T.jsx("div",{className:"calendar-tile-wrapper",onMouseEnter:()=>{m==="selecting"&&_&&P(Z)},children:T.jsx(TD,{dayInfo:de,isInSelectionRange:!!Se,isSelectionStart:!!Me,isSelectionEnd:!!vt&&m==="selecting"})})},[C,je,_,I,m]),q=()=>{R(new Date)},Te=se.useMemo(()=>{const Z=new Date,he=A.getMonth(),de=A.getFullYear();return he===Z.getMonth()&&de===Z.getFullYear()},[A]),Ee=Z=>{be(Z),localStorage.setItem("jpl-vacation-calendar-view-mode",Z),Z==="2-month"&&D(window.innerWidth>=768)},Ne=Z=>{const{canAfford:he,projectedBalance:de}=f({startDate:Z.startDate,endDate:Z.endDate});if(!he){oe(`Insufficient balance. Need ${Z.vacationHours}h, will have ${de.toFixed(2)}h`);return}o({startDate:Z.startDate,endDate:Z.endDate,description:`Recommended: ${Z.context}`}),R(Oe(Z.startDate))},De=se.useMemo(()=>{const Z=ne==="12-month"?12:ne==="6-month"?6:2,he=[],de=new Date(A);for(let Se=0;Se<Z;Se++){const Me=new Date(de.getFullYear(),de.getMonth()+Se,1);he.push(Me)}return he},[A,ne,ye]);return T.jsxs("div",{className:"calendar-view",children:[T.jsxs("div",{className:"banner-container",children:[m==="selecting"&&T.jsx("div",{className:"selection-banner",children:T.jsxs("span",{children:["Selecting vacation: Click the end date or"," ",T.jsx("button",{onClick:$e,className:"cancel-link",children:"Cancel"})]})}),K&&T.jsxs("div",{className:"error-banner",children:[K,T.jsx("button",{onClick:()=>oe(""),className:"close-error",children:""})]})]}),T.jsxs("div",{className:"calendar-header-controls",children:[T.jsxs("div",{className:"view-toggle-buttons",children:[T.jsx("button",{onClick:()=>Ee("2-month"),className:`view-toggle-button ${ne==="2-month"?"active":""}`,children:"2-Month View"}),T.jsx("button",{onClick:()=>Ee("6-month"),className:`view-toggle-button ${ne==="6-month"?"active":""}`,children:"6-Month View"}),T.jsx("button",{onClick:()=>Ee("12-month"),className:`view-toggle-button ${ne==="12-month"?"active":""}`,children:"12-Month View"})]}),T.jsx("button",{onClick:q,className:"jump-to-today-button",disabled:Te,children:"Jump to Today"})]}),T.jsxs("div",{className:"calendar-navigation-controls",children:[T.jsx("button",{onClick:()=>{const Z=new Date(A.getFullYear(),A.getMonth()-1,1);x("backward"),R(Z),setTimeout(()=>x(null),600)},className:"calendar-nav-button",children:" Previous"}),T.jsx("button",{onClick:()=>{const Z=new Date(A.getFullYear(),A.getMonth()+1,1);x("forward"),R(Z),setTimeout(()=>x(null),600)},className:"calendar-nav-button",children:"Next "})]}),T.jsx("div",{className:`${ne==="12-month"?"twelve-month-grid":ne==="6-month"?"six-month-grid":"two-month-grid"} ${N?`slide-${N}`:""}`,children:De.map((Z,he)=>T.jsxs("div",{className:`${ne==="12-month"?"twelve-month-calendar":ne==="6-month"?"six-month-calendar":"two-month-calendar"}`,children:[T.jsx("div",{className:`${ne==="12-month"?"twelve-month-calendar-header":ne==="6-month"?"six-month-calendar-header":"two-month-calendar-header"}`,children:Z.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),T.jsx(_D,{showDoubleView:!1,showNeighboringMonth:!0,selectRange:!1,tileContent:M,tileClassName:te,onClickDay:Ge,minDetail:"month",maxDetail:"month",locale:"en-US",activeStartDate:Z,showNavigation:!1})]},he))}),T.jsx(RD,{userProfile:i,holidays:t,plannedVacations:e,onSelectRecommendation:Ne}),T.jsx(SD,{vacation:z,isOpen:j,workSchedule:i.workSchedule,holidays:t,onSave:l,onDelete:h,onClose:()=>{H(!1),L(null)},canAffordVacation:f}),T.jsx(ID,{vacations:e,workSchedule:i.workSchedule,holidays:t,onEdit:Z=>{L(Z),H(!0)},onDelete:h})]})},DD=()=>T.jsxs("div",{className:"calendar-legend",children:[T.jsx("h3",{children:"Legend"}),T.jsxs("div",{className:"legend-items",children:[T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-indicator vacation",children:"V"}),T.jsx("span",{className:"legend-label",children:"Planned Vacation"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-indicator holiday",children:"H"}),T.jsx("span",{className:"legend-label",children:"Holiday"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-indicator rdo",children:"R"}),T.jsx("span",{className:"legend-label",children:"RDO (9/80)"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-indicator personal-day",children:"P"}),T.jsx("span",{className:"legend-label",children:"Personal Day"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-box weekend"}),T.jsx("span",{className:"legend-label",children:"Weekend"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-box balance-positive"}),T.jsx("span",{className:"legend-label",children:"Balance (on Sundays)"})]})]})]}),qf=({context:n})=>{const[e,t]=se.useState(!1),i=()=>{t(!e)},l=n==="welcome"?{summary:"Your vacation data is stored privately on your device. Optionally sync across devices with Google.",details:T.jsxs("ul",{className:"privacy-details-list",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"Local Storage:"})," Your data is stored in your browser's localStorage, which is private to this device and not shared with anyone."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Optional Cloud Sync:"})," You can optionally enable cloud sync via your Google account to access your data across devices."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"No Third-Party Access:"})," We don't use analytics, tracking, or share your data with any third parties."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Data Collected:"})," JPL start date, current vacation balance, planned vacations, and work schedule preferences."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Your Control:"})," You can reset or delete all your data at any time using the reset button in the app."]})]})}:{summary:"Cloud sync uses your Google account to securely sync data across devices.",details:T.jsxs("ul",{className:"privacy-details-list",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"Google Authentication:"})," Sign in securely using your Google account credentials."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Firebase Platform:"})," Data is synced via Google Firebase, ensuring enterprise-grade security."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Encryption:"})," Your data is encrypted both in transit and at rest."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Access Control:"})," Only you can access your data via your Google account. No one else has access."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Data Synced:"})," Your vacation profile and planned vacations are synced across devices."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Disconnect Anytime:"})," You can disable cloud sync at any time. Your local data will remain on your device."]})]})};return T.jsxs("div",{className:"privacy-notice",children:[T.jsxs("div",{className:"privacy-summary",children:[T.jsx("span",{className:"privacy-icon",children:""}),T.jsx("span",{className:"privacy-text",children:l.summary}),T.jsx("button",{onClick:i,className:"privacy-toggle","aria-expanded":e,"aria-label":e?"Hide privacy details":"Show privacy details",children:e?"Show Less":"Learn More"})]}),e&&T.jsx("div",{className:"privacy-details",children:l.details})]})};function ND({isOpen:n=!0,onClose:e}){const{user:t,loading:i,error:o,isFirebaseAvailable:l,signInWithGoogle:h,signOut:f}=Zc();return!l||!n?null:i?T.jsxs("div",{className:"cloud-sync-settings loading",children:[e&&T.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),T.jsx("p",{children:"Loading..."})]}):t?T.jsxs("div",{className:"cloud-sync-settings signed-in",children:[e&&T.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),T.jsxs("div",{className:"sync-status",children:[T.jsx("div",{className:"sync-icon",children:""}),T.jsxs("div",{className:"sync-info",children:[T.jsx("div",{className:"sync-title",children:"Cloud Sync Enabled"}),T.jsx("div",{className:"sync-email",children:t.email}),T.jsx("div",{className:"sync-description",children:"Your vacation data is automatically synced across all your devices"})]})]}),T.jsx(qf,{context:"cloudsync"}),T.jsx("button",{onClick:f,className:"sign-out-button",children:"Disable Cloud Sync"}),o&&T.jsx("div",{className:"error-message",children:o})]}):T.jsxs("div",{className:"cloud-sync-settings signed-out",children:[e&&T.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),T.jsxs("div",{className:"sync-promo",children:[T.jsx("div",{className:"sync-icon",children:""}),T.jsxs("div",{className:"sync-info",children:[T.jsx("div",{className:"sync-title",children:"Enable Cloud Sync"}),T.jsx("div",{className:"sync-description",children:"Sign in with Google to sync your vacation data across multiple devices and browsers"})]})]}),T.jsx(qf,{context:"cloudsync"}),T.jsx("button",{onClick:h,className:"sign-in-button",children:"Sign in with Google"}),o&&T.jsx("div",{className:"error-message",children:o})]})}function xD({onClick:n}){const{user:e,isFirebaseAvailable:t}=Zc();if(!t)return null;const i=!!e,o=i?"Synced":"Sync",l=i?"Cloud sync enabled - Click to manage":"Click to enable cloud sync";return T.jsxs("button",{className:"sync-status-indicator",title:l,onClick:n,children:[T.jsx("span",{className:"sync-icon",children:""}),T.jsx("span",{className:"sync-text",children:o})]})}const bD=({onNewUser:n})=>{const{signInWithGoogle:e,error:t,loading:i,isFirebaseAvailable:o}=Zc(),[l,h]=se.useState(!1),f=async()=>{h(!0);try{await e()}catch(m){console.error("Sign-in error:",m),h(!1)}};return T.jsx("div",{className:"welcome-screen",children:T.jsxs("div",{className:"welcome-content",children:[T.jsx("h2",{children:"Welcome to JPL Vacation Forecast"}),T.jsx("p",{className:"welcome-subtitle",children:"Track your vacation balance and plan your time off"}),T.jsx(qf,{context:"welcome"}),T.jsxs("div",{className:"user-choice-container",children:[T.jsxs("div",{className:"choice-card",children:[T.jsx("div",{className:"choice-icon",children:""}),T.jsx("h3",{children:"New User"}),T.jsx("p",{children:"Set up your vacation tracking profile"}),T.jsx("button",{onClick:n,className:"choice-button primary-button",disabled:l,children:"Get Started"})]}),o&&T.jsxs("div",{className:"choice-card",children:[T.jsx("div",{className:"choice-icon",children:""}),T.jsx("h3",{children:"Existing User"}),T.jsx("p",{children:"Sign in to sync your data across devices"}),T.jsx("button",{onClick:f,className:"choice-button secondary-button",disabled:i||l,children:l?"Signing in...":"Sign in with Google"})]})]}),t&&T.jsx("div",{className:"error-message",children:t}),!o&&T.jsx("div",{className:"info-message",children:"Cloud sync is not available. You can still use the app with local storage only."})]})})},s_=({message:n="Loading..."})=>T.jsx("div",{className:"loading-screen",children:T.jsxs("div",{className:"loading-content",children:[T.jsx("div",{className:"spinner"}),T.jsx("p",{className:"loading-message",children:n})]})}),OD=()=>{const{userProfile:n,setUserProfile:e,plannedVacations:t,addPlannedVacation:i,updatePlannedVacation:o,deletePlannedVacation:l,holidays:h,setHolidays:f,weeklyBalances:m,forecastPeriod:y,canAffordVacation:_}=MR(),{defaultHolidays:E}=UR((n==null?void 0:n.workSchedule)??null,y.startDate,y.endDate),{user:I,loading:P,initialSyncComplete:z}=Zc(),[L,j]=se.useState(()=>localStorage.getItem("theme")==="dark"),[H,K]=se.useState(!0),[oe,ne]=se.useState(!1);se.useEffect(()=>{I&&z&&K(!1)},[I,z]),se.useEffect(()=>{const D=document.documentElement;L?(D.classList.add("dark"),localStorage.setItem("theme","dark")):(D.classList.remove("dark"),localStorage.setItem("theme","light"))},[L]);const be=()=>{j(!L)};se.useEffect(()=>{if(!n||E.length===0)return;const D="jpl-vacation-holidays-version",A=localStorage.getItem(D),R=OE.version,N=()=>{f(E),localStorage.setItem(D,R)};if(h.length===0){N();return}if(A!==R){console.log(`Holiday version mismatch (stored: ${A}, current: ${R}). Updating...`),N();return}if(h.length!==E.length||h.some((C,Ve)=>{const je=E[Ve];return!je||C.date!==je.date||C.hours!==je.hours})){console.log("Work schedule mismatch detected in holidays. Updating..."),N();return}h.some(C=>C.date&&C.date.startsWith("2027"))||N()},[n,h,E,f]);const ye=()=>P?T.jsx(s_,{message:"Checking authentication..."}):n?T.jsxs("div",{className:"dashboard",children:[T.jsx("div",{className:"dashboard-header",children:T.jsx("button",{onClick:()=>e(null),className:"reset-button",children:"Reset Profile"})}),T.jsx(ND,{isOpen:H,onClose:()=>K(!1)}),T.jsx(DD,{}),T.jsx(PD,{weeklyBalances:m,plannedVacations:t,holidays:h,userProfile:n,onAddVacation:i,onUpdateVacation:o,onDeleteVacation:l,canAffordVacation:_})]}):I&&!n?z?T.jsx(Wv,{onSubmit:e,onBack:()=>ne(!1)}):T.jsx(s_,{message:"Loading your data..."}):oe?T.jsx(Wv,{onSubmit:e,onBack:()=>ne(!1)}):T.jsx(bD,{onNewUser:()=>ne(!0)});return T.jsxs("div",{className:"app",children:[T.jsx("header",{className:"app-header",children:T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[T.jsx("h1",{children:"JPL Vacation Forecast "}),T.jsxs("div",{style:{display:"flex",gap:"12px",marginLeft:"auto",alignItems:"center"},children:[T.jsx(xD,{onClick:()=>K(!H)}),T.jsx("button",{onClick:be,className:"reset-button","aria-label":L?"Switch to light mode":"Switch to dark mode",children:L?" Light Mode":" Dark Mode"})]})]})}),T.jsx("main",{className:"app-main",children:ye()})]})},l0=document.getElementById("root");if(!l0)throw new Error("Failed to find the root element");CT.createRoot(l0).render(T.jsx(a_.StrictMode,{children:T.jsx(OD,{})}));

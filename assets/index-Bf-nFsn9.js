var oT=Object.defineProperty;var aT=(n,e,t)=>e in n?oT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ka=(n,e,t)=>aT(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Qv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Cd={exports:{}},Ya={},kd={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function lT(){if(Yg)return Ve;Yg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function I(L){return L===null||typeof L!="object"?null:(L=E&&L[E]||L["@@iterator"],typeof L=="function"?L:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,W={};function U(L,H,Se){this.props=L,this.context=H,this.refs=W,this.updater=Se||D}U.prototype.isReactComponent={},U.prototype.setState=function(L,H){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,H,"setState")},U.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function X(){}X.prototype=U.prototype;function re(L,H,Se){this.props=L,this.context=H,this.refs=W,this.updater=Se||D}var de=re.prototype=new X;de.constructor=re,$(de,U.prototype),de.isPureReactComponent=!0;var ie=Array.isArray,Oe=Object.prototype.hasOwnProperty,ve={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function S(L,H,Se){var Te,Ne={},J=null,ge=null;if(H!=null)for(Te in H.ref!==void 0&&(ge=H.ref),H.key!==void 0&&(J=""+H.key),H)Oe.call(H,Te)&&!R.hasOwnProperty(Te)&&(Ne[Te]=H[Te]);var he=arguments.length-2;if(he===1)Ne.children=Se;else if(1<he){for(var le=Array(he),Ae=0;Ae<he;Ae++)le[Ae]=arguments[Ae+2];Ne.children=le}if(L&&L.defaultProps)for(Te in he=L.defaultProps,he)Ne[Te]===void 0&&(Ne[Te]=he[Te]);return{$$typeof:n,type:L,key:J,ref:ge,props:Ne,_owner:ve.current}}function P(L,H){return{$$typeof:n,type:L.type,key:H,ref:L.ref,props:L.props,_owner:L._owner}}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function x(L){var H={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Se){return H[Se]})}var V=/\/+/g;function C(L,H){return typeof L=="object"&&L!==null&&L.key!=null?x(""+L.key):H.toString(36)}function be(L,H,Se,Te,Ne){var J=typeof L;(J==="undefined"||J==="boolean")&&(L=null);var ge=!1;if(L===null)ge=!0;else switch(J){case"string":case"number":ge=!0;break;case"object":switch(L.$$typeof){case n:case e:ge=!0}}if(ge)return ge=L,Ne=Ne(ge),L=Te===""?"."+C(ge,0):Te,ie(Ne)?(Se="",L!=null&&(Se=L.replace(V,"$&/")+"/"),be(Ne,H,Se,"",function(Ae){return Ae})):Ne!=null&&(N(Ne)&&(Ne=P(Ne,Se+(!Ne.key||ge&&ge.key===Ne.key?"":(""+Ne.key).replace(V,"$&/")+"/")+L)),H.push(Ne)),1;if(ge=0,Te=Te===""?".":Te+":",ie(L))for(var he=0;he<L.length;he++){J=L[he];var le=Te+C(J,he);ge+=be(J,H,Se,le,Ne)}else if(le=I(L),typeof le=="function")for(L=le.call(L),he=0;!(J=L.next()).done;)J=J.value,le=Te+C(J,he++),ge+=be(J,H,Se,le,Ne);else if(J==="object")throw H=String(L),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ge}function Le(L,H,Se){if(L==null)return L;var Te=[],Ne=0;return be(L,Te,"","",function(J){return H.call(Se,J,Ne++)}),Te}function We(L){if(L._status===-1){var H=L._result;H=H(),H.then(function(Se){(L._status===0||L._status===-1)&&(L._status=1,L._result=Se)},function(Se){(L._status===0||L._status===-1)&&(L._status=2,L._result=Se)}),L._status===-1&&(L._status=0,L._result=H)}if(L._status===1)return L._result.default;throw L._result}var ze={current:null},te={transition:null},ue={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:te,ReactCurrentOwner:ve};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:Le,forEach:function(L,H,Se){Le(L,function(){H.apply(this,arguments)},Se)},count:function(L){var H=0;return Le(L,function(){H++}),H},toArray:function(L){return Le(L,function(H){return H})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ve.Component=U,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=re,Ve.StrictMode=i,Ve.Suspense=g,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Ve.act=ee,Ve.cloneElement=function(L,H,Se){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Te=$({},L.props),Ne=L.key,J=L.ref,ge=L._owner;if(H!=null){if(H.ref!==void 0&&(J=H.ref,ge=ve.current),H.key!==void 0&&(Ne=""+H.key),L.type&&L.type.defaultProps)var he=L.type.defaultProps;for(le in H)Oe.call(H,le)&&!R.hasOwnProperty(le)&&(Te[le]=H[le]===void 0&&he!==void 0?he[le]:H[le])}var le=arguments.length-2;if(le===1)Te.children=Se;else if(1<le){he=Array(le);for(var Ae=0;Ae<le;Ae++)he[Ae]=arguments[Ae+2];Te.children=he}return{$$typeof:n,type:L.type,key:Ne,ref:J,props:Te,_owner:ge}},Ve.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Ve.createElement=S,Ve.createFactory=function(L){var H=S.bind(null,L);return H.type=L,H},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(L){return{$$typeof:f,render:L}},Ve.isValidElement=N,Ve.lazy=function(L){return{$$typeof:w,_payload:{_status:-1,_result:L},_init:We}},Ve.memo=function(L,H){return{$$typeof:y,type:L,compare:H===void 0?null:H}},Ve.startTransition=function(L){var H=te.transition;te.transition={};try{L()}finally{te.transition=H}},Ve.unstable_act=ee,Ve.useCallback=function(L,H){return ze.current.useCallback(L,H)},Ve.useContext=function(L){return ze.current.useContext(L)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(L){return ze.current.useDeferredValue(L)},Ve.useEffect=function(L,H){return ze.current.useEffect(L,H)},Ve.useId=function(){return ze.current.useId()},Ve.useImperativeHandle=function(L,H,Se){return ze.current.useImperativeHandle(L,H,Se)},Ve.useInsertionEffect=function(L,H){return ze.current.useInsertionEffect(L,H)},Ve.useLayoutEffect=function(L,H){return ze.current.useLayoutEffect(L,H)},Ve.useMemo=function(L,H){return ze.current.useMemo(L,H)},Ve.useReducer=function(L,H,Se){return ze.current.useReducer(L,H,Se)},Ve.useRef=function(L){return ze.current.useRef(L)},Ve.useState=function(L){return ze.current.useState(L)},Ve.useSyncExternalStore=function(L,H,Se){return ze.current.useSyncExternalStore(L,H,Se)},Ve.useTransition=function(){return ze.current.useTransition()},Ve.version="18.3.1",Ve}var Qg;function Ff(){return Qg||(Qg=1,kd.exports=lT()),kd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function uT(){if(Xg)return Ya;Xg=1;var n=Ff(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var w,E={},I=null,D=null;y!==void 0&&(I=""+y),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(D=g.ref);for(w in g)i.call(g,w)&&!l.hasOwnProperty(w)&&(E[w]=g[w]);if(f&&f.defaultProps)for(w in g=f.defaultProps,g)E[w]===void 0&&(E[w]=g[w]);return{$$typeof:e,type:f,key:I,ref:D,props:E,_owner:o.current}}return Ya.Fragment=t,Ya.jsx=h,Ya.jsxs=h,Ya}var Jg;function cT(){return Jg||(Jg=1,Cd.exports=uT()),Cd.exports}var A=cT(),se=Ff();const Xv=Qv(se);var Fu={},Pd={exports:{}},mn={},Rd={exports:{}},Dd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function hT(){return Zg||(Zg=1,(function(n){function e(te,ue){var ee=te.length;te.push(ue);e:for(;0<ee;){var L=ee-1>>>1,H=te[L];if(0<o(H,ue))te[L]=ue,te[ee]=H,ee=L;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var ue=te[0],ee=te.pop();if(ee!==ue){te[0]=ee;e:for(var L=0,H=te.length,Se=H>>>1;L<Se;){var Te=2*(L+1)-1,Ne=te[Te],J=Te+1,ge=te[J];if(0>o(Ne,ee))J<H&&0>o(ge,Ne)?(te[L]=ge,te[J]=ee,L=J):(te[L]=Ne,te[Te]=ee,L=Te);else if(J<H&&0>o(ge,ee))te[L]=ge,te[J]=ee,L=J;else break e}}return ue}function o(te,ue){var ee=te.sortIndex-ue.sortIndex;return ee!==0?ee:te.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var g=[],y=[],w=1,E=null,I=3,D=!1,$=!1,W=!1,U=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function de(te){for(var ue=t(y);ue!==null;){if(ue.callback===null)i(y);else if(ue.startTime<=te)i(y),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=t(y)}}function ie(te){if(W=!1,de(te),!$)if(t(g)!==null)$=!0,We(Oe);else{var ue=t(y);ue!==null&&ze(ie,ue.startTime-te)}}function Oe(te,ue){$=!1,W&&(W=!1,X(S),S=-1),D=!0;var ee=I;try{for(de(ue),E=t(g);E!==null&&(!(E.expirationTime>ue)||te&&!x());){var L=E.callback;if(typeof L=="function"){E.callback=null,I=E.priorityLevel;var H=L(E.expirationTime<=ue);ue=n.unstable_now(),typeof H=="function"?E.callback=H:E===t(g)&&i(g),de(ue)}else i(g);E=t(g)}if(E!==null)var Se=!0;else{var Te=t(y);Te!==null&&ze(ie,Te.startTime-ue),Se=!1}return Se}finally{E=null,I=ee,D=!1}}var ve=!1,R=null,S=-1,P=5,N=-1;function x(){return!(n.unstable_now()-N<P)}function V(){if(R!==null){var te=n.unstable_now();N=te;var ue=!0;try{ue=R(!0,te)}finally{ue?C():(ve=!1,R=null)}}else ve=!1}var C;if(typeof re=="function")C=function(){re(V)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Le=be.port2;be.port1.onmessage=V,C=function(){Le.postMessage(null)}}else C=function(){U(V,0)};function We(te){R=te,ve||(ve=!0,C())}function ze(te,ue){S=U(function(){te(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_continueExecution=function(){$||D||($=!0,We(Oe))},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(g)},n.unstable_next=function(te){switch(I){case 1:case 2:case 3:var ue=3;break;default:ue=I}var ee=I;I=ue;try{return te()}finally{I=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(te,ue){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ee=I;I=te;try{return ue()}finally{I=ee}},n.unstable_scheduleCallback=function(te,ue,ee){var L=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?L+ee:L):ee=L,te){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ee+H,te={id:w++,callback:ue,priorityLevel:te,startTime:ee,expirationTime:H,sortIndex:-1},ee>L?(te.sortIndex=ee,e(y,te),t(g)===null&&te===t(y)&&(W?(X(S),S=-1):W=!0,ze(ie,ee-L))):(te.sortIndex=H,e(g,te),$||D||($=!0,We(Oe))),te},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(te){var ue=I;return function(){var ee=I;I=ue;try{return te.apply(this,arguments)}finally{I=ee}}}})(Dd)),Dd}var ey;function dT(){return ey||(ey=1,Rd.exports=hT()),Rd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty;function fT(){if(ty)return mn;ty=1;var n=Ff(),e=dT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function I(r){return g.call(E,r)?!0:g.call(w,r)?!1:y.test(r)?E[r]=!0:(w[r]=!0,!1)}function D(r,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function $(r,s,a,c){if(s===null||typeof s>"u"||D(r,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function W(r,s,a,c,d,p,_){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=p,this.removeEmptyString=_}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){U[r]=new W(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];U[s]=new W(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){U[r]=new W(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){U[r]=new W(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){U[r]=new W(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){U[r]=new W(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){U[r]=new W(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){U[r]=new W(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){U[r]=new W(r,5,!1,r.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function re(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(X,re);U[s]=new W(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(X,re);U[s]=new W(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(X,re);U[s]=new W(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){U[r]=new W(r,1,!1,r.toLowerCase(),null,!1,!1)}),U.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){U[r]=new W(r,1,!1,r.toLowerCase(),null,!0,!0)});function de(r,s,a,c){var d=U.hasOwnProperty(s)?U[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&($(s,a,d,c)&&(a=null),c||d===null?I(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?r.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?r.setAttributeNS(c,s,a):r.setAttribute(s,a))))}var ie=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oe=Symbol.for("react.element"),ve=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),x=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),Le=Symbol.for("react.memo"),We=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),te=Symbol.iterator;function ue(r){return r===null||typeof r!="object"?null:(r=te&&r[te]||r["@@iterator"],typeof r=="function"?r:null)}var ee=Object.assign,L;function H(r){if(L===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+r}var Se=!1;function Te(r,s){if(!r||Se)return"";Se=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var c=z}Reflect.construct(r,[],s)}else{try{s.call()}catch(z){c=z}r.call(s.prototype)}else{try{throw Error()}catch(z){c=z}r()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),p=c.stack.split(`
`),_=d.length-1,k=p.length-1;1<=_&&0<=k&&d[_]!==p[k];)k--;for(;1<=_&&0<=k;_--,k--)if(d[_]!==p[k]){if(_!==1||k!==1)do if(_--,k--,0>k||d[_]!==p[k]){var O=`
`+d[_].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=_&&0<=k);break}}}finally{Se=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?H(r):""}function Ne(r){switch(r.tag){case 5:return H(r.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return r=Te(r.type,!1),r;case 11:return r=Te(r.type.render,!1),r;case 1:return r=Te(r.type,!0),r;default:return""}}function J(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case ve:return"Portal";case P:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case be:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case x:return(r.displayName||"Context")+".Consumer";case N:return(r._context.displayName||"Context")+".Provider";case V:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Le:return s=r.displayName||null,s!==null?s:J(r.type)||"Memo";case We:s=r._payload,r=r._init;try{return J(r(s))}catch{}}return null}function ge(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function he(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function le(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ae(r){var s=le(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(_){c=""+_,p.call(this,_)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function gt(r){r._valueTracker||(r._valueTracker=Ae(r))}function bt(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=le(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function Ct(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Qe(r,s){var a=s.checked;return ee({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function ar(r,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=he(s.value!=null?s.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function kt(r,s){s=s.checked,s!=null&&de(r,"checked",s,!1)}function On(r,s){kt(r,s);var a=he(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?ut(r,s.type,a):s.hasOwnProperty("defaultValue")&&ut(r,s.type,he(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function gi(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function ut(r,s,a){(s!=="number"||Ct(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var ct=Array.isArray;function vn(r,s,a,c){if(r=r.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=s.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&c&&(r[a].defaultSelected=!0)}else{for(a=""+he(a),s=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,c&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function us(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function yi(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(ct(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:he(a)}}function Zs(r,s){var a=he(s.value),c=he(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function lr(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function cs(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vi(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?cs(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ur,_i=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return r(s,a,c,d)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(ur=ur||document.createElement("div"),ur.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ur.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function cr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Gn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eo=["Webkit","ms","Moz","O"];Object.keys(Gn).forEach(function(r){eo.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Gn[s]=Gn[r]})});function _n(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Gn.hasOwnProperty(r)&&Gn[r]?(""+s).trim():s+"px"}function Ur(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=_n(a,s[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,d):r[a]=d}}var hs=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function an(r,s){if(s){if(hs[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function zr(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bn=null;function wi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Vn=null,Kn=null,tt=null;function Et(r){if(r=Oa(r)){if(typeof Vn!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Zl(s),Vn(r.stateNode,r.type,s))}}function ht(r){Kn?tt?tt.push(r):tt=[r]:Kn=r}function wn(){if(Kn){var r=Kn,s=tt;if(tt=Kn=null,Et(r),s)for(r=0;r<s.length;r++)Et(s[r])}}function Xe(r,s){return r(s)}function rn(){}var Ln=!1;function Ei(r,s,a){if(Ln)return r(s,a);Ln=!0;try{return Xe(r,s,a)}finally{Ln=!1,(Kn!==null||tt!==null)&&(rn(),wn())}}function hr(r,s){var a=r.stateNode;if(a===null)return null;var c=Zl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Yn=!1;if(f)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{Yn=!1}function Br(r,s,a,c,d,p,_,k,O){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(Y){this.onError(Y)}}var En=!1,ln=null,dr=!1,un=null,Ti={onError:function(r){En=!0,ln=r}};function ds(r,s,a,c,d,p,_,k,O){En=!1,ln=null,Br.apply(Ti,arguments)}function fs(r,s,a,c,d,p,_,k,O){if(ds.apply(this,arguments),En){if(En){var z=ln;En=!1,ln=null}else throw Error(t(198));dr||(dr=!0,un=z)}}function Tn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function xe(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Je(r){if(Tn(r)!==r)throw Error(t(188))}function nt(r){var s=r.alternate;if(!s){if(s=Tn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,c=s;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Je(d),r;if(p===c)return Je(d),s;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var _=!1,k=d.child;k;){if(k===a){_=!0,a=d,c=p;break}if(k===c){_=!0,c=d,a=p;break}k=k.sibling}if(!_){for(k=p.child;k;){if(k===a){_=!0,a=p,c=d;break}if(k===c){_=!0,c=p,a=d;break}k=k.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function Gt(r){return r=nt(r),r!==null?Pt(r):null}function Pt(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Pt(r);if(s!==null)return s;r=r.sibling}return null}var $r=e.unstable_scheduleCallback,Si=e.unstable_cancelCallback,Wr=e.unstable_shouldYield,Hr=e.unstable_requestPaint,rt=e.unstable_now,rh=e.unstable_getCurrentPriorityLevel,to=e.unstable_ImmediatePriority,ca=e.unstable_UserBlockingPriority,ps=e.unstable_NormalPriority,ha=e.unstable_LowPriority,no=e.unstable_IdlePriority,ms=null,Sn=null;function Ll(r){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(ms,r,void 0,(r.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:gs,fr=Math.log,Fn=Math.LN2;function gs(r){return r>>>=0,r===0?32:31-(fr(r)/Fn|0)|0}var pr=64,Ii=4194304;function Ge(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function qr(r,s){var a=r.pendingLanes;if(a===0)return 0;var c=0,d=r.suspendedLanes,p=r.pingedLanes,_=a&268435455;if(_!==0){var k=_&~d;k!==0?c=Ge(k):(p&=_,p!==0&&(c=Ge(p)))}else _=a&~d,_!==0?c=Ge(_):p!==0&&(c=Ge(p));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,p=s&-s,d>=p||d===16&&(p&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)a=31-In(s),d=1<<a,c|=r[a],s&=~d;return c}function ys(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vs(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,p=r.pendingLanes;0<p;){var _=31-In(p),k=1<<_,O=d[_];O===-1?((k&a)===0||(k&c)!==0)&&(d[_]=ys(k,s)):O<=s&&(r.expiredLanes|=k),p&=~k}}function da(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function fa(){var r=pr;return pr<<=1,(pr&4194240)===0&&(pr=64),r}function pa(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function _s(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-In(s),r[s]=a}function ih(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-In(a),p=1<<d;s[d]=0,c[d]=-1,r[d]=-1,a&=~p}}function ma(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-In(a),d=1<<c;d&s|r[c]&s&&(r[c]|=s),a&=~d}}var Ue=0;function mr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ga,ro,ya,va,_a,gr=!1,io=[],yr=null,vr=null,jt=null,ws=new Map,Gr=new Map,An=[],Ml="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ai(r,s){switch(r){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":ws.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(s.pointerId)}}function Qn(r,s,a,c,d,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},s!==null&&(s=Oa(s),s!==null&&ro(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function Fl(r,s,a,c,d){switch(s){case"focusin":return yr=Qn(yr,r,s,a,c,d),!0;case"dragenter":return vr=Qn(vr,r,s,a,c,d),!0;case"mouseover":return jt=Qn(jt,r,s,a,c,d),!0;case"pointerover":var p=d.pointerId;return ws.set(p,Qn(ws.get(p)||null,r,s,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Gr.set(p,Qn(Gr.get(p)||null,r,s,a,c,d)),!0}return!1}function so(r){var s=Is(r.target);if(s!==null){var a=Tn(s);if(a!==null){if(s=a.tag,s===13){if(s=xe(a),s!==null){r.blockedOn=s,_a(r.priority,function(){ya(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ze(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=oo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);bn=c,a.target.dispatchEvent(c),bn=null}else return s=Oa(a),s!==null&&ro(s),r.blockedOn=a,!1;s.shift()}return!0}function jl(r,s,a){Ze(r)&&a.delete(s)}function sh(){gr=!1,yr!==null&&Ze(yr)&&(yr=null),vr!==null&&Ze(vr)&&(vr=null),jt!==null&&Ze(jt)&&(jt=null),ws.forEach(jl),Gr.forEach(jl)}function Ci(r,s){r.blockedOn===s&&(r.blockedOn=null,gr||(gr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sh)))}function ki(r){function s(d){return Ci(d,r)}if(0<io.length){Ci(io[0],r);for(var a=1;a<io.length;a++){var c=io[a];c.blockedOn===r&&(c.blockedOn=null)}}for(yr!==null&&Ci(yr,r),vr!==null&&Ci(vr,r),jt!==null&&Ci(jt,r),ws.forEach(s),Gr.forEach(s),a=0;a<An.length;a++)c=An[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<An.length&&(a=An[0],a.blockedOn===null);)so(a),a.blockedOn===null&&An.shift()}var Kr=ie.ReactCurrentBatchConfig,Yr=!0;function _r(r,s,a,c){var d=Ue,p=Kr.transition;Kr.transition=null;try{Ue=1,wa(r,s,a,c)}finally{Ue=d,Kr.transition=p}}function Ul(r,s,a,c){var d=Ue,p=Kr.transition;Kr.transition=null;try{Ue=4,wa(r,s,a,c)}finally{Ue=d,Kr.transition=p}}function wa(r,s,a,c){if(Yr){var d=oo(r,s,a,c);if(d===null)gh(r,s,c,wr,a),Ai(r,c);else if(Fl(d,r,s,a,c))c.stopPropagation();else if(Ai(r,c),s&4&&-1<Ml.indexOf(r)){for(;d!==null;){var p=Oa(d);if(p!==null&&ga(p),p=oo(r,s,a,c),p===null&&gh(r,s,c,wr,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else gh(r,s,c,null,a)}}var wr=null;function oo(r,s,a,c){if(wr=null,r=wi(c),r=Is(r),r!==null)if(s=Tn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=xe(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return wr=r,null}function ao(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rh()){case to:return 1;case ca:return 4;case ps:case ha:return 16;case no:return 536870912;default:return 16}default:return 16}}var Cn=null,lo=null,Qr=null;function zl(){if(Qr)return Qr;var r,s=lo,a=s.length,c,d="value"in Cn?Cn.value:Cn.textContent,p=d.length;for(r=0;r<a&&s[r]===d[r];r++);var _=a-r;for(c=1;c<=_&&s[a-c]===d[p-c];c++);return Qr=d.slice(r,1<c?1-c:void 0)}function Es(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Er(){return!0}function Ea(){return!1}function Kt(r){function s(a,c,d,p,_){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(a=r[k],this[k]=a?a(p):p[k]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Er:Ea,this.isPropagationStopped=Ea,this}return ee(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),s}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ts=Kt(Tr),Pi=ee({},Tr,{view:0,detail:0}),uo=Kt(Pi),co,ho,kn,Ss=ee({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==kn&&(kn&&r.type==="mousemove"?(co=r.screenX-kn.screenX,ho=r.screenY-kn.screenY):ho=co=0,kn=r),co)},movementY:function(r){return"movementY"in r?r.movementY:ho}}),Ta=Kt(Ss),Bl=ee({},Ss,{dataTransfer:0}),$l=Kt(Bl),fo=ee({},Pi,{relatedTarget:0}),Ut=Kt(fo),Wl=ee({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hl=Kt(Wl),Ri=ee({},Tr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=Kt(Ri),m=ee({},Tr,{data:0}),v=Kt(m),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ne(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=B[r])?!!s[r]:!1}function Re(){return ne}var vt=ee({},Pi,{key:function(r){if(r.key){var s=T[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Es(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?F[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(r){return r.type==="keypress"?Es(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Es(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ye=Kt(vt),Tt=ee({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pn=Kt(Tt),Xr=ee({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),Sr=Kt(Xr),Ir=ee({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),po=Kt(Ir),Sa=ee({},Ss,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),e0=Kt(Sa),t0=[9,13,27,32],oh=f&&"CompositionEvent"in window,Ia=null;f&&"documentMode"in document&&(Ia=document.documentMode);var n0=f&&"TextEvent"in window&&!Ia,zp=f&&(!oh||Ia&&8<Ia&&11>=Ia),Bp=" ",$p=!1;function Wp(r,s){switch(r){case"keyup":return t0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var mo=!1;function r0(r,s){switch(r){case"compositionend":return Hp(s);case"keypress":return s.which!==32?null:($p=!0,Bp);case"textInput":return r=s.data,r===Bp&&$p?null:r;default:return null}}function i0(r,s){if(mo)return r==="compositionend"||!oh&&Wp(r,s)?(r=zl(),Qr=lo=Cn=null,mo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return zp&&s.locale!=="ko"?null:s.data;default:return null}}var s0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!s0[r.type]:s==="textarea"}function Gp(r,s,a,c){ht(c),s=Ql(s,"onChange"),0<s.length&&(a=new Ts("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var Aa=null,Ca=null;function o0(r){hm(r,0)}function ql(r){var s=wo(r);if(bt(s))return r}function a0(r,s){if(r==="change")return s}var Kp=!1;if(f){var ah;if(f){var lh="oninput"in document;if(!lh){var Yp=document.createElement("div");Yp.setAttribute("oninput","return;"),lh=typeof Yp.oninput=="function"}ah=lh}else ah=!1;Kp=ah&&(!document.documentMode||9<document.documentMode)}function Qp(){Aa&&(Aa.detachEvent("onpropertychange",Xp),Ca=Aa=null)}function Xp(r){if(r.propertyName==="value"&&ql(Ca)){var s=[];Gp(s,Ca,r,wi(r)),Ei(o0,s)}}function l0(r,s,a){r==="focusin"?(Qp(),Aa=s,Ca=a,Aa.attachEvent("onpropertychange",Xp)):r==="focusout"&&Qp()}function u0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ql(Ca)}function c0(r,s){if(r==="click")return ql(s)}function h0(r,s){if(r==="input"||r==="change")return ql(s)}function d0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Xn=typeof Object.is=="function"?Object.is:d0;function ka(r,s){if(Xn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(s,d)||!Xn(r[d],s[d]))return!1}return!0}function Jp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Zp(r,s){var a=Jp(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Jp(a)}}function em(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?em(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function tm(){for(var r=window,s=Ct();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Ct(r.document)}return s}function uh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function f0(r){var s=tm(),a=r.focusedElem,c=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&em(a.ownerDocument.documentElement,a)){if(c!==null&&uh(a)){if(s=c.start,r=c.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!r.extend&&p>c&&(d=c,c=p,p=d),d=Zp(a,p);var _=Zp(a,c);d&&_&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==_.node||r.focusOffset!==_.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),r.removeAllRanges(),p>c?(r.addRange(s),r.extend(_.node,_.offset)):(s.setEnd(_.node,_.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var p0=f&&"documentMode"in document&&11>=document.documentMode,go=null,ch=null,Pa=null,hh=!1;function nm(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hh||go==null||go!==Ct(c)||(c=go,"selectionStart"in c&&uh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Pa&&ka(Pa,c)||(Pa=c,c=Ql(ch,"onSelect"),0<c.length&&(s=new Ts("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=go)))}function Gl(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var yo={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionend:Gl("Transition","TransitionEnd")},dh={},rm={};f&&(rm=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function Kl(r){if(dh[r])return dh[r];if(!yo[r])return r;var s=yo[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in rm)return dh[r]=s[a];return r}var im=Kl("animationend"),sm=Kl("animationiteration"),om=Kl("animationstart"),am=Kl("transitionend"),lm=new Map,um="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(r,s){lm.set(r,s),l(s,[r])}for(var fh=0;fh<um.length;fh++){var ph=um[fh],m0=ph.toLowerCase(),g0=ph[0].toUpperCase()+ph.slice(1);Di(m0,"on"+g0)}Di(im,"onAnimationEnd"),Di(sm,"onAnimationIteration"),Di(om,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(am,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function cm(r,s,a){var c=r.type||"unknown-event";r.currentTarget=a,fs(c,s,void 0,r),r.currentTarget=null}function hm(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],d=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var _=c.length-1;0<=_;_--){var k=c[_],O=k.instance,z=k.currentTarget;if(k=k.listener,O!==p&&d.isPropagationStopped())break e;cm(d,k,z),p=O}else for(_=0;_<c.length;_++){if(k=c[_],O=k.instance,z=k.currentTarget,k=k.listener,O!==p&&d.isPropagationStopped())break e;cm(d,k,z),p=O}}}if(dr)throw r=un,dr=!1,un=null,r}function it(r,s){var a=s[Th];a===void 0&&(a=s[Th]=new Set);var c=r+"__bubble";a.has(c)||(dm(s,r,2,!1),a.add(c))}function mh(r,s,a){var c=0;s&&(c|=4),dm(a,r,c,s)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function Da(r){if(!r[Yl]){r[Yl]=!0,i.forEach(function(a){a!=="selectionchange"&&(y0.has(a)||mh(a,!1,r),mh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Yl]||(s[Yl]=!0,mh("selectionchange",!1,s))}}function dm(r,s,a,c){switch(ao(s)){case 1:var d=_r;break;case 4:d=Ul;break;default:d=wa}a=d.bind(null,s,a,r),d=void 0,!Yn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?r.addEventListener(s,a,{capture:!0,passive:d}):r.addEventListener(s,a,!0):d!==void 0?r.addEventListener(s,a,{passive:d}):r.addEventListener(s,a,!1)}function gh(r,s,a,c,d){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var k=c.stateNode.containerInfo;if(k===d||k.nodeType===8&&k.parentNode===d)break;if(_===4)for(_=c.return;_!==null;){var O=_.tag;if((O===3||O===4)&&(O=_.stateNode.containerInfo,O===d||O.nodeType===8&&O.parentNode===d))return;_=_.return}for(;k!==null;){if(_=Is(k),_===null)return;if(O=_.tag,O===5||O===6){c=p=_;continue e}k=k.parentNode}}c=c.return}Ei(function(){var z=p,Y=wi(a),Q=[];e:{var G=lm.get(r);if(G!==void 0){var oe=Ts,fe=r;switch(r){case"keypress":if(Es(a)===0)break e;case"keydown":case"keyup":oe=Ye;break;case"focusin":fe="focus",oe=Ut;break;case"focusout":fe="blur",oe=Ut;break;case"beforeblur":case"afterblur":oe=Ut;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Ta;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=$l;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=Sr;break;case im:case sm:case om:oe=Hl;break;case am:oe=po;break;case"scroll":oe=uo;break;case"wheel":oe=e0;break;case"copy":case"cut":case"paste":oe=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Pn}var pe=(s&4)!==0,_t=!pe&&r==="scroll",M=pe?G!==null?G+"Capture":null:G;pe=[];for(var b=z,j;b!==null;){j=b;var Z=j.stateNode;if(j.tag===5&&Z!==null&&(j=Z,M!==null&&(Z=hr(b,M),Z!=null&&pe.push(Na(b,Z,j)))),_t)break;b=b.return}0<pe.length&&(G=new oe(G,fe,null,a,Y),Q.push({event:G,listeners:pe}))}}if((s&7)===0){e:{if(G=r==="mouseover"||r==="pointerover",oe=r==="mouseout"||r==="pointerout",G&&a!==bn&&(fe=a.relatedTarget||a.fromElement)&&(Is(fe)||fe[Jr]))break e;if((oe||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,oe?(fe=a.relatedTarget||a.toElement,oe=z,fe=fe?Is(fe):null,fe!==null&&(_t=Tn(fe),fe!==_t||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(oe=null,fe=z),oe!==fe)){if(pe=Ta,Z="onMouseLeave",M="onMouseEnter",b="mouse",(r==="pointerout"||r==="pointerover")&&(pe=Pn,Z="onPointerLeave",M="onPointerEnter",b="pointer"),_t=oe==null?G:wo(oe),j=fe==null?G:wo(fe),G=new pe(Z,b+"leave",oe,a,Y),G.target=_t,G.relatedTarget=j,Z=null,Is(Y)===z&&(pe=new pe(M,b+"enter",fe,a,Y),pe.target=j,pe.relatedTarget=_t,Z=pe),_t=Z,oe&&fe)t:{for(pe=oe,M=fe,b=0,j=pe;j;j=vo(j))b++;for(j=0,Z=M;Z;Z=vo(Z))j++;for(;0<b-j;)pe=vo(pe),b--;for(;0<j-b;)M=vo(M),j--;for(;b--;){if(pe===M||M!==null&&pe===M.alternate)break t;pe=vo(pe),M=vo(M)}pe=null}else pe=null;oe!==null&&fm(Q,G,oe,pe,!1),fe!==null&&_t!==null&&fm(Q,_t,fe,pe,!0)}}e:{if(G=z?wo(z):window,oe=G.nodeName&&G.nodeName.toLowerCase(),oe==="select"||oe==="input"&&G.type==="file")var me=a0;else if(qp(G))if(Kp)me=h0;else{me=u0;var _e=l0}else(oe=G.nodeName)&&oe.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(me=c0);if(me&&(me=me(r,z))){Gp(Q,me,a,Y);break e}_e&&_e(r,G,z),r==="focusout"&&(_e=G._wrapperState)&&_e.controlled&&G.type==="number"&&ut(G,"number",G.value)}switch(_e=z?wo(z):window,r){case"focusin":(qp(_e)||_e.contentEditable==="true")&&(go=_e,ch=z,Pa=null);break;case"focusout":Pa=ch=go=null;break;case"mousedown":hh=!0;break;case"contextmenu":case"mouseup":case"dragend":hh=!1,nm(Q,a,Y);break;case"selectionchange":if(p0)break;case"keydown":case"keyup":nm(Q,a,Y)}var we;if(oh)e:{switch(r){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else mo?Wp(r,a)&&(Ce="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(zp&&a.locale!=="ko"&&(mo||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&mo&&(we=zl()):(Cn=Y,lo="value"in Cn?Cn.value:Cn.textContent,mo=!0)),_e=Ql(z,Ce),0<_e.length&&(Ce=new v(Ce,r,null,a,Y),Q.push({event:Ce,listeners:_e}),we?Ce.data=we:(we=Hp(a),we!==null&&(Ce.data=we)))),(we=n0?r0(r,a):i0(r,a))&&(z=Ql(z,"onBeforeInput"),0<z.length&&(Y=new v("onBeforeInput","beforeinput",null,a,Y),Q.push({event:Y,listeners:z}),Y.data=we))}hm(Q,s)})}function Na(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Ql(r,s){for(var a=s+"Capture",c=[];r!==null;){var d=r,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=hr(r,a),p!=null&&c.unshift(Na(r,p,d)),p=hr(r,s),p!=null&&c.push(Na(r,p,d))),r=r.return}return c}function vo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function fm(r,s,a,c,d){for(var p=s._reactName,_=[];a!==null&&a!==c;){var k=a,O=k.alternate,z=k.stateNode;if(O!==null&&O===c)break;k.tag===5&&z!==null&&(k=z,d?(O=hr(a,p),O!=null&&_.unshift(Na(a,O,k))):d||(O=hr(a,p),O!=null&&_.push(Na(a,O,k)))),a=a.return}_.length!==0&&r.push({event:s,listeners:_})}var v0=/\r\n?/g,_0=/\u0000|\uFFFD/g;function pm(r){return(typeof r=="string"?r:""+r).replace(v0,`
`).replace(_0,"")}function Xl(r,s,a){if(s=pm(s),pm(r)!==s&&a)throw Error(t(425))}function Jl(){}var yh=null,vh=null;function _h(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var wh=typeof setTimeout=="function"?setTimeout:void 0,w0=typeof clearTimeout=="function"?clearTimeout:void 0,mm=typeof Promise=="function"?Promise:void 0,E0=typeof queueMicrotask=="function"?queueMicrotask:typeof mm<"u"?function(r){return mm.resolve(null).then(r).catch(T0)}:wh;function T0(r){setTimeout(function(){throw r})}function Eh(r,s){var a=s,c=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){r.removeChild(d),ki(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ki(s)}function Ni(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function gm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var _o=Math.random().toString(36).slice(2),Ar="__reactFiber$"+_o,xa="__reactProps$"+_o,Jr="__reactContainer$"+_o,Th="__reactEvents$"+_o,S0="__reactListeners$"+_o,I0="__reactHandles$"+_o;function Is(r){var s=r[Ar];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Jr]||a[Ar]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=gm(r);r!==null;){if(a=r[Ar])return a;r=gm(r)}return s}r=a,a=r.parentNode}return null}function Oa(r){return r=r[Ar]||r[Jr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function wo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Zl(r){return r[xa]||null}var Sh=[],Eo=-1;function xi(r){return{current:r}}function st(r){0>Eo||(r.current=Sh[Eo],Sh[Eo]=null,Eo--)}function et(r,s){Eo++,Sh[Eo]=r.current,r.current=s}var Oi={},Yt=xi(Oi),cn=xi(!1),As=Oi;function To(r,s){var a=r.type.contextTypes;if(!a)return Oi;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=s[p];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=d),d}function hn(r){return r=r.childContextTypes,r!=null}function eu(){st(cn),st(Yt)}function ym(r,s,a){if(Yt.current!==Oi)throw Error(t(168));et(Yt,s),et(cn,a)}function vm(r,s,a){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,ge(r)||"Unknown",d));return ee({},a,c)}function tu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Oi,As=Yt.current,et(Yt,r),et(cn,cn.current),!0}function _m(r,s,a){var c=r.stateNode;if(!c)throw Error(t(169));a?(r=vm(r,s,As),c.__reactInternalMemoizedMergedChildContext=r,st(cn),st(Yt),et(Yt,r)):st(cn),et(cn,a)}var Zr=null,nu=!1,Ih=!1;function wm(r){Zr===null?Zr=[r]:Zr.push(r)}function A0(r){nu=!0,wm(r)}function bi(){if(!Ih&&Zr!==null){Ih=!0;var r=0,s=Ue;try{var a=Zr;for(Ue=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}Zr=null,nu=!1}catch(d){throw Zr!==null&&(Zr=Zr.slice(r+1)),$r(to,bi),d}finally{Ue=s,Ih=!1}}return null}var So=[],Io=0,ru=null,iu=0,jn=[],Un=0,Cs=null,ei=1,ti="";function ks(r,s){So[Io++]=iu,So[Io++]=ru,ru=r,iu=s}function Em(r,s,a){jn[Un++]=ei,jn[Un++]=ti,jn[Un++]=Cs,Cs=r;var c=ei;r=ti;var d=32-In(c)-1;c&=~(1<<d),a+=1;var p=32-In(s)+d;if(30<p){var _=d-d%5;p=(c&(1<<_)-1).toString(32),c>>=_,d-=_,ei=1<<32-In(s)+d|a<<d|c,ti=p+r}else ei=1<<p|a<<d|c,ti=r}function Ah(r){r.return!==null&&(ks(r,1),Em(r,1,0))}function Ch(r){for(;r===ru;)ru=So[--Io],So[Io]=null,iu=So[--Io],So[Io]=null;for(;r===Cs;)Cs=jn[--Un],jn[Un]=null,ti=jn[--Un],jn[Un]=null,ei=jn[--Un],jn[Un]=null}var Rn=null,Dn=null,at=!1,Jn=null;function Tm(r,s){var a=Wn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Sm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Rn=r,Dn=Ni(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Rn=r,Dn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Cs!==null?{id:ei,overflow:ti}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Wn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,Rn=r,Dn=null,!0):!1;default:return!1}}function kh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Ph(r){if(at){var s=Dn;if(s){var a=s;if(!Sm(r,s)){if(kh(r))throw Error(t(418));s=Ni(a.nextSibling);var c=Rn;s&&Sm(r,s)?Tm(c,a):(r.flags=r.flags&-4097|2,at=!1,Rn=r)}}else{if(kh(r))throw Error(t(418));r.flags=r.flags&-4097|2,at=!1,Rn=r}}}function Im(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Rn=r}function su(r){if(r!==Rn)return!1;if(!at)return Im(r),at=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!_h(r.type,r.memoizedProps)),s&&(s=Dn)){if(kh(r))throw Am(),Error(t(418));for(;s;)Tm(r,s),s=Ni(s.nextSibling)}if(Im(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){Dn=Ni(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}Dn=null}}else Dn=Rn?Ni(r.stateNode.nextSibling):null;return!0}function Am(){for(var r=Dn;r;)r=Ni(r.nextSibling)}function Ao(){Dn=Rn=null,at=!1}function Rh(r){Jn===null?Jn=[r]:Jn.push(r)}var C0=ie.ReactCurrentBatchConfig;function ba(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,r));var d=c,p=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(_){var k=d.refs;_===null?delete k[p]:k[p]=_},s._stringRef=p,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function ou(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Cm(r){var s=r._init;return s(r._payload)}function km(r){function s(M,b){if(r){var j=M.deletions;j===null?(M.deletions=[b],M.flags|=16):j.push(b)}}function a(M,b){if(!r)return null;for(;b!==null;)s(M,b),b=b.sibling;return null}function c(M,b){for(M=new Map;b!==null;)b.key!==null?M.set(b.key,b):M.set(b.index,b),b=b.sibling;return M}function d(M,b){return M=Bi(M,b),M.index=0,M.sibling=null,M}function p(M,b,j){return M.index=j,r?(j=M.alternate,j!==null?(j=j.index,j<b?(M.flags|=2,b):j):(M.flags|=2,b)):(M.flags|=1048576,b)}function _(M){return r&&M.alternate===null&&(M.flags|=2),M}function k(M,b,j,Z){return b===null||b.tag!==6?(b=wd(j,M.mode,Z),b.return=M,b):(b=d(b,j),b.return=M,b)}function O(M,b,j,Z){var me=j.type;return me===R?Y(M,b,j.props.children,Z,j.key):b!==null&&(b.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===We&&Cm(me)===b.type)?(Z=d(b,j.props),Z.ref=ba(M,b,j),Z.return=M,Z):(Z=Du(j.type,j.key,j.props,null,M.mode,Z),Z.ref=ba(M,b,j),Z.return=M,Z)}function z(M,b,j,Z){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=Ed(j,M.mode,Z),b.return=M,b):(b=d(b,j.children||[]),b.return=M,b)}function Y(M,b,j,Z,me){return b===null||b.tag!==7?(b=Vs(j,M.mode,Z,me),b.return=M,b):(b=d(b,j),b.return=M,b)}function Q(M,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return b=wd(""+b,M.mode,j),b.return=M,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Oe:return j=Du(b.type,b.key,b.props,null,M.mode,j),j.ref=ba(M,null,b),j.return=M,j;case ve:return b=Ed(b,M.mode,j),b.return=M,b;case We:var Z=b._init;return Q(M,Z(b._payload),j)}if(ct(b)||ue(b))return b=Vs(b,M.mode,j,null),b.return=M,b;ou(M,b)}return null}function G(M,b,j,Z){var me=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return me!==null?null:k(M,b,""+j,Z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Oe:return j.key===me?O(M,b,j,Z):null;case ve:return j.key===me?z(M,b,j,Z):null;case We:return me=j._init,G(M,b,me(j._payload),Z)}if(ct(j)||ue(j))return me!==null?null:Y(M,b,j,Z,null);ou(M,j)}return null}function oe(M,b,j,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return M=M.get(j)||null,k(b,M,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Oe:return M=M.get(Z.key===null?j:Z.key)||null,O(b,M,Z,me);case ve:return M=M.get(Z.key===null?j:Z.key)||null,z(b,M,Z,me);case We:var _e=Z._init;return oe(M,b,j,_e(Z._payload),me)}if(ct(Z)||ue(Z))return M=M.get(j)||null,Y(b,M,Z,me,null);ou(b,Z)}return null}function fe(M,b,j,Z){for(var me=null,_e=null,we=b,Ce=b=0,Mt=null;we!==null&&Ce<j.length;Ce++){we.index>Ce?(Mt=we,we=null):Mt=we.sibling;var He=G(M,we,j[Ce],Z);if(He===null){we===null&&(we=Mt);break}r&&we&&He.alternate===null&&s(M,we),b=p(He,b,Ce),_e===null?me=He:_e.sibling=He,_e=He,we=Mt}if(Ce===j.length)return a(M,we),at&&ks(M,Ce),me;if(we===null){for(;Ce<j.length;Ce++)we=Q(M,j[Ce],Z),we!==null&&(b=p(we,b,Ce),_e===null?me=we:_e.sibling=we,_e=we);return at&&ks(M,Ce),me}for(we=c(M,we);Ce<j.length;Ce++)Mt=oe(we,M,Ce,j[Ce],Z),Mt!==null&&(r&&Mt.alternate!==null&&we.delete(Mt.key===null?Ce:Mt.key),b=p(Mt,b,Ce),_e===null?me=Mt:_e.sibling=Mt,_e=Mt);return r&&we.forEach(function($i){return s(M,$i)}),at&&ks(M,Ce),me}function pe(M,b,j,Z){var me=ue(j);if(typeof me!="function")throw Error(t(150));if(j=me.call(j),j==null)throw Error(t(151));for(var _e=me=null,we=b,Ce=b=0,Mt=null,He=j.next();we!==null&&!He.done;Ce++,He=j.next()){we.index>Ce?(Mt=we,we=null):Mt=we.sibling;var $i=G(M,we,He.value,Z);if($i===null){we===null&&(we=Mt);break}r&&we&&$i.alternate===null&&s(M,we),b=p($i,b,Ce),_e===null?me=$i:_e.sibling=$i,_e=$i,we=Mt}if(He.done)return a(M,we),at&&ks(M,Ce),me;if(we===null){for(;!He.done;Ce++,He=j.next())He=Q(M,He.value,Z),He!==null&&(b=p(He,b,Ce),_e===null?me=He:_e.sibling=He,_e=He);return at&&ks(M,Ce),me}for(we=c(M,we);!He.done;Ce++,He=j.next())He=oe(we,M,Ce,He.value,Z),He!==null&&(r&&He.alternate!==null&&we.delete(He.key===null?Ce:He.key),b=p(He,b,Ce),_e===null?me=He:_e.sibling=He,_e=He);return r&&we.forEach(function(sT){return s(M,sT)}),at&&ks(M,Ce),me}function _t(M,b,j,Z){if(typeof j=="object"&&j!==null&&j.type===R&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Oe:e:{for(var me=j.key,_e=b;_e!==null;){if(_e.key===me){if(me=j.type,me===R){if(_e.tag===7){a(M,_e.sibling),b=d(_e,j.props.children),b.return=M,M=b;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===We&&Cm(me)===_e.type){a(M,_e.sibling),b=d(_e,j.props),b.ref=ba(M,_e,j),b.return=M,M=b;break e}a(M,_e);break}else s(M,_e);_e=_e.sibling}j.type===R?(b=Vs(j.props.children,M.mode,Z,j.key),b.return=M,M=b):(Z=Du(j.type,j.key,j.props,null,M.mode,Z),Z.ref=ba(M,b,j),Z.return=M,M=Z)}return _(M);case ve:e:{for(_e=j.key;b!==null;){if(b.key===_e)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){a(M,b.sibling),b=d(b,j.children||[]),b.return=M,M=b;break e}else{a(M,b);break}else s(M,b);b=b.sibling}b=Ed(j,M.mode,Z),b.return=M,M=b}return _(M);case We:return _e=j._init,_t(M,b,_e(j._payload),Z)}if(ct(j))return fe(M,b,j,Z);if(ue(j))return pe(M,b,j,Z);ou(M,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,b!==null&&b.tag===6?(a(M,b.sibling),b=d(b,j),b.return=M,M=b):(a(M,b),b=wd(j,M.mode,Z),b.return=M,M=b),_(M)):a(M,b)}return _t}var Co=km(!0),Pm=km(!1),au=xi(null),lu=null,ko=null,Dh=null;function Nh(){Dh=ko=lu=null}function xh(r){var s=au.current;st(au),r._currentValue=s}function Oh(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function Po(r,s){lu=r,Dh=ko=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(dn=!0),r.firstContext=null)}function zn(r){var s=r._currentValue;if(Dh!==r)if(r={context:r,memoizedValue:s,next:null},ko===null){if(lu===null)throw Error(t(308));ko=r,lu.dependencies={lanes:0,firstContext:r}}else ko=ko.next=r;return s}var Ps=null;function bh(r){Ps===null?Ps=[r]:Ps.push(r)}function Rm(r,s,a,c){var d=s.interleaved;return d===null?(a.next=a,bh(s)):(a.next=d.next,d.next=a),s.interleaved=a,ni(r,c)}function ni(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Vi=!1;function Vh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ri(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Li(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,($e&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,ni(r,a)}return d=c.interleaved,d===null?(s.next=s,bh(c)):(s.next=d.next,d.next=s),c.interleaved=s,ni(r,a)}function uu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ma(r,a)}}function Nm(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=_:p=p.next=_,a=a.next}while(a!==null);p===null?d=p=s:p=p.next=s}else d=p=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function cu(r,s,a,c){var d=r.updateQueue;Vi=!1;var p=d.firstBaseUpdate,_=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var O=k,z=O.next;O.next=null,_===null?p=z:_.next=z,_=O;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,k=Y.lastBaseUpdate,k!==_&&(k===null?Y.firstBaseUpdate=z:k.next=z,Y.lastBaseUpdate=O))}if(p!==null){var Q=d.baseState;_=0,Y=z=O=null,k=p;do{var G=k.lane,oe=k.eventTime;if((c&G)===G){Y!==null&&(Y=Y.next={eventTime:oe,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var fe=r,pe=k;switch(G=s,oe=a,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){Q=fe.call(oe,Q,G);break e}Q=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,G=typeof fe=="function"?fe.call(oe,Q,G):fe,G==null)break e;Q=ee({},Q,G);break e;case 2:Vi=!0}}k.callback!==null&&k.lane!==0&&(r.flags|=64,G=d.effects,G===null?d.effects=[k]:G.push(k))}else oe={eventTime:oe,lane:G,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Y===null?(z=Y=oe,O=Q):Y=Y.next=oe,_|=G;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;G=k,k=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Y===null&&(O=Q),d.baseState=O,d.firstBaseUpdate=z,d.lastBaseUpdate=Y,s=d.shared.interleaved,s!==null){d=s;do _|=d.lane,d=d.next;while(d!==s)}else p===null&&(d.shared.lanes=0);Ns|=_,r.lanes=_,r.memoizedState=Q}}function xm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Va={},Cr=xi(Va),La=xi(Va),Ma=xi(Va);function Rs(r){if(r===Va)throw Error(t(174));return r}function Lh(r,s){switch(et(Ma,s),et(La,r),et(Cr,Va),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vi(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=vi(s,r)}st(Cr),et(Cr,s)}function Ro(){st(Cr),st(La),st(Ma)}function Om(r){Rs(Ma.current);var s=Rs(Cr.current),a=vi(s,r.type);s!==a&&(et(La,r),et(Cr,a))}function Mh(r){La.current===r&&(st(Cr),st(La))}var dt=xi(0);function hu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Fh=[];function jh(){for(var r=0;r<Fh.length;r++)Fh[r]._workInProgressVersionPrimary=null;Fh.length=0}var du=ie.ReactCurrentDispatcher,Uh=ie.ReactCurrentBatchConfig,Ds=0,ft=null,Rt=null,Vt=null,fu=!1,Fa=!1,ja=0,k0=0;function Qt(){throw Error(t(321))}function zh(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Xn(r[a],s[a]))return!1;return!0}function Bh(r,s,a,c,d,p){if(Ds=p,ft=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,du.current=r===null||r.memoizedState===null?N0:x0,r=a(c,d),Fa){p=0;do{if(Fa=!1,ja=0,25<=p)throw Error(t(301));p+=1,Vt=Rt=null,s.updateQueue=null,du.current=O0,r=a(c,d)}while(Fa)}if(du.current=gu,s=Rt!==null&&Rt.next!==null,Ds=0,Vt=Rt=ft=null,fu=!1,s)throw Error(t(300));return r}function $h(){var r=ja!==0;return ja=0,r}function kr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ft.memoizedState=Vt=r:Vt=Vt.next=r,Vt}function Bn(){if(Rt===null){var r=ft.alternate;r=r!==null?r.memoizedState:null}else r=Rt.next;var s=Vt===null?ft.memoizedState:Vt.next;if(s!==null)Vt=s,Rt=r;else{if(r===null)throw Error(t(310));Rt=r,r={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Vt===null?ft.memoizedState=Vt=r:Vt=Vt.next=r}return Vt}function Ua(r,s){return typeof s=="function"?s(r):s}function Wh(r){var s=Bn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=Rt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var _=d.next;d.next=p.next,p.next=_}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var k=_=null,O=null,z=p;do{var Y=z.lane;if((Ds&Y)===Y)O!==null&&(O=O.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:r(c,z.action);else{var Q={lane:Y,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};O===null?(k=O=Q,_=c):O=O.next=Q,ft.lanes|=Y,Ns|=Y}z=z.next}while(z!==null&&z!==p);O===null?_=c:O.next=k,Xn(c,s.memoizedState)||(dn=!0),s.memoizedState=c,s.baseState=_,s.baseQueue=O,a.lastRenderedState=c}if(r=a.interleaved,r!==null){d=r;do p=d.lane,ft.lanes|=p,Ns|=p,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Hh(r){var s=Bn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=a.dispatch,d=a.pending,p=s.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do p=r(p,_.action),_=_.next;while(_!==d);Xn(p,s.memoizedState)||(dn=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,c]}function bm(){}function Vm(r,s){var a=ft,c=Bn(),d=s(),p=!Xn(c.memoizedState,d);if(p&&(c.memoizedState=d,dn=!0),c=c.queue,qh(Fm.bind(null,a,c,r),[r]),c.getSnapshot!==s||p||Vt!==null&&Vt.memoizedState.tag&1){if(a.flags|=2048,za(9,Mm.bind(null,a,c,d,s),void 0,null),Lt===null)throw Error(t(349));(Ds&30)!==0||Lm(a,s,d)}return d}function Lm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=ft.updateQueue,s===null?(s={lastEffect:null,stores:null},ft.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Mm(r,s,a,c){s.value=a,s.getSnapshot=c,jm(s)&&Um(r)}function Fm(r,s,a){return a(function(){jm(s)&&Um(r)})}function jm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Xn(r,a)}catch{return!0}}function Um(r){var s=ni(r,1);s!==null&&nr(s,r,1,-1)}function zm(r){var s=kr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:r},s.queue=r,r=r.dispatch=D0.bind(null,ft,r),[s.memoizedState,r]}function za(r,s,a,c){return r={tag:r,create:s,destroy:a,deps:c,next:null},s=ft.updateQueue,s===null?(s={lastEffect:null,stores:null},ft.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r)),r}function Bm(){return Bn().memoizedState}function pu(r,s,a,c){var d=kr();ft.flags|=r,d.memoizedState=za(1|s,a,void 0,c===void 0?null:c)}function mu(r,s,a,c){var d=Bn();c=c===void 0?null:c;var p=void 0;if(Rt!==null){var _=Rt.memoizedState;if(p=_.destroy,c!==null&&zh(c,_.deps)){d.memoizedState=za(s,a,p,c);return}}ft.flags|=r,d.memoizedState=za(1|s,a,p,c)}function $m(r,s){return pu(8390656,8,r,s)}function qh(r,s){return mu(2048,8,r,s)}function Wm(r,s){return mu(4,2,r,s)}function Hm(r,s){return mu(4,4,r,s)}function qm(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Gm(r,s,a){return a=a!=null?a.concat([r]):null,mu(4,4,qm.bind(null,s,r),a)}function Gh(){}function Km(r,s){var a=Bn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&zh(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function Ym(r,s){var a=Bn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&zh(s,c[1])?c[0]:(r=r(),a.memoizedState=[r,s],r)}function Qm(r,s,a){return(Ds&21)===0?(r.baseState&&(r.baseState=!1,dn=!0),r.memoizedState=a):(Xn(a,s)||(a=fa(),ft.lanes|=a,Ns|=a,r.baseState=!0),s)}function P0(r,s){var a=Ue;Ue=a!==0&&4>a?a:4,r(!0);var c=Uh.transition;Uh.transition={};try{r(!1),s()}finally{Ue=a,Uh.transition=c}}function Xm(){return Bn().memoizedState}function R0(r,s,a){var c=Ui(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Jm(r))Zm(s,a);else if(a=Rm(r,s,a,c),a!==null){var d=on();nr(a,r,c,d),eg(a,s,c)}}function D0(r,s,a){var c=Ui(r),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Jm(r))Zm(s,d);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var _=s.lastRenderedState,k=p(_,a);if(d.hasEagerState=!0,d.eagerState=k,Xn(k,_)){var O=s.interleaved;O===null?(d.next=d,bh(s)):(d.next=O.next,O.next=d),s.interleaved=d;return}}catch{}finally{}a=Rm(r,s,d,c),a!==null&&(d=on(),nr(a,r,c,d),eg(a,s,c))}}function Jm(r){var s=r.alternate;return r===ft||s!==null&&s===ft}function Zm(r,s){Fa=fu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function eg(r,s,a){if((a&4194240)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ma(r,a)}}var gu={readContext:zn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},N0={readContext:zn,useCallback:function(r,s){return kr().memoizedState=[r,s===void 0?null:s],r},useContext:zn,useEffect:$m,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,pu(4194308,4,qm.bind(null,s,r),a)},useLayoutEffect:function(r,s){return pu(4194308,4,r,s)},useInsertionEffect:function(r,s){return pu(4,2,r,s)},useMemo:function(r,s){var a=kr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var c=kr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=R0.bind(null,ft,r),[c.memoizedState,r]},useRef:function(r){var s=kr();return r={current:r},s.memoizedState=r},useState:zm,useDebugValue:Gh,useDeferredValue:function(r){return kr().memoizedState=r},useTransition:function(){var r=zm(!1),s=r[0];return r=P0.bind(null,r[1]),kr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var c=ft,d=kr();if(at){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Lt===null)throw Error(t(349));(Ds&30)!==0||Lm(c,s,a)}d.memoizedState=a;var p={value:a,getSnapshot:s};return d.queue=p,$m(Fm.bind(null,c,p,r),[r]),c.flags|=2048,za(9,Mm.bind(null,c,p,a,s),void 0,null),a},useId:function(){var r=kr(),s=Lt.identifierPrefix;if(at){var a=ti,c=ei;a=(c&~(1<<32-In(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=ja++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=k0++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},x0={readContext:zn,useCallback:Km,useContext:zn,useEffect:qh,useImperativeHandle:Gm,useInsertionEffect:Wm,useLayoutEffect:Hm,useMemo:Ym,useReducer:Wh,useRef:Bm,useState:function(){return Wh(Ua)},useDebugValue:Gh,useDeferredValue:function(r){var s=Bn();return Qm(s,Rt.memoizedState,r)},useTransition:function(){var r=Wh(Ua)[0],s=Bn().memoizedState;return[r,s]},useMutableSource:bm,useSyncExternalStore:Vm,useId:Xm,unstable_isNewReconciler:!1},O0={readContext:zn,useCallback:Km,useContext:zn,useEffect:qh,useImperativeHandle:Gm,useInsertionEffect:Wm,useLayoutEffect:Hm,useMemo:Ym,useReducer:Hh,useRef:Bm,useState:function(){return Hh(Ua)},useDebugValue:Gh,useDeferredValue:function(r){var s=Bn();return Rt===null?s.memoizedState=r:Qm(s,Rt.memoizedState,r)},useTransition:function(){var r=Hh(Ua)[0],s=Bn().memoizedState;return[r,s]},useMutableSource:bm,useSyncExternalStore:Vm,useId:Xm,unstable_isNewReconciler:!1};function Zn(r,s){if(r&&r.defaultProps){s=ee({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Kh(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:ee({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var yu={isMounted:function(r){return(r=r._reactInternals)?Tn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var c=on(),d=Ui(r),p=ri(c,d);p.payload=s,a!=null&&(p.callback=a),s=Li(r,p,d),s!==null&&(nr(s,r,d,c),uu(s,r,d))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=on(),d=Ui(r),p=ri(c,d);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=Li(r,p,d),s!==null&&(nr(s,r,d,c),uu(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=on(),c=Ui(r),d=ri(a,c);d.tag=2,s!=null&&(d.callback=s),s=Li(r,d,c),s!==null&&(nr(s,r,c,a),uu(s,r,c))}};function tg(r,s,a,c,d,p,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,p,_):s.prototype&&s.prototype.isPureReactComponent?!ka(a,c)||!ka(d,p):!0}function ng(r,s,a){var c=!1,d=Oi,p=s.contextType;return typeof p=="object"&&p!==null?p=zn(p):(d=hn(s)?As:Yt.current,c=s.contextTypes,p=(c=c!=null)?To(r,d):Oi),s=new s(a,p),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=yu,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=p),s}function rg(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&yu.enqueueReplaceState(s,s.state,null)}function Yh(r,s,a,c){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Vh(r);var p=s.contextType;typeof p=="object"&&p!==null?d.context=zn(p):(p=hn(s)?As:Yt.current,d.context=To(r,p)),d.state=r.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Kh(r,s,p,a),d.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&yu.enqueueReplaceState(d,d.state,null),cu(r,a,d,c),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function Do(r,s){try{var a="",c=s;do a+=Ne(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:r,source:s,stack:d,digest:null}}function Qh(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function Xh(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var b0=typeof WeakMap=="function"?WeakMap:Map;function ig(r,s,a){a=ri(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Iu||(Iu=!0,dd=c),Xh(r,s)},a}function sg(r,s,a){a=ri(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){Xh(r,s)}}var p=r.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Xh(r,s),typeof c!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})}),a}function og(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new b0;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),r=K0.bind(null,r,s,a),s.then(r,r))}function ag(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function lg(r,s,a,c,d){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=ri(-1,1),s.tag=2,Li(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var V0=ie.ReactCurrentOwner,dn=!1;function sn(r,s,a,c){s.child=r===null?Pm(s,null,a,c):Co(s,r.child,a,c)}function ug(r,s,a,c,d){a=a.render;var p=s.ref;return Po(s,d),c=Bh(r,s,a,c,p,d),a=$h(),r!==null&&!dn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,ii(r,s,d)):(at&&a&&Ah(s),s.flags|=1,sn(r,s,c,d),s.child)}function cg(r,s,a,c,d){if(r===null){var p=a.type;return typeof p=="function"&&!_d(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,hg(r,s,p,c,d)):(r=Du(a.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,(r.lanes&d)===0){var _=p.memoizedProps;if(a=a.compare,a=a!==null?a:ka,a(_,c)&&r.ref===s.ref)return ii(r,s,d)}return s.flags|=1,r=Bi(p,c),r.ref=s.ref,r.return=s,s.child=r}function hg(r,s,a,c,d){if(r!==null){var p=r.memoizedProps;if(ka(p,c)&&r.ref===s.ref)if(dn=!1,s.pendingProps=c=p,(r.lanes&d)!==0)(r.flags&131072)!==0&&(dn=!0);else return s.lanes=r.lanes,ii(r,s,d)}return Jh(r,s,a,c,d)}function dg(r,s,a){var c=s.pendingProps,d=c.children,p=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(xo,Nn),Nn|=a;else{if((a&1073741824)===0)return r=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,et(xo,Nn),Nn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,et(xo,Nn),Nn|=c}else p!==null?(c=p.baseLanes|a,s.memoizedState=null):c=a,et(xo,Nn),Nn|=c;return sn(r,s,d,a),s.child}function fg(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Jh(r,s,a,c,d){var p=hn(a)?As:Yt.current;return p=To(s,p),Po(s,d),a=Bh(r,s,a,c,p,d),c=$h(),r!==null&&!dn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,ii(r,s,d)):(at&&c&&Ah(s),s.flags|=1,sn(r,s,a,d),s.child)}function pg(r,s,a,c,d){if(hn(a)){var p=!0;tu(s)}else p=!1;if(Po(s,d),s.stateNode===null)_u(r,s),ng(s,a,c),Yh(s,a,c,d),c=!0;else if(r===null){var _=s.stateNode,k=s.memoizedProps;_.props=k;var O=_.context,z=a.contextType;typeof z=="object"&&z!==null?z=zn(z):(z=hn(a)?As:Yt.current,z=To(s,z));var Y=a.getDerivedStateFromProps,Q=typeof Y=="function"||typeof _.getSnapshotBeforeUpdate=="function";Q||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==c||O!==z)&&rg(s,_,c,z),Vi=!1;var G=s.memoizedState;_.state=G,cu(s,c,_,d),O=s.memoizedState,k!==c||G!==O||cn.current||Vi?(typeof Y=="function"&&(Kh(s,a,Y,c),O=s.memoizedState),(k=Vi||tg(s,a,k,c,G,O,z))?(Q||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=O),_.props=c,_.state=O,_.context=z,c=k):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{_=s.stateNode,Dm(r,s),k=s.memoizedProps,z=s.type===s.elementType?k:Zn(s.type,k),_.props=z,Q=s.pendingProps,G=_.context,O=a.contextType,typeof O=="object"&&O!==null?O=zn(O):(O=hn(a)?As:Yt.current,O=To(s,O));var oe=a.getDerivedStateFromProps;(Y=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==Q||G!==O)&&rg(s,_,c,O),Vi=!1,G=s.memoizedState,_.state=G,cu(s,c,_,d);var fe=s.memoizedState;k!==Q||G!==fe||cn.current||Vi?(typeof oe=="function"&&(Kh(s,a,oe,c),fe=s.memoizedState),(z=Vi||tg(s,a,z,c,G,fe,O)||!1)?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,fe,O),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,fe,O)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||k===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=fe),_.props=c,_.state=fe,_.context=O,c=z):(typeof _.componentDidUpdate!="function"||k===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),c=!1)}return Zh(r,s,a,c,p,d)}function Zh(r,s,a,c,d,p){fg(r,s);var _=(s.flags&128)!==0;if(!c&&!_)return d&&_m(s,a,!1),ii(r,s,p);c=s.stateNode,V0.current=s;var k=_&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&_?(s.child=Co(s,r.child,null,p),s.child=Co(s,null,k,p)):sn(r,s,k,p),s.memoizedState=c.state,d&&_m(s,a,!0),s.child}function mg(r){var s=r.stateNode;s.pendingContext?ym(r,s.pendingContext,s.pendingContext!==s.context):s.context&&ym(r,s.context,!1),Lh(r,s.containerInfo)}function gg(r,s,a,c,d){return Ao(),Rh(d),s.flags|=256,sn(r,s,a,c),s.child}var ed={dehydrated:null,treeContext:null,retryLane:0};function td(r){return{baseLanes:r,cachePool:null,transitions:null}}function yg(r,s,a){var c=s.pendingProps,d=dt.current,p=!1,_=(s.flags&128)!==0,k;if((k=_)||(k=r!==null&&r.memoizedState===null?!1:(d&2)!==0),k?(p=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),et(dt,d&1),r===null)return Ph(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(_=c.children,r=c.fallback,p?(c=s.mode,p=s.child,_={mode:"hidden",children:_},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Nu(_,c,0,null),r=Vs(r,c,a,null),p.return=s,r.return=s,p.sibling=r,s.child=p,s.child.memoizedState=td(a),s.memoizedState=ed,r):nd(s,_));if(d=r.memoizedState,d!==null&&(k=d.dehydrated,k!==null))return L0(r,s,_,c,k,d,a);if(p){p=c.fallback,_=s.mode,d=r.child,k=d.sibling;var O={mode:"hidden",children:c.children};return(_&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=O,s.deletions=null):(c=Bi(d,O),c.subtreeFlags=d.subtreeFlags&14680064),k!==null?p=Bi(k,p):(p=Vs(p,_,a,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,_=r.child.memoizedState,_=_===null?td(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=r.childLanes&~a,s.memoizedState=ed,c}return p=r.child,r=p.sibling,c=Bi(p,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=c,s.memoizedState=null,c}function nd(r,s){return s=Nu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function vu(r,s,a,c){return c!==null&&Rh(c),Co(s,r.child,null,a),r=nd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function L0(r,s,a,c,d,p,_){if(a)return s.flags&256?(s.flags&=-257,c=Qh(Error(t(422))),vu(r,s,_,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(p=c.fallback,d=s.mode,c=Nu({mode:"visible",children:c.children},d,0,null),p=Vs(p,d,_,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,(s.mode&1)!==0&&Co(s,r.child,null,_),s.child.memoizedState=td(_),s.memoizedState=ed,p);if((s.mode&1)===0)return vu(r,s,_,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var k=c.dgst;return c=k,p=Error(t(419)),c=Qh(p,c,void 0),vu(r,s,_,c)}if(k=(_&r.childLanes)!==0,dn||k){if(c=Lt,c!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|_))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,ni(r,d),nr(c,r,d,-1))}return vd(),c=Qh(Error(t(421))),vu(r,s,_,c)}return d.data==="$?"?(s.flags|=128,s.child=r.child,s=Y0.bind(null,r),d._reactRetry=s,null):(r=p.treeContext,Dn=Ni(d.nextSibling),Rn=s,at=!0,Jn=null,r!==null&&(jn[Un++]=ei,jn[Un++]=ti,jn[Un++]=Cs,ei=r.id,ti=r.overflow,Cs=s),s=nd(s,c.children),s.flags|=4096,s)}function vg(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Oh(r.return,s,a)}function rd(r,s,a,c,d){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function _g(r,s,a){var c=s.pendingProps,d=c.revealOrder,p=c.tail;if(sn(r,s,c.children,a),c=dt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&vg(r,a,s);else if(r.tag===19)vg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(et(dt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)r=a.alternate,r!==null&&hu(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),rd(s,!1,d,a,p);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&hu(r)===null){s.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}rd(s,!0,a,null,p);break;case"together":rd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function _u(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function ii(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),Ns|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=Bi(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=Bi(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function M0(r,s,a){switch(s.tag){case 3:mg(s),Ao();break;case 5:Om(s);break;case 1:hn(s.type)&&tu(s);break;case 4:Lh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;et(au,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(et(dt,dt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?yg(r,s,a):(et(dt,dt.current&1),r=ii(r,s,a),r!==null?r.sibling:null);et(dt,dt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(r.flags&128)!==0){if(c)return _g(r,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),et(dt,dt.current),c)break;return null;case 22:case 23:return s.lanes=0,dg(r,s,a)}return ii(r,s,a)}var wg,id,Eg,Tg;wg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},id=function(){},Eg=function(r,s,a,c){var d=r.memoizedProps;if(d!==c){r=s.stateNode,Rs(Cr.current);var p=null;switch(a){case"input":d=Qe(r,d),c=Qe(r,c),p=[];break;case"select":d=ee({},d,{value:void 0}),c=ee({},c,{value:void 0}),p=[];break;case"textarea":d=us(r,d),c=us(r,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=Jl)}an(a,c);var _;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var k=d[z];for(_ in k)k.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?p||(p=[]):(p=p||[]).push(z,null));for(z in c){var O=c[z];if(k=d!=null?d[z]:void 0,c.hasOwnProperty(z)&&O!==k&&(O!=null||k!=null))if(z==="style")if(k){for(_ in k)!k.hasOwnProperty(_)||O&&O.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in O)O.hasOwnProperty(_)&&k[_]!==O[_]&&(a||(a={}),a[_]=O[_])}else a||(p||(p=[]),p.push(z,a)),a=O;else z==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,k=k?k.__html:void 0,O!=null&&k!==O&&(p=p||[]).push(z,O)):z==="children"?typeof O!="string"&&typeof O!="number"||(p=p||[]).push(z,""+O):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(O!=null&&z==="onScroll"&&it("scroll",r),p||k===O||(p=[])):(p=p||[]).push(z,O))}a&&(p=p||[]).push("style",a);var z=p;(s.updateQueue=z)&&(s.flags|=4)}},Tg=function(r,s,a,c){a!==c&&(s.flags|=4)};function Ba(r,s){if(!at)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Xt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function F0(r,s,a){var c=s.pendingProps;switch(Ch(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(s),null;case 1:return hn(s.type)&&eu(),Xt(s),null;case 3:return c=s.stateNode,Ro(),st(cn),st(Yt),jh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(su(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jn!==null&&(md(Jn),Jn=null))),id(r,s),Xt(s),null;case 5:Mh(s);var d=Rs(Ma.current);if(a=s.type,r!==null&&s.stateNode!=null)Eg(r,s,a,c,d),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Xt(s),null}if(r=Rs(Cr.current),su(s)){c=s.stateNode,a=s.type;var p=s.memoizedProps;switch(c[Ar]=s,c[xa]=p,r=(s.mode&1)!==0,a){case"dialog":it("cancel",c),it("close",c);break;case"iframe":case"object":case"embed":it("load",c);break;case"video":case"audio":for(d=0;d<Ra.length;d++)it(Ra[d],c);break;case"source":it("error",c);break;case"img":case"image":case"link":it("error",c),it("load",c);break;case"details":it("toggle",c);break;case"input":ar(c,p),it("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},it("invalid",c);break;case"textarea":yi(c,p),it("invalid",c)}an(a,p),d=null;for(var _ in p)if(p.hasOwnProperty(_)){var k=p[_];_==="children"?typeof k=="string"?c.textContent!==k&&(p.suppressHydrationWarning!==!0&&Xl(c.textContent,k,r),d=["children",k]):typeof k=="number"&&c.textContent!==""+k&&(p.suppressHydrationWarning!==!0&&Xl(c.textContent,k,r),d=["children",""+k]):o.hasOwnProperty(_)&&k!=null&&_==="onScroll"&&it("scroll",c)}switch(a){case"input":gt(c),gi(c,p,!0);break;case"textarea":gt(c),lr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=Jl)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=cs(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=_.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=_.createElement(a,{is:c.is}):(r=_.createElement(a),a==="select"&&(_=r,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):r=_.createElementNS(r,a),r[Ar]=s,r[xa]=c,wg(r,s,!1,!1),s.stateNode=r;e:{switch(_=zr(a,c),a){case"dialog":it("cancel",r),it("close",r),d=c;break;case"iframe":case"object":case"embed":it("load",r),d=c;break;case"video":case"audio":for(d=0;d<Ra.length;d++)it(Ra[d],r);d=c;break;case"source":it("error",r),d=c;break;case"img":case"image":case"link":it("error",r),it("load",r),d=c;break;case"details":it("toggle",r),d=c;break;case"input":ar(r,c),d=Qe(r,c),it("invalid",r);break;case"option":d=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},d=ee({},c,{value:void 0}),it("invalid",r);break;case"textarea":yi(r,c),d=us(r,c),it("invalid",r);break;default:d=c}an(a,d),k=d;for(p in k)if(k.hasOwnProperty(p)){var O=k[p];p==="style"?Ur(r,O):p==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&_i(r,O)):p==="children"?typeof O=="string"?(a!=="textarea"||O!=="")&&cr(r,O):typeof O=="number"&&cr(r,""+O):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?O!=null&&p==="onScroll"&&it("scroll",r):O!=null&&de(r,p,O,_))}switch(a){case"input":gt(r),gi(r,c,!1);break;case"textarea":gt(r),lr(r);break;case"option":c.value!=null&&r.setAttribute("value",""+he(c.value));break;case"select":r.multiple=!!c.multiple,p=c.value,p!=null?vn(r,!!c.multiple,p,!1):c.defaultValue!=null&&vn(r,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=Jl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Xt(s),null;case 6:if(r&&s.stateNode!=null)Tg(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Rs(Ma.current),Rs(Cr.current),su(s)){if(c=s.stateNode,a=s.memoizedProps,c[Ar]=s,(p=c.nodeValue!==a)&&(r=Rn,r!==null))switch(r.tag){case 3:Xl(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Xl(c.nodeValue,a,(r.mode&1)!==0)}p&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Ar]=s,s.stateNode=c}return Xt(s),null;case 13:if(st(dt),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(at&&Dn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Am(),Ao(),s.flags|=98560,p=!1;else if(p=su(s),c!==null&&c.dehydrated!==null){if(r===null){if(!p)throw Error(t(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[Ar]=s}else Ao(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Xt(s),p=!1}else Jn!==null&&(md(Jn),Jn=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(dt.current&1)!==0?Dt===0&&(Dt=3):vd())),s.updateQueue!==null&&(s.flags|=4),Xt(s),null);case 4:return Ro(),id(r,s),r===null&&Da(s.stateNode.containerInfo),Xt(s),null;case 10:return xh(s.type._context),Xt(s),null;case 17:return hn(s.type)&&eu(),Xt(s),null;case 19:if(st(dt),p=s.memoizedState,p===null)return Xt(s),null;if(c=(s.flags&128)!==0,_=p.rendering,_===null)if(c)Ba(p,!1);else{if(Dt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(_=hu(r),_!==null){for(s.flags|=128,Ba(p,!1),c=_.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)p=a,r=c,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=r,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,r=_.dependencies,p.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return et(dt,dt.current&1|2),s.child}r=r.sibling}p.tail!==null&&rt()>Oo&&(s.flags|=128,c=!0,Ba(p,!1),s.lanes=4194304)}else{if(!c)if(r=hu(_),r!==null){if(s.flags|=128,c=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ba(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!at)return Xt(s),null}else 2*rt()-p.renderingStartTime>Oo&&a!==1073741824&&(s.flags|=128,c=!0,Ba(p,!1),s.lanes=4194304);p.isBackwards?(_.sibling=s.child,s.child=_):(a=p.last,a!==null?a.sibling=_:s.child=_,p.last=_)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=rt(),s.sibling=null,a=dt.current,et(dt,c?a&1|2:a&1),s):(Xt(s),null);case 22:case 23:return yd(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Nn&1073741824)!==0&&(Xt(s),s.subtreeFlags&6&&(s.flags|=8192)):Xt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function j0(r,s){switch(Ch(s),s.tag){case 1:return hn(s.type)&&eu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ro(),st(cn),st(Yt),jh(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Mh(s),null;case 13:if(st(dt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ao()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return st(dt),null;case 4:return Ro(),null;case 10:return xh(s.type._context),null;case 22:case 23:return yd(),null;case 24:return null;default:return null}}var wu=!1,Jt=!1,U0=typeof WeakSet=="function"?WeakSet:Set,ce=null;function No(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){yt(r,s,c)}else a.current=null}function sd(r,s,a){try{a()}catch(c){yt(r,s,c)}}var Sg=!1;function z0(r,s){if(yh=Yr,r=tm(),uh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var _=0,k=-1,O=-1,z=0,Y=0,Q=r,G=null;t:for(;;){for(var oe;Q!==a||d!==0&&Q.nodeType!==3||(k=_+d),Q!==p||c!==0&&Q.nodeType!==3||(O=_+c),Q.nodeType===3&&(_+=Q.nodeValue.length),(oe=Q.firstChild)!==null;)G=Q,Q=oe;for(;;){if(Q===r)break t;if(G===a&&++z===d&&(k=_),G===p&&++Y===c&&(O=_),(oe=Q.nextSibling)!==null)break;Q=G,G=Q.parentNode}Q=oe}a=k===-1||O===-1?null:{start:k,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(vh={focusedElem:r,selectionRange:a},Yr=!1,ce=s;ce!==null;)if(s=ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ce=r;else for(;ce!==null;){s=ce;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,_t=fe.memoizedState,M=s.stateNode,b=M.getSnapshotBeforeUpdate(s.elementType===s.type?pe:Zn(s.type,pe),_t);M.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){yt(s,s.return,Z)}if(r=s.sibling,r!==null){r.return=s.return,ce=r;break}ce=s.return}return fe=Sg,Sg=!1,fe}function $a(r,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&r)===r){var p=d.destroy;d.destroy=void 0,p!==void 0&&sd(s,a,p)}d=d.next}while(d!==c)}}function Eu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function od(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Ig(r){var s=r.alternate;s!==null&&(r.alternate=null,Ig(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Ar],delete s[xa],delete s[Th],delete s[S0],delete s[I0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Ag(r){return r.tag===5||r.tag===3||r.tag===4}function Cg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ag(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ad(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Jl));else if(c!==4&&(r=r.child,r!==null))for(ad(r,s,a),r=r.sibling;r!==null;)ad(r,s,a),r=r.sibling}function ld(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(ld(r,s,a),r=r.sibling;r!==null;)ld(r,s,a),r=r.sibling}var zt=null,er=!1;function Mi(r,s,a){for(a=a.child;a!==null;)kg(r,s,a),a=a.sibling}function kg(r,s,a){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(ms,a)}catch{}switch(a.tag){case 5:Jt||No(a,s);case 6:var c=zt,d=er;zt=null,Mi(r,s,a),zt=c,er=d,zt!==null&&(er?(r=zt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):zt.removeChild(a.stateNode));break;case 18:zt!==null&&(er?(r=zt,a=a.stateNode,r.nodeType===8?Eh(r.parentNode,a):r.nodeType===1&&Eh(r,a),ki(r)):Eh(zt,a.stateNode));break;case 4:c=zt,d=er,zt=a.stateNode.containerInfo,er=!0,Mi(r,s,a),zt=c,er=d;break;case 0:case 11:case 14:case 15:if(!Jt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&sd(a,s,_),d=d.next}while(d!==c)}Mi(r,s,a);break;case 1:if(!Jt&&(No(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(k){yt(a,s,k)}Mi(r,s,a);break;case 21:Mi(r,s,a);break;case 22:a.mode&1?(Jt=(c=Jt)||a.memoizedState!==null,Mi(r,s,a),Jt=c):Mi(r,s,a);break;default:Mi(r,s,a)}}function Pg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new U0),s.forEach(function(c){var d=Q0.bind(null,r,c);a.has(c)||(a.add(c),c.then(d,d))})}}function tr(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=r,_=s,k=_;e:for(;k!==null;){switch(k.tag){case 5:zt=k.stateNode,er=!1;break e;case 3:zt=k.stateNode.containerInfo,er=!0;break e;case 4:zt=k.stateNode.containerInfo,er=!0;break e}k=k.return}if(zt===null)throw Error(t(160));kg(p,_,d),zt=null,er=!1;var O=d.alternate;O!==null&&(O.return=null),d.return=null}catch(z){yt(d,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Rg(s,r),s=s.sibling}function Rg(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(tr(s,r),Pr(r),c&4){try{$a(3,r,r.return),Eu(3,r)}catch(pe){yt(r,r.return,pe)}try{$a(5,r,r.return)}catch(pe){yt(r,r.return,pe)}}break;case 1:tr(s,r),Pr(r),c&512&&a!==null&&No(a,a.return);break;case 5:if(tr(s,r),Pr(r),c&512&&a!==null&&No(a,a.return),r.flags&32){var d=r.stateNode;try{cr(d,"")}catch(pe){yt(r,r.return,pe)}}if(c&4&&(d=r.stateNode,d!=null)){var p=r.memoizedProps,_=a!==null?a.memoizedProps:p,k=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{k==="input"&&p.type==="radio"&&p.name!=null&&kt(d,p),zr(k,_);var z=zr(k,p);for(_=0;_<O.length;_+=2){var Y=O[_],Q=O[_+1];Y==="style"?Ur(d,Q):Y==="dangerouslySetInnerHTML"?_i(d,Q):Y==="children"?cr(d,Q):de(d,Y,Q,z)}switch(k){case"input":On(d,p);break;case"textarea":Zs(d,p);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var oe=p.value;oe!=null?vn(d,!!p.multiple,oe,!1):G!==!!p.multiple&&(p.defaultValue!=null?vn(d,!!p.multiple,p.defaultValue,!0):vn(d,!!p.multiple,p.multiple?[]:"",!1))}d[xa]=p}catch(pe){yt(r,r.return,pe)}}break;case 6:if(tr(s,r),Pr(r),c&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,p=r.memoizedProps;try{d.nodeValue=p}catch(pe){yt(r,r.return,pe)}}break;case 3:if(tr(s,r),Pr(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ki(s.containerInfo)}catch(pe){yt(r,r.return,pe)}break;case 4:tr(s,r),Pr(r);break;case 13:tr(s,r),Pr(r),d=r.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(hd=rt())),c&4&&Pg(r);break;case 22:if(Y=a!==null&&a.memoizedState!==null,r.mode&1?(Jt=(z=Jt)||Y,tr(s,r),Jt=z):tr(s,r),Pr(r),c&8192){if(z=r.memoizedState!==null,(r.stateNode.isHidden=z)&&!Y&&(r.mode&1)!==0)for(ce=r,Y=r.child;Y!==null;){for(Q=ce=Y;ce!==null;){switch(G=ce,oe=G.child,G.tag){case 0:case 11:case 14:case 15:$a(4,G,G.return);break;case 1:No(G,G.return);var fe=G.stateNode;if(typeof fe.componentWillUnmount=="function"){c=G,a=G.return;try{s=c,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(pe){yt(c,a,pe)}}break;case 5:No(G,G.return);break;case 22:if(G.memoizedState!==null){xg(Q);continue}}oe!==null?(oe.return=G,ce=oe):xg(Q)}Y=Y.sibling}e:for(Y=null,Q=r;;){if(Q.tag===5){if(Y===null){Y=Q;try{d=Q.stateNode,z?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(k=Q.stateNode,O=Q.memoizedProps.style,_=O!=null&&O.hasOwnProperty("display")?O.display:null,k.style.display=_n("display",_))}catch(pe){yt(r,r.return,pe)}}}else if(Q.tag===6){if(Y===null)try{Q.stateNode.nodeValue=z?"":Q.memoizedProps}catch(pe){yt(r,r.return,pe)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===r)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===r)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===r)break e;Y===Q&&(Y=null),Q=Q.return}Y===Q&&(Y=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:tr(s,r),Pr(r),c&4&&Pg(r);break;case 21:break;default:tr(s,r),Pr(r)}}function Pr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Ag(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(cr(d,""),c.flags&=-33);var p=Cg(r);ld(r,p,d);break;case 3:case 4:var _=c.stateNode.containerInfo,k=Cg(r);ad(r,k,_);break;default:throw Error(t(161))}}catch(O){yt(r,r.return,O)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function B0(r,s,a){ce=r,Dg(r)}function Dg(r,s,a){for(var c=(r.mode&1)!==0;ce!==null;){var d=ce,p=d.child;if(d.tag===22&&c){var _=d.memoizedState!==null||wu;if(!_){var k=d.alternate,O=k!==null&&k.memoizedState!==null||Jt;k=wu;var z=Jt;if(wu=_,(Jt=O)&&!z)for(ce=d;ce!==null;)_=ce,O=_.child,_.tag===22&&_.memoizedState!==null?Og(d):O!==null?(O.return=_,ce=O):Og(d);for(;p!==null;)ce=p,Dg(p),p=p.sibling;ce=d,wu=k,Jt=z}Ng(r)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ce=p):Ng(r)}}function Ng(r){for(;ce!==null;){var s=ce;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Jt||Eu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Jt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Zn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&xm(s,p,c);break;case 3:var _=s.updateQueue;if(_!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}xm(s,_,a)}break;case 5:var k=s.stateNode;if(a===null&&s.flags&4){a=k;var O=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&a.focus();break;case"img":O.src&&(a.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var Q=Y.dehydrated;Q!==null&&ki(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Jt||s.flags&512&&od(s)}catch(G){yt(s,s.return,G)}}if(s===r){ce=null;break}if(a=s.sibling,a!==null){a.return=s.return,ce=a;break}ce=s.return}}function xg(r){for(;ce!==null;){var s=ce;if(s===r){ce=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ce=a;break}ce=s.return}}function Og(r){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Eu(4,s)}catch(O){yt(s,a,O)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(O){yt(s,d,O)}}var p=s.return;try{od(s)}catch(O){yt(s,p,O)}break;case 5:var _=s.return;try{od(s)}catch(O){yt(s,_,O)}}}catch(O){yt(s,s.return,O)}if(s===r){ce=null;break}var k=s.sibling;if(k!==null){k.return=s.return,ce=k;break}ce=s.return}}var $0=Math.ceil,Tu=ie.ReactCurrentDispatcher,ud=ie.ReactCurrentOwner,$n=ie.ReactCurrentBatchConfig,$e=0,Lt=null,St=null,Bt=0,Nn=0,xo=xi(0),Dt=0,Wa=null,Ns=0,Su=0,cd=0,Ha=null,fn=null,hd=0,Oo=1/0,si=null,Iu=!1,dd=null,Fi=null,Au=!1,ji=null,Cu=0,qa=0,fd=null,ku=-1,Pu=0;function on(){return($e&6)!==0?rt():ku!==-1?ku:ku=rt()}function Ui(r){return(r.mode&1)===0?1:($e&2)!==0&&Bt!==0?Bt&-Bt:C0.transition!==null?(Pu===0&&(Pu=fa()),Pu):(r=Ue,r!==0||(r=window.event,r=r===void 0?16:ao(r.type)),r)}function nr(r,s,a,c){if(50<qa)throw qa=0,fd=null,Error(t(185));_s(r,a,c),(($e&2)===0||r!==Lt)&&(r===Lt&&(($e&2)===0&&(Su|=a),Dt===4&&zi(r,Bt)),pn(r,c),a===1&&$e===0&&(s.mode&1)===0&&(Oo=rt()+500,nu&&bi()))}function pn(r,s){var a=r.callbackNode;vs(r,s);var c=qr(r,r===Lt?Bt:0);if(c===0)a!==null&&Si(a),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(a!=null&&Si(a),s===1)r.tag===0?A0(Vg.bind(null,r)):wm(Vg.bind(null,r)),E0(function(){($e&6)===0&&bi()}),a=null;else{switch(mr(c)){case 1:a=to;break;case 4:a=ca;break;case 16:a=ps;break;case 536870912:a=no;break;default:a=ps}a=$g(a,bg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function bg(r,s){if(ku=-1,Pu=0,($e&6)!==0)throw Error(t(327));var a=r.callbackNode;if(bo()&&r.callbackNode!==a)return null;var c=qr(r,r===Lt?Bt:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||s)s=Ru(r,c);else{s=c;var d=$e;$e|=2;var p=Mg();(Lt!==r||Bt!==s)&&(si=null,Oo=rt()+500,Os(r,s));do try{q0();break}catch(k){Lg(r,k)}while(!0);Nh(),Tu.current=p,$e=d,St!==null?s=0:(Lt=null,Bt=0,s=Dt)}if(s!==0){if(s===2&&(d=da(r),d!==0&&(c=d,s=pd(r,d))),s===1)throw a=Wa,Os(r,0),zi(r,c),pn(r,rt()),a;if(s===6)zi(r,c);else{if(d=r.current.alternate,(c&30)===0&&!W0(d)&&(s=Ru(r,c),s===2&&(p=da(r),p!==0&&(c=p,s=pd(r,p))),s===1))throw a=Wa,Os(r,0),zi(r,c),pn(r,rt()),a;switch(r.finishedWork=d,r.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:bs(r,fn,si);break;case 3:if(zi(r,c),(c&130023424)===c&&(s=hd+500-rt(),10<s)){if(qr(r,0)!==0)break;if(d=r.suspendedLanes,(d&c)!==c){on(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=wh(bs.bind(null,r,fn,si),s);break}bs(r,fn,si);break;case 4:if(zi(r,c),(c&4194240)===c)break;for(s=r.eventTimes,d=-1;0<c;){var _=31-In(c);p=1<<_,_=s[_],_>d&&(d=_),c&=~p}if(c=d,c=rt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*$0(c/1960))-c,10<c){r.timeoutHandle=wh(bs.bind(null,r,fn,si),c);break}bs(r,fn,si);break;case 5:bs(r,fn,si);break;default:throw Error(t(329))}}}return pn(r,rt()),r.callbackNode===a?bg.bind(null,r):null}function pd(r,s){var a=Ha;return r.current.memoizedState.isDehydrated&&(Os(r,s).flags|=256),r=Ru(r,s),r!==2&&(s=fn,fn=a,s!==null&&md(s)),r}function md(r){fn===null?fn=r:fn.push.apply(fn,r)}function W0(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Xn(p(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zi(r,s){for(s&=~cd,s&=~Su,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-In(s),c=1<<a;r[a]=-1,s&=~c}}function Vg(r){if(($e&6)!==0)throw Error(t(327));bo();var s=qr(r,0);if((s&1)===0)return pn(r,rt()),null;var a=Ru(r,s);if(r.tag!==0&&a===2){var c=da(r);c!==0&&(s=c,a=pd(r,c))}if(a===1)throw a=Wa,Os(r,0),zi(r,s),pn(r,rt()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,bs(r,fn,si),pn(r,rt()),null}function gd(r,s){var a=$e;$e|=1;try{return r(s)}finally{$e=a,$e===0&&(Oo=rt()+500,nu&&bi())}}function xs(r){ji!==null&&ji.tag===0&&($e&6)===0&&bo();var s=$e;$e|=1;var a=$n.transition,c=Ue;try{if($n.transition=null,Ue=1,r)return r()}finally{Ue=c,$n.transition=a,$e=s,($e&6)===0&&bi()}}function yd(){Nn=xo.current,st(xo)}function Os(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,w0(a)),St!==null)for(a=St.return;a!==null;){var c=a;switch(Ch(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&eu();break;case 3:Ro(),st(cn),st(Yt),jh();break;case 5:Mh(c);break;case 4:Ro();break;case 13:st(dt);break;case 19:st(dt);break;case 10:xh(c.type._context);break;case 22:case 23:yd()}a=a.return}if(Lt=r,St=r=Bi(r.current,null),Bt=Nn=s,Dt=0,Wa=null,cd=Su=Ns=0,fn=Ha=null,Ps!==null){for(s=0;s<Ps.length;s++)if(a=Ps[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var _=p.next;p.next=d,c.next=_}a.pending=c}Ps=null}return r}function Lg(r,s){do{var a=St;try{if(Nh(),du.current=gu,fu){for(var c=ft.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}fu=!1}if(Ds=0,Vt=Rt=ft=null,Fa=!1,ja=0,ud.current=null,a===null||a.return===null){Dt=1,Wa=s,St=null;break}e:{var p=r,_=a.return,k=a,O=s;if(s=Bt,k.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var z=O,Y=k,Q=Y.tag;if((Y.mode&1)===0&&(Q===0||Q===11||Q===15)){var G=Y.alternate;G?(Y.updateQueue=G.updateQueue,Y.memoizedState=G.memoizedState,Y.lanes=G.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var oe=ag(_);if(oe!==null){oe.flags&=-257,lg(oe,_,k,p,s),oe.mode&1&&og(p,z,s),s=oe,O=z;var fe=s.updateQueue;if(fe===null){var pe=new Set;pe.add(O),s.updateQueue=pe}else fe.add(O);break e}else{if((s&1)===0){og(p,z,s),vd();break e}O=Error(t(426))}}else if(at&&k.mode&1){var _t=ag(_);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),lg(_t,_,k,p,s),Rh(Do(O,k));break e}}p=O=Do(O,k),Dt!==4&&(Dt=2),Ha===null?Ha=[p]:Ha.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var M=ig(p,O,s);Nm(p,M);break e;case 1:k=O;var b=p.type,j=p.stateNode;if((p.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Fi===null||!Fi.has(j)))){p.flags|=65536,s&=-s,p.lanes|=s;var Z=sg(p,k,s);Nm(p,Z);break e}}p=p.return}while(p!==null)}jg(a)}catch(me){s=me,St===a&&a!==null&&(St=a=a.return);continue}break}while(!0)}function Mg(){var r=Tu.current;return Tu.current=gu,r===null?gu:r}function vd(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Lt===null||(Ns&268435455)===0&&(Su&268435455)===0||zi(Lt,Bt)}function Ru(r,s){var a=$e;$e|=2;var c=Mg();(Lt!==r||Bt!==s)&&(si=null,Os(r,s));do try{H0();break}catch(d){Lg(r,d)}while(!0);if(Nh(),$e=a,Tu.current=c,St!==null)throw Error(t(261));return Lt=null,Bt=0,Dt}function H0(){for(;St!==null;)Fg(St)}function q0(){for(;St!==null&&!Wr();)Fg(St)}function Fg(r){var s=Bg(r.alternate,r,Nn);r.memoizedProps=r.pendingProps,s===null?jg(r):St=s,ud.current=null}function jg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=F0(a,s,Nn),a!==null){St=a;return}}else{if(a=j0(a,s),a!==null){a.flags&=32767,St=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Dt=6,St=null;return}}if(s=s.sibling,s!==null){St=s;return}St=s=r}while(s!==null);Dt===0&&(Dt=5)}function bs(r,s,a){var c=Ue,d=$n.transition;try{$n.transition=null,Ue=1,G0(r,s,a,c)}finally{$n.transition=d,Ue=c}return null}function G0(r,s,a,c){do bo();while(ji!==null);if(($e&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var p=a.lanes|a.childLanes;if(ih(r,p),r===Lt&&(St=Lt=null,Bt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Au||(Au=!0,$g(ps,function(){return bo(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=$n.transition,$n.transition=null;var _=Ue;Ue=1;var k=$e;$e|=4,ud.current=null,z0(r,a),Rg(a,r),f0(vh),Yr=!!yh,vh=yh=null,r.current=a,B0(a),Hr(),$e=k,Ue=_,$n.transition=p}else r.current=a;if(Au&&(Au=!1,ji=r,Cu=d),p=r.pendingLanes,p===0&&(Fi=null),Ll(a.stateNode),pn(r,rt()),s!==null)for(c=r.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Iu)throw Iu=!1,r=dd,dd=null,r;return(Cu&1)!==0&&r.tag!==0&&bo(),p=r.pendingLanes,(p&1)!==0?r===fd?qa++:(qa=0,fd=r):qa=0,bi(),null}function bo(){if(ji!==null){var r=mr(Cu),s=$n.transition,a=Ue;try{if($n.transition=null,Ue=16>r?16:r,ji===null)var c=!1;else{if(r=ji,ji=null,Cu=0,($e&6)!==0)throw Error(t(331));var d=$e;for($e|=4,ce=r.current;ce!==null;){var p=ce,_=p.child;if((ce.flags&16)!==0){var k=p.deletions;if(k!==null){for(var O=0;O<k.length;O++){var z=k[O];for(ce=z;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:$a(8,Y,p)}var Q=Y.child;if(Q!==null)Q.return=Y,ce=Q;else for(;ce!==null;){Y=ce;var G=Y.sibling,oe=Y.return;if(Ig(Y),Y===z){ce=null;break}if(G!==null){G.return=oe,ce=G;break}ce=oe}}}var fe=p.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var _t=pe.sibling;pe.sibling=null,pe=_t}while(pe!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,ce=_;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:$a(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,ce=M;break e}ce=p.return}}var b=r.current;for(ce=b;ce!==null;){_=ce;var j=_.child;if((_.subtreeFlags&2064)!==0&&j!==null)j.return=_,ce=j;else e:for(_=b;ce!==null;){if(k=ce,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Eu(9,k)}}catch(me){yt(k,k.return,me)}if(k===_){ce=null;break e}var Z=k.sibling;if(Z!==null){Z.return=k.return,ce=Z;break e}ce=k.return}}if($e=d,bi(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(ms,r)}catch{}c=!0}return c}finally{Ue=a,$n.transition=s}}return!1}function Ug(r,s,a){s=Do(a,s),s=ig(r,s,1),r=Li(r,s,1),s=on(),r!==null&&(_s(r,1,s),pn(r,s))}function yt(r,s,a){if(r.tag===3)Ug(r,r,a);else for(;s!==null;){if(s.tag===3){Ug(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Fi===null||!Fi.has(c))){r=Do(a,r),r=sg(s,r,1),s=Li(s,r,1),r=on(),s!==null&&(_s(s,1,r),pn(s,r));break}}s=s.return}}function K0(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),s=on(),r.pingedLanes|=r.suspendedLanes&a,Lt===r&&(Bt&a)===a&&(Dt===4||Dt===3&&(Bt&130023424)===Bt&&500>rt()-hd?Os(r,0):cd|=a),pn(r,s)}function zg(r,s){s===0&&((r.mode&1)===0?s=1:(s=Ii,Ii<<=1,(Ii&130023424)===0&&(Ii=4194304)));var a=on();r=ni(r,s),r!==null&&(_s(r,s,a),pn(r,a))}function Y0(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),zg(r,a)}function Q0(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),zg(r,a)}var Bg;Bg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||cn.current)dn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return dn=!1,M0(r,s,a);dn=(r.flags&131072)!==0}else dn=!1,at&&(s.flags&1048576)!==0&&Em(s,iu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;_u(r,s),r=s.pendingProps;var d=To(s,Yt.current);Po(s,a),d=Bh(null,s,c,r,d,a);var p=$h();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,hn(c)?(p=!0,tu(s)):p=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Vh(s),d.updater=yu,s.stateNode=d,d._reactInternals=s,Yh(s,c,r,a),s=Zh(null,s,c,!0,p,a)):(s.tag=0,at&&p&&Ah(s),sn(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(_u(r,s),r=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=J0(c),r=Zn(c,r),d){case 0:s=Jh(null,s,c,r,a);break e;case 1:s=pg(null,s,c,r,a);break e;case 11:s=ug(null,s,c,r,a);break e;case 14:s=cg(null,s,c,Zn(c.type,r),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Zn(c,d),Jh(r,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Zn(c,d),pg(r,s,c,d,a);case 3:e:{if(mg(s),r===null)throw Error(t(387));c=s.pendingProps,p=s.memoizedState,d=p.element,Dm(r,s),cu(s,c,null,a);var _=s.memoizedState;if(c=_.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){d=Do(Error(t(423)),s),s=gg(r,s,c,a,d);break e}else if(c!==d){d=Do(Error(t(424)),s),s=gg(r,s,c,a,d);break e}else for(Dn=Ni(s.stateNode.containerInfo.firstChild),Rn=s,at=!0,Jn=null,a=Pm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ao(),c===d){s=ii(r,s,a);break e}sn(r,s,c,a)}s=s.child}return s;case 5:return Om(s),r===null&&Ph(s),c=s.type,d=s.pendingProps,p=r!==null?r.memoizedProps:null,_=d.children,_h(c,d)?_=null:p!==null&&_h(c,p)&&(s.flags|=32),fg(r,s),sn(r,s,_,a),s.child;case 6:return r===null&&Ph(s),null;case 13:return yg(r,s,a);case 4:return Lh(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Co(s,null,c,a):sn(r,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Zn(c,d),ug(r,s,c,d,a);case 7:return sn(r,s,s.pendingProps,a),s.child;case 8:return sn(r,s,s.pendingProps.children,a),s.child;case 12:return sn(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,p=s.memoizedProps,_=d.value,et(au,c._currentValue),c._currentValue=_,p!==null)if(Xn(p.value,_)){if(p.children===d.children&&!cn.current){s=ii(r,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var k=p.dependencies;if(k!==null){_=p.child;for(var O=k.firstContext;O!==null;){if(O.context===c){if(p.tag===1){O=ri(-1,a&-a),O.tag=2;var z=p.updateQueue;if(z!==null){z=z.shared;var Y=z.pending;Y===null?O.next=O:(O.next=Y.next,Y.next=O),z.pending=O}}p.lanes|=a,O=p.alternate,O!==null&&(O.lanes|=a),Oh(p.return,a,s),k.lanes|=a;break}O=O.next}}else if(p.tag===10)_=p.type===s.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(t(341));_.lanes|=a,k=_.alternate,k!==null&&(k.lanes|=a),Oh(_,a,s),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===s){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}sn(r,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,Po(s,a),d=zn(d),c=c(d),s.flags|=1,sn(r,s,c,a),s.child;case 14:return c=s.type,d=Zn(c,s.pendingProps),d=Zn(c.type,d),cg(r,s,c,d,a);case 15:return hg(r,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Zn(c,d),_u(r,s),s.tag=1,hn(c)?(r=!0,tu(s)):r=!1,Po(s,a),ng(s,c,d),Yh(s,c,d,a),Zh(null,s,c,!0,r,a);case 19:return _g(r,s,a);case 22:return dg(r,s,a)}throw Error(t(156,s.tag))};function $g(r,s){return $r(r,s)}function X0(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(r,s,a,c){return new X0(r,s,a,c)}function _d(r){return r=r.prototype,!(!r||!r.isReactComponent)}function J0(r){if(typeof r=="function")return _d(r)?1:0;if(r!=null){if(r=r.$$typeof,r===V)return 11;if(r===Le)return 14}return 2}function Bi(r,s){var a=r.alternate;return a===null?(a=Wn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Du(r,s,a,c,d,p){var _=2;if(c=r,typeof r=="function")_d(r)&&(_=1);else if(typeof r=="string")_=5;else e:switch(r){case R:return Vs(a.children,d,p,s);case S:_=8,d|=8;break;case P:return r=Wn(12,a,s,d|2),r.elementType=P,r.lanes=p,r;case C:return r=Wn(13,a,s,d),r.elementType=C,r.lanes=p,r;case be:return r=Wn(19,a,s,d),r.elementType=be,r.lanes=p,r;case ze:return Nu(a,d,p,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:_=10;break e;case x:_=9;break e;case V:_=11;break e;case Le:_=14;break e;case We:_=16,c=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Wn(_,a,s,d),s.elementType=r,s.type=c,s.lanes=p,s}function Vs(r,s,a,c){return r=Wn(7,r,c,s),r.lanes=a,r}function Nu(r,s,a,c){return r=Wn(22,r,c,s),r.elementType=ze,r.lanes=a,r.stateNode={isHidden:!1},r}function wd(r,s,a){return r=Wn(6,r,null,s),r.lanes=a,r}function Ed(r,s,a){return s=Wn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function Z0(r,s,a,c,d){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pa(0),this.expirationTimes=pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pa(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Td(r,s,a,c,d,p,_,k,O){return r=new Z0(r,s,a,k,O),s===1?(s=1,p===!0&&(s|=8)):s=0,p=Wn(3,null,null,s),r.current=p,p.stateNode=r,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vh(p),r}function eT(r,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ve,key:c==null?null:""+c,children:r,containerInfo:s,implementation:a}}function Wg(r){if(!r)return Oi;r=r._reactInternals;e:{if(Tn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(hn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(hn(a))return vm(r,a,s)}return s}function Hg(r,s,a,c,d,p,_,k,O){return r=Td(a,c,!0,r,d,p,_,k,O),r.context=Wg(null),a=r.current,c=on(),d=Ui(a),p=ri(c,d),p.callback=s??null,Li(a,p,d),r.current.lanes=d,_s(r,d,c),pn(r,c),r}function xu(r,s,a,c){var d=s.current,p=on(),_=Ui(d);return a=Wg(a),s.context===null?s.context=a:s.pendingContext=a,s=ri(p,_),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=Li(d,s,_),r!==null&&(nr(r,d,_,p),uu(r,d,_)),_}function Ou(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function qg(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Sd(r,s){qg(r,s),(r=r.alternate)&&qg(r,s)}function tT(){return null}var Gg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Id(r){this._internalRoot=r}bu.prototype.render=Id.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));xu(r,s,null,null)},bu.prototype.unmount=Id.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;xs(function(){xu(null,r,null,null)}),s[Jr]=null}};function bu(r){this._internalRoot=r}bu.prototype.unstable_scheduleHydration=function(r){if(r){var s=va();r={blockedOn:null,target:r,priority:s};for(var a=0;a<An.length&&s!==0&&s<An[a].priority;a++);An.splice(a,0,r),a===0&&so(r)}};function Ad(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Vu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Kg(){}function nT(r,s,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var z=Ou(_);p.call(z)}}var _=Hg(s,c,r,0,null,!1,!1,"",Kg);return r._reactRootContainer=_,r[Jr]=_.current,Da(r.nodeType===8?r.parentNode:r),xs(),_}for(;d=r.lastChild;)r.removeChild(d);if(typeof c=="function"){var k=c;c=function(){var z=Ou(O);k.call(z)}}var O=Td(r,0,!1,null,null,!1,!1,"",Kg);return r._reactRootContainer=O,r[Jr]=O.current,Da(r.nodeType===8?r.parentNode:r),xs(function(){xu(s,O,a,c)}),O}function Lu(r,s,a,c,d){var p=a._reactRootContainer;if(p){var _=p;if(typeof d=="function"){var k=d;d=function(){var O=Ou(_);k.call(O)}}xu(s,_,r,d)}else _=nT(a,s,r,d,c);return Ou(_)}ga=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ge(s.pendingLanes);a!==0&&(ma(s,a|1),pn(s,rt()),($e&6)===0&&(Oo=rt()+500,bi()))}break;case 13:xs(function(){var c=ni(r,1);if(c!==null){var d=on();nr(c,r,1,d)}}),Sd(r,1)}},ro=function(r){if(r.tag===13){var s=ni(r,134217728);if(s!==null){var a=on();nr(s,r,134217728,a)}Sd(r,134217728)}},ya=function(r){if(r.tag===13){var s=Ui(r),a=ni(r,s);if(a!==null){var c=on();nr(a,r,s,c)}Sd(r,s)}},va=function(){return Ue},_a=function(r,s){var a=Ue;try{return Ue=r,s()}finally{Ue=a}},Vn=function(r,s,a){switch(s){case"input":if(On(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var d=Zl(c);if(!d)throw Error(t(90));bt(c),On(c,d)}}}break;case"textarea":Zs(r,a);break;case"select":s=a.value,s!=null&&vn(r,!!a.multiple,s,!1)}},Xe=gd,rn=xs;var rT={usingClientEntryPoint:!1,Events:[Oa,wo,Zl,ht,wn,gd]},Ga={findFiberByHostInstance:Is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iT={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Gt(r),r===null?null:r.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||tT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{ms=Mu.inject(iT),Sn=Mu}catch{}}return mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rT,mn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ad(s))throw Error(t(200));return eT(r,s,null,a)},mn.createRoot=function(r,s){if(!Ad(r))throw Error(t(299));var a=!1,c="",d=Gg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Td(r,1,!1,null,null,a,!1,c,d),r[Jr]=s.current,Da(r.nodeType===8?r.parentNode:r),new Id(s)},mn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Gt(s),r=r===null?null:r.stateNode,r},mn.flushSync=function(r){return xs(r)},mn.hydrate=function(r,s,a){if(!Vu(s))throw Error(t(200));return Lu(null,r,s,!0,a)},mn.hydrateRoot=function(r,s,a){if(!Ad(r))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",_=Gg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),s=Hg(s,null,r,1,a??null,d,!1,p,_),r[Jr]=s.current,Da(r),c)for(r=0;r<c.length;r++)a=c[r],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new bu(s)},mn.render=function(r,s,a){if(!Vu(s))throw Error(t(200));return Lu(null,r,s,!1,a)},mn.unmountComponentAtNode=function(r){if(!Vu(r))throw Error(t(40));return r._reactRootContainer?(xs(function(){Lu(null,null,r,!1,function(){r._reactRootContainer=null,r[Jr]=null})}),!0):!1},mn.unstable_batchedUpdates=gd,mn.unstable_renderSubtreeIntoContainer=function(r,s,a,c){if(!Vu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Lu(r,s,a,!1,c)},mn.version="18.3.1-next-f1338f8080-20240426",mn}var ny;function pT(){if(ny)return Pd.exports;ny=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pd.exports=fT(),Pd.exports}var ry;function mT(){if(ry)return Fu;ry=1;var n=pT();return Fu.createRoot=n.createRoot,Fu.hydrateRoot=n.hydrateRoot,Fu}var gT=mT();const yT=Qv(gT),iy=n=>{const e=new Date(n),t=e.getDay(),o=(t===0?7:t)-1;return e.setDate(e.getDate()-o),e.setHours(0,0,0,0),e},vT=n=>{const e=new Date(n),t=e.getDay(),o=7-(t===0?7:t);return e.setDate(e.getDate()+o),e.setHours(23,59,59,999),e},_T=(n,e)=>{const t=[];let i=iy(new Date(n));const o=iy(new Date(e));for(;i<=o;)t.push(new Date(i)),i.setDate(i.getDate()+7);return t},yn=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`},qe=n=>{const[e,t,i]=n.split("-").map(Number);if(e===void 0||t===void 0||i===void 0)throw new Error(`Invalid date string: ${n}`);return new Date(e,t-1,i)},Ku=(n,e,t)=>{const i=n.getTime(),o=e.getTime(),l=t.getTime();return i>=o&&i<=l},Jv=(n,e)=>{const t=[],i=new Date(n);for(;i<=e;)t.push(new Date(i)),i.setDate(i.getDate()+1);return t},sy=[{yearsOfService:0,hoursPerMonth:10},{yearsOfService:4,hoursPerMonth:12},{yearsOfService:9,hoursPerMonth:14}],Nd={"5/40":{hoursPerDay:8},"9/80":{hoursPerRegularDay:9,hoursPerNonRDOFriday:8}},oy=(n,e)=>{const t=e.getFullYear()-n.getFullYear(),i=e.getMonth()-n.getMonth(),o=e.getDate()-n.getDate();return i<0||i===0&&o<0?t-1:t},wT=n=>{var t;const e=sy.filter(i=>n>=i.yearsOfService).sort((i,o)=>o.yearsOfService-i.yearsOfService)[0];return(e==null?void 0:e.hoursPerMonth)??((t=sy[0])==null?void 0:t.hoursPerMonth)??10},Zv=(n,e,t)=>{const i=new Date(e);i.setHours(0,0,0,0);const o=new Date(t);o.setHours(0,0,0,0);const l=Math.round((o.getTime()-i.getTime())/(1e3*60*60*24))+1,h=oy(n,e),f=oy(n,t),g=Math.max(h,f),y=wT(g),E=365.25/12,D=y/E*7/7*l;return Math.round(D*100)/100},e_=n=>{const e=n.getDay();return e===0||e===6},jf=(n,e)=>{if(n.getDay()!==5)return!1;const o=(l=>{const h=new Date(l.valueOf()),f=(l.getDay()+6)%7;h.setDate(h.getDate()-f+3);const g=new Date(h.getFullYear(),0,4),y=h.getTime()-g.getTime(),w=1e3*60*60*24*7;return 1+Math.floor(y/w)})(n)%2===0;return e==="even-fridays"?o:!o},Uf=(n,e)=>e_(n)?0:e.type==="5/40"?Nd["5/40"].hoursPerDay:n.getDay()===5?e.rdoPattern&&jf(n,e.rdoPattern)?0:Nd["9/80"].hoursPerNonRDOFriday:Nd["9/80"].hoursPerRegularDay,ET=(n,e,t)=>{const i=[],o=new Date(n);for(;o<=e;)o.getDay()===5&&jf(o,t)&&i.push(new Date(o)),o.setDate(o.getDate()+1);return i},Dc=(n,e,t,i=[])=>{let o=0;const l=Jv(n,e),h=new Set(i.map(f=>qe(f.date).toISOString().split("T")[0]));for(const f of l){const g=f.toISOString().split("T")[0];h.has(g)||(o+=Uf(f,t))}return o},TT=(n,e)=>e.type!=="9/80"||!e.rdoPattern?!1:jf(n,e.rdoPattern),zf=(n,e,t=[])=>{const i=qe(n.startDate),o=qe(n.endDate);return Dc(i,o,e,t)},t_=320,ST=280,IT=(n,e,t,i,o)=>{const l=_T(e,t),h=[];let f=n.currentBalance;const g=qe(n.startDate),y=qe(n.balanceAsOfDate),w=new Set(i.filter(E=>E.personalDayUsed).map(E=>qe(E.startDate).getFullYear()));if(n.personalDayUsedInStartYear){const E=qe(n.balanceAsOfDate).getFullYear();w.add(E)}for(const E of l){const I=vT(E);let D=E>=y?Zv(g,E,I):0;const $=E.getFullYear();(I.getFullYear()>$||I.getMonth()===11&&I.getDate()===31)&&(w.has($)||(D+=8));const U=i.filter(R=>{const S=qe(R.startDate),P=qe(R.endDate);return Ku(S,E,I)||Ku(P,E,I)||S<E&&P>I}),X=o.filter(R=>Ku(qe(R.date),E,I)),re=n.workSchedule.type==="9/80"&&n.workSchedule.rdoPattern?ET(E,I,n.workSchedule.rdoPattern):[],de=U.reduce((R,S)=>{const P=qe(S.startDate),N=qe(S.endDate),x=P>E?P:E,V=N<I?N:I,C=Dc(x,V,n.workSchedule,o);let be=0;S.personalDayUsed&&P>=E&&P<=I&&(be=8);const Le=Math.max(0,C-be);return R+Le},0),ie=f,Oe=ie+D-de,ve=Math.min(Oe,t_);h.push({weekStartDate:yn(E),weekEndDate:yn(I),startingBalance:ie,accrued:D,used:de,endingBalance:ve,plannedVacations:U,holidays:X,rdoDays:re.map(yn)}),f=ve}return h},ay=(n,e)=>{var y,w;const t=n.filter(E=>qe(E.weekStartDate).getFullYear()===e);if(t.length===0)return{year:e,startingBalance:0,totalAccrued:0,totalUsed:0,endingBalance:0,totalPlannedVacations:0,totalHolidayHours:0};const i=((y=t[0])==null?void 0:y.startingBalance)??0,o=t.reduce((E,I)=>E+I.accrued,0),l=t.reduce((E,I)=>E+I.used,0),h=((w=t[t.length-1])==null?void 0:w.endingBalance)??0,f=new Set(t.flatMap(E=>E.plannedVacations.map(I=>I.id))),g=t.reduce((E,I)=>E+I.holidays.reduce((D,$)=>D+$.hours,0),0);return{year:e,startingBalance:i,totalAccrued:o,totalUsed:l,endingBalance:h,totalPlannedVacations:f.size,totalHolidayHours:g}},AT=(n,e,t,i=[])=>{const o=new Date,l=qe(n.startDate),h=Zv(l,o,e),f=t.filter(g=>qe(g.endDate)<=e).reduce((g,y)=>{const w=zf(y,n.workSchedule,i),E=y.personalDayUsed?8:0;return g+Math.max(0,w-E)},0);return n.currentBalance+h-f},CT=()=>{};var ly={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},kT=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],h=n[t++],f=n[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],h=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},r_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],h=o+1<n.length,f=h?n[o+1]:0,g=o+2<n.length,y=g?n[o+2]:0,w=l>>2,E=(l&3)<<4|f>>4;let I=(f&15)<<2|y>>6,D=y&63;g||(D=64,h||(I=64)),i.push(t[w],t[E],t[I],t[D])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(n_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new PT;const I=l<<2|f>>4;if(i.push(I),y!==64){const D=f<<4&240|y>>2;if(i.push(D),E!==64){const $=y<<6&192|E;i.push($)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class PT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RT=function(n){const e=n_(n);return r_.encodeByteArray(e,!0)},ac=function(n){return RT(n).replace(/\./g,"")},i_=function(n){try{return r_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=()=>DT().__FIREBASE_DEFAULTS__,xT=()=>{if(typeof process>"u"||typeof ly>"u")return;const n=ly.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},OT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&i_(n[1]);return e&&JSON.parse(e)},Nc=()=>{try{return CT()||NT()||xT()||OT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},s_=n=>{var e,t;return(t=(e=Nc())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},bT=n=>{const e=s_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},o_=()=>{var n;return(n=Nc())==null?void 0:n.config},a_=n=>{var e;return(e=Nc())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function l_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ac(JSON.stringify(t)),ac(JSON.stringify(h)),""].join(".")}const il={};function MT(){const n={prod:[],emulator:[]};for(const e of Object.keys(il))il[e]?n.emulator.push(e):n.prod.push(e);return n}function FT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let uy=!1;function u_(n,e){if(typeof window>"u"||typeof document>"u"||!ta(window.location.host)||il[n]===e||il[n]||uy)return;il[n]=e;function t(I){return`__firebase__banner__${I}`}const i="__firebase__banner",l=MT().prod.length>0;function h(){const I=document.getElementById(i);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,D){I.setAttribute("width","24"),I.setAttribute("id",D),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{uy=!0,h()},I}function w(I,D){I.setAttribute("id",D),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function E(){const I=FT(i),D=t("text"),$=document.getElementById(D)||document.createElement("span"),W=t("learnmore"),U=document.getElementById(W)||document.createElement("a"),X=t("preprendIcon"),re=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const de=I.element;f(de),w(U,W);const ie=y();g(re,X),de.append(re,$,U,ie),document.body.appendChild(de)}l?($.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function UT(){var e;const n=(e=Nc())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $T(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WT(){const n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function HT(){return!UT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qT(){try{return typeof indexedDB=="object"}catch{return!1}}function GT(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="FirebaseError";class pi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=KT,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tl.prototype.create)}}class Tl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?YT(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new pi(o,f,i)}}function YT(n,e){return n.replace(QT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const QT=/\{\$([^}]+)}/g;function XT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bs(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],h=e[o];if(cy(l)&&cy(h)){if(!Bs(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function cy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function JT(n,e){const t=new ZT(n,e);return t.subscribe.bind(t)}class ZT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");eS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=xd),o.error===void 0&&(o.error=xd),o.complete===void 0&&(o.complete=xd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){return n&&n._delegate?n._delegate:n}class $s{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new VT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rS(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:nS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nS(n){return n===Ls?void 0:n}function rS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const sS={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},oS=Me.INFO,aS={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},lS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=aS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bf{constructor(e){this.name=e,this._logLevel=oS,this._logHandler=lS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const uS=(n,e)=>e.some(t=>n instanceof t);let hy,dy;function cS(){return hy||(hy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hS(){return dy||(dy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c_=new WeakMap,Jd=new WeakMap,h_=new WeakMap,Od=new WeakMap,$f=new WeakMap;function dS(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(Yi(n.result)),o()},h=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&c_.set(t,n)}).catch(()=>{}),$f.set(e,n),e}function fS(n){if(Jd.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});Jd.set(n,e)}let Zd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Jd.get(n);if(e==="objectStoreNames")return n.objectStoreNames||h_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pS(n){Zd=n(Zd)}function mS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(bd(this),e,...t);return h_.set(i,e.sort?e.sort():[e]),Yi(i)}:hS().includes(n)?function(...e){return n.apply(bd(this),e),Yi(c_.get(this))}:function(...e){return Yi(n.apply(bd(this),e))}}function gS(n){return typeof n=="function"?mS(n):(n instanceof IDBTransaction&&fS(n),uS(n,cS())?new Proxy(n,Zd):n)}function Yi(n){if(n instanceof IDBRequest)return dS(n);if(Od.has(n))return Od.get(n);const e=gS(n);return e!==n&&(Od.set(n,e),$f.set(e,n)),e}const bd=n=>$f.get(n);function yS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(n,e),f=Yi(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Yi(h.result),g.oldVersion,g.newVersion,Yi(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const vS=["get","getKey","getAll","getAllKeys","count"],_S=["put","add","delete","clear"],Vd=new Map;function fy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Vd.get(e))return Vd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=_S.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||vS.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Vd.set(e,l),l}pS(n=>({...n,get:(e,t,i)=>fy(e,t)||n.get(e,t,i),has:(e,t)=>!!fy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ES(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function ES(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ef="@firebase/app",py="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new Bf("@firebase/app"),TS="@firebase/app-compat",SS="@firebase/analytics-compat",IS="@firebase/analytics",AS="@firebase/app-check-compat",CS="@firebase/app-check",kS="@firebase/auth",PS="@firebase/auth-compat",RS="@firebase/database",DS="@firebase/data-connect",NS="@firebase/database-compat",xS="@firebase/functions",OS="@firebase/functions-compat",bS="@firebase/installations",VS="@firebase/installations-compat",LS="@firebase/messaging",MS="@firebase/messaging-compat",FS="@firebase/performance",jS="@firebase/performance-compat",US="@firebase/remote-config",zS="@firebase/remote-config-compat",BS="@firebase/storage",$S="@firebase/storage-compat",WS="@firebase/firestore",HS="@firebase/ai",qS="@firebase/firestore-compat",GS="firebase",KS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="[DEFAULT]",YS={[ef]:"fire-core",[TS]:"fire-core-compat",[IS]:"fire-analytics",[SS]:"fire-analytics-compat",[CS]:"fire-app-check",[AS]:"fire-app-check-compat",[kS]:"fire-auth",[PS]:"fire-auth-compat",[RS]:"fire-rtdb",[DS]:"fire-data-connect",[NS]:"fire-rtdb-compat",[xS]:"fire-fn",[OS]:"fire-fn-compat",[bS]:"fire-iid",[VS]:"fire-iid-compat",[LS]:"fire-fcm",[MS]:"fire-fcm-compat",[FS]:"fire-perf",[jS]:"fire-perf-compat",[US]:"fire-rc",[zS]:"fire-rc-compat",[BS]:"fire-gcs",[$S]:"fire-gcs-compat",[WS]:"fire-fst",[qS]:"fire-fst-compat",[HS]:"fire-vertex","fire-js":"fire-js",[GS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new Map,QS=new Map,nf=new Map;function my(n,e){try{n.container.addComponent(e)}catch(t){ci.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Go(n){const e=n.name;if(nf.has(e))return ci.debug(`There were multiple attempts to register component ${e}.`),!1;nf.set(e,n);for(const t of lc.values())my(t,n);for(const t of QS.values())my(t,n);return!0}function Wf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new Tl("app","Firebase",XS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new $s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=KS;function d_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:tf,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Qi.create("bad-app-name",{appName:String(o)});if(t||(t=o_()),!t)throw Qi.create("no-options");const l=lc.get(o);if(l){if(Bs(t,l.options)&&Bs(i,l.config))return l;throw Qi.create("duplicate-app",{appName:o})}const h=new iS(o);for(const g of nf.values())h.addComponent(g);const f=new JS(t,i,h);return lc.set(o,f),f}function f_(n=tf){const e=lc.get(n);if(!e&&n===tf&&o_())return d_();if(!e)throw Qi.create("no-app",{appName:n});return e}function Xi(n,e,t){let i=YS[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ci.warn(h.join(" "));return}Go(new $s(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="firebase-heartbeat-database",eI=1,cl="firebase-heartbeat-store";let Ld=null;function p_(){return Ld||(Ld=yS(ZS,eI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qi.create("idb-open",{originalErrorMessage:n.message})})),Ld}async function tI(n){try{const t=(await p_()).transaction(cl),i=await t.objectStore(cl).get(m_(n));return await t.done,i}catch(e){if(e instanceof pi)ci.warn(e.message);else{const t=Qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ci.warn(t.message)}}}async function gy(n,e){try{const i=(await p_()).transaction(cl,"readwrite");await i.objectStore(cl).put(e,m_(n)),await i.done}catch(t){if(t instanceof pi)ci.warn(t.message);else{const i=Qi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ci.warn(i.message)}}}function m_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=1024,rI=30;class iI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=yy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>rI){const h=aI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ci.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=yy(),{heartbeatsToSend:i,unsentEntries:o}=sI(this._heartbeatsCache.heartbeats),l=ac(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ci.warn(t),""}}}function yy(){return new Date().toISOString().substring(0,10)}function sI(n,e=nI){const t=[];let i=n.slice();for(const o of n){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),vy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),vy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class oI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qT()?GT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return gy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return gy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function vy(n){return ac(JSON.stringify({version:2,heartbeats:n})).length}function aI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(n){Go(new $s("platform-logger",e=>new wS(e),"PRIVATE")),Go(new $s("heartbeat",e=>new iI(e),"PRIVATE")),Xi(ef,py,n),Xi(ef,py,"esm2020"),Xi("fire-js","")}lI("");var _y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ji,g_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function P(){}P.prototype=S.prototype,R.F=S.prototype,R.prototype=new P,R.prototype.constructor=R,R.D=function(N,x,V){for(var C=Array(arguments.length-2),be=2;be<arguments.length;be++)C[be-2]=arguments[be];return S.prototype[x].apply(N,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,S,P){P||(P=0);const N=Array(16);if(typeof S=="string")for(var x=0;x<16;++x)N[x]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(x=0;x<16;++x)N[x]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=R.g[0],P=R.g[1],x=R.g[2];let V=R.g[3],C;C=S+(V^P&(x^V))+N[0]+3614090360&4294967295,S=P+(C<<7&4294967295|C>>>25),C=V+(x^S&(P^x))+N[1]+3905402710&4294967295,V=S+(C<<12&4294967295|C>>>20),C=x+(P^V&(S^P))+N[2]+606105819&4294967295,x=V+(C<<17&4294967295|C>>>15),C=P+(S^x&(V^S))+N[3]+3250441966&4294967295,P=x+(C<<22&4294967295|C>>>10),C=S+(V^P&(x^V))+N[4]+4118548399&4294967295,S=P+(C<<7&4294967295|C>>>25),C=V+(x^S&(P^x))+N[5]+1200080426&4294967295,V=S+(C<<12&4294967295|C>>>20),C=x+(P^V&(S^P))+N[6]+2821735955&4294967295,x=V+(C<<17&4294967295|C>>>15),C=P+(S^x&(V^S))+N[7]+4249261313&4294967295,P=x+(C<<22&4294967295|C>>>10),C=S+(V^P&(x^V))+N[8]+1770035416&4294967295,S=P+(C<<7&4294967295|C>>>25),C=V+(x^S&(P^x))+N[9]+2336552879&4294967295,V=S+(C<<12&4294967295|C>>>20),C=x+(P^V&(S^P))+N[10]+4294925233&4294967295,x=V+(C<<17&4294967295|C>>>15),C=P+(S^x&(V^S))+N[11]+2304563134&4294967295,P=x+(C<<22&4294967295|C>>>10),C=S+(V^P&(x^V))+N[12]+1804603682&4294967295,S=P+(C<<7&4294967295|C>>>25),C=V+(x^S&(P^x))+N[13]+4254626195&4294967295,V=S+(C<<12&4294967295|C>>>20),C=x+(P^V&(S^P))+N[14]+2792965006&4294967295,x=V+(C<<17&4294967295|C>>>15),C=P+(S^x&(V^S))+N[15]+1236535329&4294967295,P=x+(C<<22&4294967295|C>>>10),C=S+(x^V&(P^x))+N[1]+4129170786&4294967295,S=P+(C<<5&4294967295|C>>>27),C=V+(P^x&(S^P))+N[6]+3225465664&4294967295,V=S+(C<<9&4294967295|C>>>23),C=x+(S^P&(V^S))+N[11]+643717713&4294967295,x=V+(C<<14&4294967295|C>>>18),C=P+(V^S&(x^V))+N[0]+3921069994&4294967295,P=x+(C<<20&4294967295|C>>>12),C=S+(x^V&(P^x))+N[5]+3593408605&4294967295,S=P+(C<<5&4294967295|C>>>27),C=V+(P^x&(S^P))+N[10]+38016083&4294967295,V=S+(C<<9&4294967295|C>>>23),C=x+(S^P&(V^S))+N[15]+3634488961&4294967295,x=V+(C<<14&4294967295|C>>>18),C=P+(V^S&(x^V))+N[4]+3889429448&4294967295,P=x+(C<<20&4294967295|C>>>12),C=S+(x^V&(P^x))+N[9]+568446438&4294967295,S=P+(C<<5&4294967295|C>>>27),C=V+(P^x&(S^P))+N[14]+3275163606&4294967295,V=S+(C<<9&4294967295|C>>>23),C=x+(S^P&(V^S))+N[3]+4107603335&4294967295,x=V+(C<<14&4294967295|C>>>18),C=P+(V^S&(x^V))+N[8]+1163531501&4294967295,P=x+(C<<20&4294967295|C>>>12),C=S+(x^V&(P^x))+N[13]+2850285829&4294967295,S=P+(C<<5&4294967295|C>>>27),C=V+(P^x&(S^P))+N[2]+4243563512&4294967295,V=S+(C<<9&4294967295|C>>>23),C=x+(S^P&(V^S))+N[7]+1735328473&4294967295,x=V+(C<<14&4294967295|C>>>18),C=P+(V^S&(x^V))+N[12]+2368359562&4294967295,P=x+(C<<20&4294967295|C>>>12),C=S+(P^x^V)+N[5]+4294588738&4294967295,S=P+(C<<4&4294967295|C>>>28),C=V+(S^P^x)+N[8]+2272392833&4294967295,V=S+(C<<11&4294967295|C>>>21),C=x+(V^S^P)+N[11]+1839030562&4294967295,x=V+(C<<16&4294967295|C>>>16),C=P+(x^V^S)+N[14]+4259657740&4294967295,P=x+(C<<23&4294967295|C>>>9),C=S+(P^x^V)+N[1]+2763975236&4294967295,S=P+(C<<4&4294967295|C>>>28),C=V+(S^P^x)+N[4]+1272893353&4294967295,V=S+(C<<11&4294967295|C>>>21),C=x+(V^S^P)+N[7]+4139469664&4294967295,x=V+(C<<16&4294967295|C>>>16),C=P+(x^V^S)+N[10]+3200236656&4294967295,P=x+(C<<23&4294967295|C>>>9),C=S+(P^x^V)+N[13]+681279174&4294967295,S=P+(C<<4&4294967295|C>>>28),C=V+(S^P^x)+N[0]+3936430074&4294967295,V=S+(C<<11&4294967295|C>>>21),C=x+(V^S^P)+N[3]+3572445317&4294967295,x=V+(C<<16&4294967295|C>>>16),C=P+(x^V^S)+N[6]+76029189&4294967295,P=x+(C<<23&4294967295|C>>>9),C=S+(P^x^V)+N[9]+3654602809&4294967295,S=P+(C<<4&4294967295|C>>>28),C=V+(S^P^x)+N[12]+3873151461&4294967295,V=S+(C<<11&4294967295|C>>>21),C=x+(V^S^P)+N[15]+530742520&4294967295,x=V+(C<<16&4294967295|C>>>16),C=P+(x^V^S)+N[2]+3299628645&4294967295,P=x+(C<<23&4294967295|C>>>9),C=S+(x^(P|~V))+N[0]+4096336452&4294967295,S=P+(C<<6&4294967295|C>>>26),C=V+(P^(S|~x))+N[7]+1126891415&4294967295,V=S+(C<<10&4294967295|C>>>22),C=x+(S^(V|~P))+N[14]+2878612391&4294967295,x=V+(C<<15&4294967295|C>>>17),C=P+(V^(x|~S))+N[5]+4237533241&4294967295,P=x+(C<<21&4294967295|C>>>11),C=S+(x^(P|~V))+N[12]+1700485571&4294967295,S=P+(C<<6&4294967295|C>>>26),C=V+(P^(S|~x))+N[3]+2399980690&4294967295,V=S+(C<<10&4294967295|C>>>22),C=x+(S^(V|~P))+N[10]+4293915773&4294967295,x=V+(C<<15&4294967295|C>>>17),C=P+(V^(x|~S))+N[1]+2240044497&4294967295,P=x+(C<<21&4294967295|C>>>11),C=S+(x^(P|~V))+N[8]+1873313359&4294967295,S=P+(C<<6&4294967295|C>>>26),C=V+(P^(S|~x))+N[15]+4264355552&4294967295,V=S+(C<<10&4294967295|C>>>22),C=x+(S^(V|~P))+N[6]+2734768916&4294967295,x=V+(C<<15&4294967295|C>>>17),C=P+(V^(x|~S))+N[13]+1309151649&4294967295,P=x+(C<<21&4294967295|C>>>11),C=S+(x^(P|~V))+N[4]+4149444226&4294967295,S=P+(C<<6&4294967295|C>>>26),C=V+(P^(S|~x))+N[11]+3174756917&4294967295,V=S+(C<<10&4294967295|C>>>22),C=x+(S^(V|~P))+N[2]+718787259&4294967295,x=V+(C<<15&4294967295|C>>>17),C=P+(V^(x|~S))+N[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,R.g[2]=R.g[2]+x&4294967295,R.g[3]=R.g[3]+V&4294967295}i.prototype.v=function(R,S){S===void 0&&(S=R.length);const P=S-this.blockSize,N=this.C;let x=this.h,V=0;for(;V<S;){if(x==0)for(;V<=P;)o(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<S;)if(N[x++]=R.charCodeAt(V++),x==this.blockSize){o(this,N),x=0;break}}else for(;V<S;)if(N[x++]=R[V++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=S},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;S=this.o*8;for(var P=R.length-8;P<R.length;++P)R[P]=S&255,S/=256;for(this.v(R),R=Array(16),S=0,P=0;P<4;++P)for(let N=0;N<32;N+=8)R[S++]=this.g[P]>>>N&255;return R};function l(R,S){var P=f;return Object.prototype.hasOwnProperty.call(P,R)?P[R]:P[R]=S(R)}function h(R,S){this.h=S;const P=[];let N=!0;for(let x=R.length-1;x>=0;x--){const V=R[x]|0;N&&V==S||(P[x]=V,N=!1)}this.g=P}var f={};function g(R){return-128<=R&&R<128?l(R,function(S){return new h([S|0],S<0?-1:0)}):new h([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return U(y(-R));const S=[];let P=1;for(let N=0;R>=P;N++)S[N]=R/P|0,P*=4294967296;return new h(S,0)}function w(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return U(w(R.substring(1),S));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=y(Math.pow(S,8));let N=E;for(let V=0;V<R.length;V+=8){var x=Math.min(8,R.length-V);const C=parseInt(R.substring(V,V+x),S);x<8?(x=y(Math.pow(S,x)),N=N.j(x).add(y(C))):(N=N.j(P),N=N.add(y(C)))}return N}var E=g(0),I=g(1),D=g(16777216);n=h.prototype,n.m=function(){if(W(this))return-U(this).m();let R=0,S=1;for(let P=0;P<this.g.length;P++){const N=this.i(P);R+=(N>=0?N:4294967296+N)*S,S*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if($(this))return"0";if(W(this))return"-"+U(this).toString(R);const S=y(Math.pow(R,6));var P=this;let N="";for(;;){const x=ie(P,S).g;P=X(P,x.j(S));let V=((P.g.length>0?P.g[0]:P.h)>>>0).toString(R);if(P=x,$(P))return V+N;for(;V.length<6;)V="0"+V;N=V+N}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function $(R){if(R.h!=0)return!1;for(let S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function W(R){return R.h==-1}n.l=function(R){return R=X(this,R),W(R)?-1:$(R)?0:1};function U(R){const S=R.g.length,P=[];for(let N=0;N<S;N++)P[N]=~R.g[N];return new h(P,~R.h).add(I)}n.abs=function(){return W(this)?U(this):this},n.add=function(R){const S=Math.max(this.g.length,R.g.length),P=[];let N=0;for(let x=0;x<=S;x++){let V=N+(this.i(x)&65535)+(R.i(x)&65535),C=(V>>>16)+(this.i(x)>>>16)+(R.i(x)>>>16);N=C>>>16,V&=65535,C&=65535,P[x]=C<<16|V}return new h(P,P[P.length-1]&-2147483648?-1:0)};function X(R,S){return R.add(U(S))}n.j=function(R){if($(this)||$(R))return E;if(W(this))return W(R)?U(this).j(U(R)):U(U(this).j(R));if(W(R))return U(this.j(U(R)));if(this.l(D)<0&&R.l(D)<0)return y(this.m()*R.m());const S=this.g.length+R.g.length,P=[];for(var N=0;N<2*S;N++)P[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<R.g.length;x++){const V=this.i(N)>>>16,C=this.i(N)&65535,be=R.i(x)>>>16,Le=R.i(x)&65535;P[2*N+2*x]+=C*Le,re(P,2*N+2*x),P[2*N+2*x+1]+=V*Le,re(P,2*N+2*x+1),P[2*N+2*x+1]+=C*be,re(P,2*N+2*x+1),P[2*N+2*x+2]+=V*be,re(P,2*N+2*x+2)}for(R=0;R<S;R++)P[R]=P[2*R+1]<<16|P[2*R];for(R=S;R<2*S;R++)P[R]=0;return new h(P,0)};function re(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function de(R,S){this.g=R,this.h=S}function ie(R,S){if($(S))throw Error("division by zero");if($(R))return new de(E,E);if(W(R))return S=ie(U(R),S),new de(U(S.g),U(S.h));if(W(S))return S=ie(R,U(S)),new de(U(S.g),S.h);if(R.g.length>30){if(W(R)||W(S))throw Error("slowDivide_ only works with positive integers.");for(var P=I,N=S;N.l(R)<=0;)P=Oe(P),N=Oe(N);var x=ve(P,1),V=ve(N,1);for(N=ve(N,2),P=ve(P,2);!$(N);){var C=V.add(N);C.l(R)<=0&&(x=x.add(P),V=C),N=ve(N,1),P=ve(P,1)}return S=X(R,x.j(S)),new de(x,S)}for(x=E;R.l(S)>=0;){for(P=Math.max(1,Math.floor(R.m()/S.m())),N=Math.ceil(Math.log(P)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),V=y(P),C=V.j(S);W(C)||C.l(R)>0;)P-=N,V=y(P),C=V.j(S);$(V)&&(V=I),x=x.add(V),R=X(R,C)}return new de(x,R)}n.B=function(R){return ie(this,R).h},n.and=function(R){const S=Math.max(this.g.length,R.g.length),P=[];for(let N=0;N<S;N++)P[N]=this.i(N)&R.i(N);return new h(P,this.h&R.h)},n.or=function(R){const S=Math.max(this.g.length,R.g.length),P=[];for(let N=0;N<S;N++)P[N]=this.i(N)|R.i(N);return new h(P,this.h|R.h)},n.xor=function(R){const S=Math.max(this.g.length,R.g.length),P=[];for(let N=0;N<S;N++)P[N]=this.i(N)^R.i(N);return new h(P,this.h^R.h)};function Oe(R){const S=R.g.length+1,P=[];for(let N=0;N<S;N++)P[N]=R.i(N)<<1|R.i(N-1)>>>31;return new h(P,R.h)}function ve(R,S){const P=S>>5;S%=32;const N=R.g.length-P,x=[];for(let V=0;V<N;V++)x[V]=S>0?R.i(V+P)>>>S|R.i(V+P+1)<<32-S:R.i(V+P);return new h(x,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,g_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,Ji=h}).apply(typeof _y<"u"?_y:typeof self<"u"?self:typeof window<"u"?window:{});var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var y_,Za,v_,Yu,rf,__,w_,E_;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ju=="object"&&ju];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in v))break e;v=v[F]}u=u[u.length-1],T=v[u],m=m(T),m!=T&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var v=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&v.push([T,m[T]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){return y=g,y.apply(null,arguments)}function w(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(T,F,B){for(var ne=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)ne[Re-2]=arguments[Re];return m.prototype[F].apply(T,ne)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function D(u){const m=u.length;if(m>0){const v=Array(m);for(let T=0;T<m;T++)v[T]=u[T];return v}return[]}function $(u,m){for(let T=1;T<arguments.length;T++){const F=arguments[T];var v=typeof F;if(v=v!="object"?v:F?Array.isArray(F)?"array":v:"null",v=="array"||v=="object"&&typeof F.length=="number"){v=u.length||0;const B=F.length||0;u.length=v+B;for(let ne=0;ne<B;ne++)u[v+ne]=F[ne]}else u.push(F)}}class W{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function U(u){h.setTimeout(()=>{throw u},0)}function X(){var u=R;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class re{constructor(){this.h=this.g=null}add(m,v){const T=de.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var de=new W(()=>new ie,u=>u.reset());class ie{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Oe,ve=!1,R=new re,S=()=>{const u=Promise.resolve(void 0);Oe=()=>{u.then(P)}};function P(){for(var u;u=X();){try{u.h.call(u.g)}catch(v){U(v)}var m=de;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}ve=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,m),h.removeEventListener("test",v,m)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function be(u,m){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(be,x),be.prototype.init=function(u,m){const v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),We=0;function ze(u,m,v,T,F){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=F,this.key=++We,this.da=this.fa=!1}function te(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ue(u,m,v){for(const T in u)m.call(v,u[T],T,u)}function ee(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function L(u){const m={};for(const v in u)m[v]=u[v];return m}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(u,m){let v,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(v in T)u[v]=T[v];for(let B=0;B<H.length;B++)v=H[B],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function Te(u){this.src=u,this.g={},this.h=0}Te.prototype.add=function(u,m,v,T,F){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const ne=J(u,m,T,F);return ne>-1?(m=u[ne],v||(m.fa=!1)):(m=new ze(m,this.src,B,!!T,F),m.fa=v,u.push(m)),m};function Ne(u,m){const v=m.type;if(v in u.g){var T=u.g[v],F=Array.prototype.indexOf.call(T,m,void 0),B;(B=F>=0)&&Array.prototype.splice.call(T,F,1),B&&(te(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function J(u,m,v,T){for(let F=0;F<u.length;++F){const B=u[F];if(!B.da&&B.listener==m&&B.capture==!!v&&B.ha==T)return F}return-1}var ge="closure_lm_"+(Math.random()*1e6|0),he={};function le(u,m,v,T,F){if(Array.isArray(m)){for(let B=0;B<m.length;B++)le(u,m[B],v,T,F);return null}return v=gi(v),u&&u[Le]?u.J(m,v,f(T)?!!T.capture:!1,F):Ae(u,m,v,!1,T,F)}function Ae(u,m,v,T,F,B){if(!m)throw Error("Invalid event type");const ne=f(F)?!!F.capture:!!F;let Re=kt(u);if(Re||(u[ge]=Re=new Te(u)),v=Re.add(m,v,T,ne,B),v.proxy)return v;if(T=gt(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)V||(F=ne),F===void 0&&(F=!1),u.addEventListener(m.toString(),T,F);else if(u.attachEvent)u.attachEvent(Qe(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function gt(){function u(v){return m.call(u.src,u.listener,v)}const m=ar;return u}function bt(u,m,v,T,F){if(Array.isArray(m))for(var B=0;B<m.length;B++)bt(u,m[B],v,T,F);else T=f(T)?!!T.capture:!!T,v=gi(v),u&&u[Le]?(u=u.i,B=String(m).toString(),B in u.g&&(m=u.g[B],v=J(m,v,T,F),v>-1&&(te(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[B],u.h--)))):u&&(u=kt(u))&&(m=u.g[m.toString()],u=-1,m&&(u=J(m,v,T,F)),(v=u>-1?m[u]:null)&&Ct(v))}function Ct(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Le])Ne(m.i,u);else{var v=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(v,T,u.capture):m.detachEvent?m.detachEvent(Qe(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=kt(m))?(Ne(v,u),v.h==0&&(v.src=null,m[ge]=null)):te(u)}}}function Qe(u){return u in he?he[u]:he[u]="on"+u}function ar(u,m){if(u.da)u=!0;else{m=new be(m,this);const v=u.listener,T=u.ha||u.src;u.fa&&Ct(u),u=v.call(T,m)}return u}function kt(u){return u=u[ge],u instanceof Te?u:null}var On="__closure_events_fn_"+(Math.random()*1e9>>>0);function gi(u){return typeof u=="function"?u:(u[On]||(u[On]=function(m){return u.handleEvent(m)}),u[On])}function ut(){N.call(this),this.i=new Te(this),this.M=this,this.G=null}E(ut,N),ut.prototype[Le]=!0,ut.prototype.removeEventListener=function(u,m,v,T){bt(this,u,m,v,T)};function ct(u,m){var v,T=u.G;if(T)for(v=[];T;T=T.G)v.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new x(m,u);else if(m instanceof x)m.target=m.target||u;else{var F=m;m=new x(T,u),Se(m,F)}F=!0;let B,ne;if(v)for(ne=v.length-1;ne>=0;ne--)B=m.g=v[ne],F=vn(B,T,!0,m)&&F;if(B=m.g=u,F=vn(B,T,!0,m)&&F,F=vn(B,T,!1,m)&&F,v)for(ne=0;ne<v.length;ne++)B=m.g=v[ne],F=vn(B,T,!1,m)&&F}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let T=0;T<v.length;T++)te(v[T]);delete u.g[m],u.h--}}this.G=null},ut.prototype.J=function(u,m,v,T){return this.i.add(String(u),m,!1,v,T)},ut.prototype.K=function(u,m,v,T){return this.i.add(String(u),m,!0,v,T)};function vn(u,m,v,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let F=!0;for(let B=0;B<m.length;++B){const ne=m[B];if(ne&&!ne.da&&ne.capture==v){const Re=ne.listener,vt=ne.ha||ne.src;ne.fa&&Ne(u.i,ne),F=Re.call(vt,T)!==!1&&F}}return F&&!T.defaultPrevented}function us(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function yi(u){u.g=us(()=>{u.g=null,u.i&&(u.i=!1,yi(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Zs extends N{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:yi(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lr(u){N.call(this),this.h=u,this.g={}}E(lr,N);var cs=[];function vi(u){ue(u.g,function(m,v){this.g.hasOwnProperty(v)&&Ct(m)},u),u.g={}}lr.prototype.N=function(){lr.Z.N.call(this),vi(this)},lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ur=h.JSON.stringify,_i=h.JSON.parse,cr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Gn(){}function eo(){}var _n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ur(){x.call(this,"d")}E(Ur,x);function hs(){x.call(this,"c")}E(hs,x);var an={},zr=null;function bn(){return zr=zr||new ut}an.Ia="serverreachability";function wi(u){x.call(this,an.Ia,u)}E(wi,x);function Vn(u){const m=bn();ct(m,new wi(m))}an.STAT_EVENT="statevent";function Kn(u,m){x.call(this,an.STAT_EVENT,u),this.stat=m}E(Kn,x);function tt(u){const m=bn();ct(m,new Kn(m,u))}an.Ja="timingevent";function Et(u,m){x.call(this,an.Ja,u),this.size=m}E(Et,x);function ht(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function wn(){this.g=!0}wn.prototype.ua=function(){this.g=!1};function Xe(u,m,v,T,F,B){u.info(function(){if(u.g)if(B){var ne="",Re=B.split("&");for(let Ye=0;Ye<Re.length;Ye++){var vt=Re[Ye].split("=");if(vt.length>1){const Tt=vt[0];vt=vt[1];const Pn=Tt.split("_");ne=Pn.length>=2&&Pn[1]=="type"?ne+(Tt+"="+vt+"&"):ne+(Tt+"=redacted&")}}}else ne=null;else ne=B;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+m+`
`+v+`
`+ne})}function rn(u,m,v,T,F,B,ne){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+m+`
`+v+`
`+B+" "+ne})}function Ln(u,m,v,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+hr(u,v)+(T?" "+T:"")})}function Ei(u,m){u.info(function(){return"TIMEOUT: "+m})}wn.prototype.info=function(){};function hr(u,m){if(!u.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var v=B[u];if(!(v.length<2)){var T=v[1];if(Array.isArray(T)&&!(T.length<1)){var F=T[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ne=1;ne<T.length;ne++)T[ne]=""}}}}return ur(B)}catch{return m}}var Yn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Mn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Br;function En(){}E(En,Gn),En.prototype.g=function(){return new XMLHttpRequest},Br=new En;function ln(u){return encodeURIComponent(String(u))}function dr(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function un(u,m,v,T){this.j=u,this.i=m,this.l=v,this.S=T||1,this.V=new lr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ti}function Ti(){this.i=null,this.g="",this.h=!1}var ds={},fs={};function Tn(u,m,v){u.M=1,u.A=qr(Fn(m)),u.u=v,u.R=!0,xe(u,null)}function xe(u,m){u.F=Date.now(),Pt(u),u.B=Fn(u.A);var v=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),va(v.i,"t",T),u.C=0,v=u.j.L,u.h=new Ti,u.g=Bl(u.j,v?m:null,!u.u),u.P>0&&(u.O=new Zs(y(u.Y,u,u.g),u.P)),m=u.V,v=u.g,T=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(cs[0]=F.toString()),F=cs);for(let B=0;B<F.length;B++){const ne=le(v,F[B],T||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Vn(),Xe(u.i,u.v,u.B,u.l,u.S,u.u)}un.prototype.ba=function(u){u=u.target;const m=this.O;m&&_r(u)==3?m.j():this.Y(u)},un.prototype.Y=function(u){try{if(u==this.g)e:{const Re=_r(this.g),vt=this.g.ya(),Ye=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Ul(this.g)))){this.K||Re!=4||vt==7||(vt==8||Ye<=0?Vn(3):Vn(2)),Si(this);var m=this.g.ca();this.X=m;var v=Je(this);if(this.o=m==200,rn(this.i,this.v,this.B,this.l,this.S,Re,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,F=this.g;if((T=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(T)){var B=T;break t}}B=null}if(u=B)Ln(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rt(this,u);else{this.o=!1,this.m=3,tt(12),Hr(this),Wr(this);break e}}if(this.R){u=!0;let Tt;for(;!this.K&&this.C<v.length;)if(Tt=Gt(this,v),Tt==fs){Re==4&&(this.m=4,tt(14),u=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==ds){this.m=4,tt(15),Ln(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Ln(this.i,this.l,Tt,null),rt(this,Tt);if(nt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||v.length!=0||this.h.h||(this.m=1,tt(16),u=!1),this.o=this.o&&u,!u)Ln(this.i,this.l,v,"[Invalid Chunked Response]"),Hr(this),Wr(this);else if(v.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ts(ne),ne.P=!0,tt(11))}}else Ln(this.i,this.l,v,null),rt(this,v);Re==4&&Hr(this),this.o&&!this.K&&(Re==4?co(this.j,this):(this.o=!1,Pt(this)))}else wa(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,tt(12)):(this.m=0,tt(13)),Hr(this),Wr(this)}}}catch{}finally{}};function Je(u){if(!nt(u))return u.g.la();const m=Ul(u.g);if(m==="")return"";let v="";const T=m.length,F=_r(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Hr(u),Wr(u),"";u.h.i=new h.TextDecoder}for(let B=0;B<T;B++)u.h.h=!0,v+=u.h.i.decode(m[B],{stream:!(F&&B==T-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function nt(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Gt(u,m){var v=u.C,T=m.indexOf(`
`,v);return T==-1?fs:(v=Number(m.substring(v,T)),isNaN(v)?ds:(T+=1,T+v>m.length?fs:(m=m.slice(T,T+v),u.C=T+v,m)))}un.prototype.cancel=function(){this.K=!0,Hr(this)};function Pt(u){u.T=Date.now()+u.H,$r(u,u.H)}function $r(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ht(y(u.aa,u),m)}function Si(u){u.D&&(h.clearTimeout(u.D),u.D=null)}un.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ei(this.i,this.B),this.M!=2&&(Vn(),tt(17)),Hr(this),this.m=2,Wr(this)):$r(this,this.T-u)};function Wr(u){u.j.I==0||u.K||co(u.j,u)}function Hr(u){Si(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,vi(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function rt(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||ha(v.h,u))){if(!u.L&&ha(v.h,u)&&v.I==3){try{var T=v.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)uo(v),Cn(v);else break e;Tr(v),tt(18)}}else v.xa=F[1],0<v.xa-v.K&&F[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ht(y(v.Va,v),6e3));ps(v.h)<=1&&v.ta&&(v.ta=void 0)}else kn(v,11)}else if((u.L||v.g==u)&&uo(v),!C(m))for(F=v.Ba.g.parse(m),m=0;m<F.length;m++){let Ye=F[m];const Tt=Ye[0];if(!(Tt<=v.K))if(v.K=Tt,Ye=Ye[1],v.I==2)if(Ye[0]=="c"){v.M=Ye[1],v.ba=Ye[2];const Pn=Ye[3];Pn!=null&&(v.ka=Pn,v.j.info("VER="+v.ka));const Xr=Ye[4];Xr!=null&&(v.za=Xr,v.j.info("SVER="+v.za));const Sr=Ye[5];Sr!=null&&typeof Sr=="number"&&Sr>0&&(T=1.5*Sr,v.O=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const Ir=u.g;if(Ir){const po=Ir.g?Ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(po){var B=T.h;B.g||po.indexOf("spdy")==-1&&po.indexOf("quic")==-1&&po.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(no(B,B.h),B.h=null))}if(T.G){const Sa=Ir.g?Ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Sa&&(T.wa=Sa,Ge(T.J,T.G,Sa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),T=v;var ne=u;if(T.na=Ta(T,T.L?T.ba:null,T.W),ne.L){ms(T.h,ne);var Re=ne,vt=T.O;vt&&(Re.H=vt),Re.D&&(Si(Re),Pt(Re)),T.g=ne}else Kt(T);v.i.length>0&&Qr(v)}else Ye[0]!="stop"&&Ye[0]!="close"||kn(v,7);else v.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?kn(v,7):ao(v):Ye[0]!="noop"&&v.l&&v.l.qa(Ye),v.A=0)}}Vn(4)}catch{}}var rh=class{constructor(u,m){this.g=u,this.map=m}};function to(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ca(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ps(u){return u.h?1:u.g?u.g.size:0}function ha(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function no(u,m){u.g?u.g.add(m):u.h=m}function ms(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}to.prototype.cancel=function(){if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Sn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return D(u.i)}var Ll=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function In(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const T=u[v].indexOf("=");let F,B=null;T>=0?(F=u[v].substring(0,T),B=u[v].substring(T+1)):F=u[v],m(F,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function fr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof fr?(this.l=u.l,gs(this,u.j),this.o=u.o,this.g=u.g,pr(this,u.u),this.h=u.h,Ii(this,_a(u.i)),this.m=u.m):u&&(m=String(u).match(Ll))?(this.l=!1,gs(this,m[1]||"",!0),this.o=ys(m[2]||""),this.g=ys(m[3]||"",!0),pr(this,m[4]),this.h=ys(m[5]||"",!0),Ii(this,m[6]||"",!0),this.m=ys(m[7]||"")):(this.l=!1,this.i=new Ue(null,this.l))}fr.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(vs(m,fa,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(vs(m,fa,!0),"@"),u.push(ln(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(vs(v,v.charAt(0)=="/"?_s:pa,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",vs(v,ma)),u.join("")},fr.prototype.resolve=function(u){const m=Fn(this);let v=!!u.j;v?gs(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var T=u.h;if(v)pr(m,u.u);else if(v=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var F=m.h.lastIndexOf("/");F!=-1&&(T=m.h.slice(0,F+1)+T)}if(F=T,F==".."||F==".")T="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){T=F.lastIndexOf("/",0)==0,F=F.split("/");const B=[];for(let ne=0;ne<F.length;){const Re=F[ne++];Re=="."?T&&ne==F.length&&B.push(""):Re==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),T&&ne==F.length&&B.push("")):(B.push(Re),T=!0)}T=B.join("/")}else T=F}return v?m.h=T:v=u.i.toString()!=="",v?Ii(m,_a(u.i)):v=!!u.m,v&&(m.m=u.m),m};function Fn(u){return new fr(u)}function gs(u,m,v){u.j=v?ys(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function pr(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Ii(u,m,v){m instanceof Ue?(u.i=m,io(u.i,u.l)):(v||(m=vs(m,ih)),u.i=new Ue(m,u.l))}function Ge(u,m,v){u.i.set(m,v)}function qr(u){return Ge(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ys(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function vs(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,da),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function da(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var fa=/[#\/\?@]/g,pa=/[#\?:]/g,_s=/[#\?]/g,ih=/[#\?@]/g,ma=/#/g;function Ue(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function mr(u){u.g||(u.g=new Map,u.h=0,u.i&&In(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Ue.prototype,n.add=function(u,m){mr(this),this.i=null,u=gr(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function ga(u,m){mr(u),m=gr(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function ro(u,m){return mr(u),m=gr(u,m),u.g.has(m)}n.forEach=function(u,m){mr(this),this.g.forEach(function(v,T){v.forEach(function(F){u.call(m,F,T,this)},this)},this)};function ya(u,m){mr(u);let v=[];if(typeof m=="string")ro(u,m)&&(v=v.concat(u.g.get(gr(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}n.set=function(u,m){return mr(this),this.i=null,u=gr(this,u),ro(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=ya(this,u),u.length>0?String(u[0]):m):m};function va(u,m,v){ga(u,m),v.length>0&&(u.i=null,u.g.set(gr(u,m),D(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var v=m[T];const F=ln(v);v=ya(this,v);for(let B=0;B<v.length;B++){let ne=F;v[B]!==""&&(ne+="="+ln(v[B])),u.push(ne)}}return this.i=u.join("&")};function _a(u){const m=new Ue;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function gr(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function io(u,m){m&&!u.j&&(mr(u),u.i=null,u.g.forEach(function(v,T){const F=T.toLowerCase();T!=F&&(ga(this,T),va(this,F,v))},u)),u.j=m}function yr(u,m){const v=new wn;if(h.Image){const T=new Image;T.onload=w(jt,v,"TestLoadImage: loaded",!0,m,T),T.onerror=w(jt,v,"TestLoadImage: error",!1,m,T),T.onabort=w(jt,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=w(jt,v,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function vr(u,m){const v=new wn,T=new AbortController,F=setTimeout(()=>{T.abort(),jt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(B=>{clearTimeout(F),B.ok?jt(v,"TestPingServer: ok",!0,m):jt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),jt(v,"TestPingServer: error",!1,m)})}function jt(u,m,v,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(v)}catch{}}function ws(){this.g=new cr}function Gr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Gr,Gn),Gr.prototype.g=function(){return new An(this.i,this.h)};function An(u,m){ut.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(An,ut),n=An.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Qn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ml(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ml(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ai(this):Qn(this),this.readyState==3&&Ml(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Ai(this))},n.Na=function(u){this.g&&(this.response=u,Ai(this))},n.ga=function(){this.g&&Ai(this)};function Ai(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Qn(u)}n.setRequestHeader=function(u,m){this.A.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Qn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(An.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Fl(u){let m="";return ue(u,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function so(u,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Fl(v),typeof u=="string"?v!=null&&ln(v):Ge(u,m,v))}function Ze(u){ut.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Ze,ut);var jl=/^https?$/i,sh=["POST","PUT"];n=Ze.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Br.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){Ci(this,B);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)v.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())v.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(sh,m,void 0)>=0)||T||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ne]of v)this.g.setRequestHeader(B,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){Ci(this,B)}};function Ci(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ki(u),Yr(u)}function ki(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ct(this,"complete"),ct(this,"abort"),Yr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),Ze.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Kr(this):this.Xa())},n.Xa=function(){Kr(this)};function Kr(u){if(u.h&&typeof l<"u"){if(u.v&&_r(u)==4)setTimeout(u.Ca.bind(u),0);else if(ct(u,"readystatechange"),_r(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=B===0){let ne=String(u.D).match(Ll)[1]||null;!ne&&h.self&&h.self.location&&(ne=h.self.location.protocol.slice(0,-1)),T=!jl.test(ne?ne.toLowerCase():"")}v=T}if(v)ct(u,"complete"),ct(u,"success");else{u.o=6;try{var F=_r(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",ki(u)}}finally{Yr(u)}}}}function Yr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||ct(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function _r(u){return u.g?u.g.readyState:0}n.ca=function(){try{return _r(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),_i(m)}};function Ul(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function wa(u){const m={};u=(u.g&&_r(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(C(u[T]))continue;var v=dr(u[T]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=m[F]||[];m[F]=B,B.push(v)}ee(m,function(T){return T.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function oo(u){this.za=0,this.i=[],this.j=new wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wr("baseRetryDelayMs",5e3,u),this.Za=wr("retryDelaySeedMs",1e4,u),this.Ta=wr("forwardChannelMaxRetries",2,u),this.va=wr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new to(u&&u.concurrentRequestLimit),this.Ba=new ws,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=oo.prototype,n.ka=8,n.I=1,n.connect=function(u,m,v,T){tt(0),this.W=u,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.J=Ta(this,null,this.W),Qr(this)};function ao(u){if(lo(u),u.I==3){var m=u.V++,v=Fn(u.J);if(Ge(v,"SID",u.M),Ge(v,"RID",m),Ge(v,"TYPE","terminate"),Er(u,v),m=new un(u,u.j,m),m.M=2,m.A=qr(Fn(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=m.A,v=!0),v||(m.g=Bl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Pt(m)}Ss(u)}function Cn(u){u.g&&(Ts(u),u.g.cancel(),u.g=null)}function lo(u){Cn(u),u.v&&(h.clearTimeout(u.v),u.v=null),uo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Qr(u){if(!ca(u.h)&&!u.m){u.m=!0;var m=u.Ea;Oe||S(),ve||(Oe(),ve=!0),R.add(m,u),u.D=0}}function zl(u,m){return ps(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ht(y(u.Ea,u,m),ho(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new un(this,this.j,u);let B=this.o;if(this.U&&(B?(B=L(B),Se(B,this.U)):B=this.U),this.u!==null||this.R||(F.J=B,B=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Ea(this,F,m),v=Fn(this.J),Ge(v,"RID",u),Ge(v,"CVER",22),this.G&&Ge(v,"X-HTTP-Session-Id",this.G),Er(this,v),B&&(this.R?m="headers="+ln(Fl(B))+"&"+m:this.u&&so(v,this.u,B)),no(this.h,F),this.Ra&&Ge(v,"TYPE","init"),this.S?(Ge(v,"$req",m),Ge(v,"SID","null"),F.U=!0,Tn(F,v,null)):Tn(F,v,m),this.I=2}}else this.I==3&&(u?Es(this,u):this.i.length==0||ca(this.h)||Es(this))};function Es(u,m){var v;m?v=m.l:v=u.V++;const T=Fn(u.J);Ge(T,"SID",u.M),Ge(T,"RID",v),Ge(T,"AID",u.K),Er(u,T),u.u&&u.o&&so(T,u.u,u.o),v=new un(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Ea(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),no(u.h,v),Tn(v,T,m)}function Er(u,m){u.H&&ue(u.H,function(v,T){Ge(m,T,v)}),u.l&&ue({},function(v,T){Ge(m,T,v)})}function Ea(u,m,v){v=Math.min(u.i.length,v);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var F=u.i;let Re=-1;for(;;){const vt=["count="+v];Re==-1?v>0?(Re=F[0].g,vt.push("ofs="+Re)):Re=0:vt.push("ofs="+Re);let Ye=!0;for(let Tt=0;Tt<v;Tt++){var B=F[Tt].g;const Pn=F[Tt].map;if(B-=Re,B<0)Re=Math.max(0,F[Tt].g-100),Ye=!1;else try{B="req"+B+"_"||"";try{var ne=Pn instanceof Map?Pn:Object.entries(Pn);for(const[Xr,Sr]of ne){let Ir=Sr;f(Sr)&&(Ir=ur(Sr)),vt.push(B+Xr+"="+encodeURIComponent(Ir))}}catch(Xr){throw vt.push(B+"type="+encodeURIComponent("_badmap")),Xr}}catch{T&&T(Pn)}}if(Ye){ne=vt.join("&");break e}}ne=void 0}return u=u.i.splice(0,v),m.G=u,ne}function Kt(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Oe||S(),ve||(Oe(),ve=!0),R.add(m,u),u.A=0}}function Tr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ht(y(u.Da,u),ho(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Pi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ht(y(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,tt(10),Cn(this),Pi(this))};function Ts(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Pi(u){u.g=new un(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Fn(u.na);Ge(m,"RID","rpc"),Ge(m,"SID",u.M),Ge(m,"AID",u.K),Ge(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ge(m,"TO",u.ia),Ge(m,"TYPE","xmlhttp"),Er(u,m),u.u&&u.o&&so(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=qr(Fn(m)),v.u=null,v.R=!0,xe(v,u)}n.Va=function(){this.C!=null&&(this.C=null,Cn(this),Tr(this),tt(19))};function uo(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function co(u,m){var v=null;if(u.g==m){uo(u),Ts(u),u.g=null;var T=2}else if(ha(u.h,m))v=m.G,ms(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var F=u.D;T=bn(),ct(T,new Et(T,v)),Qr(u)}else Kt(u);else if(F=m.m,F==3||F==0&&m.X>0||!(T==1&&zl(u,m)||T==2&&Tr(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),F){case 1:kn(u,5);break;case 4:kn(u,10);break;case 3:kn(u,6);break;default:kn(u,2)}}}function ho(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function kn(u,m){if(u.j.info("Error code "+m),m==2){var v=y(u.bb,u),T=u.Ua;const F=!T;T=new fr(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||gs(T,"https"),qr(T),F?yr(T.toString(),v):vr(T.toString(),v)}else tt(2);u.I=0,u.l&&u.l.pa(m),Ss(u),lo(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function Ss(u){if(u.I=0,u.ja=[],u.l){const m=Sn(u.h);(m.length!=0||u.i.length!=0)&&($(u.ja,m),$(u.ja,u.i),u.h.i.length=0,D(u.i),u.i.length=0),u.l.oa()}}function Ta(u,m,v){var T=v instanceof fr?Fn(v):new fr(v);if(T.g!="")m&&(T.g=m+"."+T.g),pr(T,T.u);else{var F=h.location;T=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;const B=new fr(null);T&&gs(B,T),m&&(B.g=m),F&&pr(B,F),v&&(B.h=v),T=B}return v=u.G,m=u.wa,v&&m&&Ge(T,v,m),Ge(T,"VER",u.ka),Er(u,T),T}function Bl(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Ze(new Gr({ab:v})):new Ze(u.ma),m.Fa(u.L),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $l(){}n=$l.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function fo(){}fo.prototype.g=function(u,m){return new Ut(u,m)};function Ut(u,m){ut.call(this),this.g=new oo(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Ri(this)}E(Ut,ut),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){ao(this.g)},Ut.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=ur(u),u=v);m.i.push(new rh(m.Ya++,u)),m.I==3&&Qr(m)},Ut.prototype.N=function(){this.g.l=null,delete this.j,ao(this.g),delete this.g,Ut.Z.N.call(this)};function Wl(u){Ur.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(Wl,Ur);function Hl(){hs.call(this),this.status=1}E(Hl,hs);function Ri(u){this.g=u}E(Ri,$l),Ri.prototype.ra=function(){ct(this.g,"a")},Ri.prototype.qa=function(u){ct(this.g,new Wl(u))},Ri.prototype.pa=function(u){ct(this.g,new Hl)},Ri.prototype.oa=function(){ct(this.g,"b")},fo.prototype.createWebChannel=fo.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,E_=function(){return new fo},w_=function(){return bn()},__=an,rf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yn.NO_ERROR=0,Yn.TIMEOUT=8,Yn.HTTP_ERROR=6,Yu=Yn,Mn.COMPLETE="complete",v_=Mn,eo.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",ut.prototype.listen=ut.prototype.J,Za=eo,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,y_=Ze}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});const wy="@firebase/firestore",Ey="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Bf("@firebase/firestore");function Vo(){return Ws.logLevel}function ae(n,...e){if(Ws.logLevel<=Me.DEBUG){const t=e.map(Hf);Ws.debug(`Firestore (${ra}): ${n}`,...t)}}function hi(n,...e){if(Ws.logLevel<=Me.ERROR){const t=e.map(Hf);Ws.error(`Firestore (${ra}): ${n}`,...t)}}function Ko(n,...e){if(Ws.logLevel<=Me.WARN){const t=e.map(Hf);Ws.warn(`Firestore (${ra}): ${n}`,...t)}}function Hf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,T_(n,i,t)}function T_(n,e,t){let i=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw hi(i),new Error(i)}function Ke(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||T_(e,o,i)}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(en.UNAUTHENTICATED)))}shutdown(){}}class cI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class hI{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Zi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Zi,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Zi)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string",31837,{l:i}),new S_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class dI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new dI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ty{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const i=l=>{l.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ae("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ty(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ty(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=mI(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Fe(n,e){return n<e?-1:n>e?1:0}function sf(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),l=e.charAt(i);if(o!==l)return Md(o)===Md(l)?Fe(o,l):Md(o)?1:-1}return Fe(n.length,e.length)}const gI=55296,yI=57343;function Md(n){const e=n.charCodeAt(0);return e>=gI&&e<=yI}function Yo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="__name__";class Nr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Nr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Nr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Fe(e.length,t.length)}static compareSegments(e,t){const i=Nr.isNumericId(e),o=Nr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Nr.extractNumericId(e).compare(Nr.extractNumericId(t)):sf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ji.fromString(e.substring(4,e.length-2))}}class pt extends Nr{construct(e,t,i){return new pt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const vI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Nr{construct(e,t,i){return new Wt(e,t,i)}static isValidIdentifier(e){return vI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sy}static keyField(){return new Wt([Sy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ye(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ye(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ye(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(t)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(pt.fromString(e))}static fromName(e){return new Ee(pt.fromString(e).popFirst(5))}static empty(){return new Ee(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(n,e,t){if(!t)throw new ye(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wI(n,e,t,i){if(e===!0&&i===!0)throw new ye(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Iy(n){if(!Ee.isDocumentKey(n))throw new ye(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function I_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function es(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gf(n);throw new ye(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n,e){const t={typeString:n};return e&&(t.value=e),t}function Il(n,e){if(!I_(n))throw new ye(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const h=n[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ye(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=-62135596800,Cy=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Cy);return new ot(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ay)throw new ye(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cy}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Il(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ay;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:At("string",ot._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new ot(0,0))}static max(){return new Pe(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=-1;function EI(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(i===1e9?new ot(t+1,0):new ot(t,i));return new ts(o,Ee.empty(),e)}function TI(n){return new ts(n.readTime,n.key,hl)}class ts{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ts(Pe.min(),Ee.empty(),hl)}static max(){return new ts(Pe.max(),Ee.empty(),hl)}}function SI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==II)throw n;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):q.reject(t)}static resolve(e){return new q(((t,i)=>{t(e)}))}static reject(e){return new q(((t,i)=>{i(e)}))}static waitFor(e){return new q(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>i(g)))})),h=!0,l===o&&t()}))}static or(e){let t=q.resolve(!1);for(const i of e)t=t.next((o=>o?q.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new q(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((w=>{h[y]=w,++f,f===l&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new q(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function CI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=-1;function Oc(n){return n==null}function uc(n){return n===0&&1/n==-1/0}function kI(n){return typeof n=="number"&&Number.isInteger(n)&&!uc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="";function PI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ky(e)),e=RI(n.get(t),e);return ky(e)}function RI(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case A_:t+="";break;default:t+=l}}return t}function ky(n){return n+A_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function C_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uu(this.root,e,this.comparator,!0)}}class Uu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??$t.RED,this.left=o??$t.EMPTY,this.right=l??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new $t(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return $t.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ry(this.data.getIterator())}getIteratorFrom(e){return new Ry(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class Ry{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new ir([])}unionWith(e){let t=new Ot(Wt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ir(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new k_("Invalid base64 string: "+l):l}})(e);return new qt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const DI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=DI.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rs(n){return typeof n=="string"?qt.fromBase64String(n):qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="server_timestamp",R_="__type__",D_="__previous_value__",N_="__local_write_time__";function Yf(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[R_])==null?void 0:i.stringValue)===P_}function bc(n){const e=n.mapValue.fields[D_];return Yf(e)?bc(e):e}function dl(n){const e=ns(n.mapValue.fields[N_].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,t,i,o,l,h,f,g,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w}}const cc="(default)";class fl{constructor(e,t){this.projectId=e,this.database=t||cc}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database===cc}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="__type__",xI="__max__",zu={mapValue:{}},O_="__vector__",hc="value";function is(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yf(n)?4:bI(n)?9007199254740991:OI(n)?10:11:Ie(28295,{value:n})}function Mr(n,e){if(n===e)return!0;const t=is(n);if(t!==is(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dl(n).isEqual(dl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=ns(o.timestampValue),f=ns(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return rs(o.bytesValue).isEqual(rs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return wt(o.geoPointValue.latitude)===wt(l.geoPointValue.latitude)&&wt(o.geoPointValue.longitude)===wt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return wt(o.integerValue)===wt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=wt(o.doubleValue),f=wt(l.doubleValue);return h===f?uc(h)===uc(f):isNaN(h)&&isNaN(f)}return!1})(n,e);case 9:return Yo(n.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Py(h)!==Py(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!Mr(h[g],f[g])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function pl(n,e){return(n.values||[]).find((t=>Mr(t,e)))!==void 0}function Qo(n,e){if(n===e)return 0;const t=is(n),i=is(e);if(t!==i)return Fe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=wt(l.integerValue||l.doubleValue),g=wt(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return Dy(n.timestampValue,e.timestampValue);case 4:return Dy(dl(n),dl(e));case 5:return sf(n.stringValue,e.stringValue);case 6:return(function(l,h){const f=rs(l),g=rs(h);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const w=Fe(f[y],g[y]);if(w!==0)return w}return Fe(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Fe(wt(l.latitude),wt(h.latitude));return f!==0?f:Fe(wt(l.longitude),wt(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ny(n.arrayValue,e.arrayValue);case 10:return(function(l,h){var I,D,$,W;const f=l.fields||{},g=h.fields||{},y=(I=f[hc])==null?void 0:I.arrayValue,w=(D=g[hc])==null?void 0:D.arrayValue,E=Fe((($=y==null?void 0:y.values)==null?void 0:$.length)||0,((W=w==null?void 0:w.values)==null?void 0:W.length)||0);return E!==0?E:Ny(y,w)})(n.mapValue,e.mapValue);case 11:return(function(l,h){if(l===zu.mapValue&&h===zu.mapValue)return 0;if(l===zu.mapValue)return 1;if(h===zu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let E=0;E<g.length&&E<w.length;++E){const I=sf(g[E],w[E]);if(I!==0)return I;const D=Qo(f[g[E]],y[w[E]]);if(D!==0)return D}return Fe(g.length,w.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function Dy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=ns(n),i=ns(e),o=Fe(t.seconds,i.seconds);return o!==0?o:Fe(t.nanos,i.nanos)}function Ny(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Qo(t[o],i[o]);if(l)return l}return Fe(t.length,i.length)}function Xo(n){return of(n)}function of(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ns(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return rs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=of(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${of(t.fields[h])}`;return o+"}"})(n.mapValue):Ie(61005,{value:n})}function Qu(n){switch(is(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bc(n);return e?16+Qu(e):16;case 5:return 2*n.stringValue.length;case 6:return rs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Qu(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Gs(i.fields,((l,h)=>{o+=l.length+Qu(h)})),o})(n.mapValue);default:throw Ie(13486,{value:n})}}function af(n){return!!n&&"integerValue"in n}function Qf(n){return!!n&&"arrayValue"in n}function xy(n){return!!n&&"nullValue"in n}function Oy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xu(n){return!!n&&"mapValue"in n}function OI(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[x_])==null?void 0:i.stringValue)===O_}function sl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Gs(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=sl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sl(n.arrayValue.values[t]);return e}return{...n}}function bI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Xu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sl(t)}setAll(e){let t=Wt.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=sl(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Xu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Xu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Gs(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Hn(sl(this.value))}}function b_(n){const e=[];return Gs(n.fields,((t,i)=>{const o=new Wt([t]);if(Xu(i)){const l=b_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new tn(e,0,Pe.min(),Pe.min(),Pe.min(),Hn.empty(),0)}static newFoundDocument(e,t,i,o){return new tn(e,1,t,Pe.min(),i,o,0)}static newNoDocument(e,t){return new tn(e,2,t,Pe.min(),Pe.min(),Hn.empty(),0)}static newUnknownDocument(e,t){return new tn(e,3,t,Pe.min(),Pe.min(),Hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t){this.position=e,this.inclusive=t}}function by(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(l.field.isKeyField()?i=Ee.comparator(Ee.fromName(h.referenceValue),t.key):i=Qo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Vy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function VI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{}class Nt extends V_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new MI(e,t,i):t==="array-contains"?new UI(e,i):t==="in"?new zI(e,i):t==="not-in"?new BI(e,i):t==="array-contains-any"?new $I(e,i):new Nt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new FI(e,i):new jI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Qo(t,this.value)):t!==null&&is(this.value)===is(t)&&this.matchesComparison(Qo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fr extends V_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fr(e,t)}matches(e){return L_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function L_(n){return n.op==="and"}function M_(n){return LI(n)&&L_(n)}function LI(n){for(const e of n.filters)if(e instanceof Fr)return!1;return!0}function lf(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+Xo(n.value);if(M_(n))return n.filters.map((e=>lf(e))).join(",");{const e=n.filters.map((t=>lf(t))).join(",");return`${n.op}(${e})`}}function F_(n,e){return n instanceof Nt?(function(i,o){return o instanceof Nt&&i.op===o.op&&i.field.isEqual(o.field)&&Mr(i.value,o.value)})(n,e):n instanceof Fr?(function(i,o){return o instanceof Fr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&F_(h,o.filters[f])),!0):!1})(n,e):void Ie(19439)}function j_(n){return n instanceof Nt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xo(t.value)}`})(n):n instanceof Fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(j_).join(" ,")+"}"})(n):"Filter"}class MI extends Nt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class FI extends Nt{constructor(e,t){super(e,"in",t),this.keys=U_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jI extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=U_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function U_(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class UI extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qf(t)&&pl(t.arrayValue,this.value)}}class zI extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pl(this.value.arrayValue,t)}}class BI extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pl(this.value.arrayValue,t)}}class $I extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>pl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function Ly(n,e=null,t=[],i=[],o=null,l=null,h=null){return new WI(n,e,t,i,o,l,h)}function Xf(n){const e=De(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>lf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Oc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Xo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Xo(i))).join(",")),e.Te=t}return e.Te}function Jf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!F_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Vy(n.startAt,e.startAt)&&Vy(n.endAt,e.endAt)}function uf(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HI(n,e,t,i,o,l,h,f){return new Vc(n,e,t,i,o,l,h,f)}function Lc(n){return new Vc(n)}function My(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qI(n){return n.collectionGroup!==null}function ol(n){const e=De(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Ot(Wt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new fc(l,i))})),t.has(Wt.keyField().canonicalString())||e.Ie.push(new fc(Wt.keyField(),i))}return e.Ie}function xr(n){const e=De(n);return e.Ee||(e.Ee=GI(e,ol(n))),e.Ee}function GI(n,e){if(n.limitType==="F")return Ly(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new fc(o.field,l)}));const t=n.endAt?new dc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new dc(n.startAt.position,n.startAt.inclusive):null;return Ly(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function cf(n,e,t){return new Vc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mc(n,e){return Jf(xr(n),xr(e))&&n.limitType===e.limitType}function z_(n){return`${Xf(xr(n))}|lt:${n.limitType}`}function Lo(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>j_(o))).join(", ")}]`),Oc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Xo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Xo(o))).join(",")),`Target(${i})`})(xr(n))}; limitType=${n.limitType})`}function Fc(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ee.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of ol(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,g){const y=by(h,f,g);return h.inclusive?y<=0:y<0})(i.startAt,ol(i),o)||i.endAt&&!(function(h,f,g){const y=by(h,f,g);return h.inclusive?y>=0:y>0})(i.endAt,ol(i),o))})(n,e)}function KI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function B_(n){return(e,t)=>{let i=!1;for(const o of ol(n)){const l=YI(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function YI(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?Qo(g,y):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return C_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=new mt(Ee.comparator);function di(){return QI}const $_=new mt(Ee.comparator);function el(...n){let e=$_;for(const t of n)e=e.insert(t.key,t);return e}function W_(n){let e=$_;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ms(){return al()}function H_(){return al()}function al(){return new Ks((n=>n.toString()),((n,e)=>n.isEqual(e)))}const XI=new mt(Ee.comparator),JI=new Ot(Ee.comparator);function je(...n){let e=JI;for(const t of n)e=e.add(t);return e}const ZI=new Ot(Fe);function e1(){return ZI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uc(e)?"-0":e}}function q_(n){return{integerValue:""+n}}function t1(n,e){return kI(e)?q_(e):Zf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(){this._=void 0}}function n1(n,e,t){return n instanceof pc?(function(o,l){const h={fields:{[R_]:{stringValue:P_},[N_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Yf(l)&&(l=bc(l)),l&&(h.fields[D_]=l),{mapValue:h}})(t,e):n instanceof ml?K_(n,e):n instanceof gl?Y_(n,e):(function(o,l){const h=G_(o,l),f=Fy(h)+Fy(o.Ae);return af(h)&&af(o.Ae)?q_(f):Zf(o.serializer,f)})(n,e)}function r1(n,e,t){return n instanceof ml?K_(n,e):n instanceof gl?Y_(n,e):t}function G_(n,e){return n instanceof mc?(function(i){return af(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class pc extends jc{}class ml extends jc{constructor(e){super(),this.elements=e}}function K_(n,e){const t=Q_(e);for(const i of n.elements)t.some((o=>Mr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class gl extends jc{constructor(e){super(),this.elements=e}}function Y_(n,e){let t=Q_(e);for(const i of n.elements)t=t.filter((o=>!Mr(o,i)));return{arrayValue:{values:t}}}class mc extends jc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Fy(n){return wt(n.integerValue||n.doubleValue)}function Q_(n){return Qf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function i1(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof ml&&o instanceof ml||i instanceof gl&&o instanceof gl?Yo(i.elements,o.elements,Mr):i instanceof mc&&o instanceof mc?Mr(i.Ae,o.Ae):i instanceof pc&&o instanceof pc})(n.transform,e.transform)}class s1{constructor(e,t){this.version=e,this.transformResults=t}}class ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Uc{}function X_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Z_(n.key,ui.none()):new Al(n.key,n.data,ui.none());{const t=n.data,i=Hn.empty();let o=new Ot(Wt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Ys(n.key,i,new ir(o.toArray()),ui.none())}}function o1(n,e,t){n instanceof Al?(function(o,l,h){const f=o.value.clone(),g=Uy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Ys?(function(o,l,h){if(!Ju(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Uy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(J_(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(n,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function ll(n,e,t,i){return n instanceof Al?(function(l,h,f,g){if(!Ju(l.precondition,h))return f;const y=l.value.clone(),w=zy(l.fieldTransforms,g,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ys?(function(l,h,f,g){if(!Ju(l.precondition,h))return f;const y=zy(l.fieldTransforms,g,h),w=h.data;return w.setAll(J_(l)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,h,f){return Ju(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(n,e,t)}function a1(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=G_(i.transform,o||null);l!=null&&(t===null&&(t=Hn.empty()),t.set(i.field,l))}return t||null}function jy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Yo(i,o,((l,h)=>i1(l,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Al extends Uc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ys extends Uc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function J_(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Uy(n,e,t){const i=new Map;Ke(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,r1(h,f,t[o]))}return i}function zy(n,e,t){const i=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);i.set(o.field,n1(l,h,e))}return i}class Z_ extends Uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l1 extends Uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&o1(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ll(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ll(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=H_();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=X_(h,f);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Pe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,((t,i)=>jy(t,i)))&&Yo(this.baseMutations,e.baseMutations,((t,i)=>jy(t,i)))}}class ep{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ke(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return XI})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new ep(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Be;function d1(n){switch(n){case K.OK:return Ie(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function ew(n){if(n===void 0)return hi("GRPC error has no .code"),K.UNKNOWN;switch(n){case It.OK:return K.OK;case It.CANCELLED:return K.CANCELLED;case It.UNKNOWN:return K.UNKNOWN;case It.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case It.INTERNAL:return K.INTERNAL;case It.UNAVAILABLE:return K.UNAVAILABLE;case It.UNAUTHENTICATED:return K.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case It.NOT_FOUND:return K.NOT_FOUND;case It.ALREADY_EXISTS:return K.ALREADY_EXISTS;case It.PERMISSION_DENIED:return K.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case It.ABORTED:return K.ABORTED;case It.OUT_OF_RANGE:return K.OUT_OF_RANGE;case It.UNIMPLEMENTED:return K.UNIMPLEMENTED;case It.DATA_LOSS:return K.DATA_LOSS;default:return Ie(39323,{code:n})}}(Be=It||(It={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new Ji([4294967295,4294967295],0);function By(n){const e=f1().encode(n),t=new g_;return t.update(e),new Uint8Array(t.digest())}function $y(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ji([t,i],0),new Ji([o,l],0)]}class tp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new tl(`Invalid padding: ${t}`);if(i<0)throw new tl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new tl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ji.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ji.fromNumber(i)));return o.compare(p1)===1&&(o=new Ji([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=By(e),[i,o]=$y(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new tp(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=By(e),[i,o]=$y(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Cl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new zc(Pe.min(),o,new mt(Fe),di(),je())}}class Cl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Cl(i,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class tw{constructor(e,t){this.targetId=e,this.Ce=t}}class nw{constructor(e,t,i=qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Wy{constructor(){this.ve=0,this.Fe=Hy(),this.Me=qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),i=je();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie(38017,{changeType:l})}})),new Cl(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Hy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class m1{constructor(e){this.Ge=e,this.ze=new Map,this.je=di(),this.Je=Bu(),this.He=Bu(),this.Ye=new mt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(uf(l))if(i===0){const h=new Ee(l.path);this.et(t,h,tn.newNoDocument(h,Pe.min()))}else Ke(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=rs(i).toUint8Array()}catch(g){if(g instanceof k_)return Ko("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new tp(h,o,l)}catch(g){return Ko(g instanceof tl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&uf(f.target)){const g=new Ee(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,tn.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=je();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new zc(e,t,this.Ye,this.je,i);return this.je=di(),this.Je=Bu(),this.He=Bu(),this.Ye=new mt(Fe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Wy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ot(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ot(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Bu(){return new mt(Ee.comparator)}function Hy(){return new mt(Ee.comparator)}const g1={asc:"ASCENDING",desc:"DESCENDING"},y1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v1={and:"AND",or:"OR"};class _1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hf(n,e){return n.useProto3Json||Oc(e)?e:{value:e}}function gc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function w1(n,e){return gc(n,e.toTimestamp())}function Or(n){return Ke(!!n,49232),Pe.fromTimestamp((function(t){const i=ns(t);return new ot(i.seconds,i.nanos)})(n))}function np(n,e){return df(n,e).canonicalString()}function df(n,e){const t=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function iw(n){const e=pt.fromString(n);return Ke(uw(e),10190,{key:e.toString()}),e}function ff(n,e){return np(n.databaseId,e.path)}function Fd(n,e){const t=iw(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(ow(t))}function sw(n,e){return np(n.databaseId,e)}function E1(n){const e=iw(n);return e.length===4?pt.emptyPath():ow(e)}function pf(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ow(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function qy(n,e,t){return{name:ff(n,e),fields:t.value.mapValue.fields}}function T1(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,w){return y.useProto3Json?(Ke(w===void 0||typeof w=="string",58123),qt.fromBase64String(w||"")):(Ke(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),qt.fromUint8Array(w||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const w=y.code===void 0?K.UNKNOWN:ew(y.code);return new ye(w,y.message||"")})(h);t=new nw(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Fd(n,i.document.name),l=Or(i.document.updateTime),h=i.document.createTime?Or(i.document.createTime):Pe.min(),f=new Hn({mapValue:{fields:i.document.fields}}),g=tn.newFoundDocument(o,l,h,f),y=i.targetIds||[],w=i.removedTargetIds||[];t=new Zu(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Fd(n,i.document),l=i.readTime?Or(i.readTime):Pe.min(),h=tn.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Zu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Fd(n,i.document),l=i.removedTargetIds||[];t=new Zu([],l,o,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new h1(o,l),f=i.targetId;t=new tw(f,h)}}return t}function S1(n,e){let t;if(e instanceof Al)t={update:qy(n,e.key,e.value)};else if(e instanceof Z_)t={delete:ff(n,e.key)};else if(e instanceof Ys)t={update:qy(n,e.key,e.data),updateMask:x1(e.fieldMask)};else{if(!(e instanceof l1))return Ie(16599,{Vt:e.type});t={verify:ff(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof pc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ml)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof gl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof mc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw Ie(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:w1(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie(27497)})(n,e.precondition)),t}function I1(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map((t=>(function(o,l){let h=o.updateTime?Or(o.updateTime):Or(l);return h.isEqual(Pe.min())&&(h=Or(l)),new s1(h,o.transformResults||[])})(t,e)))):[]}function A1(n,e){return{documents:[sw(n,e.path)]}}function C1(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=sw(n,o);const l=(function(y){if(y.length!==0)return lw(Fr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((w=>(function(I){return{field:Mo(I.field),direction:R1(I.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=hf(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function k1(n){let e=E1(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ke(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(E){const I=aw(E);return I instanceof Fr&&M_(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((I=>(function($){return new fc(Fo($.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let I;return I=typeof E=="object"?E.value:E,Oc(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(E){const I=!!E.before,D=E.values||[];return new dc(D,I)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const I=!E.before,D=E.values||[];return new dc(D,I)})(t.endAt)),HI(e,o,h,l,f,"F",g,y)}function P1(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Fo(t.unaryFilter.field);return Nt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Fo(t.unaryFilter.field);return Nt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Fo(t.unaryFilter.field);return Nt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Fo(t.unaryFilter.field);return Nt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Nt.create(Fo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Fr.create(t.compositeFilter.filters.map((i=>aw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function R1(n){return g1[n]}function D1(n){return y1[n]}function N1(n){return v1[n]}function Mo(n){return{fieldPath:n.canonicalString()}}function Fo(n){return Wt.fromServerFormat(n.fieldPath)}function lw(n){return n instanceof Nt?(function(t){if(t.op==="=="){if(Oy(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NAN"}};if(xy(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Oy(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NAN"}};if(xy(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(t.field),op:D1(t.op),value:t.value}}})(n):n instanceof Fr?(function(t){const i=t.getFilters().map((o=>lw(o)));return i.length===1?i[0]:{compositeFilter:{op:N1(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function x1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function uw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t,i,o,l=Pe.min(),h=Pe.min(),f=qt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.yt=e}}function b1(n){const e=k1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this.Cn=new L1}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(ts.min())}updateCollectionGroup(e,t,i){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class L1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ot(pt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ot(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cw=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(cw,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Jo(0)}static cr(){return new Jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="LruGarbageCollector",M1=1048576;function Yy([n,e],[t,i]){const o=Fe(n,t);return o===0?Fe(e,i):o}class F1{constructor(e){this.Ir=e,this.buffer=new Ot(Yy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Yy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class j1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(Ky,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){sa(t)?ae(Ky,"Ignoring IndexedDB error during garbage collection: ",t):await ia(t)}await this.Vr(3e5)}))}}class U1{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return q.resolve(xc.ce);const i=new F1(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Gy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,f,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,f=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),Vo()<=Me.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function z1(n,e){return new U1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.changes=new Ks((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ll(i.mutation,o,ir.empty(),ot.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,je()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=je()){const o=Ms();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=el();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Ms();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,je())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=di();const h=al(),f=(function(){return al()})();return t.forEach(((g,y)=>{const w=i.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof Ys)?l=l.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),ll(w.mutation,y,w.mutation.getFieldMask(),ot.now())):h.set(y.key,ir.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,w)=>h.set(y,w))),t.forEach(((y,w)=>f.set(y,new $1(w,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=al();let o=new mt(((h,f)=>h-f)),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let w=i.get(g)||ir.empty();w=f.applyToLocalView(y,w),i.set(g,w);const E=(o.get(f.batchId)||je()).add(g);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,w=g.value,E=H_();w.forEach((I=>{if(!l.has(I)){const D=X_(t.get(I),i.get(I));D!==null&&E.set(I,D),l=l.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return q.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):q.resolve(Ms());let f=hl,g=l;return h.next((y=>q.forEach(y,((w,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(w)?q.resolve():this.remoteDocumentCache.getEntry(e,w).next((I=>{g=g.insert(w,I)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,je()))).next((w=>({batchId:f,changes:W_(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=el();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=el();return this.indexManager.getCollectionParents(e,l).next((f=>q.forEach(f,(g=>{const y=(function(E,I){return new Vc(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((w=>{w.forEach(((E,I)=>{h=h.insert(E,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((g,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,tn.newInvalidDocument(w)))}));let f=el();return h.forEach(((g,y)=>{const w=l.get(g);w!==void 0&&ll(w.mutation,y,ir.empty(),ot.now()),Fc(t,y)&&(f=f.insert(g,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Or(o.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:b1(o.bundledQuery),readTime:Or(o.readTime)}})(t)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.overlays=new mt(Ee.comparator),this.qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ms();return q.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),q.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),q.resolve()}getOverlaysForCollection(e,t,i){const o=Ms(),l=t.length+1,h=new Ee(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return q.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new mt(((y,w)=>y-w));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let w=l.get(y.largestBatchId);w===null&&(w=Ms(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const f=Ms(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>f.set(y,w))),!(f.size()>=o)););return q.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new c1(t,i));let l=this.qr.get(t);l===void 0&&(l=je(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this.Qr=new Ot(Ft.$r),this.Ur=new Ot(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ft(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ee(new pt([])),i=new Ft(t,e),o=new Ft(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new pt([])),i=new Ft(t,e),o=new Ft(t,e+1);let l=je();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Ft(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ot(Ft.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new u1(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new Ft(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return q.resolve(h)}lookupMutationBatch(e,t){return q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Kf:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ft(t,0),o=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ot(Fe);return t.forEach((o=>{const l=new Ft(o,0),h=new Ft(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{i=i.add(f.Yr)}))})),q.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Ee.isDocumentKey(l)||(l=l.child(""));const h=new Ft(new Ee(l),0);let f=new Ot(Fe);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),q.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return q.forEach(t.mutations,(o=>{const l=new Ft(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ft(t,0),o=this.Zr.firstAfterOrEqual(i);return q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.ri=e,this.docs=(function(){return new mt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return q.resolve(i?i.document.mutableCopy():tn.newInvalidDocument(t))}getEntries(e,t){let i=di();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():tn.newInvalidDocument(o))})),q.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=di();const h=t.path,f=new Ee(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||SI(TI(w),i)<=0||(o.has(w.key)||Fc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return q.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ie(9500)}ii(e,t){return q.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Q1(this)}getSize(e){return q.resolve(this.size)}}class Q1 extends B1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.persistence=e,this.si=new Ks((t=>Xf(t)),Jf),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new rp,this.targetCount=0,this.ai=Jo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Jo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Pr(t),q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),q.waitFor(l).next((()=>o))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return q.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),q.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return q.resolve(i)}containsKey(e,t){return q.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,t){this.ui={},this.overlays={},this.ci=new xc(0),this.li=!1,this.li=!0,this.hi=new G1,this.referenceDelegate=e(this),this.Pi=new X1(this),this.indexManager=new V1,this.remoteDocumentCache=(function(o){return new Y1(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new O1(t),this.Ii=new H1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new q1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new K1(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ae("MemoryPersistence","Starting transaction:",e);const o=new J1(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return q.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class J1 extends AI{constructor(e){super(),this.currentSequenceNumber=e}}class ip{constructor(e){this.persistence=e,this.Ri=new rp,this.Vi=null}static mi(e){return new ip(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),q.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,(i=>{const o=Ee.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return q.or([()=>q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class yc{constructor(e,t){this.persistence=e,this.pi=new Ks((i=>PI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=z1(this,t)}static mi(e,t){return new yc(e,t)}Ei(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return q.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?q.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(i++,l.removeEntry(h,Pe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),q.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qu(e.data.value)),t}br(e,t,i){return q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return q.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=je(),o=je();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new sp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return HT()?8:CI(nn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new Z1;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Vo()<=Me.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Vo()<=Me.DEBUG&&ae("QueryEngine","Query:",Lo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Vo()<=Me.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(t))):q.resolve())}ys(e,t){if(My(t))return q.resolve(null);let i=xr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=cf(t,null,"F"),i=xr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=je(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,cf(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,i,o){return My(t)||o.isEqual(Pe.min())?q.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?q.resolve(null):(Vo()<=Me.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Lo(t)),this.vs(e,h,t,EI(o,hl)).next((f=>f)))}))}Ds(e,t){let i=new Ot(B_(e));return t.forEach(((o,l)=>{Fc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return Vo()<=Me.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Lo(t)),this.ps.getDocumentsMatchingQuery(e,t,ts.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="LocalStore",tA=3e8;class nA{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new mt(Fe),this.xs=new Ks((l=>Xf(l)),Jf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function rA(n,e,t,i){return new nA(n,e,t,i)}async function dw(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let g=je();for(const y of o){h.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of l){f.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function iA(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,w){const E=y.batch,I=E.keys();let D=q.resolve();return I.forEach(($=>{D=D.next((()=>w.getEntry(g,$))).next((W=>{const U=y.docVersions.get($);Ke(U!==null,48541),W.version.compareTo(U)<0&&(E.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),w.addEntry(W)))}))})),D.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=je();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function fw(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function sA(n,e){const t=De(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((w,E)=>{const I=o.get(E);if(!I)return;f.push(t.Pi.removeMatchingKeys(l,w.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,w.addedDocuments,E))));let D=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?D=D.withResumeToken(qt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):w.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(w.resumeToken,i)),o=o.insert(E,D),(function(W,U,X){return W.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=tA?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(I,D,w)&&f.push(t.Pi.updateTargetData(l,D))}));let g=di(),y=je();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),f.push(oA(l,h,e.documentUpdates).next((w=>{g=w.ks,y=w.qs}))),!i.isEqual(Pe.min())){const w=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(w)}return q.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function oA(n,e,t){let i=je(),o=je();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let h=di();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Pe.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):ae(op,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function aA(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Kf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function lA(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,q.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new Ki(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function mf(n,e,t){const i=De(n),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!sa(h))throw h;ae(op,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Qy(n,e,t){const i=De(n);let o=Pe.min(),l=je();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,w){const E=De(g),I=E.xs.get(w);return I!==void 0?q.resolve(E.Ms.get(I)):E.Pi.getTargetData(y,w)})(i,h,xr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:Pe.min(),t?l:je()))).next((f=>(uA(i,KI(e),f),{documents:f,Qs:l})))))}function uA(n,e,t){let i=n.Os.get(e)||Pe.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class Xy{constructor(){this.activeTargetIds=e1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cA{constructor(){this.Mo=new Xy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Xy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="ConnectivityMonitor";class Zy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae(Jy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ae(Jy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u=null;function gf(){return $u===null?$u=(function(){return 268435456+Math.round(2147483648*Math.random())})():$u++,"0x"+$u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="RestConnection",dA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===cc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=gf(),f=this.zo(e,t.toUriEncodedString());ae(jd,`Sending RPC '${e}' ${h}:`,f,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),w=ta(y);return this.Jo(e,f,g,i,w).then((E=>(ae(jd,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Ko(jd,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",i),E}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ra})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=dA[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class mA extends fA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=gf();return new Promise(((f,g)=>{const y=new y_;y.setWithCredentials(!0),y.listenOnce(v_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Yu.NO_ERROR:const E=y.getResponseJson();ae(Zt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case Yu.TIMEOUT:ae(Zt,`RPC '${e}' ${h} timed out`),g(new ye(K.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:const I=y.getStatus();if(ae(Zt,`RPC '${e}' ${h} failed with status:`,I,"response text:",y.getResponseText()),I>0){let D=y.getResponseJson();Array.isArray(D)&&(D=D[0]);const $=D==null?void 0:D.error;if($&&$.status&&$.message){const W=(function(X){const re=X.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(re)>=0?re:K.UNKNOWN})($.status);g(new ye(W,$.message))}else g(new ye(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ye(K.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ae(Zt,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);ae(Zt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",w,i,15)}))}T_(e,t,i){const o=gf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=E_(),f=w_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const w=l.join("");ae(Zt,`Creating RPC '${e}' stream ${o}: ${w}`,g);const E=h.createWebChannel(w,g);this.I_(E);let I=!1,D=!1;const $=new pA({Yo:U=>{D?ae(Zt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(I||(ae(Zt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),ae(Zt,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),W=(U,X,re)=>{U.listen(X,(de=>{try{re(de)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return W(E,Za.EventType.OPEN,(()=>{D||(ae(Zt,`RPC '${e}' stream ${o} transport opened.`),$.o_())})),W(E,Za.EventType.CLOSE,(()=>{D||(D=!0,ae(Zt,`RPC '${e}' stream ${o} transport closed`),$.a_(),this.E_(E))})),W(E,Za.EventType.ERROR,(U=>{D||(D=!0,Ko(Zt,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),$.a_(new ye(K.UNAVAILABLE,"The operation could not be completed")))})),W(E,Za.EventType.MESSAGE,(U=>{var X;if(!D){const re=U.data[0];Ke(!!re,16349);const de=re,ie=(de==null?void 0:de.error)||((X=de[0])==null?void 0:X.error);if(ie){ae(Zt,`RPC '${e}' stream ${o} received error:`,ie);const Oe=ie.status;let ve=(function(P){const N=It[P];if(N!==void 0)return ew(N)})(Oe),R=ie.message;ve===void 0&&(ve=K.INTERNAL,R="Unknown error status: "+Oe+" with message "+ie.message),D=!0,$.a_(new ye(ve,R)),E.close()}else ae(Zt,`RPC '${e}' stream ${o} received:`,re),$.u_(re)}})),W(f,__.STAT_EVENT,(U=>{U.stat===rf.PROXY?ae(Zt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===rf.NOPROXY&&ae(Zt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ud(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(n){return new _1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ae("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="PersistentStream";class mw{constructor(e,t,i,o,l,h,f,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(hi(t.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ye(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ae(ev,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ae(ev,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gA extends mw{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=T1(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Pe.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Pe.min():h.readTime?Or(h.readTime):Pe.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=pf(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=uf(g)?{documents:A1(l,g)}:{query:C1(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=rw(l,h.resumeToken);const y=hf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Pe.min())>0){f.readTime=gc(l,h.snapshotVersion.toTimestamp());const y=hf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=P1(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=pf(this.serializer),t.removeTarget=e,this.q_(t)}}class yA extends mw{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=I1(e.writeResults,e.commitTime),i=Or(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=pf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>S1(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{}class _A extends vA{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ye(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,df(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(K.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,df(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ye(K.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class wA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hi(t),this.aa=!1):ae("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="RemoteStore";class EA{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Qs(this)&&(ae(Hs,"Restarting streams for network reachability change."),await(async function(g){const y=De(g);y.Ea.add(4),await kl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await $c(y)})(this))}))})),this.Ra=new wA(i,o)}}async function $c(n){if(Qs(n))for(const e of n.da)await e(!0)}async function kl(n){for(const e of n.da)await e(!1)}function gw(n,e){const t=De(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),cp(t)?up(t):oa(t).O_()&&lp(t,e))}function ap(n,e){const t=De(n),i=oa(t);t.Ia.delete(e),i.O_()&&yw(t,e),t.Ia.size===0&&(i.O_()?i.L_():Qs(t)&&t.Ra.set("Unknown"))}function lp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oa(n).Y_(e)}function yw(n,e){n.Va.Ue(e),oa(n).Z_(e)}function up(n){n.Va=new m1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),oa(n).start(),n.Ra.ua()}function cp(n){return Qs(n)&&!oa(n).x_()&&n.Ia.size>0}function Qs(n){return De(n).Ea.size===0}function vw(n){n.Va=void 0}async function TA(n){n.Ra.set("Online")}async function SA(n){n.Ia.forEach(((e,t)=>{lp(n,e)}))}async function IA(n,e){vw(n),cp(n)?(n.Ra.ha(e),up(n)):n.Ra.set("Unknown")}async function AA(n,e,t){if(n.Ra.set("Online"),e instanceof nw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(n,e)}catch(i){ae(Hs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vc(n,i)}else if(e instanceof Zu?n.Va.Ze(e):e instanceof tw?n.Va.st(e):n.Va.tt(e),!t.isEqual(Pe.min()))try{const i=await fw(n.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.Ia.get(y);w&&l.Ia.set(y,w.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const w=l.Ia.get(g);if(!w)return;l.Ia.set(g,w.withResumeToken(qt.EMPTY_BYTE_STRING,w.snapshotVersion)),yw(l,g);const E=new Ki(w.target,g,y,w.sequenceNumber);lp(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){ae(Hs,"Failed to raise snapshot:",i),await vc(n,i)}}async function vc(n,e,t){if(!sa(e))throw e;n.Ea.add(1),await kl(n),n.Ra.set("Offline"),t||(t=()=>fw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ae(Hs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await $c(n)}))}function _w(n,e){return e().catch((t=>vc(n,t,e)))}async function Wc(n){const e=De(n),t=ss(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kf;for(;CA(e);)try{const o=await aA(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,kA(e,o)}catch(o){await vc(e,o)}ww(e)&&Ew(e)}function CA(n){return Qs(n)&&n.Ta.length<10}function kA(n,e){n.Ta.push(e);const t=ss(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ww(n){return Qs(n)&&!ss(n).x_()&&n.Ta.length>0}function Ew(n){ss(n).start()}async function PA(n){ss(n).ra()}async function RA(n){const e=ss(n);for(const t of n.Ta)e.ea(t.mutations)}async function DA(n,e,t){const i=n.Ta.shift(),o=ep.from(i,e,t);await _w(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Wc(n)}async function NA(n,e){e&&ss(n).X_&&await(async function(i,o){if((function(h){return d1(h)&&h!==K.ABORTED})(o.code)){const l=i.Ta.shift();ss(i).B_(),await _w(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Wc(i)}})(n,e),ww(n)&&Ew(n)}async function tv(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),ae(Hs,"RemoteStore received new credentials");const i=Qs(t);t.Ea.add(3),await kl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $c(t)}async function xA(n,e){const t=De(n);e?(t.Ea.delete(2),await $c(t)):e||(t.Ea.add(2),await kl(t),t.Ra.set("Unknown"))}function oa(n){return n.ma||(n.ma=(function(t,i,o){const l=De(t);return l.sa(),new gA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:TA.bind(null,n),t_:SA.bind(null,n),r_:IA.bind(null,n),H_:AA.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),cp(n)?up(n):n.Ra.set("Unknown")):(await n.ma.stop(),vw(n))}))),n.ma}function ss(n){return n.fa||(n.fa=(function(t,i,o){const l=De(t);return l.sa(),new yA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:PA.bind(null,n),r_:NA.bind(null,n),ta:RA.bind(null,n),na:DA.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Wc(n)):(await n.fa.stop(),n.Ta.length>0&&(ae(Hs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new hp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dp(n,e){if(hi("AsyncQueue",`${e}: ${n}`),sa(n))return new ye(K.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{static emptySet(e){return new Bo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=el(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Bo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.ga=new mt(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Zo{constructor(e,t,i,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Zo(e,t,Bo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class bA{constructor(){this.queries=rv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=De(t),l=o.queries;o.queries=rv(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(i)}))})(this,new ye(K.ABORTED,"Firestore shutting down"))}}function rv(){return new Ks((n=>z_(n)),Mc)}async function Tw(n,e){const t=De(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new OA,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=dp(h,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&fp(t)}async function Sw(n,e){const t=De(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function VA(n,e){const t=De(n);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(i=!0);h.wa=o}}i&&fp(t)}function LA(n,e,t){const i=De(n),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function fp(n){n.Ca.forEach((e=>{e.next()}))}var yf,iv;(iv=yf||(yf={})).Ma="default",iv.Cache="cache";class Iw{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Zo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.key=e}}class Cw{constructor(e){this.key=e}}class MA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=B_(e),this.tu=new Bo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new nv,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,E)=>{const I=o.get(w),D=Fc(this.query,E)?E:null,$=!!I&&this.mutatedKeys.has(I.key),W=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let U=!1;I&&D?I.data.isEqual(D.data)?$!==W&&(i.track({type:3,doc:D}),U=!0):this.su(I,D)||(i.track({type:2,doc:D}),U=!0,(g&&this.eu(D,g)>0||y&&this.eu(D,y)<0)&&(f=!0)):!I&&D?(i.track({type:0,doc:D}),U=!0):I&&!D&&(i.track({type:1,doc:I}),U=!0,(g||y)&&(f=!0)),U&&(D?(h=h.add(D),l=W?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,E)=>(function(D,$){const W=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:U})}};return W(D)-W($)})(w.type,E.type)||this.eu(w.doc,E.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Zo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new Cw(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new Aw(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pp="SyncEngine";class FA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class jA{constructor(e){this.key=e,this.hu=!1}}class UA{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ks((f=>z_(f)),Mc),this.Iu=new Map,this.Eu=new Set,this.du=new mt(Ee.comparator),this.Au=new Map,this.Ru=new rp,this.Vu={},this.mu=new Map,this.fu=Jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zA(n,e,t=!0){const i=xw(n);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await kw(i,e,t,!0),o}async function BA(n,e){const t=xw(n);await kw(t,e,!0,!1)}async function kw(n,e,t,i){const o=await lA(n.localStore,xr(e)),l=o.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await $A(n,e,l,h==="current",o.resumeToken)),n.isPrimaryClient&&t&&gw(n.remoteStore,o),f}async function $A(n,e,t,i,o){n.pu=(E,I,D)=>(async function(W,U,X,re){let de=U.view.ru(X);de.Cs&&(de=await Qy(W.localStore,U.query,!1).then((({documents:R})=>U.view.ru(R,de))));const ie=re&&re.targetChanges.get(U.targetId),Oe=re&&re.targetMismatches.get(U.targetId)!=null,ve=U.view.applyChanges(de,W.isPrimaryClient,ie,Oe);return ov(W,U.targetId,ve.au),ve.snapshot})(n,E,I,D);const l=await Qy(n.localStore,e,!0),h=new MA(e,l.Qs),f=h.ru(l.documents),g=Cl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=h.applyChanges(f,n.isPrimaryClient,g);ov(n,t,y.au);const w=new FA(e,t,h);return n.Tu.set(e,w),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function WA(n,e,t){const i=De(n),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Mc(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await mf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&ap(i.remoteStore,o.targetId),vf(i,o.targetId)})).catch(ia)):(vf(i,o.targetId),await mf(i.localStore,o.targetId,!0))}async function HA(n,e){const t=De(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ap(t.remoteStore,i.targetId))}async function qA(n,e,t){const i=ZA(n);try{const o=await(function(h,f){const g=De(h),y=ot.now(),w=f.reduce(((D,$)=>D.add($.key)),je());let E,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let $=di(),W=je();return g.Ns.getEntries(D,w).next((U=>{$=U,$.forEach(((X,re)=>{re.isValidDocument()||(W=W.add(X))}))})).next((()=>g.localDocuments.getOverlayedDocuments(D,$))).next((U=>{E=U;const X=[];for(const re of f){const de=a1(re,E.get(re.key).overlayedDocument);de!=null&&X.push(new Ys(re.key,de,b_(de.value.mapValue),ui.exists(!0)))}return g.mutationQueue.addMutationBatch(D,y,X,f)})).next((U=>{I=U;const X=U.applyToLocalDocumentSet(E,W);return g.documentOverlayCache.saveOverlays(D,U.batchId,X)}))})).then((()=>({batchId:I.batchId,changes:W_(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new mt(Fe)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(i,o.batchId,t),await Pl(i,o.changes),await Wc(i.remoteStore)}catch(o){const l=dp(o,"Failed to persist write");t.reject(l)}}async function Pw(n,e){const t=De(n);try{const i=await sA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ke(h.hu,14607):o.removedDocuments.size>0&&(Ke(h.hu,42227),h.hu=!1))})),await Pl(t,i,e)}catch(i){await ia(i)}}function sv(n,e,t){const i=De(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=De(h);g.onlineState=f;let y=!1;g.queries.forEach(((w,E)=>{for(const I of E.Sa)I.va(f)&&(y=!0)})),y&&fp(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GA(n,e,t){const i=De(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new mt(Ee.comparator);h=h.insert(l,tn.newNoDocument(l,Pe.min()));const f=je().add(l),g=new zc(Pe.min(),new Map,new mt(Fe),h,f);await Pw(i,g),i.du=i.du.remove(l),i.Au.delete(e),mp(i)}else await mf(i.localStore,e,!1).then((()=>vf(i,e,t))).catch(ia)}async function KA(n,e){const t=De(n),i=e.batch.batchId;try{const o=await iA(t.localStore,e);Dw(t,i,null),Rw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Pl(t,o)}catch(o){await ia(o)}}async function YA(n,e,t){const i=De(n);try{const o=await(function(h,f){const g=De(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,f).next((E=>(Ke(E!==null,37113),w=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(i.localStore,e);Dw(i,e,t),Rw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Pl(i,o)}catch(o){await ia(o)}}function Rw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Dw(n,e,t){const i=De(n);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function vf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Nw(n,i)}))}function Nw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ap(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),mp(n))}function ov(n,e,t){for(const i of t)i instanceof Aw?(n.Ru.addReference(i.key,e),QA(n,i)):i instanceof Cw?(ae(pp,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Nw(n,i.key)):Ie(19791,{wu:i})}function QA(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ae(pp,"New document in limbo: "+t),n.Eu.add(i),mp(n))}function mp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(pt.fromString(e)),i=n.fu.next();n.Au.set(i,new jA(t)),n.du=n.du.insert(t,i),gw(n.remoteStore,new Ki(xr(Lc(t.path)),i,"TargetPurposeLimboResolution",xc.ce))}}async function Pl(n,e,t){const i=De(n),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,g)=>{h.push(i.pu(g,e,t).then((y=>{var w;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=sp.As(g.targetId,y);l.push(E)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(g,y){const w=De(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>q.forEach(y,(I=>q.forEach(I.Es,(D=>w.persistence.referenceDelegate.addReference(E,I.targetId,D))).next((()=>q.forEach(I.ds,(D=>w.persistence.referenceDelegate.removeReference(E,I.targetId,D)))))))))}catch(E){if(!sa(E))throw E;ae(op,"Failed to update sequence numbers: "+E)}for(const E of y){const I=E.targetId;if(!E.fromCache){const D=w.Ms.get(I),$=D.snapshotVersion,W=D.withLastLimboFreeSnapshotVersion($);w.Ms=w.Ms.insert(I,W)}}})(i.localStore,l))}async function XA(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){ae(pp,"User change. New user:",e.toKey());const i=await dw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new ye(K.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pl(t,i.Ls)}}function JA(n,e){const t=De(n),i=t.Au.get(e);if(i&&i.hu)return je().add(i.key);{let o=je();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function xw(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GA.bind(null,e),e.Pu.H_=VA.bind(null,e.eventManager),e.Pu.yu=LA.bind(null,e.eventManager),e}function ZA(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YA.bind(null,e),e}class _c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return rA(this.persistence,new eA,e.initialUser,this.serializer)}Cu(e){return new hw(ip.mi,this.serializer)}Du(e){return new cA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_c.provider={build:()=>new _c};class eC extends _c{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof yc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new j1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new hw((i=>yc.mi(i,t)),this.serializer)}}class _f{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=XA.bind(null,this.syncEngine),await xA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bA})()}createDatastore(e){const t=Bc(e.databaseInfo.databaseId),i=(function(l){return new mA(l)})(e.databaseInfo);return(function(l,h,f,g){return new _A(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new EA(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>sv(this.syncEngine,t,0)),(function(){return Zy.v()?new Zy:new hA})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,w){const E=new UA(o,l,h,f,g,y);return w&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=De(o);ae(Hs,"RemoteStore shutting down."),l.Ea.add(5),await kl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}_f.provider={build:()=>new _f};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="FirestoreClient";class tC{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=en.UNAUTHENTICATED,this.clientId=qf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ae(os,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ae(os,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=dp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function zd(n,e){n.asyncQueue.verifyOperationInProgress(),ae(os,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await dw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function av(n,e){n.asyncQueue.verifyOperationInProgress();const t=await nC(n);ae(os,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>tv(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>tv(e.remoteStore,o))),n._onlineComponents=e}async function nC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ae(os,"Using user provided OfflineComponentProvider");try{await zd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ko("Error using user provided cache. Falling back to memory cache: "+t),await zd(n,new _c)}}else ae(os,"Using default OfflineComponentProvider"),await zd(n,new eC(void 0));return n._offlineComponents}async function bw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ae(os,"Using user provided OnlineComponentProvider"),await av(n,n._uninitializedComponentsProvider._online)):(ae(os,"Using default OnlineComponentProvider"),await av(n,new _f))),n._onlineComponents}function rC(n){return bw(n).then((e=>e.syncEngine))}async function wf(n){const e=await bw(n),t=e.eventManager;return t.onListen=zA.bind(null,e.syncEngine),t.onUnlisten=WA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HA.bind(null,e.syncEngine),t}function iC(n,e,t={}){const i=new Zi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const w=new Ow({next:I=>{w.Nu(),h.enqueueAndForget((()=>Sw(l,E)));const D=I.docs.has(f);!D&&I.fromCache?y.reject(new ye(K.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&I.fromCache&&g&&g.source==="server"?y.reject(new ye(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),E=new Iw(Lc(f.path),w,{includeMetadataChanges:!0,qa:!0});return Tw(l,E)})(await wf(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="firestore.googleapis.com",uv=!0;class cv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Lw,this.ssl=uv}else this.host=e.host,this.ssl=e.ssl??uv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M1)throw new ye(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gp{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new uI;switch(i.type){case"firstParty":return new fI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=lv.get(t);i&&(ae("ComponentProvider","Removing Datastore"),lv.delete(t),i.terminate())})(this),Promise.resolve()}}function sC(n,e,t,i={}){var y;n=es(n,gp);const o=ta(e),l=n._getSettings(),h={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(l_(`https://${f}`),u_("Firestore",!0)),l.host!==Lw&&l.host!==f&&Ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:i};if(!Bs(g,h)&&(n._setSettings(g),i.mockUserToken)){let w,E;if(typeof i.mockUserToken=="string")w=i.mockUserToken,E=en.MOCK_USER;else{w=LT(i.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new ye(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new en(I)}n._authCredentials=new cI(new S_(w,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Hc(this.firestore,e,this._query)}}class xt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Il(t,xt._jsonSchema))return new xt(e,i||null,new Ee(pt.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:At("string",xt._jsonSchemaVersion),referencePath:At("string")};class yl extends Hc{constructor(e,t,i){super(e,t,Lc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new Ee(e))}withConverter(e){return new yl(this.firestore,e,this._path)}}function Qa(n,e,...t){if(n=xn(n),arguments.length===1&&(e=qf.newId()),_I("doc","path",e),n instanceof gp){const i=pt.fromString(e,...t);return Iy(i),new xt(n,null,new Ee(i))}{if(!(n instanceof xt||n instanceof yl))throw new ye(K.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pt.fromString(e,...t));return Iy(i),new xt(n.firestore,n instanceof yl?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="AsyncQueue";class dv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pw(this,"async_queue_retry"),this._c=()=>{const i=Ud();i&&ae(hv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Ud();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ud();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Zi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sa(e))throw e;ae(hv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,hi("INTERNAL UNHANDLED ERROR: ",fv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=hp.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ie(47125,{Pc:fv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function fv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class vl extends gp{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new dv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dv(e),this._firestoreClient=void 0,await e}}}function oC(n,e){const t=typeof n=="object"?n:f_(),i=typeof n=="string"?n:cc,o=Wf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=bT("firestore");l&&sC(o,...l)}return o}function yp(n){if(n._terminated)throw new ye(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aC(n),n._firestoreClient}function aC(n){var i,o,l;const e=n._freezeSettings(),t=(function(f,g,y,w){return new NI(f,g,y,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,Vw(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new tC(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(qt.fromBase64String(e))}catch(t){throw new ye(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qn(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Il(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:At("string",qn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(Il(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:At("string",br._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Il(e,Vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vr(e.vectorValues);throw new ye(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vr._jsonSchemaVersion="firestore/vectorValue/1.0",Vr._jsonSchema={type:At("string",Vr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=/^__.*__$/;class uC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ys(e,this.data,this.fieldMask,t,this.fieldTransforms):new Al(e,this.data,t,this.fieldTransforms)}}function Fw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class _p{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _p({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Fw(this.Ac)&&lC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Bc(e)}Cc(e,t,i,o=!1){return new _p({Ac:e,methodName:t,Dc:i,path:Wt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hC(n){const e=n._freezeSettings(),t=Bc(n._databaseId);return new cC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dC(n,e,t,i,o,l={}){const h=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);Bw("Data must be an object, but it was:",h,i);const f=Uw(i,h);let g,y;if(l.merge)g=new ir(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const E of l.mergeFields){const I=fC(e,E,t);if(!h.contains(I))throw new ye(K.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);mC(w,I)||w.push(I)}g=new ir(w),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new uC(new Hn(f),g,y)}function jw(n,e){if(zw(n=xn(n)))return Bw("Unsupported field value:",e,n),Uw(n,e);if(n instanceof Mw)return(function(i,o){if(!Fw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let g=jw(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=xn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return t1(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ot.fromDate(i);return{timestampValue:gc(o.serializer,l)}}if(i instanceof ot){const l=new ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gc(o.serializer,l)}}if(i instanceof br)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof qn)return{bytesValue:rw(o.serializer,i._byteString)};if(i instanceof xt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:np(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Vr)return(function(h,f){return{mapValue:{fields:{[x_]:{stringValue:O_},[hc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return Zf(f.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Gf(i)}`)})(n,e)}function Uw(n,e){const t={};return C_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(n,((i,o)=>{const l=jw(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function zw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ot||n instanceof br||n instanceof qn||n instanceof xt||n instanceof Mw||n instanceof Vr)}function Bw(n,e,t){if(!zw(t)||!I_(t)){const i=Gf(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function fC(n,e,t){if((e=xn(e))instanceof vp)return e._internalPath;if(typeof e=="string")return $w(n,e);throw wc("Field path arguments must be of type string or ",n,!1,void 0,t)}const pC=new RegExp("[~\\*/\\[\\]]");function $w(n,e,t){if(e.search(pC)>=0)throw wc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vp(...e.split("."))._internalPath}catch{throw wc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wc(n,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new ye(K.INVALID_ARGUMENT,f+n+g)}function mC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gC extends Ww{data(){return super.data()}}function Hw(n,e){return typeof e=="string"?$w(n,e):e instanceof vp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vC{convertValue(e,t="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Gs(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[hc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>wt(h.doubleValue)));return new Vr(t)}convertGeoPoint(e){return new br(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=bc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(dl(e));default:return null}}convertTimestamp(e){const t=ns(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=pt.fromString(e);Ke(uw(i),9688,{name:e});const o=new fl(i.get(1),i.get(3)),l=new Ee(i.popFirst(5));return o.isEqual(t)||hi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class nl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class js extends Ww{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Hw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=js._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}js._jsonSchemaVersion="firestore/documentSnapshot/1.0",js._jsonSchema={type:At("string",js._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class ec extends js{data(e={}){return super.data(e)}}class $o{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new nl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new ec(this._firestore,this._userDataWriter,i.key,i,new nl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new ec(o._firestore,o._userDataWriter,f.doc.key,f.doc,new nl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new ec(o._firestore,o._userDataWriter,f.doc.key,f.doc,new nl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:wC(f.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n){n=es(n,xt);const e=es(n.firestore,vl);return iC(yp(e),n._key).then((t=>Gw(e,n,t)))}$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:At("string",$o._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class qw extends vC{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}function gv(n,e,t){n=es(n,xt);const i=es(n.firestore,vl),o=_C(n.converter,e);return TC(i,[dC(hC(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ui.none())])}function EC(n,...e){var g,y,w;n=xn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||pv(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(pv(e[i])){const E=e[i];e[i]=(g=E.next)==null?void 0:g.bind(E),e[i+1]=(y=E.error)==null?void 0:y.bind(E),e[i+2]=(w=E.complete)==null?void 0:w.bind(E)}let l,h,f;if(n instanceof xt)h=es(n.firestore,vl),f=Lc(n._key.path),l={next:E=>{e[i]&&e[i](Gw(h,n,E))},error:e[i+1],complete:e[i+2]};else{const E=es(n,Hc);h=es(E.firestore,vl),f=E._query;const I=new qw(h);l={next:D=>{e[i]&&e[i](new $o(h,I,E,D))},error:e[i+1],complete:e[i+2]},yC(n._query)}return(function(I,D,$,W){const U=new Ow(W),X=new Iw(D,U,$);return I.asyncQueue.enqueueAndForget((async()=>Tw(await wf(I),X))),()=>{U.Nu(),I.asyncQueue.enqueueAndForget((async()=>Sw(await wf(I),X)))}})(yp(h),f,o,l)}function TC(n,e){return(function(i,o){const l=new Zi;return i.asyncQueue.enqueueAndForget((async()=>qA(await rC(i),o,l))),l.promise})(yp(n),e)}function Gw(n,e,t){const i=t.docs.get(e._key),o=new qw(n);return new js(n,o,e._key,i,new nl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ra=o})(na),Go(new $s("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new vl(new hI(i.getProvider("auth-internal")),new pI(h,i.getProvider("app-check-internal")),(function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ye(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(y.options.projectId,w)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Xi(wy,Ey,e),Xi(wy,Ey,"esm2020")})();var SC="firebase",IC="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(SC,IC,"app");function Kw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AC=Kw,Yw=new Tl("auth","Firebase",Kw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new Bf("@firebase/auth");function CC(n,...e){Ec.logLevel<=Me.WARN&&Ec.warn(`Auth (${na}): ${n}`,...e)}function tc(n,...e){Ec.logLevel<=Me.ERROR&&Ec.error(`Auth (${na}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(n,...e){throw Ep(n,...e)}function or(n,...e){return Ep(n,...e)}function wp(n,e,t){const i={...AC(),[e]:t};return new Tl("auth","Firebase",i).create(e,{appName:n.name})}function Us(n){return wp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kC(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&jr(n,"argument-error"),wp(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ep(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Yw.create(n,...e)}function ke(n,e,...t){if(!n)throw Ep(e,...t)}function ai(n){const e="INTERNAL ASSERTION FAILED: "+n;throw tc(e),new Error(e)}function fi(n,e){n||ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function PC(){return yv()==="http:"||yv()==="https:"}function yv(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PC()||BT()||"connection"in navigator)?navigator.onLine:!0}function DC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t){this.shortDelay=e,this.longDelay=t,fi(t>e,"Short delay should be less than long delay!"),this.isMobile=jT()||$T()}get(){return RC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(n,e){fi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OC=new Rl(3e4,6e4);function Sp(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function aa(n,e,t,i,o={}){return Xw(n,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=Sl({key:n.config.apiKey,...h}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:g,...l};return zT()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&ta(n.emulatorConfig.host)&&(y.credentials="include"),Qw.fetch()(await Jw(n,n.config.apiHost,t,f),y)})}async function Xw(n,e,t){n._canInitEmulator=!1;const i={...NC,...e};try{const o=new VC(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Wu(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(n,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Wu(n,"email-already-in-use",h);if(g==="USER_DISABLED")throw Wu(n,"user-disabled",h);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw wp(n,w,y);jr(n,w)}}catch(o){if(o instanceof pi)throw o;jr(n,"network-request-failed",{message:String(o)})}}async function bC(n,e,t,i,o={}){const l=await aa(n,e,t,i,o);return"mfaPendingCredential"in l&&jr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Jw(n,e,t,i){const o=`${e}${t}?${i}`,l=n,h=l.config.emulator?Tp(n.config,o):`${n.config.apiScheme}://${o}`;return xC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class VC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(or(this.auth,"network-request-failed")),OC.get())})}}function Wu(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=or(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(n,e){return aa(n,"POST","/v1/accounts:delete",e)}async function Tc(n,e){return aa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MC(n,e=!1){const t=xn(n),i=await t.getIdToken(e),o=Ip(i);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:ul(Bd(o.auth_time)),issuedAtTime:ul(Bd(o.iat)),expirationTime:ul(Bd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Bd(n){return Number(n)*1e3}function Ip(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return tc("JWT malformed, contained fewer than 3 sections"),null;try{const o=i_(t);return o?JSON.parse(o):(tc("Failed to decode base64 JWT payload"),null)}catch(o){return tc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function vv(n){const e=Ip(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof pi&&FC(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function FC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ul(this.lastLoginAt),this.creationTime=ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sc(n){var E;const e=n.auth,t=await n.getIdToken(),i=await _l(n,Tc(e,{idToken:t}));ke(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?Zw(o.providerUserInfo):[],h=zC(n.providerData,l),f=n.isAnonymous,g=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),y=f?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Tf(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,w)}async function UC(n){const e=xn(n);await Sc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zC(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Zw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC(n,e){const t=await Xw(n,{},async()=>{const i=Sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,h=await Jw(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return n.emulatorConfig&&ta(n.emulatorConfig.host)&&(g.credentials="include"),Qw.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $C(n,e){return aa(n,"POST","/v2/accounts:revokeToken",Sp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=vv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await BC(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Wo;return i&&(ke(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(ke(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(ke(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wo,this.toJSON())}_performRefresh(){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class sr{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new jC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await _l(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return MC(this,e)}reload(){return UC(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Sc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rr(this.auth.app))return Promise.reject(Us(this.auth));const e=await this.getIdToken();return await _l(this,LC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:E,emailVerified:I,isAnonymous:D,providerData:$,stsTokenManager:W}=t;ke(E&&W,e,"internal-error");const U=Wo.fromJSON(this.name,W);ke(typeof E=="string",e,"internal-error"),Wi(i,e.name),Wi(o,e.name),ke(typeof I=="boolean",e,"internal-error"),ke(typeof D=="boolean",e,"internal-error"),Wi(l,e.name),Wi(h,e.name),Wi(f,e.name),Wi(g,e.name),Wi(y,e.name),Wi(w,e.name);const X=new sr({uid:E,auth:e,email:o,emailVerified:I,displayName:i,isAnonymous:D,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:U,createdAt:y,lastLoginAt:w});return $&&Array.isArray($)&&(X.providerData=$.map(re=>({...re}))),g&&(X._redirectEventId=g),X}static async _fromIdTokenResponse(e,t,i=!1){const o=new Wo;o.updateFromServerResponse(t);const l=new sr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Sc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Zw(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Wo;f.updateFromIdToken(i);const g=new sr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Tf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=new Map;function li(n){fi(n instanceof Function,"Expected a class definition");let e=_v.get(n);return e?(fi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,_v.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}eE.type="NONE";const wv=eE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(n,e,t){return`firebase:${n}:${e}:${t}`}class Ho{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=nc(this.userKey,o.apiKey,l),this.fullPersistenceKey=nc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Tc(this.auth,{idToken:e}).catch(()=>{});return t?sr._fromGetAccountInfoResponse(this.auth,t,e):null}return sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ho(li(wv),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||li(wv);const h=nc(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const w=await y._get(h);if(w){let E;if(typeof w=="string"){const I=await Tc(e,{idToken:w}).catch(()=>{});if(!I)break;E=await sr._fromGetAccountInfoResponse(e,I,w)}else E=sr._fromJSON(e,w);y!==l&&(f=E),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ho(l,e,i):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Ho(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oE(e))return"Blackberry";if(aE(e))return"Webos";if(nE(e))return"Safari";if((e.includes("chrome/")||rE(e))&&!e.includes("edge/"))return"Chrome";if(sE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function tE(n=nn()){return/firefox\//i.test(n)}function nE(n=nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rE(n=nn()){return/crios\//i.test(n)}function iE(n=nn()){return/iemobile/i.test(n)}function sE(n=nn()){return/android/i.test(n)}function oE(n=nn()){return/blackberry/i.test(n)}function aE(n=nn()){return/webos/i.test(n)}function Ap(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WC(n=nn()){var e;return Ap(n)&&!!((e=window.navigator)!=null&&e.standalone)}function HC(){return WT()&&document.documentMode===10}function lE(n=nn()){return Ap(n)||sE(n)||aE(n)||oE(n)||/windows phone/i.test(n)||iE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(n,e=[]){let t;switch(n){case"Browser":t=Ev(nn());break;case"Worker":t=`${Ev(nn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${na}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(n,e={}){return aa(n,"GET","/v2/passwordPolicy",Sp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=6;class YC{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??KC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tv(this),this.idTokenSubscription=new Tv(this),this.beforeStateQueue=new qC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=li(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Tc(this,{idToken:e}),i=await sr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(rr(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rr(this.app))return Promise.reject(Us(this));const t=e?xn(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rr(this.app)?Promise.reject(Us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rr(this.app)?Promise.reject(Us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GC(this),t=new YC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await $C(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&li(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[li(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&CC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function qc(n){return xn(n)}class Tv{constructor(e){this.auth=e,this.observer=null,this.addObserver=JT(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XC(n){Cp=n}function JC(n){return Cp.loadJS(n)}function ZC(){return Cp.gapiScript}function ek(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(n,e){const t=Wf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Bs(l,e??{}))return o;jr(o,"already-initialized")}return t.initialize({options:e})}function nk(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(li);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function rk(n,e,t){const i=qc(n);ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=cE(e),{host:h,port:f}=ik(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},w=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ke(Bs(y,i.config.emulator)&&Bs(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,ta(h)?(l_(`${l}//${h}${g}`),u_("Auth",!0)):sk()}function cE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ik(n){const e=cE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Sv(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Sv(h)}}}function Sv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function sk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ai("not implemented")}_getIdTokenResponse(e){return ai("not implemented")}_linkToIdToken(e,t){return ai("not implemented")}_getReauthenticationResolver(e){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(n,e){return bC(n,"POST","/v1/accounts:signInWithIdp",Sp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="http://localhost";class qs extends hE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new qs(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return qo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,qo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qo(e,t)}buildRequest(){const e={requestUri:ok,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends kp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Dl{constructor(){super("facebook.com")}static credential(e){return qs._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Dl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qs._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return oi.credential(t,i)}catch{return null}}}oi.GOOGLE_SIGN_IN_METHOD="google.com";oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Dl{constructor(){super("github.com")}static credential(e){return qs._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Dl{constructor(){super("twitter.com")}static credential(e,t){return qs._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Gi.credential(t,i)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await sr._fromIdTokenResponse(e,i,o),h=Iv(i);return new ea({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Iv(i);return new ea({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Iv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends pi{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ic.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Ic(e,t,i,o)}}function dE(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ic._fromErrorAndOperation(n,l,e,i):l})}async function ak(n,e,t=!1){const i=await _l(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ea._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(n,e,t=!1){const{auth:i}=n;if(rr(i.app))return Promise.reject(Us(i));const o="reauthenticate";try{const l=await _l(n,dE(i,o,e,n),t);ke(l.idToken,i,"internal-error");const h=Ip(l.idToken);ke(h,i,"internal-error");const{sub:f}=h;return ke(n.uid===f,i,"user-mismatch"),ea._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&jr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(n,e,t=!1){if(rr(n.app))return Promise.reject(Us(n));const i="signIn",o=await dE(n,i,e),l=await ea._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}function ck(n,e,t,i){return xn(n).onIdTokenChanged(e,t,i)}function hk(n,e,t){return xn(n).beforeAuthStateChanged(e,t)}function dk(n,e,t,i){return xn(n).onAuthStateChanged(e,t,i)}function fk(n){return xn(n).signOut()}const Ac="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ac,"1"),this.storage.removeItem(Ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=1e3,mk=10;class pE extends fE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);HC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,mk):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},pk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pE.type="LOCAL";const gk=pE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends fE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mE.type="SESSION";const gE=mE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Gc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await yk(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=Pp("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(E){const I=E;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(w),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function _k(n){Lr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function wk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ek(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Tk(){return yE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="firebaseLocalStorageDb",Sk=1,Cc="firebaseLocalStorage",_E="fbase_key";class Nl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kc(n,e){return n.transaction([Cc],e?"readwrite":"readonly").objectStore(Cc)}function Ik(){const n=indexedDB.deleteDatabase(vE);return new Nl(n).toPromise()}function Sf(){const n=indexedDB.open(vE,Sk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Cc,{keyPath:_E})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Cc)?e(i):(i.close(),await Ik(),e(await Sf()))})})}async function Av(n,e,t){const i=Kc(n,!0).put({[_E]:e,value:t});return new Nl(i).toPromise()}async function Ak(n,e){const t=Kc(n,!1).get(e),i=await new Nl(t).toPromise();return i===void 0?null:i.value}function Cv(n,e){const t=Kc(n,!0).delete(e);return new Nl(t).toPromise()}const Ck=800,kk=3;class wE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>kk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gc._getInstance(Tk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await wk(),!this.activeServiceWorker)return;this.sender=new vk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ek()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sf();return await Av(e,Ac,"1"),await Cv(e,Ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Av(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Ak(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Cv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Kc(o,!1).getAll();return new Nl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ck)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wE.type="LOCAL";const Pk=wE;new Rl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(n,e){return e?li(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp extends hE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Rk(n){return uk(n.auth,new Rp(n),n.bypassAuthState)}function Dk(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),lk(t,new Rp(n),n.bypassAuthState)}async function Nk(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),ak(t,new Rp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rk;case"linkViaPopup":case"linkViaRedirect":return Nk;case"reauthViaPopup":case"reauthViaRedirect":return Dk;default:jr(this.auth,"internal-error")}}resolve(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=new Rl(2e3,1e4);async function Ok(n,e,t){if(rr(n.app))return Promise.reject(or(n,"operation-not-supported-in-this-environment"));const i=qc(n);kC(n,e,kp);const o=EE(i,t);return new Fs(i,"signInViaPopup",e,o).executeNotNull()}class Fs extends TE{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");const e=Pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xk.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="pendingRedirect",rc=new Map;class Vk extends TE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=rc.get(this.auth._key());if(!e){try{const i=await Lk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}rc.set(this.auth._key(),e)}return this.bypassAuthState||rc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Lk(n,e){const t=jk(e),i=Fk(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Mk(n,e){rc.set(n._key(),e)}function Fk(n){return li(n._redirectPersistence)}function jk(n){return nc(bk,n.config.apiKey,n.name)}async function Uk(n,e,t=!1){if(rr(n.app))return Promise.reject(Us(n));const i=qc(n),o=EE(i,e),h=await new Vk(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=600*1e3;class Bk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$k(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!SE(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(or(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zk&&this.cachedEventUids.clear(),this.cachedEventUids.has(kv(e))}saveEventToCache(e){this.cachedEventUids.add(kv(e)),this.lastProcessedEventTime=Date.now()}}function kv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function SE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $k(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(n,e={}){return aa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qk=/^https?/;async function Gk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Wk(n);for(const t of e)try{if(Kk(t))return}catch{}jr(n,"unauthorized-domain")}function Kk(n){const e=Ef(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!qk.test(t))return!1;if(Hk.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new Rl(3e4,6e4);function Pv(){const n=Lr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Qk(n){return new Promise((e,t)=>{var o,l,h;function i(){Pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pv(),t(or(n,"network-request-failed"))},timeout:Yk.get()})}if((l=(o=Lr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=Lr().gapi)!=null&&h.load)i();else{const f=ek("iframefcb");return Lr()[f]=()=>{gapi.load?i():t(or(n,"network-request-failed"))},JC(`${ZC()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw ic=null,e})}let ic=null;function Xk(n){return ic=ic||Qk(n),ic}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=new Rl(5e3,15e3),Zk="__/auth/iframe",eP="emulator/auth/iframe",tP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rP(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Tp(e,eP):`https://${n.config.authDomain}/${Zk}`,i={apiKey:e.apiKey,appName:n.name,v:na},o=nP.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Sl(i).slice(1)}`}async function iP(n){const e=await Xk(n),t=Lr().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:rP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tP,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=or(n,"network-request-failed"),f=Lr().setTimeout(()=>{l(h)},Jk.get());function g(){Lr().clearTimeout(f),o(i)}i.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oP=500,aP=600,lP="_blank",uP="http://localhost";class Rv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cP(n,e,t,i=oP,o=aP){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g={...sP,width:i.toString(),height:o.toString(),top:l,left:h},y=nn().toLowerCase();t&&(f=rE(y)?lP:t),tE(y)&&(e=e||uP,g.scrollbars="yes");const w=Object.entries(g).reduce((I,[D,$])=>`${I}${D}=${$},`,"");if(WC(y)&&f!=="_self")return hP(e||"",f),new Rv(null);const E=window.open(e||"",f,w);ke(E,n,"popup-blocked");try{E.focus()}catch{}return new Rv(E)}function hP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="__/auth/handler",fP="emulator/auth/handler",pP=encodeURIComponent("fac");async function Dv(n,e,t,i,o,l){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:na,eventId:o};if(e instanceof kp){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",XT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))h[w]=E}if(e instanceof Dl){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(h.scopes=w.join(","))}n.tenantId&&(h.tid=n.tenantId);const f=h;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await n._getAppCheckToken(),y=g?`#${pP}=${encodeURIComponent(g)}`:"";return`${mP(n)}?${Sl(f).slice(1)}${y}`}function mP({config:n}){return n.emulator?Tp(n,fP):`https://${n.authDomain}/${dP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="webStorageSupport";class gP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gE,this._completeRedirectFn=Uk,this._overrideRedirectResult=Mk}async _openPopup(e,t,i,o){var h;fi((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await Dv(e,t,i,Ef(),o);return cP(e,l,Pp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Dv(e,t,i,Ef(),o);return _k(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(fi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await iP(e),i=new Bk(e);return t.register("authEvent",o=>(ke(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($d,{type:$d},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[$d];l!==void 0&&t(!!l),jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Gk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lE()||nE()||Ap()}}const yP=gP;var Nv="@firebase/auth",xv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wP(n){Go(new $s("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;ke(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uE(n)},y=new QC(i,o,l,g);return nk(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Go(new $s("auth-internal",e=>{const t=qc(e.getProvider("auth").getImmediate());return(i=>new vP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi(Nv,xv,_P(n)),Xi(Nv,xv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=300,TP=a_("authIdTokenMaxAge")||EP;let Ov=null;const SP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>TP)return;const o=t==null?void 0:t.token;Ov!==o&&(Ov=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function IP(n=f_()){const e=Wf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=tk(n,{popupRedirectResolver:yP,persistence:[Pk,gk,gE]}),i=a_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=SP(l.toString());hk(t,h,()=>h(t.currentUser)),ck(t,f=>h(f))}}const o=s_("auth");return o&&rk(t,`http://${o}`),t}function AP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}XC({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=or("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",AP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wP("Browser");const sc={apiKey:"AIzaSyCXxatUkVDpVnR0BKkZTNlB_G_3agOfoY0",authDomain:"jpl-vacation-forecast.firebaseapp.com",projectId:"jpl-vacation-forecast",storageBucket:"jpl-vacation-forecast.firebasestorage.app",messagingSenderId:"732269508238",appId:"1:732269508238:web:464689fab6d9d91aeefbdf"};let Xa=null,kc=null,Pc=null;const IE=()=>!!(sc.apiKey&&sc.authDomain&&sc.projectId),AE=()=>{if(!IE())return console.log("Firebase not configured - cloud sync disabled"),{app:null,auth:null,db:null};try{return Xa||(Xa=d_(sc),kc=IP(Xa),Pc=oC(Xa),console.log("Firebase initialized successfully")),{app:Xa,auth:kc,db:Pc}}catch(n){return console.error("Failed to initialize Firebase:",n),{app:null,auth:null,db:null}}},Wd=()=>{if(!kc){const{auth:n}=AE();return n}return kc},Ja=()=>{if(!Pc){const{db:n}=AE();return n}return Pc};class CP{constructor(){Ka(this,"mode","localStorage");Ka(this,"userId",null);Ka(this,"listeners",new Map);Ka(this,"unsubscribers",new Map)}getMode(){return this.mode}setMode(e,t){const i=this.mode==="cloud-sync";this.mode=e,this.userId=t||null,i&&e==="localStorage"&&this.cleanupFirebaseListeners(),console.log(`Storage mode set to: ${e}`,t?`User: ${t}`:"")}async get(e,t){try{const i=window.localStorage.getItem(e);if(i)return JSON.parse(i)}catch(i){console.error(`Error reading ${e} from localStorage:`,i)}if(this.mode==="cloud-sync"&&this.userId)try{const i=Ja();if(i){const o=Qa(i,"users",this.userId,"data",e),l=await mv(o);if(l.exists())return l.data().value}}catch(i){console.error(`Error reading ${e} from Firebase:`,i)}return t}async set(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(i){console.error(`Error writing ${e} to localStorage:`,i)}if(this.mode==="cloud-sync"&&this.userId)try{const i=Ja();if(i){const o=Qa(i,"users",this.userId,"data",e);await gv(o,{value:t,updatedAt:new Date().toISOString()}),console.log(`Synced ${e} to Firebase`)}}catch(i){console.error(`Error writing ${e} to Firebase:`,i)}this.notifyListeners(e,t)}subscribe(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),this.mode==="cloud-sync"&&this.userId&&!this.unsubscribers.has(e)&&this.setupFirebaseListener(e),()=>{const i=this.listeners.get(e);if(i&&(i.delete(t),i.size===0)){this.listeners.delete(e);const o=this.unsubscribers.get(e);o&&(o(),this.unsubscribers.delete(e))}}}async syncToCloud(e){if(this.mode!=="cloud-sync"||!this.userId)throw new Error("Cloud sync not enabled");const t=Ja();if(!t)throw new Error("Firebase not configured");for(const i of e)try{const o=window.localStorage.getItem(i);if(o){const l=JSON.parse(o),h=Qa(t,"users",this.userId,"data",i);await gv(h,{value:l,updatedAt:new Date().toISOString()}),console.log(`Initial sync of ${i} to Firebase`)}}catch(o){console.error(`Error syncing ${i} to Firebase:`,o)}}async syncFromCloud(e){if(this.mode!=="cloud-sync"||!this.userId)throw new Error("Cloud sync not enabled");const t=Ja();if(!t)throw new Error("Firebase not configured");for(const i of e)try{const o=Qa(t,"users",this.userId,"data",i),l=await mv(o);if(l.exists()){const h=l.data();window.localStorage.setItem(i,JSON.stringify(h.value)),console.log(`Loaded ${i} from Firebase to localStorage`),this.notifyListeners(i,h.value)}}catch(o){console.error(`Error loading ${i} from Firebase:`,o)}}setupFirebaseListener(e){if(!this.userId)return;const t=Ja();if(t)try{const i=Qa(t,"users",this.userId,"data",e),o=EC(i,l=>{if(l.exists()){const f=l.data().value;window.localStorage.setItem(e,JSON.stringify(f)),this.notifyListeners(e,f),console.log(`Real-time update for ${e} from Firebase`)}},l=>{console.error(`Firebase listener error for ${e}:`,l)});this.unsubscribers.set(e,o)}catch(i){console.error(`Error setting up Firebase listener for ${e}:`,i)}}notifyListeners(e,t){const i=this.listeners.get(e);i&&i.forEach(o=>{try{o(t)}catch(l){console.error("Error in storage listener:",l)}})}cleanupFirebaseListeners(){this.unsubscribers.forEach(e=>e()),this.unsubscribers.clear()}}const Dr=new CP;function Hd(n,e){const[t,i]=se.useState(()=>{try{const l=window.localStorage.getItem(n);return l?JSON.parse(l):e}catch(l){return console.error(`Error loading ${n} from localStorage:`,l),e}});return se.useEffect(()=>Dr.subscribe(n,h=>{i(h)}),[n]),[t,l=>{try{const h=l instanceof Function?l(t):l;i(h),Dr.set(n,h).catch(f=>{console.error(`Error saving ${n}:`,f)})}catch(h){console.error(`Error saving ${n}:`,h)}}]}const kP=()=>{const[n,e]=Hd("jpl-vacation-user-profile",null),[t,i]=Hd("jpl-vacation-planned-vacations",[]),[o,l]=Hd("jpl-vacation-holidays",[]);se.useEffect(()=>{n&&n.workSchedule.type==="9/80"&&n.workSchedule.rdoPattern==="even-fridays"&&e({...n,workSchedule:{...n.workSchedule,rdoPattern:"odd-fridays"}})},[n,e]);const h=se.useMemo(()=>{if(!n){const W=new Date;return{startDate:new Date(W.getFullYear(),0,1),endDate:new Date(W.getFullYear()+1,11,31)}}const D=qe(n.balanceAsOfDate),$=new Date(D.getFullYear()+10,11,31);return{startDate:D,endDate:$}},[n]),f=se.useMemo(()=>n?IT(n,h.startDate,h.endDate,t,o):[],[n,h,t,o]),g=se.useMemo(()=>{if(f.length===0)return[];const D=new Date().getFullYear();return[ay(f,D),ay(f,D+1)]},[f]);return{userProfile:n,setUserProfile:e,plannedVacations:t,addPlannedVacation:D=>{const $={...D,id:crypto.randomUUID()};i([...t,$])},updatePlannedVacation:(D,$)=>{i(t.map(W=>W.id===D?{...W,...$}:W))},deletePlannedVacation:D=>{i(t.filter($=>$.id!==D))},holidays:o,setHolidays:l,weeklyBalances:f,annualSummaries:g,forecastPeriod:h,canAffordVacation:D=>{if(!n)return{canAfford:!1,projectedBalance:0};const $=qe(D.endDate),W=AT(n,$,[...t,{...D,id:"temp"}],o);return{canAfford:W>=0,projectedBalance:W}}}},PP="1.2",RP={2025:[{name:"Christmas",date:"2025-12-25",type:"federal"},{name:"JPL Floating",date:"2025-12-24",type:"jpl"},{name:"JPL Floating",date:"2025-12-23",type:"jpl",scheduleFilter:"9/80-only"},{name:"JPL Floating",date:"2025-12-26",type:"jpl",scheduleFilter:"5/40-only"}],2026:[{name:"New Year's Day",date:"2026-01-01",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2026-01-19",type:"federal"},{name:"Presidents' Day",date:"2026-02-16",type:"federal"},{name:"Memorial Day",date:"2026-05-25",type:"federal"},{name:"Juneteenth",date:"2026-06-19",type:"federal"},{name:"Independence Day",date:"2026-07-03",type:"federal",notes:"Observed"},{name:"Labor Day",date:"2026-09-07",type:"federal"},{name:"Thanksgiving",date:"2026-11-26",type:"federal"},{name:"Day After Thanksgiving",date:"2026-11-25",type:"federal",scheduleFilter:"9/80-only"},{name:"Day After Thanksgiving",date:"2026-11-27",type:"federal",scheduleFilter:"5/40-only"},{name:"Christmas",date:"2026-12-24",type:"federal",scheduleFilter:"9/80-only"},{name:"Christmas",date:"2026-12-25",type:"federal",scheduleFilter:"5/40-only"},{name:"JPL Floating",date:"2026-01-02",type:"jpl"},{name:"JPL Floating",date:"2026-12-28",type:"jpl"}]},CE={version:PP,holidays:RP},DP=(n,e,t)=>{const i=[];for(let o=n;o<=e;o++){const l=o.toString(),h=CE.holidays[l];h&&i.push(...h.filter(f=>!f.scheduleFilter||f.scheduleFilter==="All"||!t?!0:t==="5/40"?f.scheduleFilter!=="9/80-only":t==="9/80"?f.scheduleFilter!=="5/40-only":!0).map(f=>({name:f.name,date:f.date})))}return i},NP=(n,e,t)=>({defaultHolidays:se.useMemo(()=>{if(!n)return[];const o=new Date,l=e||o,h=t||new Date(o.getFullYear()+10,11,31),f=l.getFullYear(),g=h.getFullYear();return DP(f,g,n.type).map(w=>({...w,hours:Uf(qe(w.date),n)}))},[n,e,t])}),qd=["jpl-vacation-user-profile","jpl-vacation-planned-vacations"];function Yc(){const[n,e]=se.useState(null),[t,i]=se.useState(!0),[o,l]=se.useState(null),[h]=se.useState(IE()),[f,g]=se.useState(!1);return se.useEffect(()=>{if(!h){i(!1);return}const E=Wd();if(!E){i(!1);return}const I=dk(E,async D=>{if(e(D),i(!1),D){Dr.setMode("cloud-sync",D.uid);try{await Dr.syncFromCloud(qd)}catch{console.log("No cloud data found, will sync local data to cloud");try{await Dr.syncToCloud(qd)}catch(W){console.error("Error syncing to cloud:",W)}}finally{g(!0)}}else Dr.setMode("localStorage"),g(!0)});return()=>I()},[h]),{user:n,loading:t,error:o,isFirebaseAvailable:h,initialSyncComplete:f,signInWithGoogle:async()=>{if(!h){l("Firebase is not configured. Cloud sync is not available.");return}l(null),i(!0);try{const E=Wd();if(!E)throw new Error("Firebase auth not initialized");const I=new oi,D=await Ok(E,I);console.log("Signed in as:",D.user.email),Dr.setMode("cloud-sync",D.user.uid),await Dr.syncToCloud(qd),e(D.user)}catch(E){console.error("Sign in error:",E),l(E.message||"Failed to sign in"),Dr.setMode("localStorage")}finally{i(!1)}},signOut:async()=>{if(h){l(null),i(!0);try{const E=Wd();if(!E)throw new Error("Firebase auth not initialized");await fk(E),Dr.setMode("localStorage"),e(null),console.log("Signed out successfully")}catch(E){console.error("Sign out error:",E),l(E.message||"Failed to sign out")}finally{i(!1)}}}}}const bv=({onSubmit:n,onBack:e})=>{const[t,i]=se.useState(""),[o,l]=se.useState(""),[h,f]=se.useState(""),[g,y]=se.useState("5/40"),[w,E]=se.useState(!1),I=D=>{D.preventDefault();const $={startDate:t,currentBalance:parseFloat(o),balanceAsOfDate:h,workSchedule:{type:g,rdoPattern:g==="9/80"?"odd-fridays":void 0},personalDayUsedInStartYear:w};n($)};return A.jsxs("div",{className:"user-input-form-container",children:[e&&A.jsx("button",{onClick:e,className:"back-button",type:"button",children:" Back"}),A.jsx("h2",{children:"Welcome to JPL Vacation Forecast"}),A.jsx("p",{children:"Let's set up your vacation tracking profile"}),A.jsxs("form",{onSubmit:I,className:"user-input-form",children:[A.jsxs("div",{className:"form-group",children:[A.jsx("label",{htmlFor:"startDate",children:"JPL Start Date"}),A.jsx("input",{type:"date",id:"startDate",value:t,onChange:D=>i(D.target.value),required:!0}),A.jsx("small",{children:"This determines your vacation accrual rate"})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{htmlFor:"currentBalance",children:"Current Vacation Balance (hours)"}),A.jsx("input",{type:"number",id:"currentBalance",value:o,onChange:D=>l(D.target.value),min:"0",step:"0.01",required:!0}),A.jsx("small",{children:"Include any carryover from previous year"})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{htmlFor:"balanceAsOfDate",children:"Balance As Of Date"}),A.jsx("input",{type:"date",id:"balanceAsOfDate",value:h,onChange:D=>f(D.target.value),required:!0}),A.jsx("small",{children:"When was this balance taken? Should be the start of a week (Sunday)"})]}),A.jsxs("div",{className:"form-group checkbox-group",children:[A.jsxs("label",{children:[A.jsx("input",{type:"checkbox",checked:w,onChange:D=>E(D.target.checked)}),A.jsx("span",{children:"I already used my Personal Day this year"})]}),A.jsxs("small",{children:["Check this if you took a personal day before ",h||"your balance date"]})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Work Schedule"}),A.jsxs("div",{className:"radio-group",children:[A.jsxs("label",{className:"radio-label",children:[A.jsx("input",{type:"radio",name:"scheduleType",value:"5/40",checked:g==="5/40",onChange:()=>y("5/40")}),A.jsx("span",{children:"5/40 (Five 8-hour days per week)"})]}),A.jsxs("label",{className:"radio-label",children:[A.jsx("input",{type:"radio",name:"scheduleType",value:"9/80",checked:g==="9/80",onChange:()=>y("9/80")}),A.jsx("span",{children:"9/80 (Nine 9-hour days + one 8-hour day over 2 weeks, alternating Friday off)"})]})]})]}),A.jsx("button",{type:"submit",className:"submit-button",children:"Start Forecasting"})]})]})};function kE(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=kE(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Qc(){for(var n,e,t=0,i="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=kE(n))&&(i&&(i+=" "),i+=e);return i}const xP=(n,e,t,i)=>{if(t==="length"||t==="prototype"||t==="arguments"||t==="caller")return;const o=Object.getOwnPropertyDescriptor(n,t),l=Object.getOwnPropertyDescriptor(e,t);!OP(o,l)&&i||Object.defineProperty(n,t,l)},OP=function(n,e){return n===void 0||n.configurable||n.writable===e.writable&&n.enumerable===e.enumerable&&n.configurable===e.configurable&&(n.writable||n.value===e.value)},bP=(n,e)=>{const t=Object.getPrototypeOf(e);t!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,t)},VP=(n,e)=>`/* Wrapped ${n}*/
${e}`,LP=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),MP=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),FP=(n,e,t)=>{const i=t===""?"":`with ${t.trim()}() `,o=VP.bind(null,i,e.toString());Object.defineProperty(o,"name",MP);const{writable:l,enumerable:h,configurable:f}=LP;Object.defineProperty(n,"toString",{value:o,writable:l,enumerable:h,configurable:f})};function jP(n,e,{ignoreNonConfigurable:t=!1}={}){const{name:i}=n;for(const o of Reflect.ownKeys(e))xP(n,e,o,t);return bP(n,e),FP(n,e,i),n}const Hu=2147483647,UP=new WeakMap,Gd=new WeakMap,zP=new WeakMap;function BP(n,e){const t=n.get(e);if(t){if(t.maxAge<=Date.now()){n.delete(e);return}return t}}function PE(n,{cacheKey:e,cache:t=new Map,maxAge:i}={}){if(i===0)return n;if(typeof i=="number"&&Number.isFinite(i)){if(i>Hu)throw new TypeError(`The \`maxAge\` option cannot exceed ${Hu}.`);if(i<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const o=function(...l){var w;const h=e?e(l):l[0],f=BP(t,h);if(f)return f.data;const g=n.apply(this,l),y=typeof i=="function"?i(...l):i;if(y!==void 0&&y!==Number.POSITIVE_INFINITY){if(!Number.isFinite(y))throw new TypeError("The `maxAge` function must return a finite number, `0`, or `Infinity`.");if(y<=0)return g;if(y>Hu)throw new TypeError(`The \`maxAge\` function result cannot exceed ${Hu}.`)}if(t.set(h,{data:g,maxAge:y===void 0||y===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:Date.now()+y}),y!==void 0&&y!==Number.POSITIVE_INFINITY){const E=setTimeout(()=>{var D;t.delete(h),(D=Gd.get(o))==null||D.delete(E)},y);(w=E.unref)==null||w.call(E);const I=Gd.get(o)??new Set;I.add(E),Gd.set(o,I)}return g};return jP(o,n,{ignoreNonConfigurable:!0}),UP.set(o,t),zP.set(o,e??(l=>l[0])),o}function $P(n){return typeof n=="string"}function WP(n,e,t){return t.indexOf(n)===e}function HP(n){return n.toLowerCase()===n}function Vv(n){return n.indexOf(",")===-1?n:n.split(",")}function If(n){if(!n)return n;if(n==="C"||n==="posix"||n==="POSIX")return"en-US";if(n.indexOf(".")!==-1){var e=n.split(".")[0],t=e===void 0?"":e;return If(t)}if(n.indexOf("@")!==-1){var i=n.split("@")[0],t=i===void 0?"":i;return If(t)}if(n.indexOf("-")===-1||!HP(n))return n;var o=n.split("-"),l=o[0],h=o[1],f=h===void 0?"":h;return"".concat(l,"-").concat(f.toUpperCase())}function qP(n){var e=n===void 0?{}:n,t=e.useFallbackLocale,i=t===void 0?!0:t,o=e.fallbackLocale,l=o===void 0?"en-US":o,h=[];if(typeof navigator<"u"){for(var f=navigator.languages||[],g=[],y=0,w=f;y<w.length;y++){var E=w[y];g=g.concat(Vv(E))}var I=navigator.language,D=I&&Vv(I);h=h.concat(g,D)}return i&&h.push(l),h.filter($P).map(If).filter(WP)}var GP=PE(qP,{cacheKey:JSON.stringify});function KP(n){return GP(n)[0]||null}var RE=PE(KP,{cacheKey:JSON.stringify});function mi(n,e,t){return function(o,l=t){const h=n(o)+l;return e(h)}}function xl(n){return function(t){return new Date(n(t).getTime()-1)}}function Ol(n,e){return function(i){return[n(i),e(i)]}}function lt(n){if(n instanceof Date)return n.getFullYear();if(typeof n=="number")return n;const e=Number.parseInt(n,10);if(typeof n=="string"&&!Number.isNaN(e))return e;throw new Error(`Failed to get year from date: ${n}.`)}function as(n){if(n instanceof Date)return n.getMonth();throw new Error(`Failed to get month from date: ${n}.`)}function Xc(n){if(n instanceof Date)return n.getDate();throw new Error(`Failed to get year from date: ${n}.`)}function la(n){const e=lt(n),t=e+(-e+1)%100,i=new Date;return i.setFullYear(t,0,1),i.setHours(0,0,0,0),i}const YP=mi(lt,la,-100),DE=mi(lt,la,100),Dp=xl(DE),QP=mi(lt,Dp,-100),NE=Ol(la,Dp);function ls(n){const e=lt(n),t=e+(-e+1)%10,i=new Date;return i.setFullYear(t,0,1),i.setHours(0,0,0,0),i}const xE=mi(lt,ls,-10),Np=mi(lt,ls,10),Jc=xl(Np),OE=mi(lt,Jc,-10),bE=Ol(ls,Jc);function ua(n){const e=lt(n),t=new Date;return t.setFullYear(e,0,1),t.setHours(0,0,0,0),t}const VE=mi(lt,ua,-1),xp=mi(lt,ua,1),Zc=xl(xp),LE=mi(lt,Zc,-1),XP=Ol(ua,Zc);function Op(n,e){return function(i,o=e){const l=lt(i),h=as(i)+o,f=new Date;return f.setFullYear(l,h,1),f.setHours(0,0,0,0),n(f)}}function Xs(n){const e=lt(n),t=as(n),i=new Date;return i.setFullYear(e,t,1),i.setHours(0,0,0,0),i}const ME=Op(Xs,-1),bp=Op(Xs,1),bl=xl(bp),FE=Op(bl,-1),JP=Ol(Xs,bl);function ZP(n,e){return function(i,o=e){const l=lt(i),h=as(i),f=Xc(i)+o,g=new Date;return g.setFullYear(l,h,f),g.setHours(0,0,0,0),n(g)}}function Vl(n){const e=lt(n),t=as(n),i=Xc(n),o=new Date;return o.setFullYear(e,t,i),o.setHours(0,0,0,0),o}const eR=ZP(Vl,1),Vp=xl(eR),tR=Ol(Vl,Vp);function jE(n){return Xc(bl(n))}var Ht={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},nR={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Lp=[0,1,2,3,4,5,6],Kd=new Map;function rR(n){return function(t,i){var o=t||RE();Kd.has(o)||Kd.set(o,new Map);var l=Kd.get(o);return l.has(n)||l.set(n,new Intl.DateTimeFormat(o||void 0,n).format),l.get(n)(i)}}function iR(n){var e=new Date(n);return new Date(e.setHours(12))}function Js(n){return function(e,t){return rR(n)(e,iR(t))}}var sR={day:"numeric"},oR={day:"numeric",month:"long",year:"numeric"},aR={month:"long"},lR={month:"long",year:"numeric"},uR={weekday:"short"},cR={weekday:"long"},hR={year:"numeric"},dR=Js(sR),fR=Js(oR),pR=Js(aR),UE=Js(lR),mR=Js(uR),gR=Js(cR),eh=Js(hR),yR=Lp[0],vR=Lp[5],Lv=Lp[6];function wl(n,e){e===void 0&&(e=Ht.ISO_8601);var t=n.getDay();switch(e){case Ht.ISO_8601:return(t+6)%7;case Ht.ISLAMIC:return(t+1)%7;case Ht.HEBREW:case Ht.GREGORY:return t;default:throw new Error("Unsupported calendar type.")}}function _R(n){var e=la(n);return lt(e)}function wR(n){var e=ls(n);return lt(e)}function Af(n,e){e===void 0&&(e=Ht.ISO_8601);var t=lt(n),i=as(n),o=n.getDate()-wl(n,e);return new Date(t,i,o)}function ER(n,e){e===void 0&&(e=Ht.ISO_8601);var t=e===Ht.GREGORY?Ht.GREGORY:Ht.ISO_8601,i=Af(n,e),o=lt(n)+1,l,h;do l=new Date(o,0,t===Ht.ISO_8601?4:1),h=Af(l,e),o-=1;while(n<h);return Math.round((i.getTime()-h.getTime())/(864e5*7))+1}function zs(n,e){switch(n){case"century":return la(e);case"decade":return ls(e);case"year":return ua(e);case"month":return Xs(e);case"day":return Vl(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function TR(n,e){switch(n){case"century":return YP(e);case"decade":return xE(e);case"year":return VE(e);case"month":return ME(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function zE(n,e){switch(n){case"century":return DE(e);case"decade":return Np(e);case"year":return xp(e);case"month":return bp(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function SR(n,e){switch(n){case"decade":return xE(e,-100);case"year":return VE(e,-10);case"month":return ME(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function IR(n,e){switch(n){case"decade":return Np(e,100);case"year":return xp(e,10);case"month":return bp(e,12);default:throw new Error("Invalid rangeType: ".concat(n))}}function BE(n,e){switch(n){case"century":return Dp(e);case"decade":return Jc(e);case"year":return Zc(e);case"month":return bl(e);case"day":return Vp(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function AR(n,e){switch(n){case"century":return QP(e);case"decade":return OE(e);case"year":return LE(e);case"month":return FE(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function CR(n,e){switch(n){case"decade":return OE(e,-100);case"year":return LE(e,-10);case"month":return FE(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function Mv(n,e){switch(n){case"century":return NE(e);case"decade":return bE(e);case"year":return XP(e);case"month":return JP(e);case"day":return tR(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function kR(n,e,t){var i=[e,t].sort(function(o,l){return o.getTime()-l.getTime()});return[zs(n,i[0]),BE(n,i[1])]}function $E(n,e,t){return t.map(function(i){return(e||eh)(n,i)}).join("  ")}function PR(n,e,t){return $E(n,e,NE(t))}function WE(n,e,t){return $E(n,e,bE(t))}function RR(n){return n.getDay()===new Date().getDay()}function HE(n,e){e===void 0&&(e=Ht.ISO_8601);var t=n.getDay();switch(e){case Ht.ISLAMIC:case Ht.HEBREW:return t===vR||t===Lv;case Ht.ISO_8601:case Ht.GREGORY:return t===Lv||t===yR;default:throw new Error("Unsupported calendar type.")}}var Rr="react-calendar__navigation";function DR(n){var e=n.activeStartDate,t=n.drillUp,i=n.formatMonthYear,o=i===void 0?UE:i,l=n.formatYear,h=l===void 0?eh:l,f=n.locale,g=n.maxDate,y=n.minDate,w=n.navigationAriaLabel,E=w===void 0?"":w,I=n.navigationAriaLive,D=n.navigationLabel,$=n.next2AriaLabel,W=$===void 0?"":$,U=n.next2Label,X=U===void 0?"":U,re=n.nextAriaLabel,de=re===void 0?"":re,ie=n.nextLabel,Oe=ie===void 0?"":ie,ve=n.prev2AriaLabel,R=ve===void 0?"":ve,S=n.prev2Label,P=S===void 0?"":S,N=n.prevAriaLabel,x=N===void 0?"":N,V=n.prevLabel,C=V===void 0?"":V,be=n.setActiveStartDate,Le=n.showDoubleView,We=n.view,ze=n.views,te=ze.indexOf(We)>0,ue=We!=="century",ee=TR(We,e),L=ue?SR(We,e):void 0,H=zE(We,e),Se=ue?IR(We,e):void 0,Te=(function(){if(ee.getFullYear()<0)return!0;var Qe=AR(We,e);return y&&y>=Qe})(),Ne=ue&&(function(){if(L.getFullYear()<0)return!0;var Qe=CR(We,e);return y&&y>=Qe})(),J=g&&g<H,ge=ue&&g&&g<Se;function he(){be(ee,"prev")}function le(){be(L,"prev2")}function Ae(){be(H,"next")}function gt(){be(Se,"next2")}function bt(Qe){var ar=(function(){switch(We){case"century":return PR(f,h,Qe);case"decade":return WE(f,h,Qe);case"year":return h(f,Qe);case"month":return o(f,Qe);default:throw new Error("Invalid view: ".concat(We,"."))}})();return D?D({date:Qe,label:ar,locale:f||RE()||void 0,view:We}):ar}function Ct(){var Qe="".concat(Rr,"__label");return A.jsxs("button",{"aria-label":E,"aria-live":I,className:Qe,disabled:!te,onClick:t,style:{flexGrow:1},type:"button",children:[A.jsx("span",{className:"".concat(Qe,"__labelText ").concat(Qe,"__labelText--from"),children:bt(e)}),Le?A.jsxs(A.Fragment,{children:[A.jsx("span",{className:"".concat(Qe,"__divider"),children:"  "}),A.jsx("span",{className:"".concat(Qe,"__labelText ").concat(Qe,"__labelText--to"),children:bt(H)})]}):null]})}return A.jsxs("div",{className:Rr,children:[P!==null&&ue?A.jsx("button",{"aria-label":R,className:"".concat(Rr,"__arrow ").concat(Rr,"__prev2-button"),disabled:Ne,onClick:le,type:"button",children:P}):null,C!==null&&A.jsx("button",{"aria-label":x,className:"".concat(Rr,"__arrow ").concat(Rr,"__prev-button"),disabled:Te,onClick:he,type:"button",children:C}),Ct(),Oe!==null&&A.jsx("button",{"aria-label":de,className:"".concat(Rr,"__arrow ").concat(Rr,"__next-button"),disabled:J,onClick:Ae,type:"button",children:Oe}),X!==null&&ue?A.jsx("button",{"aria-label":W,className:"".concat(Rr,"__arrow ").concat(Rr,"__next2-button"),disabled:ge,onClick:gt,type:"button",children:X}):null]})}var jo=function(){return jo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},jo.apply(this,arguments)},NR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function Fv(n){return"".concat(n,"%")}function Mp(n){var e=n.children,t=n.className,i=n.count,o=n.direction,l=n.offset,h=n.style,f=n.wrap,g=NR(n,["children","className","count","direction","offset","style","wrap"]);return A.jsx("div",jo({className:t,style:jo({display:"flex",flexDirection:o,flexWrap:f?"wrap":"nowrap"},h)},g,{children:se.Children.map(e,function(y,w){var E=l&&w===0?Fv(100*l/i):null;return se.cloneElement(y,jo(jo({},y.props),{style:{flexBasis:Fv(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:E,marginInlineStart:E,marginInlineEnd:0}}))})}))}function xR(n,e,t){return e&&e>n?e:t&&t<n?t:n}function El(n,e){return e[0]<=n&&e[1]>=n}function OR(n,e){return n[0]<=e[0]&&n[1]>=e[1]}function qE(n,e){return El(n[0],e)||El(n[1],e)}function jv(n,e,t){var i=qE(e,n),o=[];if(i){o.push(t);var l=El(n[0],e),h=El(n[1],e);l&&o.push("".concat(t,"Start")),h&&o.push("".concat(t,"End")),l&&h&&o.push("".concat(t,"BothEnds"))}return o}function bR(n){return Array.isArray(n)?n[0]!==null&&n[1]!==null:n!==null}function VR(n){if(!n)throw new Error("args is required");var e=n.value,t=n.date,i=n.hover,o="react-calendar__tile",l=[o];if(!t)return l;var h=new Date,f=(function(){if(Array.isArray(t))return t;var D=n.dateType;if(!D)throw new Error("dateType is required when date is not an array of two dates");return Mv(D,t)})();if(El(h,f)&&l.push("".concat(o,"--now")),!e||!bR(e))return l;var g=(function(){if(Array.isArray(e))return e;var D=n.valueType;if(!D)throw new Error("valueType is required when value is not an array of two dates");return Mv(D,e)})();OR(g,f)?l.push("".concat(o,"--active")):qE(g,f)&&l.push("".concat(o,"--hasActive"));var y=jv(g,f,"".concat(o,"--range"));l.push.apply(l,y);var w=Array.isArray(e)?e:[e];if(i&&w.length===1){var E=i>g[0]?[g[0],i]:[i,g[0]],I=jv(E,f,"".concat(o,"--hover"));l.push.apply(l,I)}return l}function th(n){for(var e=n.className,t=n.count,i=t===void 0?3:t,o=n.dateTransform,l=n.dateType,h=n.end,f=n.hover,g=n.offset,y=n.renderTile,w=n.start,E=n.step,I=E===void 0?1:E,D=n.value,$=n.valueType,W=[],U=w;U<=h;U+=I){var X=o(U);W.push(y({classes:VR({date:X,dateType:l,hover:f,value:D,valueType:$}),date:X}))}return A.jsx(Mp,{className:e,count:i,offset:g,wrap:!0,children:W})}function nh(n){var e=n.activeStartDate,t=n.children,i=n.classes,o=n.date,l=n.formatAbbr,h=n.locale,f=n.maxDate,g=n.maxDateTransform,y=n.minDate,w=n.minDateTransform,E=n.onClick,I=n.onMouseOver,D=n.style,$=n.tileClassName,W=n.tileContent,U=n.tileDisabled,X=n.view,re=se.useMemo(function(){var ie={activeStartDate:e,date:o,view:X};return typeof $=="function"?$(ie):$},[e,o,$,X]),de=se.useMemo(function(){var ie={activeStartDate:e,date:o,view:X};return typeof W=="function"?W(ie):W},[e,o,W,X]);return A.jsxs("button",{className:Qc(i,re),disabled:y&&w(y)>o||f&&g(f)<o||(U==null?void 0:U({activeStartDate:e,date:o,view:X})),onClick:E?function(ie){return E(o,ie)}:void 0,onFocus:I?function(){return I(o)}:void 0,onMouseOver:I?function(){return I(o)}:void 0,style:D,type:"button",children:[l?A.jsx("abbr",{"aria-label":l(h,o),children:t}):t,de]})}var Cf=function(){return Cf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Cf.apply(this,arguments)},LR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Uv="react-calendar__century-view__decades__decade";function MR(n){var e=n.classes,t=e===void 0?[]:e,i=n.currentCentury,o=n.formatYear,l=o===void 0?eh:o,h=LR(n,["classes","currentCentury","formatYear"]),f=h.date,g=h.locale,y=[];return t&&y.push.apply(y,t),y.push(Uv),la(f).getFullYear()!==i&&y.push("".concat(Uv,"--neighboringCentury")),A.jsx(nh,Cf({},h,{classes:y,maxDateTransform:Jc,minDateTransform:ls,view:"century",children:WE(g,l,f)}))}var kf=function(){return kf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},kf.apply(this,arguments)},zv=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function FR(n){var e=n.activeStartDate,t=n.hover,i=n.showNeighboringCentury,o=n.value,l=n.valueType,h=zv(n,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),f=_R(e),g=f+(i?119:99);return A.jsx(th,{className:"react-calendar__century-view__decades",dateTransform:ls,dateType:"decade",end:g,hover:t,renderTile:function(y){var w=y.date,E=zv(y,["date"]);return A.jsx(MR,kf({},h,E,{activeStartDate:e,currentCentury:f,date:w}),w.getTime())},start:f,step:10,value:o,valueType:l})}var Pf=function(){return Pf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Pf.apply(this,arguments)};function jR(n){function e(){return A.jsx(FR,Pf({},n))}return A.jsx("div",{className:"react-calendar__century-view",children:e()})}var Rf=function(){return Rf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Rf.apply(this,arguments)},UR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Bv="react-calendar__decade-view__years__year";function zR(n){var e=n.classes,t=e===void 0?[]:e,i=n.currentDecade,o=n.formatYear,l=o===void 0?eh:o,h=UR(n,["classes","currentDecade","formatYear"]),f=h.date,g=h.locale,y=[];return t&&y.push.apply(y,t),y.push(Bv),ls(f).getFullYear()!==i&&y.push("".concat(Bv,"--neighboringDecade")),A.jsx(nh,Rf({},h,{classes:y,maxDateTransform:Zc,minDateTransform:ua,view:"decade",children:l(g,f)}))}var Df=function(){return Df=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Df.apply(this,arguments)},$v=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function BR(n){var e=n.activeStartDate,t=n.hover,i=n.showNeighboringDecade,o=n.value,l=n.valueType,h=$v(n,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),f=wR(e),g=f+(i?11:9);return A.jsx(th,{className:"react-calendar__decade-view__years",dateTransform:ua,dateType:"year",end:g,hover:t,renderTile:function(y){var w=y.date,E=$v(y,["date"]);return A.jsx(zR,Df({},h,E,{activeStartDate:e,currentDecade:f,date:w}),w.getTime())},start:f,value:o,valueType:l})}var Nf=function(){return Nf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Nf.apply(this,arguments)};function $R(n){function e(){return A.jsx(BR,Nf({},n))}return A.jsx("div",{className:"react-calendar__decade-view",children:e()})}var xf=function(){return xf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},xf.apply(this,arguments)},WR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Wv=function(n,e,t){if(t||arguments.length===2)for(var i=0,o=e.length,l;i<o;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return n.concat(l||Array.prototype.slice.call(e))},HR="react-calendar__year-view__months__month";function qR(n){var e=n.classes,t=e===void 0?[]:e,i=n.formatMonth,o=i===void 0?pR:i,l=n.formatMonthYear,h=l===void 0?UE:l,f=WR(n,["classes","formatMonth","formatMonthYear"]),g=f.date,y=f.locale;return A.jsx(nh,xf({},f,{classes:Wv(Wv([],t,!0),[HR],!1),formatAbbr:h,maxDateTransform:bl,minDateTransform:Xs,view:"year",children:o(y,g)}))}var Of=function(){return Of=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Of.apply(this,arguments)},Hv=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function GR(n){var e=n.activeStartDate,t=n.hover,i=n.value,o=n.valueType,l=Hv(n,["activeStartDate","hover","value","valueType"]),h=0,f=11,g=lt(e);return A.jsx(th,{className:"react-calendar__year-view__months",dateTransform:function(y){var w=new Date;return w.setFullYear(g,y,1),Xs(w)},dateType:"month",end:f,hover:t,renderTile:function(y){var w=y.date,E=Hv(y,["date"]);return A.jsx(qR,Of({},l,E,{activeStartDate:e,date:w}),w.getTime())},start:h,value:i,valueType:o})}var bf=function(){return bf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},bf.apply(this,arguments)};function KR(n){function e(){return A.jsx(GR,bf({},n))}return A.jsx("div",{className:"react-calendar__year-view",children:e()})}var Vf=function(){return Vf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Vf.apply(this,arguments)},YR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Yd="react-calendar__month-view__days__day";function QR(n){var e=n.calendarType,t=n.classes,i=t===void 0?[]:t,o=n.currentMonthIndex,l=n.formatDay,h=l===void 0?dR:l,f=n.formatLongDate,g=f===void 0?fR:f,y=YR(n,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),w=y.date,E=y.locale,I=[];return i&&I.push.apply(I,i),I.push(Yd),HE(w,e)&&I.push("".concat(Yd,"--weekend")),w.getMonth()!==o&&I.push("".concat(Yd,"--neighboringMonth")),A.jsx(nh,Vf({},y,{classes:I,formatAbbr:g,maxDateTransform:Vp,minDateTransform:Vl,view:"month",children:h(E,w)}))}var Lf=function(){return Lf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Lf.apply(this,arguments)},qv=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function XR(n){var e=n.activeStartDate,t=n.calendarType,i=n.hover,o=n.showFixedNumberOfWeeks,l=n.showNeighboringMonth,h=n.value,f=n.valueType,g=qv(n,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),y=lt(e),w=as(e),E=o||l,I=wl(e,t),D=E?0:I,$=(E?-I:0)+1,W=(function(){if(o)return $+42-1;var U=jE(e);if(l){var X=new Date;X.setFullYear(y,w,U),X.setHours(0,0,0,0);var re=7-wl(X,t)-1;return U+re}return U})();return A.jsx(th,{className:"react-calendar__month-view__days",count:7,dateTransform:function(U){var X=new Date;return X.setFullYear(y,w,U),Vl(X)},dateType:"day",hover:i,end:W,renderTile:function(U){var X=U.date,re=qv(U,["date"]);return A.jsx(QR,Lf({},g,re,{activeStartDate:e,calendarType:t,currentMonthIndex:w,date:X}),X.getTime())},offset:D,start:$,value:h,valueType:f})}var GE="react-calendar__month-view__weekdays",Qd="".concat(GE,"__weekday");function JR(n){for(var e=n.calendarType,t=n.formatShortWeekday,i=t===void 0?mR:t,o=n.formatWeekday,l=o===void 0?gR:o,h=n.locale,f=n.onMouseLeave,g=new Date,y=Xs(g),w=lt(y),E=as(y),I=[],D=1;D<=7;D+=1){var $=new Date(w,E,D-wl(y,e)),W=l(h,$);I.push(A.jsx("div",{className:Qc(Qd,RR($)&&"".concat(Qd,"--current"),HE($,e)&&"".concat(Qd,"--weekend")),children:A.jsx("abbr",{"aria-label":W,title:W,children:i(h,$).replace(".","")})},D))}return A.jsx(Mp,{className:GE,count:7,onFocus:f,onMouseOver:f,children:I})}var Rc=function(){return Rc=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Rc.apply(this,arguments)},Gv=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Kv="react-calendar__tile";function ZR(n){var e=n.onClickWeekNumber,t=n.weekNumber,i=A.jsx("span",{children:t});if(e){var o=n.date,l=n.onClickWeekNumber,h=n.weekNumber,f=Gv(n,["date","onClickWeekNumber","weekNumber"]);return A.jsx("button",Rc({},f,{className:Kv,onClick:function(g){return l(h,o,g)},type:"button",children:i}))}else{n.date,n.onClickWeekNumber,n.weekNumber;var f=Gv(n,["date","onClickWeekNumber","weekNumber"]);return A.jsx("div",Rc({},f,{className:Kv,children:i}))}}function eD(n){var e=n.activeStartDate,t=n.calendarType,i=n.onClickWeekNumber,o=n.onMouseLeave,l=n.showFixedNumberOfWeeks,h=(function(){if(l)return 6;var y=jE(e),w=wl(e,t),E=y-(7-w);return 1+Math.ceil(E/7)})(),f=(function(){for(var y=lt(e),w=as(e),E=Xc(e),I=[],D=0;D<h;D+=1)I.push(Af(new Date(y,w,E+D*7),t));return I})(),g=f.map(function(y){return ER(y,t)});return A.jsx(Mp,{className:"react-calendar__month-view__weekNumbers",count:h,direction:"column",onFocus:o,onMouseOver:o,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:g.map(function(y,w){var E=f[w];if(!E)throw new Error("date is not defined");return A.jsx(ZR,{date:E,onClickWeekNumber:i,weekNumber:y},y)})})}var Mf=function(){return Mf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Mf.apply(this,arguments)},tD=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function nD(n){if(n)for(var e=0,t=Object.entries(nR);e<t.length;e++){var i=t[e],o=i[0],l=i[1];if(l.includes(n))return o}return Ht.ISO_8601}function rD(n){var e=n.activeStartDate,t=n.locale,i=n.onMouseLeave,o=n.showFixedNumberOfWeeks,l=n.calendarType,h=l===void 0?nD(t):l,f=n.formatShortWeekday,g=n.formatWeekday,y=n.onClickWeekNumber,w=n.showWeekNumbers,E=tD(n,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function I(){return A.jsx(JR,{calendarType:h,formatShortWeekday:f,formatWeekday:g,locale:t,onMouseLeave:i})}function D(){return w?A.jsx(eD,{activeStartDate:e,calendarType:h,onClickWeekNumber:y,onMouseLeave:i,showFixedNumberOfWeeks:o}):null}function $(){return A.jsx(XR,Mf({calendarType:h},E))}var W="react-calendar__month-view";return A.jsx("div",{className:Qc(W,w?"".concat(W,"--weekNumbers"):""),children:A.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[D(),A.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[I(),$()]})]})})}var Uo=function(){return Uo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Uo.apply(this,arguments)},qu="react-calendar",oc=["century","decade","year","month"],iD=["decade","year","month","day"],Fp=new Date;Fp.setFullYear(1,0,1);Fp.setHours(0,0,0,0);var sD=new Date(864e13);function rl(n){return n instanceof Date?n:new Date(n)}function KE(n,e){return oc.slice(oc.indexOf(n),oc.indexOf(e)+1)}function oD(n,e,t){var i=KE(e,t);return i.indexOf(n)!==-1}function jp(n,e,t){return n&&oD(n,e,t)?n:t}function YE(n){var e=oc.indexOf(n);return iD[e]}function aD(n,e){var t=Array.isArray(n)?n[e]:n;if(!t)return null;var i=rl(t);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(n));return i}function QE(n,e){var t=n.value,i=n.minDate,o=n.maxDate,l=n.maxDetail,h=aD(t,e);if(!h)return null;var f=YE(l),g=(function(){switch(e){case 0:return zs(f,h);case 1:return BE(f,h);default:throw new Error("Invalid index value: ".concat(e))}})();return xR(g,i,o)}var Up=function(n){return QE(n,0)},XE=function(n){return QE(n,1)},lD=function(n){return[Up,XE].map(function(e){return e(n)})};function JE(n){var e=n.maxDate,t=n.maxDetail,i=n.minDate,o=n.minDetail,l=n.value,h=n.view,f=jp(h,o,t),g=Up({value:l,minDate:i,maxDate:e,maxDetail:t})||new Date;return zs(f,g)}function uD(n){var e=n.activeStartDate,t=n.defaultActiveStartDate,i=n.defaultValue,o=n.defaultView,l=n.maxDate,h=n.maxDetail,f=n.minDate,g=n.minDetail,y=n.value,w=n.view,E=jp(w,g,h),I=e||t;return I?zs(E,I):JE({maxDate:l,maxDetail:h,minDate:f,minDetail:g,value:y||i,view:w||o})}function Xd(n){return n&&(!Array.isArray(n)||n.length===1)}function Gu(n,e){return n instanceof Date&&e instanceof Date&&n.getTime()===e.getTime()}var cD=se.forwardRef(function(e,t){var i=e.activeStartDate,o=e.allowPartialRange,l=e.calendarType,h=e.className,f=e.defaultActiveStartDate,g=e.defaultValue,y=e.defaultView,w=e.formatDay,E=e.formatLongDate,I=e.formatMonth,D=e.formatMonthYear,$=e.formatShortWeekday,W=e.formatWeekday,U=e.formatYear,X=e.goToRangeStartOnSelect,re=X===void 0?!0:X,de=e.inputRef,ie=e.locale,Oe=e.maxDate,ve=Oe===void 0?sD:Oe,R=e.maxDetail,S=R===void 0?"month":R,P=e.minDate,N=P===void 0?Fp:P,x=e.minDetail,V=x===void 0?"century":x,C=e.navigationAriaLabel,be=e.navigationAriaLive,Le=e.navigationLabel,We=e.next2AriaLabel,ze=e.next2Label,te=e.nextAriaLabel,ue=e.nextLabel,ee=e.onActiveStartDateChange,L=e.onChange,H=e.onClickDay,Se=e.onClickDecade,Te=e.onClickMonth,Ne=e.onClickWeekNumber,J=e.onClickYear,ge=e.onDrillDown,he=e.onDrillUp,le=e.onViewChange,Ae=e.prev2AriaLabel,gt=e.prev2Label,bt=e.prevAriaLabel,Ct=e.prevLabel,Qe=e.returnValue,ar=Qe===void 0?"start":Qe,kt=e.selectRange,On=e.showDoubleView,gi=e.showFixedNumberOfWeeks,ut=e.showNavigation,ct=ut===void 0?!0:ut,vn=e.showNeighboringCentury,us=e.showNeighboringDecade,yi=e.showNeighboringMonth,Zs=yi===void 0?!0:yi,lr=e.showWeekNumbers,cs=e.tileClassName,vi=e.tileContent,ur=e.tileDisabled,_i=e.value,cr=e.view,Gn=se.useState(f),eo=Gn[0],_n=Gn[1],Ur=se.useState(null),hs=Ur[0],an=Ur[1],zr=se.useState(Array.isArray(g)?g.map(function(xe){return xe!==null?rl(xe):null}):g!=null?rl(g):null),bn=zr[0],wi=zr[1],Vn=se.useState(y),Kn=Vn[0],tt=Vn[1],Et=i||eo||uD({activeStartDate:i,defaultActiveStartDate:f,defaultValue:g,defaultView:y,maxDate:ve,maxDetail:S,minDate:N,minDetail:V,value:_i,view:cr}),ht=(function(){var xe=(function(){return kt&&Xd(bn)?bn:_i!==void 0?_i:bn})();return xe?Array.isArray(xe)?xe.map(function(Je){return Je!==null?rl(Je):null}):xe!==null?rl(xe):null:null})(),wn=YE(S),Xe=jp(cr||Kn,V,S),rn=KE(V,S),Ln=kt?hs:null,Ei=rn.indexOf(Xe)<rn.length-1,hr=rn.indexOf(Xe)>0,Yn=se.useCallback(function(xe){var Je=(function(){switch(ar){case"start":return Up;case"end":return XE;case"range":return lD;default:throw new Error("Invalid returnValue.")}})();return Je({maxDate:ve,maxDetail:S,minDate:N,value:xe})},[ve,S,N,ar]),Mn=se.useCallback(function(xe,Je){_n(xe);var nt={action:Je,activeStartDate:xe,value:ht,view:Xe};ee&&!Gu(Et,xe)&&ee(nt)},[Et,ee,ht,Xe]),Br=se.useCallback(function(xe,Je){var nt=(function(){switch(Xe){case"century":return Se;case"decade":return J;case"year":return Te;case"month":return H;default:throw new Error("Invalid view: ".concat(Xe,"."))}})();nt&&nt(xe,Je)},[H,Se,Te,J,Xe]),En=se.useCallback(function(xe,Je){if(Ei){Br(xe,Je);var nt=rn[rn.indexOf(Xe)+1];if(!nt)throw new Error("Attempted to drill down from the lowest view.");_n(xe),tt(nt);var Gt={action:"drillDown",activeStartDate:xe,value:ht,view:nt};ee&&!Gu(Et,xe)&&ee(Gt),le&&Xe!==nt&&le(Gt),ge&&ge(Gt)}},[Et,Ei,ee,Br,ge,le,ht,Xe,rn]),ln=se.useCallback(function(){if(hr){var xe=rn[rn.indexOf(Xe)-1];if(!xe)throw new Error("Attempted to drill up from the highest view.");var Je=zs(xe,Et);_n(Je),tt(xe);var nt={action:"drillUp",activeStartDate:Je,value:ht,view:xe};ee&&!Gu(Et,Je)&&ee(nt),le&&Xe!==xe&&le(nt),he&&he(nt)}},[Et,hr,ee,he,le,ht,Xe,rn]),dr=se.useCallback(function(xe,Je){var nt=ht;Br(xe,Je);var Gt=kt&&!Xd(nt),Pt;if(kt)if(Gt)Pt=zs(wn,xe);else{if(!nt)throw new Error("previousValue is required");if(Array.isArray(nt))throw new Error("previousValue must not be an array");Pt=kR(wn,nt,xe)}else Pt=Yn(xe);var $r=!kt||Gt||re?JE({maxDate:ve,maxDetail:S,minDate:N,minDetail:V,value:Pt,view:Xe}):null;Je.persist(),_n($r),wi(Pt);var Si={action:"onChange",activeStartDate:$r,value:Pt,view:Xe};if(ee&&!Gu(Et,$r)&&ee(Si),L)if(kt){var Wr=Xd(Pt);if(!Wr)L(Pt||null,Je);else if(o){if(Array.isArray(Pt))throw new Error("value must not be an array");L([Pt||null,null],Je)}}else L(Pt||null,Je)},[Et,o,Yn,re,ve,S,N,V,ee,L,Br,kt,ht,wn,Xe]);function un(xe){an(xe)}function Ti(){an(null)}se.useImperativeHandle(t,function(){return{activeStartDate:Et,drillDown:En,drillUp:ln,onChange:dr,setActiveStartDate:Mn,value:ht,view:Xe}},[Et,En,ln,dr,Mn,ht,Xe]);function ds(xe){var Je=xe?zE(Xe,Et):zs(Xe,Et),nt=Ei?En:dr,Gt={activeStartDate:Je,hover:Ln,locale:ie,maxDate:ve,minDate:N,onClick:nt,onMouseOver:kt?un:void 0,tileClassName:cs,tileContent:vi,tileDisabled:ur,value:ht,valueType:wn};switch(Xe){case"century":return A.jsx(jR,Uo({formatYear:U,showNeighboringCentury:vn},Gt));case"decade":return A.jsx($R,Uo({formatYear:U,showNeighboringDecade:us},Gt));case"year":return A.jsx(KR,Uo({formatMonth:I,formatMonthYear:D},Gt));case"month":return A.jsx(rD,Uo({calendarType:l,formatDay:w,formatLongDate:E,formatShortWeekday:$,formatWeekday:W,onClickWeekNumber:Ne,onMouseLeave:kt?Ti:void 0,showFixedNumberOfWeeks:typeof gi<"u"?gi:On,showNeighboringMonth:Zs,showWeekNumbers:lr},Gt));default:throw new Error("Invalid view: ".concat(Xe,"."))}}function fs(){return ct?A.jsx(DR,{activeStartDate:Et,drillUp:ln,formatMonthYear:D,formatYear:U,locale:ie,maxDate:ve,minDate:N,navigationAriaLabel:C,navigationAriaLive:be,navigationLabel:Le,next2AriaLabel:We,next2Label:ze,nextAriaLabel:te,nextLabel:ue,prev2AriaLabel:Ae,prev2Label:gt,prevAriaLabel:bt,prevLabel:Ct,setActiveStartDate:Mn,showDoubleView:On,view:Xe,views:rn}):null}var Tn=Array.isArray(ht)?ht:[ht];return A.jsxs("div",{className:Qc(qu,kt&&Tn.length===1&&"".concat(qu,"--selectRange"),On&&"".concat(qu,"--doubleView"),h),ref:de,children:[fs(),A.jsxs("div",{className:"".concat(qu,"__viewContainer"),onBlur:kt?Ti:void 0,onMouseLeave:kt?Ti:void 0,children:[ds(),On?ds(!0):null]})]})}),zo=(n=>(n.REGULAR="regular",n.RDO="rdo",n.HOLIDAY="holiday",n.PLANNED_VACATION="planned_vacation",n.WEEKEND="weekend",n))(zo||{});const hD=(n,e,t,i,o,l)=>{const h=new Map;console.log("mapWeeklyBalancesToDays - Total weekly balances:",n.length),n.length>0&&console.log("First 3 weekly balances:",n.slice(0,3).map(g=>({weekEndDate:g.weekEndDate,endingBalance:g.endingBalance})));const f=Jv(o,l);for(const g of f){const y=yn(g),w=[];e_(g)&&w.push(zo.WEEKEND);const E=TT(g,i);E&&w.push(zo.RDO);const I=t.find(U=>U.date===y);I&&w.push(zo.HOLIDAY);const D=e.find(U=>{const X=qe(U.startDate),re=qe(U.endDate);return Ku(g,X,re)});D&&w.push(zo.PLANNED_VACATION);let $,W;if(g.getDay()===0){const U=n.find(X=>{const re=qe(X.weekEndDate),de=yn(re)===y;return y==="2026-01-04"&&console.log("Debug for 2026-01-04:",{weekEndDate:X.weekEndDate,parsedWeekEndDate:re,formattedWeekEndDate:yn(re),dateKey:y,match:de}),de});$=U==null?void 0:U.endingBalance,W=U==null?void 0:U.accrued,y==="2026-01-04"&&console.log("Found balance for 2026-01-04:",$,"weekBalance:",U)}h.set(y,{date:g,types:w,hours:Uf(g,i),vacationHours:D?zf(D,i,t):void 0,balance:$,accrualRate:W,isInVacation:!!D,vacationId:D==null?void 0:D.id,isHoliday:!!I,holidayName:I==null?void 0:I.name,isRDO:E,isPersonalDayStart:(D==null?void 0:D.personalDayUsed)&&yn(qe(D.startDate))===y})}return h},dD=({dayInfo:n,isInSelectionRange:e,isSelectionStart:t,isSelectionEnd:i})=>n?(n.date.getDay()===0&&console.log("Sunday:",n.date.toISOString().split("T")[0],"balance:",n.balance),A.jsxs("div",{className:"calendar-tile-content",children:[A.jsxs("div",{className:"day-indicators",children:[n.isPersonalDayStart&&A.jsx("span",{className:"indicator personal-day",title:"Personal Day Applied",children:"P"}),n.isInVacation&&A.jsx("span",{className:"indicator vacation",title:"Planned Vacation",children:"V"}),n.isHoliday&&A.jsx("span",{className:"indicator holiday",title:n.holidayName,children:"H"}),n.isRDO&&A.jsx("span",{className:"indicator rdo",title:"Regular Day Off",children:"R"})]}),n.balance!==void 0&&A.jsxs("div",{className:`balance-display ${n.balance<0?"negative":n.balance>=t_?"at-max":n.balance>ST?"warning":"positive"}`,title:n.accrualRate!==void 0?`Accrual rate: +${n.accrualRate.toFixed(2)} hours`:void 0,children:[n.balance.toFixed(1),"h"]}),e&&A.jsx("div",{className:"selection-overlay"}),t&&A.jsx("div",{className:"selection-start-marker"}),i&&A.jsx("div",{className:"selection-end-marker"})]})):null,fD=Xv.memo(dD),pD=({vacation:n,isOpen:e,workSchedule:t,holidays:i,onSave:o,onDelete:l,onClose:h,canAffordVacation:f})=>{const[g,y]=se.useState(""),[w,E]=se.useState(""),[I,D]=se.useState(""),[$,W]=se.useState(!1),[U,X]=se.useState(""),[re,de]=se.useState(!1);se.useEffect(()=>{n&&(y(n.startDate),E(n.endDate),D(n.description||""),W(n.personalDayUsed||!1),X(""),de(!1))},[n]);const ie=se.useMemo(()=>{if(!g||!w)return 0;try{const S=Dc(qe(g),qe(w),t,i);return $?Math.max(0,S-8):S}catch{return 0}},[g,w,t,i,$]),Oe=()=>{if(!n)return;if(!g||!w){X("Both start and end dates are required");return}if(qe(w)<qe(g)){X("End date must be after start date");return}const{canAfford:S,projectedBalance:P}=f({startDate:g,endDate:w,personalDayUsed:$});if(!S){X(`Cannot afford this change. Need ${ie}h, will have ${P.toFixed(2)}h`);return}o(n.id,{startDate:g,endDate:w,description:I.trim()||void 0,personalDayUsed:$}),h()},ve=()=>{if(n){if(!re){de(!0);return}l(n.id),h()}},R=()=>{de(!1),h()};return!e||!n?null:A.jsx("div",{className:"modal-overlay",onClick:R,children:A.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[A.jsx("h2",{children:"Edit Vacation"}),A.jsxs("form",{onSubmit:S=>{S.preventDefault(),Oe()},children:[A.jsxs("div",{className:"form-group",children:[A.jsx("label",{htmlFor:"edit-start-date",children:"Start Date"}),A.jsx("input",{type:"date",id:"edit-start-date",value:g,onChange:S=>y(S.target.value),required:!0})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{htmlFor:"edit-end-date",children:"End Date"}),A.jsx("input",{type:"date",id:"edit-end-date",value:w,onChange:S=>E(S.target.value),required:!0})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{htmlFor:"edit-description",children:"Description (optional)"}),A.jsx("input",{type:"text",id:"edit-description",value:I,onChange:S=>D(S.target.value),placeholder:"e.g., Summer vacation"})]}),A.jsx("div",{className:"form-group checkbox-group",children:A.jsxs("label",{children:[A.jsx("input",{type:"checkbox",checked:$,onChange:S=>W(S.target.checked)}),"Use Personal Day (8h credit)"]})}),A.jsxs("div",{className:"hours-estimate",children:[A.jsx("strong",{children:"Hours needed:"})," ",ie.toFixed(2)]}),U&&A.jsx("div",{className:"error-message",children:U}),A.jsxs("div",{className:"modal-actions",children:[A.jsx("button",{type:"button",onClick:ve,className:"delete-button",children:re?"Confirm Delete":"Delete"}),A.jsxs("div",{className:"right-actions",children:[A.jsx("button",{type:"button",onClick:R,className:"cancel-button",children:"Cancel"}),A.jsx("button",{type:"submit",className:"save-button",children:"Save Changes"})]})]})]})]})})},mD=({vacations:n,workSchedule:e,holidays:t,onEdit:i,onDelete:o})=>{const l=se.useMemo(()=>{if(n.length===0)return[];const g={};return n.forEach(w=>{const E=qe(w.startDate).getFullYear();g[E]||(g[E]=[]),g[E].push(w)}),Object.keys(g).map(w=>{const E=parseInt(w,10),I=g[E];return{year:E,vacations:I?I.sort((D,$)=>D.startDate.localeCompare($.startDate)):[]}}).sort((w,E)=>w.year-E.year)},[n]),h=g=>qe(g).toLocaleDateString("en-US",{month:"short",day:"numeric"}),f=g=>{const y=qe(g.startDate),w=qe(g.endDate),E=Math.ceil((w.getTime()-y.getTime())/(1e3*60*60*24))+1;return E===1?"1 day":`${E} days`};return n.length===0?null:A.jsxs("div",{className:"vacation-list-by-year",children:[A.jsx("h3",{children:"Planned Vacations"}),l.map(g=>A.jsxs("div",{className:"vacation-year-group",children:[A.jsx("h4",{className:"vacation-year-header",children:g.year}),A.jsx("div",{className:"vacation-table-wrapper",children:A.jsxs("table",{className:"vacation-table",children:[A.jsx("thead",{children:A.jsxs("tr",{children:[A.jsx("th",{children:"Dates"}),A.jsx("th",{children:"Description"}),A.jsx("th",{children:"Duration"}),A.jsx("th",{children:"Vacation Hours"}),A.jsx("th",{children:"Actions"})]})}),A.jsx("tbody",{children:g.vacations.map(y=>A.jsxs("tr",{children:[A.jsxs("td",{className:"vacation-dates",children:[h(y.startDate)," - ",h(y.endDate)]}),A.jsx("td",{className:"vacation-description",children:y.description||A.jsx("span",{className:"no-description",children:""})}),A.jsx("td",{className:"vacation-duration",children:f(y)}),A.jsxs("td",{className:"vacation-hours",children:[zf(y,e,t).toFixed(1),"h"]}),A.jsxs("td",{className:"vacation-actions",children:[A.jsx("button",{onClick:()=>i(y),className:"action-button edit-button",title:"Edit vacation",children:"Edit"}),A.jsx("button",{onClick:()=>o(y.id),className:"action-button delete-button",title:"Delete vacation",children:"Delete"})]})]},y.id))})]})})]},g.year))]})},gD=({weeklyBalances:n,plannedVacations:e,holidays:t,userProfile:i,onAddVacation:o,onUpdateVacation:l,onDeleteVacation:h,canAffordVacation:f})=>{const[g,y]=se.useState("idle"),[w,E]=se.useState(null),[I,D]=se.useState(null),[$,W]=se.useState(null),[U,X]=se.useState(!1),[re,de]=se.useState(""),[ie,Oe]=se.useState("2-month"),[ve,R]=se.useState(window.innerWidth>=768),[S,P]=se.useState(new Date),[N,x]=se.useState(null);se.useEffect(()=>{const J=()=>{ie==="2-month"&&R(window.innerWidth>=768)};return window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)},[ie]);const V=se.useMemo(()=>{if(n.length===0){const he=new Date;return{start:new Date(he.getFullYear(),he.getMonth()-1,1),end:new Date(he.getFullYear(),he.getMonth()+3,0)}}const J=n[0],ge=n[n.length-1];return{start:qe(J.weekStartDate),end:qe(ge.weekEndDate)}},[n]),C=se.useMemo(()=>hD(n,e,t,i.workSchedule,V.start,V.end),[n,e,t,i.workSchedule,V]),Le=se.useCallback(()=>g==="selecting"&&w&&I?{start:w<I?w:I,end:w<I?I:w}:null,[g,w,I])(),We=J=>{const ge=yn(J),he=C.get(ge);if(he!=null&&he.isInVacation&&he.vacationId){const le=e.find(Ae=>Ae.id===he.vacationId);if(le){W(le),X(!0),ze();return}}if(g==="idle"){y("selecting"),E(J),de("");return}if(g==="selecting"&&w){const[le,Ae]=J<w?[J,w]:[w,J],{canAfford:gt,projectedBalance:bt}=f({startDate:yn(le),endDate:yn(Ae)});if(!gt){const Ct=Dc(le,Ae,i.workSchedule,t);de(`Insufficient balance. Need ${Ct}h, will have ${bt.toFixed(2)}h`),ze();return}o({startDate:yn(le),endDate:yn(Ae)}),ze()}},ze=()=>{y("idle"),E(null),D(null),de("")};se.useEffect(()=>{const J=ge=>{ge.key==="Escape"&&ze()};return window.addEventListener("keydown",J),()=>window.removeEventListener("keydown",J)},[]);const te=se.useCallback(({date:J,view:ge,activeStartDate:he})=>{if(ge!=="month")return!1;const le=he.getMonth(),Ae=he.getFullYear(),gt=new Date(Ae,le+1,0);if(J<new Date(Ae,le,1))return!0;const bt=gt.getDay(),Ct=bt===6?0:(6-bt+7)%7,Qe=new Date(Ae,le,gt.getDate()+Ct);return J>Qe},[]),ue=se.useCallback(({date:J,activeStartDate:ge})=>{const he=ge.getMonth(),le=ge.getFullYear(),Ae=new Date(le,he+1,0);return J>Ae},[]),ee=se.useCallback(({date:J,view:ge,activeStartDate:he})=>{if(ge!=="month")return"";const le=[];if(te({date:J,view:ge,activeStartDate:he}))return le.push("react-calendar__tile--hidden"),le.join(" ");ue({date:J,activeStartDate:he})&&le.push("react-calendar__tile--next-month");const Ae=C.get(yn(J));if(Ae!=null&&Ae.isInVacation&&le.push("react-calendar__tile--vacation"),Ae!=null&&Ae.isHoliday&&le.push("react-calendar__tile--holiday"),Ae!=null&&Ae.isRDO&&le.push("react-calendar__tile--rdo"),Ae!=null&&Ae.types.includes(zo.WEEKEND)&&le.push("react-calendar__tile--weekend"),Le){const gt=J.getTime(),bt=Le.start.getTime(),Ct=Le.end.getTime();gt>=bt&&gt<=Ct&&le.push("react-calendar__tile--in-selection"),gt===bt&&le.push("react-calendar__tile--selection-start"),gt===Ct&&le.push("react-calendar__tile--selection-end")}return le.join(" ")},[C,Le,te,ue]),L=se.useCallback(({date:J,view:ge})=>{if(ge!=="month")return null;const he=C.get(yn(J)),le=Le&&J>=Le.start&&J<=Le.end,Ae=w&&J.getTime()===w.getTime(),gt=I&&J.getTime()===I.getTime();return A.jsx("div",{className:"calendar-tile-wrapper",onMouseEnter:()=>{g==="selecting"&&w&&D(J)},children:A.jsx(fD,{dayInfo:he,isInSelectionRange:!!le,isSelectionStart:!!Ae,isSelectionEnd:!!gt&&g==="selecting"})})},[C,Le,w,I,g]),H=()=>{P(new Date)},Se=se.useMemo(()=>{const J=new Date,ge=S.getMonth(),he=S.getFullYear();return ge===J.getMonth()&&he===J.getFullYear()},[S]),Te=J=>{Oe(J),J==="2-month"&&R(window.innerWidth>=768)},Ne=se.useMemo(()=>{const J=ie==="12-month"?12:ie==="6-month"?6:ve?2:1,ge=[],he=new Date(S);for(let le=0;le<J;le++){const Ae=new Date(he.getFullYear(),he.getMonth()+le,1);ge.push(Ae)}return ge},[S,ie,ve]);return A.jsxs("div",{className:"calendar-view",children:[A.jsxs("div",{className:"banner-container",children:[g==="selecting"&&A.jsx("div",{className:"selection-banner",children:A.jsxs("span",{children:["Selecting vacation: Click the end date or"," ",A.jsx("button",{onClick:ze,className:"cancel-link",children:"Cancel"})]})}),re&&A.jsxs("div",{className:"error-banner",children:[re,A.jsx("button",{onClick:()=>de(""),className:"close-error",children:""})]})]}),A.jsxs("div",{className:"calendar-header-controls",children:[A.jsxs("div",{className:"view-toggle-buttons",children:[A.jsx("button",{onClick:()=>Te("2-month"),className:`view-toggle-button ${ie==="2-month"?"active":""}`,children:"2-Month View"}),A.jsx("button",{onClick:()=>Te("6-month"),className:`view-toggle-button ${ie==="6-month"?"active":""}`,children:"6-Month View"}),A.jsx("button",{onClick:()=>Te("12-month"),className:`view-toggle-button ${ie==="12-month"?"active":""}`,children:"12-Month View"})]}),A.jsx("button",{onClick:H,className:"jump-to-today-button",disabled:Se,children:"Jump to Today"})]}),A.jsxs("div",{className:"calendar-navigation-controls",children:[A.jsx("button",{onClick:()=>{const J=new Date(S.getFullYear(),S.getMonth()-1,1);x("backward"),P(J),setTimeout(()=>x(null),600)},className:"calendar-nav-button",children:" Previous"}),A.jsx("button",{onClick:()=>{const J=new Date(S.getFullYear(),S.getMonth()+1,1);x("forward"),P(J),setTimeout(()=>x(null),600)},className:"calendar-nav-button",children:"Next "})]}),A.jsx("div",{className:`${ie==="12-month"?"twelve-month-grid":ie==="6-month"?"six-month-grid":"two-month-grid"} ${N?`slide-${N}`:""}`,children:Ne.map((J,ge)=>A.jsxs("div",{className:`${ie==="12-month"?"twelve-month-calendar":ie==="6-month"?"six-month-calendar":"two-month-calendar"}`,children:[A.jsx("div",{className:`${ie==="12-month"?"twelve-month-calendar-header":ie==="6-month"?"six-month-calendar-header":"two-month-calendar-header"}`,children:J.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),A.jsx(cD,{showDoubleView:!1,showNeighboringMonth:!0,selectRange:!1,tileContent:L,tileClassName:ee,onClickDay:We,minDetail:"month",maxDetail:"month",locale:"en-US",activeStartDate:J,showNavigation:!1})]},ge))}),A.jsx(pD,{vacation:$,isOpen:U,workSchedule:i.workSchedule,holidays:t,onSave:l,onDelete:h,onClose:()=>{X(!1),W(null)},canAffordVacation:f}),A.jsx(mD,{vacations:e,workSchedule:i.workSchedule,holidays:t,onEdit:J=>{W(J),X(!0)},onDelete:h})]})},yD=()=>A.jsxs("div",{className:"calendar-legend",children:[A.jsx("h3",{children:"Legend"}),A.jsxs("div",{className:"legend-items",children:[A.jsxs("div",{className:"legend-item",children:[A.jsx("span",{className:"legend-indicator vacation",children:"V"}),A.jsx("span",{className:"legend-label",children:"Planned Vacation"})]}),A.jsxs("div",{className:"legend-item",children:[A.jsx("span",{className:"legend-indicator holiday",children:"H"}),A.jsx("span",{className:"legend-label",children:"Holiday"})]}),A.jsxs("div",{className:"legend-item",children:[A.jsx("span",{className:"legend-indicator rdo",children:"R"}),A.jsx("span",{className:"legend-label",children:"RDO (9/80)"})]}),A.jsxs("div",{className:"legend-item",children:[A.jsx("span",{className:"legend-indicator personal-day",children:"P"}),A.jsx("span",{className:"legend-label",children:"Personal Day"})]}),A.jsxs("div",{className:"legend-item",children:[A.jsx("span",{className:"legend-box weekend"}),A.jsx("span",{className:"legend-label",children:"Weekend"})]}),A.jsxs("div",{className:"legend-item",children:[A.jsx("span",{className:"legend-box balance-positive"}),A.jsx("span",{className:"legend-label",children:"Balance (on Sundays)"})]})]})]});function vD({isOpen:n=!0,onClose:e}){const{user:t,loading:i,error:o,isFirebaseAvailable:l,signInWithGoogle:h,signOut:f}=Yc();return!l||!n?null:i?A.jsxs("div",{className:"cloud-sync-settings loading",children:[e&&A.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),A.jsx("p",{children:"Loading..."})]}):t?A.jsxs("div",{className:"cloud-sync-settings signed-in",children:[e&&A.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),A.jsxs("div",{className:"sync-status",children:[A.jsx("div",{className:"sync-icon",children:""}),A.jsxs("div",{className:"sync-info",children:[A.jsx("div",{className:"sync-title",children:"Cloud Sync Enabled"}),A.jsx("div",{className:"sync-email",children:t.email}),A.jsx("div",{className:"sync-description",children:"Your vacation data is automatically synced across all your devices"})]})]}),A.jsx("button",{onClick:f,className:"sign-out-button",children:"Disable Cloud Sync"}),o&&A.jsx("div",{className:"error-message",children:o})]}):A.jsxs("div",{className:"cloud-sync-settings signed-out",children:[e&&A.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),A.jsxs("div",{className:"sync-promo",children:[A.jsx("div",{className:"sync-icon",children:""}),A.jsxs("div",{className:"sync-info",children:[A.jsx("div",{className:"sync-title",children:"Enable Cloud Sync"}),A.jsx("div",{className:"sync-description",children:"Sign in with Google to sync your vacation data across multiple devices and browsers"}),A.jsxs("ul",{className:"sync-benefits",children:[A.jsx("li",{children:"Access your data from any device"}),A.jsx("li",{children:"Automatic real-time sync"}),A.jsx("li",{children:"Your data remains private"}),A.jsx("li",{children:"Works offline - syncs when online"})]})]})]}),A.jsx("button",{onClick:h,className:"sign-in-button",children:"Sign in with Google"}),o&&A.jsx("div",{className:"error-message",children:o})]})}function _D({onClick:n}){const{user:e,isFirebaseAvailable:t}=Yc();return!t||!e?null:A.jsxs("button",{className:"sync-status-indicator",title:"Cloud sync enabled - Click to manage",onClick:n,children:[A.jsx("span",{className:"sync-icon",children:""}),A.jsx("span",{className:"sync-text",children:"Synced"})]})}const wD=({onNewUser:n})=>{const{signInWithGoogle:e,error:t,loading:i,isFirebaseAvailable:o}=Yc(),[l,h]=se.useState(!1),f=async()=>{h(!0);try{await e()}catch(g){console.error("Sign-in error:",g),h(!1)}};return A.jsx("div",{className:"welcome-screen",children:A.jsxs("div",{className:"welcome-content",children:[A.jsx("h2",{children:"Welcome to JPL Vacation Forecast"}),A.jsx("p",{className:"welcome-subtitle",children:"Track your vacation balance and plan your time off"}),A.jsxs("div",{className:"user-choice-container",children:[A.jsxs("div",{className:"choice-card",children:[A.jsx("div",{className:"choice-icon",children:""}),A.jsx("h3",{children:"New User"}),A.jsx("p",{children:"Set up your vacation tracking profile"}),A.jsx("button",{onClick:n,className:"choice-button primary-button",disabled:l,children:"Get Started"})]}),o&&A.jsxs("div",{className:"choice-card",children:[A.jsx("div",{className:"choice-icon",children:""}),A.jsx("h3",{children:"Existing User"}),A.jsx("p",{children:"Sign in to sync your data across devices"}),A.jsx("button",{onClick:f,className:"choice-button secondary-button",disabled:i||l,children:l?"Signing in...":"Sign in with Google"})]})]}),t&&A.jsx("div",{className:"error-message",children:t}),!o&&A.jsx("div",{className:"info-message",children:"Cloud sync is not available. You can still use the app with local storage only."})]})})},Yv=({message:n="Loading..."})=>A.jsx("div",{className:"loading-screen",children:A.jsxs("div",{className:"loading-content",children:[A.jsx("div",{className:"spinner"}),A.jsx("p",{className:"loading-message",children:n})]})}),ED=()=>{const{userProfile:n,setUserProfile:e,plannedVacations:t,addPlannedVacation:i,updatePlannedVacation:o,deletePlannedVacation:l,holidays:h,setHolidays:f,weeklyBalances:g,forecastPeriod:y,canAffordVacation:w}=kP(),{defaultHolidays:E}=NP((n==null?void 0:n.workSchedule)??null,y.startDate,y.endDate),{user:I,loading:D,initialSyncComplete:$}=Yc(),[W,U]=se.useState(()=>localStorage.getItem("theme")==="dark"),[X,re]=se.useState(!0),[de,ie]=se.useState(!1);se.useEffect(()=>{const R=document.documentElement;W?(R.classList.add("dark"),localStorage.setItem("theme","dark")):(R.classList.remove("dark"),localStorage.setItem("theme","light"))},[W]);const Oe=()=>{U(!W)};se.useEffect(()=>{if(!n||E.length===0)return;const R="jpl-vacation-holidays-version",S=localStorage.getItem(R),P=CE.version,N=()=>{f(E),localStorage.setItem(R,P)};if(h.length===0){N();return}if(S!==P){console.log(`Holiday version mismatch (stored: ${S}, current: ${P}). Updating...`),N();return}if(h.length!==E.length||h.some((C,be)=>{const Le=E[be];return!Le||C.date!==Le.date||C.hours!==Le.hours})){console.log("Work schedule mismatch detected in holidays. Updating..."),N();return}h.some(C=>C.date&&C.date.startsWith("2027"))||N()},[n,h,E,f]);const ve=()=>D?A.jsx(Yv,{message:"Checking authentication..."}):n?A.jsxs("div",{className:"dashboard",children:[A.jsx("div",{className:"dashboard-header",children:A.jsx("button",{onClick:()=>e(null),className:"reset-button",children:"Reset Profile"})}),A.jsx(vD,{isOpen:X,onClose:()=>re(!1)}),A.jsx(yD,{}),A.jsx(gD,{weeklyBalances:g,plannedVacations:t,holidays:h,userProfile:n,onAddVacation:i,onUpdateVacation:o,onDeleteVacation:l,canAffordVacation:w})]}):I&&!n?$?A.jsx(bv,{onSubmit:e,onBack:()=>ie(!1)}):A.jsx(Yv,{message:"Loading your data..."}):de?A.jsx(bv,{onSubmit:e,onBack:()=>ie(!1)}):A.jsx(wD,{onNewUser:()=>ie(!0)});return A.jsxs("div",{className:"app",children:[A.jsx("header",{className:"app-header",children:A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[A.jsx("h1",{children:"JPL Vacation Forecast "}),A.jsxs("div",{style:{display:"flex",gap:"12px",marginLeft:"auto",alignItems:"center"},children:[A.jsx(_D,{onClick:()=>re(!X)}),A.jsx("button",{onClick:Oe,className:"reset-button","aria-label":W?"Switch to light mode":"Switch to dark mode",children:W?" Light Mode":" Dark Mode"})]})]})}),A.jsx("main",{className:"app-main",children:ve()})]})},ZE=document.getElementById("root");if(!ZE)throw new Error("Failed to find the root element");yT.createRoot(ZE).render(A.jsx(Xv.StrictMode,{children:A.jsx(ED,{})}));

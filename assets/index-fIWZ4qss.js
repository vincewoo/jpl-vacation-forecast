var yT=Object.defineProperty;var vT=(n,e,t)=>e in n?yT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Lo=(n,e,t)=>vT(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function l_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xd={exports:{}},Xa={},bd={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy;function _T(){if(oy)return Le;oy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function I(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,N={};function F(j,H,_e){this.props=j,this.context=H,this.refs=N,this.updater=_e||R}F.prototype.isReactComponent={},F.prototype.setState=function(j,H){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,H,"setState")},F.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function q(){}q.prototype=F.prototype;function ee(j,H,_e){this.props=j,this.context=H,this.refs=N,this.updater=_e||R}var oe=ee.prototype=new q;oe.constructor=ee,L(oe,F.prototype),oe.isPureReactComponent=!0;var re=Array.isArray,Ne=Object.prototype.hasOwnProperty,ve={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(j,H,_e){var Se,xe={},Re=null,X=null;if(H!=null)for(Se in H.ref!==void 0&&(X=H.ref),H.key!==void 0&&(Re=""+H.key),H)Ne.call(H,Se)&&!P.hasOwnProperty(Se)&&(xe[Se]=H[Se]);var ue=arguments.length-2;if(ue===1)xe.children=_e;else if(1<ue){for(var ce=Array(ue),ye=0;ye<ue;ye++)ce[ye]=arguments[ye+2];xe.children=ce}if(j&&j.defaultProps)for(Se in ue=j.defaultProps,ue)xe[Se]===void 0&&(xe[Se]=ue[Se]);return{$$typeof:n,type:j,key:Re,ref:X,props:xe,_owner:ve.current}}function D(j,H){return{$$typeof:n,type:j.type,key:H,ref:j.ref,props:j.props,_owner:j._owner}}function b(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function x(j){var H={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(_e){return H[_e]})}var V=/\/+/g;function C(j,H){return typeof j=="object"&&j!==null&&j.key!=null?x(""+j.key):H.toString(36)}function Oe(j,H,_e,Se,xe){var Re=typeof j;(Re==="undefined"||Re==="boolean")&&(j=null);var X=!1;if(j===null)X=!0;else switch(Re){case"string":case"number":X=!0;break;case"object":switch(j.$$typeof){case n:case e:X=!0}}if(X)return X=j,xe=xe(X),j=Se===""?"."+C(X,0):Se,re(xe)?(_e="",j!=null&&(_e=j.replace(V,"$&/")+"/"),Oe(xe,H,_e,"",function(ye){return ye})):xe!=null&&(b(xe)&&(xe=D(xe,_e+(!xe.key||X&&X.key===xe.key?"":(""+xe.key).replace(V,"$&/")+"/")+j)),H.push(xe)),1;if(X=0,Se=Se===""?".":Se+":",re(j))for(var ue=0;ue<j.length;ue++){Re=j[ue];var ce=Se+C(Re,ue);X+=Oe(Re,H,_e,ce,xe)}else if(ce=I(j),typeof ce=="function")for(j=ce.call(j),ue=0;!(Re=j.next()).done;)Re=Re.value,ce=Se+C(Re,ue++),X+=Oe(Re,H,_e,ce,xe);else if(Re==="object")throw H=String(j),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return X}function Me(j,H,_e){if(j==null)return j;var Se=[],xe=0;return Oe(j,Se,"","",function(Re){return H.call(_e,Re,xe++)}),Se}function We(j){if(j._status===-1){var H=j._result;H=H(),H.then(function(_e){(j._status===0||j._status===-1)&&(j._status=1,j._result=_e)},function(_e){(j._status===0||j._status===-1)&&(j._status=2,j._result=_e)}),j._status===-1&&(j._status=0,j._result=H)}if(j._status===1)return j._result.default;throw j._result}var Fe={current:null},ne={transition:null},le={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:ne,ReactCurrentOwner:ve};function te(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:Me,forEach:function(j,H,_e){Me(j,function(){H.apply(this,arguments)},_e)},count:function(j){var H=0;return Me(j,function(){H++}),H},toArray:function(j){return Me(j,function(H){return H})||[]},only:function(j){if(!b(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Le.Component=F,Le.Fragment=t,Le.Profiler=o,Le.PureComponent=ee,Le.StrictMode=i,Le.Suspense=p,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,Le.act=te,Le.cloneElement=function(j,H,_e){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Se=L({},j.props),xe=j.key,Re=j.ref,X=j._owner;if(H!=null){if(H.ref!==void 0&&(Re=H.ref,X=ve.current),H.key!==void 0&&(xe=""+H.key),j.type&&j.type.defaultProps)var ue=j.type.defaultProps;for(ce in H)Ne.call(H,ce)&&!P.hasOwnProperty(ce)&&(Se[ce]=H[ce]===void 0&&ue!==void 0?ue[ce]:H[ce])}var ce=arguments.length-2;if(ce===1)Se.children=_e;else if(1<ce){ue=Array(ce);for(var ye=0;ye<ce;ye++)ue[ye]=arguments[ye+2];Se.children=ue}return{$$typeof:n,type:j.type,key:xe,ref:Re,props:Se,_owner:X}},Le.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},Le.createElement=A,Le.createFactory=function(j){var H=A.bind(null,j);return H.type=j,H},Le.createRef=function(){return{current:null}},Le.forwardRef=function(j){return{$$typeof:f,render:j}},Le.isValidElement=b,Le.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:We}},Le.memo=function(j,H){return{$$typeof:y,type:j,compare:H===void 0?null:H}},Le.startTransition=function(j){var H=ne.transition;ne.transition={};try{j()}finally{ne.transition=H}},Le.unstable_act=te,Le.useCallback=function(j,H){return Fe.current.useCallback(j,H)},Le.useContext=function(j){return Fe.current.useContext(j)},Le.useDebugValue=function(){},Le.useDeferredValue=function(j){return Fe.current.useDeferredValue(j)},Le.useEffect=function(j,H){return Fe.current.useEffect(j,H)},Le.useId=function(){return Fe.current.useId()},Le.useImperativeHandle=function(j,H,_e){return Fe.current.useImperativeHandle(j,H,_e)},Le.useInsertionEffect=function(j,H){return Fe.current.useInsertionEffect(j,H)},Le.useLayoutEffect=function(j,H){return Fe.current.useLayoutEffect(j,H)},Le.useMemo=function(j,H){return Fe.current.useMemo(j,H)},Le.useReducer=function(j,H,_e){return Fe.current.useReducer(j,H,_e)},Le.useRef=function(j){return Fe.current.useRef(j)},Le.useState=function(j){return Fe.current.useState(j)},Le.useSyncExternalStore=function(j,H,_e){return Fe.current.useSyncExternalStore(j,H,_e)},Le.useTransition=function(){return Fe.current.useTransition()},Le.version="18.3.1",Le}var ay;function Yf(){return ay||(ay=1,bd.exports=_T()),bd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function wT(){if(ly)return Xa;ly=1;var n=Yf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,p,y){var _,E={},I=null,R=null;y!==void 0&&(I=""+y),p.key!==void 0&&(I=""+p.key),p.ref!==void 0&&(R=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(E[_]=p[_]);if(f&&f.defaultProps)for(_ in p=f.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:f,key:I,ref:R,props:E,_owner:o.current}}return Xa.Fragment=t,Xa.jsx=h,Xa.jsxs=h,Xa}var uy;function ET(){return uy||(uy=1,xd.exports=wT()),xd.exports}var T=ET(),se=Yf();const u_=l_(se);var Bu={},Od={exports:{}},yn={},Vd={exports:{}},Md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function TT(){return cy||(cy=1,(function(n){function e(ne,le){var te=ne.length;ne.push(le);e:for(;0<te;){var j=te-1>>>1,H=ne[j];if(0<o(H,le))ne[j]=le,ne[te]=H,te=j;else break e}}function t(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var le=ne[0],te=ne.pop();if(te!==le){ne[0]=te;e:for(var j=0,H=ne.length,_e=H>>>1;j<_e;){var Se=2*(j+1)-1,xe=ne[Se],Re=Se+1,X=ne[Re];if(0>o(xe,te))Re<H&&0>o(X,xe)?(ne[j]=X,ne[Re]=te,j=Re):(ne[j]=xe,ne[Se]=te,j=Se);else if(Re<H&&0>o(X,te))ne[j]=X,ne[Re]=te,j=Re;else break e}}return le}function o(ne,le){var te=ne.sortIndex-le.sortIndex;return te!==0?te:ne.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var p=[],y=[],_=1,E=null,I=3,R=!1,L=!1,N=!1,F=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(ne){for(var le=t(y);le!==null;){if(le.callback===null)i(y);else if(le.startTime<=ne)i(y),le.sortIndex=le.expirationTime,e(p,le);else break;le=t(y)}}function re(ne){if(N=!1,oe(ne),!L)if(t(p)!==null)L=!0,We(Ne);else{var le=t(y);le!==null&&Fe(re,le.startTime-ne)}}function Ne(ne,le){L=!1,N&&(N=!1,q(A),A=-1),R=!0;var te=I;try{for(oe(le),E=t(p);E!==null&&(!(E.expirationTime>le)||ne&&!x());){var j=E.callback;if(typeof j=="function"){E.callback=null,I=E.priorityLevel;var H=j(E.expirationTime<=le);le=n.unstable_now(),typeof H=="function"?E.callback=H:E===t(p)&&i(p),oe(le)}else i(p);E=t(p)}if(E!==null)var _e=!0;else{var Se=t(y);Se!==null&&Fe(re,Se.startTime-le),_e=!1}return _e}finally{E=null,I=te,R=!1}}var ve=!1,P=null,A=-1,D=5,b=-1;function x(){return!(n.unstable_now()-b<D)}function V(){if(P!==null){var ne=n.unstable_now();b=ne;var le=!0;try{le=P(!0,ne)}finally{le?C():(ve=!1,P=null)}}else ve=!1}var C;if(typeof ee=="function")C=function(){ee(V)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,Me=Oe.port2;Oe.port1.onmessage=V,C=function(){Me.postMessage(null)}}else C=function(){F(V,0)};function We(ne){P=ne,ve||(ve=!0,C())}function Fe(ne,le){A=F(function(){ne(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_continueExecution=function(){L||R||(L=!0,We(Ne))},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ne){switch(I){case 1:case 2:case 3:var le=3;break;default:le=I}var te=I;I=le;try{return ne()}finally{I=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ne,le){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var te=I;I=ne;try{return le()}finally{I=te}},n.unstable_scheduleCallback=function(ne,le,te){var j=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?j+te:j):te=j,ne){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=te+H,ne={id:_++,callback:le,priorityLevel:ne,startTime:te,expirationTime:H,sortIndex:-1},te>j?(ne.sortIndex=te,e(y,ne),t(p)===null&&ne===t(y)&&(N?(q(A),A=-1):N=!0,Fe(re,te-j))):(ne.sortIndex=H,e(p,ne),L||R||(L=!0,We(Ne))),ne},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(ne){var le=I;return function(){var te=I;I=le;try{return ne.apply(this,arguments)}finally{I=te}}}})(Md)),Md}var hy;function ST(){return hy||(hy=1,Vd.exports=TT()),Vd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function IT(){if(dy)return yn;dy=1;var n=Yf(),e=ST();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function I(r){return p.call(E,r)?!0:p.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function R(r,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function L(r,s,a,c){if(s===null||typeof s>"u"||R(r,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function N(r,s,a,c,d,m,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=m,this.removeEmptyString=w}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){F[r]=new N(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];F[s]=new N(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){F[r]=new N(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){F[r]=new N(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){F[r]=new N(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){F[r]=new N(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){F[r]=new N(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){F[r]=new N(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){F[r]=new N(r,5,!1,r.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function ee(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(q,ee);F[s]=new N(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(q,ee);F[s]=new N(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(q,ee);F[s]=new N(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){F[r]=new N(r,1,!1,r.toLowerCase(),null,!1,!1)}),F.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){F[r]=new N(r,1,!1,r.toLowerCase(),null,!0,!0)});function oe(r,s,a,c){var d=F.hasOwnProperty(s)?F[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,a,d,c)&&(a=null),c||d===null?I(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?r.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?r.setAttributeNS(c,s,a):r.setAttribute(s,a))))}var re=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ne=Symbol.for("react.element"),ve=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),x=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Oe=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),We=Symbol.for("react.lazy"),Fe=Symbol.for("react.offscreen"),ne=Symbol.iterator;function le(r){return r===null||typeof r!="object"?null:(r=ne&&r[ne]||r["@@iterator"],typeof r=="function"?r:null)}var te=Object.assign,j;function H(r){if(j===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+r}var _e=!1;function Se(r,s){if(!r||_e)return"";_e=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){c=$}r.call(s.prototype)}else{try{throw Error()}catch($){c=$}r()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),m=c.stack.split(`
`),w=d.length-1,k=m.length-1;1<=w&&0<=k&&d[w]!==m[k];)k--;for(;1<=w&&0<=k;w--,k--)if(d[w]!==m[k]){if(w!==1||k!==1)do if(w--,k--,0>k||d[w]!==m[k]){var O=`
`+d[w].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=w&&0<=k);break}}}finally{_e=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?H(r):""}function xe(r){switch(r.tag){case 5:return H(r.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return r=Se(r.type,!1),r;case 11:return r=Se(r.type.render,!1),r;case 1:return r=Se(r.type,!0),r;default:return""}}function Re(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case ve:return"Portal";case D:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case Oe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case x:return(r.displayName||"Context")+".Consumer";case b:return(r._context.displayName||"Context")+".Provider";case V:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Me:return s=r.displayName||null,s!==null?s:Re(r.type)||"Memo";case We:s=r._payload,r=r._init;try{return Re(r(s))}catch{}}return null}function X(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ue(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ce(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ye(r){var s=ce(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ve(r){r._valueTracker||(r._valueTracker=ye(r))}function vt(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=ce(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function St(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function qe(r,s){var a=s.checked;return te({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function On(r,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=ue(s.value!=null?s.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Rt(r,s){s=s.checked,s!=null&&oe(r,"checked",s,!1)}function Vn(r,s){Rt(r,s);var a=ue(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?ct(r,s.type,a):s.hasOwnProperty("defaultValue")&&ct(r,s.type,ue(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function yi(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function ct(r,s,a){(s!=="number"||St(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var ht=Array.isArray;function _n(r,s,a,c){if(r=r.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=s.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&c&&(r[a].defaultSelected=!0)}else{for(a=""+ue(a),s=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,c&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function cs(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function vi(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(ht(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:ue(a)}}function to(r,s){var a=ue(s.value),c=ue(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function cr(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function hs(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _i(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?hs(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var hr,wi=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return r(s,a,c,d)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(hr=hr||document.createElement("div"),hr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=hr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function dr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Yn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},no=["Webkit","ms","Moz","O"];Object.keys(Yn).forEach(function(r){no.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Yn[s]=Yn[r]})});function wn(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Yn.hasOwnProperty(r)&&Yn[r]?(""+s).trim():s+"px"}function Br(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=wn(a,s[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,d):r[a]=d}}var ds=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function un(r,s){if(s){if(ds[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function zr(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mn=null;function Ei(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ln=null,Qn=null,nt=null;function It(r){if(r=La(r)){if(typeof Ln!="function")throw Error(t(280));var s=r.stateNode;s&&(s=nu(s),Ln(r.stateNode,r.type,s))}}function dt(r){Qn?nt?nt.push(r):nt=[r]:Qn=r}function En(){if(Qn){var r=Qn,s=nt;if(nt=Qn=null,It(r),s)for(r=0;r<s.length;r++)It(s[r])}}function Xe(r,s){return r(s)}function on(){}var jn=!1;function Ti(r,s,a){if(jn)return r(s,a);jn=!0;try{return Xe(r,s,a)}finally{jn=!1,(Qn!==null||nt!==null)&&(on(),En())}}function fr(r,s){var a=r.stateNode;if(a===null)return null;var c=nu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Jn=!1;if(f)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){Jn=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{Jn=!1}function $r(r,s,a,c,d,m,w,k,O){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(Q){this.onError(Q)}}var Tn=!1,cn=null,pr=!1,hn=null,Si={onError:function(r){Tn=!0,cn=r}};function fs(r,s,a,c,d,m,w,k,O){Tn=!1,cn=null,$r.apply(Si,arguments)}function ps(r,s,a,c,d,m,w,k,O){if(fs.apply(this,arguments),Tn){if(Tn){var $=cn;Tn=!1,cn=null}else throw Error(t(198));pr||(pr=!0,hn=$)}}function Sn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function be(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Ze(r){if(Sn(r)!==r)throw Error(t(188))}function rt(r){var s=r.alternate;if(!s){if(s=Sn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,c=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Ze(d),r;if(m===c)return Ze(d),s;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var w=!1,k=d.child;k;){if(k===a){w=!0,a=d,c=m;break}if(k===c){w=!0,c=d,a=m;break}k=k.sibling}if(!w){for(k=m.child;k;){if(k===a){w=!0,a=m,c=d;break}if(k===c){w=!0,c=m,a=d;break}k=k.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function Yt(r){return r=rt(r),r!==null?Nt(r):null}function Nt(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Nt(r);if(s!==null)return s;r=r.sibling}return null}var Wr=e.unstable_scheduleCallback,Ii=e.unstable_cancelCallback,Hr=e.unstable_shouldYield,qr=e.unstable_requestPaint,it=e.unstable_now,uh=e.unstable_getCurrentPriorityLevel,ro=e.unstable_ImmediatePriority,pa=e.unstable_UserBlockingPriority,ms=e.unstable_NormalPriority,ma=e.unstable_LowPriority,io=e.unstable_IdlePriority,gs=null,In=null;function Fl(r){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(gs,r,void 0,(r.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:ys,mr=Math.log,Un=Math.LN2;function ys(r){return r>>>=0,r===0?32:31-(mr(r)/Un|0)|0}var gr=64,Ai=4194304;function Ye(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Gr(r,s){var a=r.pendingLanes;if(a===0)return 0;var c=0,d=r.suspendedLanes,m=r.pingedLanes,w=a&268435455;if(w!==0){var k=w&~d;k!==0?c=Ye(k):(m&=w,m!==0&&(c=Ye(m)))}else w=a&~d,w!==0?c=Ye(w):m!==0&&(c=Ye(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,m=s&-s,d>=m||d===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)a=31-An(s),d=1<<a,c|=r[a],s&=~d;return c}function vs(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _s(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,m=r.pendingLanes;0<m;){var w=31-An(m),k=1<<w,O=d[w];O===-1?((k&a)===0||(k&c)!==0)&&(d[w]=vs(k,s)):O<=s&&(r.expiredLanes|=k),m&=~k}}function ga(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ya(){var r=gr;return gr<<=1,(gr&4194240)===0&&(gr=64),r}function va(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function ws(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-An(s),r[s]=a}function ch(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-An(a),m=1<<d;s[d]=0,c[d]=-1,r[d]=-1,a&=~m}}function _a(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-An(a),d=1<<c;d&s|r[c]&s&&(r[c]|=s),a&=~d}}var $e=0;function yr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var wa,so,Ea,Ta,Sa,vr=!1,oo=[],_r=null,wr=null,Bt=null,Es=new Map,Kr=new Map,Cn=[],Ul="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ci(r,s){switch(r){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Bt=null;break;case"pointerover":case"pointerout":Es.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kr.delete(s.pointerId)}}function Xn(r,s,a,c,d,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},s!==null&&(s=La(s),s!==null&&so(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function Bl(r,s,a,c,d){switch(s){case"focusin":return _r=Xn(_r,r,s,a,c,d),!0;case"dragenter":return wr=Xn(wr,r,s,a,c,d),!0;case"mouseover":return Bt=Xn(Bt,r,s,a,c,d),!0;case"pointerover":var m=d.pointerId;return Es.set(m,Xn(Es.get(m)||null,r,s,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,Kr.set(m,Xn(Kr.get(m)||null,r,s,a,c,d)),!0}return!1}function ao(r){var s=As(r.target);if(s!==null){var a=Sn(s);if(a!==null){if(s=a.tag,s===13){if(s=be(a),s!==null){r.blockedOn=s,Sa(r.priority,function(){Ea(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function et(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=lo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);Mn=c,a.target.dispatchEvent(c),Mn=null}else return s=La(a),s!==null&&so(s),r.blockedOn=a,!1;s.shift()}return!0}function zl(r,s,a){et(r)&&a.delete(s)}function hh(){vr=!1,_r!==null&&et(_r)&&(_r=null),wr!==null&&et(wr)&&(wr=null),Bt!==null&&et(Bt)&&(Bt=null),Es.forEach(zl),Kr.forEach(zl)}function ki(r,s){r.blockedOn===s&&(r.blockedOn=null,vr||(vr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hh)))}function Di(r){function s(d){return ki(d,r)}if(0<oo.length){ki(oo[0],r);for(var a=1;a<oo.length;a++){var c=oo[a];c.blockedOn===r&&(c.blockedOn=null)}}for(_r!==null&&ki(_r,r),wr!==null&&ki(wr,r),Bt!==null&&ki(Bt,r),Es.forEach(s),Kr.forEach(s),a=0;a<Cn.length;a++)c=Cn[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<Cn.length&&(a=Cn[0],a.blockedOn===null);)ao(a),a.blockedOn===null&&Cn.shift()}var Yr=re.ReactCurrentBatchConfig,Qr=!0;function Er(r,s,a,c){var d=$e,m=Yr.transition;Yr.transition=null;try{$e=1,Ia(r,s,a,c)}finally{$e=d,Yr.transition=m}}function $l(r,s,a,c){var d=$e,m=Yr.transition;Yr.transition=null;try{$e=4,Ia(r,s,a,c)}finally{$e=d,Yr.transition=m}}function Ia(r,s,a,c){if(Qr){var d=lo(r,s,a,c);if(d===null)Th(r,s,c,Tr,a),Ci(r,c);else if(Bl(d,r,s,a,c))c.stopPropagation();else if(Ci(r,c),s&4&&-1<Ul.indexOf(r)){for(;d!==null;){var m=La(d);if(m!==null&&wa(m),m=lo(r,s,a,c),m===null&&Th(r,s,c,Tr,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Th(r,s,c,null,a)}}var Tr=null;function lo(r,s,a,c){if(Tr=null,r=Ei(c),r=As(r),r!==null)if(s=Sn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=be(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Tr=r,null}function uo(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uh()){case ro:return 1;case pa:return 4;case ms:case ma:return 16;case io:return 536870912;default:return 16}default:return 16}}var kn=null,co=null,Jr=null;function Wl(){if(Jr)return Jr;var r,s=co,a=s.length,c,d="value"in kn?kn.value:kn.textContent,m=d.length;for(r=0;r<a&&s[r]===d[r];r++);var w=a-r;for(c=1;c<=w&&s[a-c]===d[m-c];c++);return Jr=d.slice(r,1<c?1-c:void 0)}function Ts(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Sr(){return!0}function Aa(){return!1}function Qt(r){function s(a,c,d,m,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(a=r[k],this[k]=a?a(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Sr:Aa,this.isPropagationStopped=Aa,this}return te(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),s}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ss=Qt(Ir),Pi=te({},Ir,{view:0,detail:0}),ho=Qt(Pi),fo,po,Dn,Is=te({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:De,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Dn&&(Dn&&r.type==="mousemove"?(fo=r.screenX-Dn.screenX,po=r.screenY-Dn.screenY):po=fo=0,Dn=r),fo)},movementY:function(r){return"movementY"in r?r.movementY:po}}),Ca=Qt(Is),Hl=te({},Is,{dataTransfer:0}),ql=Qt(Hl),mo=te({},Pi,{relatedTarget:0}),zt=Qt(mo),Gl=te({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Kl=Qt(Gl),Ri=te({},Ir,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=Qt(Ri),g=te({},Ir,{data:0}),v=Qt(g),S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ie(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=W[r])?!!s[r]:!1}function De(){return ie}var wt=te({},Pi,{key:function(r){if(r.key){var s=S[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ts(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?B[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:De,charCode:function(r){return r.type==="keypress"?Ts(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ts(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Je=Qt(wt),At=te({},Is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pn=Qt(At),Xr=te({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:De}),Ar=Qt(Xr),Cr=te({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),go=Qt(Cr),ka=te({},Is,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),h0=Qt(ka),d0=[9,13,27,32],dh=f&&"CompositionEvent"in window,Da=null;f&&"documentMode"in document&&(Da=document.documentMode);var f0=f&&"TextEvent"in window&&!Da,Xp=f&&(!dh||Da&&8<Da&&11>=Da),Zp=" ",em=!1;function tm(r,s){switch(r){case"keyup":return d0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var yo=!1;function p0(r,s){switch(r){case"compositionend":return nm(s);case"keypress":return s.which!==32?null:(em=!0,Zp);case"textInput":return r=s.data,r===Zp&&em?null:r;default:return null}}function m0(r,s){if(yo)return r==="compositionend"||!dh&&tm(r,s)?(r=Wl(),Jr=co=kn=null,yo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Xp&&s.locale!=="ko"?null:s.data;default:return null}}var g0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!g0[r.type]:s==="textarea"}function im(r,s,a,c){dt(c),s=Zl(s,"onChange"),0<s.length&&(a=new Ss("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var Pa=null,Ra=null;function y0(r){Tm(r,0)}function Yl(r){var s=To(r);if(vt(s))return r}function v0(r,s){if(r==="change")return s}var sm=!1;if(f){var fh;if(f){var ph="oninput"in document;if(!ph){var om=document.createElement("div");om.setAttribute("oninput","return;"),ph=typeof om.oninput=="function"}fh=ph}else fh=!1;sm=fh&&(!document.documentMode||9<document.documentMode)}function am(){Pa&&(Pa.detachEvent("onpropertychange",lm),Ra=Pa=null)}function lm(r){if(r.propertyName==="value"&&Yl(Ra)){var s=[];im(s,Ra,r,Ei(r)),Ti(y0,s)}}function _0(r,s,a){r==="focusin"?(am(),Pa=s,Ra=a,Pa.attachEvent("onpropertychange",lm)):r==="focusout"&&am()}function w0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Yl(Ra)}function E0(r,s){if(r==="click")return Yl(s)}function T0(r,s){if(r==="input"||r==="change")return Yl(s)}function S0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Zn=typeof Object.is=="function"?Object.is:S0;function Na(r,s){if(Zn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!p.call(s,d)||!Zn(r[d],s[d]))return!1}return!0}function um(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function cm(r,s){var a=um(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=um(a)}}function hm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?hm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function dm(){for(var r=window,s=St();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=St(r.document)}return s}function mh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function I0(r){var s=dm(),a=r.focusedElem,c=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&hm(a.ownerDocument.documentElement,a)){if(c!==null&&mh(a)){if(s=c.start,r=c.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!r.extend&&m>c&&(d=c,c=m,m=d),d=cm(a,m);var w=cm(a,c);d&&w&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),r.removeAllRanges(),m>c?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var A0=f&&"documentMode"in document&&11>=document.documentMode,vo=null,gh=null,xa=null,yh=!1;function fm(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yh||vo==null||vo!==St(c)||(c=vo,"selectionStart"in c&&mh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),xa&&Na(xa,c)||(xa=c,c=Zl(gh,"onSelect"),0<c.length&&(s=new Ss("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=vo)))}function Ql(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var _o={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},vh={},pm={};f&&(pm=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function Jl(r){if(vh[r])return vh[r];if(!_o[r])return r;var s=_o[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in pm)return vh[r]=s[a];return r}var mm=Jl("animationend"),gm=Jl("animationiteration"),ym=Jl("animationstart"),vm=Jl("transitionend"),_m=new Map,wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(r,s){_m.set(r,s),l(s,[r])}for(var _h=0;_h<wm.length;_h++){var wh=wm[_h],C0=wh.toLowerCase(),k0=wh[0].toUpperCase()+wh.slice(1);Ni(C0,"on"+k0)}Ni(mm,"onAnimationEnd"),Ni(gm,"onAnimationIteration"),Ni(ym,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(vm,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function Em(r,s,a){var c=r.type||"unknown-event";r.currentTarget=a,ps(c,s,void 0,r),r.currentTarget=null}function Tm(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],d=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var w=c.length-1;0<=w;w--){var k=c[w],O=k.instance,$=k.currentTarget;if(k=k.listener,O!==m&&d.isPropagationStopped())break e;Em(d,k,$),m=O}else for(w=0;w<c.length;w++){if(k=c[w],O=k.instance,$=k.currentTarget,k=k.listener,O!==m&&d.isPropagationStopped())break e;Em(d,k,$),m=O}}}if(pr)throw r=hn,pr=!1,hn=null,r}function st(r,s){var a=s[Dh];a===void 0&&(a=s[Dh]=new Set);var c=r+"__bubble";a.has(c)||(Sm(s,r,2,!1),a.add(c))}function Eh(r,s,a){var c=0;s&&(c|=4),Sm(a,r,c,s)}var Xl="_reactListening"+Math.random().toString(36).slice(2);function Oa(r){if(!r[Xl]){r[Xl]=!0,i.forEach(function(a){a!=="selectionchange"&&(D0.has(a)||Eh(a,!1,r),Eh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Xl]||(s[Xl]=!0,Eh("selectionchange",!1,s))}}function Sm(r,s,a,c){switch(uo(s)){case 1:var d=Er;break;case 4:d=$l;break;default:d=Ia}a=d.bind(null,s,a,r),d=void 0,!Jn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?r.addEventListener(s,a,{capture:!0,passive:d}):r.addEventListener(s,a,!0):d!==void 0?r.addEventListener(s,a,{passive:d}):r.addEventListener(s,a,!1)}function Th(r,s,a,c,d){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var k=c.stateNode.containerInfo;if(k===d||k.nodeType===8&&k.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var O=w.tag;if((O===3||O===4)&&(O=w.stateNode.containerInfo,O===d||O.nodeType===8&&O.parentNode===d))return;w=w.return}for(;k!==null;){if(w=As(k),w===null)return;if(O=w.tag,O===5||O===6){c=m=w;continue e}k=k.parentNode}}c=c.return}Ti(function(){var $=m,Q=Ei(a),J=[];e:{var K=_m.get(r);if(K!==void 0){var ae=Ss,fe=r;switch(r){case"keypress":if(Ts(a)===0)break e;case"keydown":case"keyup":ae=Je;break;case"focusin":fe="focus",ae=zt;break;case"focusout":fe="blur",ae=zt;break;case"beforeblur":case"afterblur":ae=zt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Ca;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=ql;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Ar;break;case mm:case gm:case ym:ae=Kl;break;case vm:ae=go;break;case"scroll":ae=ho;break;case"wheel":ae=h0;break;case"copy":case"cut":case"paste":ae=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Pn}var pe=(s&4)!==0,Et=!pe&&r==="scroll",U=pe?K!==null?K+"Capture":null:K;pe=[];for(var M=$,z;M!==null;){z=M;var Z=z.stateNode;if(z.tag===5&&Z!==null&&(z=Z,U!==null&&(Z=fr(M,U),Z!=null&&pe.push(Va(M,Z,z)))),Et)break;M=M.return}0<pe.length&&(K=new ae(K,fe,null,a,Q),J.push({event:K,listeners:pe}))}}if((s&7)===0){e:{if(K=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",K&&a!==Mn&&(fe=a.relatedTarget||a.fromElement)&&(As(fe)||fe[Zr]))break e;if((ae||K)&&(K=Q.window===Q?Q:(K=Q.ownerDocument)?K.defaultView||K.parentWindow:window,ae?(fe=a.relatedTarget||a.toElement,ae=$,fe=fe?As(fe):null,fe!==null&&(Et=Sn(fe),fe!==Et||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ae=null,fe=$),ae!==fe)){if(pe=Ca,Z="onMouseLeave",U="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(pe=Pn,Z="onPointerLeave",U="onPointerEnter",M="pointer"),Et=ae==null?K:To(ae),z=fe==null?K:To(fe),K=new pe(Z,M+"leave",ae,a,Q),K.target=Et,K.relatedTarget=z,Z=null,As(Q)===$&&(pe=new pe(U,M+"enter",fe,a,Q),pe.target=z,pe.relatedTarget=Et,Z=pe),Et=Z,ae&&fe)t:{for(pe=ae,U=fe,M=0,z=pe;z;z=wo(z))M++;for(z=0,Z=U;Z;Z=wo(Z))z++;for(;0<M-z;)pe=wo(pe),M--;for(;0<z-M;)U=wo(U),z--;for(;M--;){if(pe===U||U!==null&&pe===U.alternate)break t;pe=wo(pe),U=wo(U)}pe=null}else pe=null;ae!==null&&Im(J,K,ae,pe,!1),fe!==null&&Et!==null&&Im(J,Et,fe,pe,!0)}}e:{if(K=$?To($):window,ae=K.nodeName&&K.nodeName.toLowerCase(),ae==="select"||ae==="input"&&K.type==="file")var me=v0;else if(rm(K))if(sm)me=T0;else{me=w0;var we=_0}else(ae=K.nodeName)&&ae.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(me=E0);if(me&&(me=me(r,$))){im(J,me,a,Q);break e}we&&we(r,K,$),r==="focusout"&&(we=K._wrapperState)&&we.controlled&&K.type==="number"&&ct(K,"number",K.value)}switch(we=$?To($):window,r){case"focusin":(rm(we)||we.contentEditable==="true")&&(vo=we,gh=$,xa=null);break;case"focusout":xa=gh=vo=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,fm(J,a,Q);break;case"selectionchange":if(A0)break;case"keydown":case"keyup":fm(J,a,Q)}var Ee;if(dh)e:{switch(r){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else yo?tm(r,a)&&(Ae="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(Xp&&a.locale!=="ko"&&(yo||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&yo&&(Ee=Wl()):(kn=Q,co="value"in kn?kn.value:kn.textContent,yo=!0)),we=Zl($,Ae),0<we.length&&(Ae=new v(Ae,r,null,a,Q),J.push({event:Ae,listeners:we}),Ee?Ae.data=Ee:(Ee=nm(a),Ee!==null&&(Ae.data=Ee)))),(Ee=f0?p0(r,a):m0(r,a))&&($=Zl($,"onBeforeInput"),0<$.length&&(Q=new v("onBeforeInput","beforeinput",null,a,Q),J.push({event:Q,listeners:$}),Q.data=Ee))}Tm(J,s)})}function Va(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Zl(r,s){for(var a=s+"Capture",c=[];r!==null;){var d=r,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=fr(r,a),m!=null&&c.unshift(Va(r,m,d)),m=fr(r,s),m!=null&&c.push(Va(r,m,d))),r=r.return}return c}function wo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Im(r,s,a,c,d){for(var m=s._reactName,w=[];a!==null&&a!==c;){var k=a,O=k.alternate,$=k.stateNode;if(O!==null&&O===c)break;k.tag===5&&$!==null&&(k=$,d?(O=fr(a,m),O!=null&&w.unshift(Va(a,O,k))):d||(O=fr(a,m),O!=null&&w.push(Va(a,O,k)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var P0=/\r\n?/g,R0=/\u0000|\uFFFD/g;function Am(r){return(typeof r=="string"?r:""+r).replace(P0,`
`).replace(R0,"")}function eu(r,s,a){if(s=Am(s),Am(r)!==s&&a)throw Error(t(425))}function tu(){}var Sh=null,Ih=null;function Ah(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ch=typeof setTimeout=="function"?setTimeout:void 0,N0=typeof clearTimeout=="function"?clearTimeout:void 0,Cm=typeof Promise=="function"?Promise:void 0,x0=typeof queueMicrotask=="function"?queueMicrotask:typeof Cm<"u"?function(r){return Cm.resolve(null).then(r).catch(b0)}:Ch;function b0(r){setTimeout(function(){throw r})}function kh(r,s){var a=s,c=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){r.removeChild(d),Di(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Di(s)}function xi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function km(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var Eo=Math.random().toString(36).slice(2),kr="__reactFiber$"+Eo,Ma="__reactProps$"+Eo,Zr="__reactContainer$"+Eo,Dh="__reactEvents$"+Eo,O0="__reactListeners$"+Eo,V0="__reactHandles$"+Eo;function As(r){var s=r[kr];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Zr]||a[kr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=km(r);r!==null;){if(a=r[kr])return a;r=km(r)}return s}r=a,a=r.parentNode}return null}function La(r){return r=r[kr]||r[Zr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function To(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function nu(r){return r[Ma]||null}var Ph=[],So=-1;function bi(r){return{current:r}}function ot(r){0>So||(r.current=Ph[So],Ph[So]=null,So--)}function tt(r,s){So++,Ph[So]=r.current,r.current=s}var Oi={},Jt=bi(Oi),dn=bi(!1),Cs=Oi;function Io(r,s){var a=r.type.contextTypes;if(!a)return Oi;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=s[m];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=d),d}function fn(r){return r=r.childContextTypes,r!=null}function ru(){ot(dn),ot(Jt)}function Dm(r,s,a){if(Jt.current!==Oi)throw Error(t(168));tt(Jt,s),tt(dn,a)}function Pm(r,s,a){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,X(r)||"Unknown",d));return te({},a,c)}function iu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Oi,Cs=Jt.current,tt(Jt,r),tt(dn,dn.current),!0}function Rm(r,s,a){var c=r.stateNode;if(!c)throw Error(t(169));a?(r=Pm(r,s,Cs),c.__reactInternalMemoizedMergedChildContext=r,ot(dn),ot(Jt),tt(Jt,r)):ot(dn),tt(dn,a)}var ei=null,su=!1,Rh=!1;function Nm(r){ei===null?ei=[r]:ei.push(r)}function M0(r){su=!0,Nm(r)}function Vi(){if(!Rh&&ei!==null){Rh=!0;var r=0,s=$e;try{var a=ei;for($e=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}ei=null,su=!1}catch(d){throw ei!==null&&(ei=ei.slice(r+1)),Wr(ro,Vi),d}finally{$e=s,Rh=!1}}return null}var Ao=[],Co=0,ou=null,au=0,Bn=[],zn=0,ks=null,ti=1,ni="";function Ds(r,s){Ao[Co++]=au,Ao[Co++]=ou,ou=r,au=s}function xm(r,s,a){Bn[zn++]=ti,Bn[zn++]=ni,Bn[zn++]=ks,ks=r;var c=ti;r=ni;var d=32-An(c)-1;c&=~(1<<d),a+=1;var m=32-An(s)+d;if(30<m){var w=d-d%5;m=(c&(1<<w)-1).toString(32),c>>=w,d-=w,ti=1<<32-An(s)+d|a<<d|c,ni=m+r}else ti=1<<m|a<<d|c,ni=r}function Nh(r){r.return!==null&&(Ds(r,1),xm(r,1,0))}function xh(r){for(;r===ou;)ou=Ao[--Co],Ao[Co]=null,au=Ao[--Co],Ao[Co]=null;for(;r===ks;)ks=Bn[--zn],Bn[zn]=null,ni=Bn[--zn],Bn[zn]=null,ti=Bn[--zn],Bn[zn]=null}var Rn=null,Nn=null,lt=!1,er=null;function bm(r,s){var a=qn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Om(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Rn=r,Nn=xi(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Rn=r,Nn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ks!==null?{id:ti,overflow:ni}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=qn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,Rn=r,Nn=null,!0):!1;default:return!1}}function bh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Oh(r){if(lt){var s=Nn;if(s){var a=s;if(!Om(r,s)){if(bh(r))throw Error(t(418));s=xi(a.nextSibling);var c=Rn;s&&Om(r,s)?bm(c,a):(r.flags=r.flags&-4097|2,lt=!1,Rn=r)}}else{if(bh(r))throw Error(t(418));r.flags=r.flags&-4097|2,lt=!1,Rn=r}}}function Vm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Rn=r}function lu(r){if(r!==Rn)return!1;if(!lt)return Vm(r),lt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Ah(r.type,r.memoizedProps)),s&&(s=Nn)){if(bh(r))throw Mm(),Error(t(418));for(;s;)bm(r,s),s=xi(s.nextSibling)}if(Vm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){Nn=xi(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}Nn=null}}else Nn=Rn?xi(r.stateNode.nextSibling):null;return!0}function Mm(){for(var r=Nn;r;)r=xi(r.nextSibling)}function ko(){Nn=Rn=null,lt=!1}function Vh(r){er===null?er=[r]:er.push(r)}var L0=re.ReactCurrentBatchConfig;function ja(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,r));var d=c,m=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(w){var k=d.refs;w===null?delete k[m]:k[m]=w},s._stringRef=m,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function uu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Lm(r){var s=r._init;return s(r._payload)}function jm(r){function s(U,M){if(r){var z=U.deletions;z===null?(U.deletions=[M],U.flags|=16):z.push(M)}}function a(U,M){if(!r)return null;for(;M!==null;)s(U,M),M=M.sibling;return null}function c(U,M){for(U=new Map;M!==null;)M.key!==null?U.set(M.key,M):U.set(M.index,M),M=M.sibling;return U}function d(U,M){return U=$i(U,M),U.index=0,U.sibling=null,U}function m(U,M,z){return U.index=z,r?(z=U.alternate,z!==null?(z=z.index,z<M?(U.flags|=2,M):z):(U.flags|=2,M)):(U.flags|=1048576,M)}function w(U){return r&&U.alternate===null&&(U.flags|=2),U}function k(U,M,z,Z){return M===null||M.tag!==6?(M=Cd(z,U.mode,Z),M.return=U,M):(M=d(M,z),M.return=U,M)}function O(U,M,z,Z){var me=z.type;return me===P?Q(U,M,z.props.children,Z,z.key):M!==null&&(M.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===We&&Lm(me)===M.type)?(Z=d(M,z.props),Z.ref=ja(U,M,z),Z.return=U,Z):(Z=bu(z.type,z.key,z.props,null,U.mode,Z),Z.ref=ja(U,M,z),Z.return=U,Z)}function $(U,M,z,Z){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=kd(z,U.mode,Z),M.return=U,M):(M=d(M,z.children||[]),M.return=U,M)}function Q(U,M,z,Z,me){return M===null||M.tag!==7?(M=Ms(z,U.mode,Z,me),M.return=U,M):(M=d(M,z),M.return=U,M)}function J(U,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Cd(""+M,U.mode,z),M.return=U,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Ne:return z=bu(M.type,M.key,M.props,null,U.mode,z),z.ref=ja(U,null,M),z.return=U,z;case ve:return M=kd(M,U.mode,z),M.return=U,M;case We:var Z=M._init;return J(U,Z(M._payload),z)}if(ht(M)||le(M))return M=Ms(M,U.mode,z,null),M.return=U,M;uu(U,M)}return null}function K(U,M,z,Z){var me=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return me!==null?null:k(U,M,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Ne:return z.key===me?O(U,M,z,Z):null;case ve:return z.key===me?$(U,M,z,Z):null;case We:return me=z._init,K(U,M,me(z._payload),Z)}if(ht(z)||le(z))return me!==null?null:Q(U,M,z,Z,null);uu(U,z)}return null}function ae(U,M,z,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return U=U.get(z)||null,k(M,U,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Ne:return U=U.get(Z.key===null?z:Z.key)||null,O(M,U,Z,me);case ve:return U=U.get(Z.key===null?z:Z.key)||null,$(M,U,Z,me);case We:var we=Z._init;return ae(U,M,z,we(Z._payload),me)}if(ht(Z)||le(Z))return U=U.get(z)||null,Q(M,U,Z,me,null);uu(M,Z)}return null}function fe(U,M,z,Z){for(var me=null,we=null,Ee=M,Ae=M=0,Ft=null;Ee!==null&&Ae<z.length;Ae++){Ee.index>Ae?(Ft=Ee,Ee=null):Ft=Ee.sibling;var Ke=K(U,Ee,z[Ae],Z);if(Ke===null){Ee===null&&(Ee=Ft);break}r&&Ee&&Ke.alternate===null&&s(U,Ee),M=m(Ke,M,Ae),we===null?me=Ke:we.sibling=Ke,we=Ke,Ee=Ft}if(Ae===z.length)return a(U,Ee),lt&&Ds(U,Ae),me;if(Ee===null){for(;Ae<z.length;Ae++)Ee=J(U,z[Ae],Z),Ee!==null&&(M=m(Ee,M,Ae),we===null?me=Ee:we.sibling=Ee,we=Ee);return lt&&Ds(U,Ae),me}for(Ee=c(U,Ee);Ae<z.length;Ae++)Ft=ae(Ee,U,Ae,z[Ae],Z),Ft!==null&&(r&&Ft.alternate!==null&&Ee.delete(Ft.key===null?Ae:Ft.key),M=m(Ft,M,Ae),we===null?me=Ft:we.sibling=Ft,we=Ft);return r&&Ee.forEach(function(Wi){return s(U,Wi)}),lt&&Ds(U,Ae),me}function pe(U,M,z,Z){var me=le(z);if(typeof me!="function")throw Error(t(150));if(z=me.call(z),z==null)throw Error(t(151));for(var we=me=null,Ee=M,Ae=M=0,Ft=null,Ke=z.next();Ee!==null&&!Ke.done;Ae++,Ke=z.next()){Ee.index>Ae?(Ft=Ee,Ee=null):Ft=Ee.sibling;var Wi=K(U,Ee,Ke.value,Z);if(Wi===null){Ee===null&&(Ee=Ft);break}r&&Ee&&Wi.alternate===null&&s(U,Ee),M=m(Wi,M,Ae),we===null?me=Wi:we.sibling=Wi,we=Wi,Ee=Ft}if(Ke.done)return a(U,Ee),lt&&Ds(U,Ae),me;if(Ee===null){for(;!Ke.done;Ae++,Ke=z.next())Ke=J(U,Ke.value,Z),Ke!==null&&(M=m(Ke,M,Ae),we===null?me=Ke:we.sibling=Ke,we=Ke);return lt&&Ds(U,Ae),me}for(Ee=c(U,Ee);!Ke.done;Ae++,Ke=z.next())Ke=ae(Ee,U,Ae,Ke.value,Z),Ke!==null&&(r&&Ke.alternate!==null&&Ee.delete(Ke.key===null?Ae:Ke.key),M=m(Ke,M,Ae),we===null?me=Ke:we.sibling=Ke,we=Ke);return r&&Ee.forEach(function(gT){return s(U,gT)}),lt&&Ds(U,Ae),me}function Et(U,M,z,Z){if(typeof z=="object"&&z!==null&&z.type===P&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Ne:e:{for(var me=z.key,we=M;we!==null;){if(we.key===me){if(me=z.type,me===P){if(we.tag===7){a(U,we.sibling),M=d(we,z.props.children),M.return=U,U=M;break e}}else if(we.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===We&&Lm(me)===we.type){a(U,we.sibling),M=d(we,z.props),M.ref=ja(U,we,z),M.return=U,U=M;break e}a(U,we);break}else s(U,we);we=we.sibling}z.type===P?(M=Ms(z.props.children,U.mode,Z,z.key),M.return=U,U=M):(Z=bu(z.type,z.key,z.props,null,U.mode,Z),Z.ref=ja(U,M,z),Z.return=U,U=Z)}return w(U);case ve:e:{for(we=z.key;M!==null;){if(M.key===we)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){a(U,M.sibling),M=d(M,z.children||[]),M.return=U,U=M;break e}else{a(U,M);break}else s(U,M);M=M.sibling}M=kd(z,U.mode,Z),M.return=U,U=M}return w(U);case We:return we=z._init,Et(U,M,we(z._payload),Z)}if(ht(z))return fe(U,M,z,Z);if(le(z))return pe(U,M,z,Z);uu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,M!==null&&M.tag===6?(a(U,M.sibling),M=d(M,z),M.return=U,U=M):(a(U,M),M=Cd(z,U.mode,Z),M.return=U,U=M),w(U)):a(U,M)}return Et}var Do=jm(!0),Fm=jm(!1),cu=bi(null),hu=null,Po=null,Mh=null;function Lh(){Mh=Po=hu=null}function jh(r){var s=cu.current;ot(cu),r._currentValue=s}function Fh(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function Ro(r,s){hu=r,Mh=Po=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(pn=!0),r.firstContext=null)}function $n(r){var s=r._currentValue;if(Mh!==r)if(r={context:r,memoizedValue:s,next:null},Po===null){if(hu===null)throw Error(t(308));Po=r,hu.dependencies={lanes:0,firstContext:r}}else Po=Po.next=r;return s}var Ps=null;function Uh(r){Ps===null?Ps=[r]:Ps.push(r)}function Um(r,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Uh(s)):(a.next=d.next,d.next=a),s.interleaved=a,ri(r,c)}function ri(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Mi=!1;function Bh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ii(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Li(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Ge&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,ri(r,a)}return d=c.interleaved,d===null?(s.next=s,Uh(c)):(s.next=d.next,d.next=s),c.interleaved=s,ri(r,a)}function du(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,_a(r,a)}}function zm(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function fu(r,s,a,c){var d=r.updateQueue;Mi=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var O=k,$=O.next;O.next=null,w===null?m=$:w.next=$,w=O;var Q=r.alternate;Q!==null&&(Q=Q.updateQueue,k=Q.lastBaseUpdate,k!==w&&(k===null?Q.firstBaseUpdate=$:k.next=$,Q.lastBaseUpdate=O))}if(m!==null){var J=d.baseState;w=0,Q=$=O=null,k=m;do{var K=k.lane,ae=k.eventTime;if((c&K)===K){Q!==null&&(Q=Q.next={eventTime:ae,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var fe=r,pe=k;switch(K=s,ae=a,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){J=fe.call(ae,J,K);break e}J=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,K=typeof fe=="function"?fe.call(ae,J,K):fe,K==null)break e;J=te({},J,K);break e;case 2:Mi=!0}}k.callback!==null&&k.lane!==0&&(r.flags|=64,K=d.effects,K===null?d.effects=[k]:K.push(k))}else ae={eventTime:ae,lane:K,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Q===null?($=Q=ae,O=J):Q=Q.next=ae,w|=K;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;K=k,k=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);if(Q===null&&(O=J),d.baseState=O,d.firstBaseUpdate=$,d.lastBaseUpdate=Q,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else m===null&&(d.shared.lanes=0);xs|=w,r.lanes=w,r.memoizedState=J}}function $m(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Fa={},Dr=bi(Fa),Ua=bi(Fa),Ba=bi(Fa);function Rs(r){if(r===Fa)throw Error(t(174));return r}function zh(r,s){switch(tt(Ba,s),tt(Ua,r),tt(Dr,Fa),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:_i(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=_i(s,r)}ot(Dr),tt(Dr,s)}function No(){ot(Dr),ot(Ua),ot(Ba)}function Wm(r){Rs(Ba.current);var s=Rs(Dr.current),a=_i(s,r.type);s!==a&&(tt(Ua,r),tt(Dr,a))}function $h(r){Ua.current===r&&(ot(Dr),ot(Ua))}var ft=bi(0);function pu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Wh=[];function Hh(){for(var r=0;r<Wh.length;r++)Wh[r]._workInProgressVersionPrimary=null;Wh.length=0}var mu=re.ReactCurrentDispatcher,qh=re.ReactCurrentBatchConfig,Ns=0,pt=null,xt=null,Lt=null,gu=!1,za=!1,$a=0,j0=0;function Xt(){throw Error(t(321))}function Gh(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Zn(r[a],s[a]))return!1;return!0}function Kh(r,s,a,c,d,m){if(Ns=m,pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,mu.current=r===null||r.memoizedState===null?z0:$0,r=a(c,d),za){m=0;do{if(za=!1,$a=0,25<=m)throw Error(t(301));m+=1,Lt=xt=null,s.updateQueue=null,mu.current=W0,r=a(c,d)}while(za)}if(mu.current=_u,s=xt!==null&&xt.next!==null,Ns=0,Lt=xt=pt=null,gu=!1,s)throw Error(t(300));return r}function Yh(){var r=$a!==0;return $a=0,r}function Pr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?pt.memoizedState=Lt=r:Lt=Lt.next=r,Lt}function Wn(){if(xt===null){var r=pt.alternate;r=r!==null?r.memoizedState:null}else r=xt.next;var s=Lt===null?pt.memoizedState:Lt.next;if(s!==null)Lt=s,xt=r;else{if(r===null)throw Error(t(310));xt=r,r={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Lt===null?pt.memoizedState=Lt=r:Lt=Lt.next=r}return Lt}function Wa(r,s){return typeof s=="function"?s(r):s}function Qh(r){var s=Wn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=xt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var k=w=null,O=null,$=m;do{var Q=$.lane;if((Ns&Q)===Q)O!==null&&(O=O.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:r(c,$.action);else{var J={lane:Q,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};O===null?(k=O=J,w=c):O=O.next=J,pt.lanes|=Q,xs|=Q}$=$.next}while($!==null&&$!==m);O===null?w=c:O.next=k,Zn(c,s.memoizedState)||(pn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=O,a.lastRenderedState=c}if(r=a.interleaved,r!==null){d=r;do m=d.lane,pt.lanes|=m,xs|=m,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Jh(r){var s=Wn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=r(m,w.action),w=w.next;while(w!==d);Zn(m,s.memoizedState)||(pn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function Hm(){}function qm(r,s){var a=pt,c=Wn(),d=s(),m=!Zn(c.memoizedState,d);if(m&&(c.memoizedState=d,pn=!0),c=c.queue,Xh(Ym.bind(null,a,c,r),[r]),c.getSnapshot!==s||m||Lt!==null&&Lt.memoizedState.tag&1){if(a.flags|=2048,Ha(9,Km.bind(null,a,c,d,s),void 0,null),jt===null)throw Error(t(349));(Ns&30)!==0||Gm(a,s,d)}return d}function Gm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=pt.updateQueue,s===null?(s={lastEffect:null,stores:null},pt.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Km(r,s,a,c){s.value=a,s.getSnapshot=c,Qm(s)&&Jm(r)}function Ym(r,s,a){return a(function(){Qm(s)&&Jm(r)})}function Qm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Zn(r,a)}catch{return!0}}function Jm(r){var s=ri(r,1);s!==null&&ir(s,r,1,-1)}function Xm(r){var s=Pr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:r},s.queue=r,r=r.dispatch=B0.bind(null,pt,r),[s.memoizedState,r]}function Ha(r,s,a,c){return r={tag:r,create:s,destroy:a,deps:c,next:null},s=pt.updateQueue,s===null?(s={lastEffect:null,stores:null},pt.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r)),r}function Zm(){return Wn().memoizedState}function yu(r,s,a,c){var d=Pr();pt.flags|=r,d.memoizedState=Ha(1|s,a,void 0,c===void 0?null:c)}function vu(r,s,a,c){var d=Wn();c=c===void 0?null:c;var m=void 0;if(xt!==null){var w=xt.memoizedState;if(m=w.destroy,c!==null&&Gh(c,w.deps)){d.memoizedState=Ha(s,a,m,c);return}}pt.flags|=r,d.memoizedState=Ha(1|s,a,m,c)}function eg(r,s){return yu(8390656,8,r,s)}function Xh(r,s){return vu(2048,8,r,s)}function tg(r,s){return vu(4,2,r,s)}function ng(r,s){return vu(4,4,r,s)}function rg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function ig(r,s,a){return a=a!=null?a.concat([r]):null,vu(4,4,rg.bind(null,s,r),a)}function Zh(){}function sg(r,s){var a=Wn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Gh(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function og(r,s){var a=Wn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Gh(s,c[1])?c[0]:(r=r(),a.memoizedState=[r,s],r)}function ag(r,s,a){return(Ns&21)===0?(r.baseState&&(r.baseState=!1,pn=!0),r.memoizedState=a):(Zn(a,s)||(a=ya(),pt.lanes|=a,xs|=a,r.baseState=!0),s)}function F0(r,s){var a=$e;$e=a!==0&&4>a?a:4,r(!0);var c=qh.transition;qh.transition={};try{r(!1),s()}finally{$e=a,qh.transition=c}}function lg(){return Wn().memoizedState}function U0(r,s,a){var c=Bi(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},ug(r))cg(s,a);else if(a=Um(r,s,a,c),a!==null){var d=ln();ir(a,r,c,d),hg(a,s,c)}}function B0(r,s,a){var c=Bi(r),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(ug(r))cg(s,d);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,k=m(w,a);if(d.hasEagerState=!0,d.eagerState=k,Zn(k,w)){var O=s.interleaved;O===null?(d.next=d,Uh(s)):(d.next=O.next,O.next=d),s.interleaved=d;return}}catch{}finally{}a=Um(r,s,d,c),a!==null&&(d=ln(),ir(a,r,c,d),hg(a,s,c))}}function ug(r){var s=r.alternate;return r===pt||s!==null&&s===pt}function cg(r,s){za=gu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function hg(r,s,a){if((a&4194240)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,_a(r,a)}}var _u={readContext:$n,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},z0={readContext:$n,useCallback:function(r,s){return Pr().memoizedState=[r,s===void 0?null:s],r},useContext:$n,useEffect:eg,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,yu(4194308,4,rg.bind(null,s,r),a)},useLayoutEffect:function(r,s){return yu(4194308,4,r,s)},useInsertionEffect:function(r,s){return yu(4,2,r,s)},useMemo:function(r,s){var a=Pr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var c=Pr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=U0.bind(null,pt,r),[c.memoizedState,r]},useRef:function(r){var s=Pr();return r={current:r},s.memoizedState=r},useState:Xm,useDebugValue:Zh,useDeferredValue:function(r){return Pr().memoizedState=r},useTransition:function(){var r=Xm(!1),s=r[0];return r=F0.bind(null,r[1]),Pr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var c=pt,d=Pr();if(lt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),jt===null)throw Error(t(349));(Ns&30)!==0||Gm(c,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,eg(Ym.bind(null,c,m,r),[r]),c.flags|=2048,Ha(9,Km.bind(null,c,m,a,s),void 0,null),a},useId:function(){var r=Pr(),s=jt.identifierPrefix;if(lt){var a=ni,c=ti;a=(c&~(1<<32-An(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=$a++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=j0++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},$0={readContext:$n,useCallback:sg,useContext:$n,useEffect:Xh,useImperativeHandle:ig,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:og,useReducer:Qh,useRef:Zm,useState:function(){return Qh(Wa)},useDebugValue:Zh,useDeferredValue:function(r){var s=Wn();return ag(s,xt.memoizedState,r)},useTransition:function(){var r=Qh(Wa)[0],s=Wn().memoizedState;return[r,s]},useMutableSource:Hm,useSyncExternalStore:qm,useId:lg,unstable_isNewReconciler:!1},W0={readContext:$n,useCallback:sg,useContext:$n,useEffect:Xh,useImperativeHandle:ig,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:og,useReducer:Jh,useRef:Zm,useState:function(){return Jh(Wa)},useDebugValue:Zh,useDeferredValue:function(r){var s=Wn();return xt===null?s.memoizedState=r:ag(s,xt.memoizedState,r)},useTransition:function(){var r=Jh(Wa)[0],s=Wn().memoizedState;return[r,s]},useMutableSource:Hm,useSyncExternalStore:qm,useId:lg,unstable_isNewReconciler:!1};function tr(r,s){if(r&&r.defaultProps){s=te({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function ed(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:te({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var wu={isMounted:function(r){return(r=r._reactInternals)?Sn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var c=ln(),d=Bi(r),m=ii(c,d);m.payload=s,a!=null&&(m.callback=a),s=Li(r,m,d),s!==null&&(ir(s,r,d,c),du(s,r,d))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=ln(),d=Bi(r),m=ii(c,d);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=Li(r,m,d),s!==null&&(ir(s,r,d,c),du(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=ln(),c=Bi(r),d=ii(a,c);d.tag=2,s!=null&&(d.callback=s),s=Li(r,d,c),s!==null&&(ir(s,r,c,a),du(s,r,c))}};function dg(r,s,a,c,d,m,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,m,w):s.prototype&&s.prototype.isPureReactComponent?!Na(a,c)||!Na(d,m):!0}function fg(r,s,a){var c=!1,d=Oi,m=s.contextType;return typeof m=="object"&&m!==null?m=$n(m):(d=fn(s)?Cs:Jt.current,c=s.contextTypes,m=(c=c!=null)?Io(r,d):Oi),s=new s(a,m),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=wu,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=m),s}function pg(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&wu.enqueueReplaceState(s,s.state,null)}function td(r,s,a,c){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Bh(r);var m=s.contextType;typeof m=="object"&&m!==null?d.context=$n(m):(m=fn(s)?Cs:Jt.current,d.context=Io(r,m)),d.state=r.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(ed(r,s,m,a),d.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&wu.enqueueReplaceState(d,d.state,null),fu(r,a,d,c),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function xo(r,s){try{var a="",c=s;do a+=xe(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:s,stack:d,digest:null}}function nd(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function rd(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var H0=typeof WeakMap=="function"?WeakMap:Map;function mg(r,s,a){a=ii(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){ku||(ku=!0,vd=c),rd(r,s)},a}function gg(r,s,a){a=ii(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){rd(r,s)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){rd(r,s),typeof c!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function yg(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new H0;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),r=sT.bind(null,r,s,a),s.then(r,r))}function vg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function _g(r,s,a,c,d){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=ii(-1,1),s.tag=2,Li(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var q0=re.ReactCurrentOwner,pn=!1;function an(r,s,a,c){s.child=r===null?Fm(s,null,a,c):Do(s,r.child,a,c)}function wg(r,s,a,c,d){a=a.render;var m=s.ref;return Ro(s,d),c=Kh(r,s,a,c,m,d),a=Yh(),r!==null&&!pn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,si(r,s,d)):(lt&&a&&Nh(s),s.flags|=1,an(r,s,c,d),s.child)}function Eg(r,s,a,c,d){if(r===null){var m=a.type;return typeof m=="function"&&!Ad(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,Tg(r,s,m,c,d)):(r=bu(a.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,(r.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Na,a(w,c)&&r.ref===s.ref)return si(r,s,d)}return s.flags|=1,r=$i(m,c),r.ref=s.ref,r.return=s,s.child=r}function Tg(r,s,a,c,d){if(r!==null){var m=r.memoizedProps;if(Na(m,c)&&r.ref===s.ref)if(pn=!1,s.pendingProps=c=m,(r.lanes&d)!==0)(r.flags&131072)!==0&&(pn=!0);else return s.lanes=r.lanes,si(r,s,d)}return id(r,s,a,c,d)}function Sg(r,s,a){var c=s.pendingProps,d=c.children,m=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Oo,xn),xn|=a;else{if((a&1073741824)===0)return r=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,tt(Oo,xn),xn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,tt(Oo,xn),xn|=c}else m!==null?(c=m.baseLanes|a,s.memoizedState=null):c=a,tt(Oo,xn),xn|=c;return an(r,s,d,a),s.child}function Ig(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function id(r,s,a,c,d){var m=fn(a)?Cs:Jt.current;return m=Io(s,m),Ro(s,d),a=Kh(r,s,a,c,m,d),c=Yh(),r!==null&&!pn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,si(r,s,d)):(lt&&c&&Nh(s),s.flags|=1,an(r,s,a,d),s.child)}function Ag(r,s,a,c,d){if(fn(a)){var m=!0;iu(s)}else m=!1;if(Ro(s,d),s.stateNode===null)Tu(r,s),fg(s,a,c),td(s,a,c,d),c=!0;else if(r===null){var w=s.stateNode,k=s.memoizedProps;w.props=k;var O=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=$n($):($=fn(a)?Cs:Jt.current,$=Io(s,$));var Q=a.getDerivedStateFromProps,J=typeof Q=="function"||typeof w.getSnapshotBeforeUpdate=="function";J||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==c||O!==$)&&pg(s,w,c,$),Mi=!1;var K=s.memoizedState;w.state=K,fu(s,c,w,d),O=s.memoizedState,k!==c||K!==O||dn.current||Mi?(typeof Q=="function"&&(ed(s,a,Q,c),O=s.memoizedState),(k=Mi||dg(s,a,k,c,K,O,$))?(J||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=O),w.props=c,w.state=O,w.context=$,c=k):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Bm(r,s),k=s.memoizedProps,$=s.type===s.elementType?k:tr(s.type,k),w.props=$,J=s.pendingProps,K=w.context,O=a.contextType,typeof O=="object"&&O!==null?O=$n(O):(O=fn(a)?Cs:Jt.current,O=Io(s,O));var ae=a.getDerivedStateFromProps;(Q=typeof ae=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==J||K!==O)&&pg(s,w,c,O),Mi=!1,K=s.memoizedState,w.state=K,fu(s,c,w,d);var fe=s.memoizedState;k!==J||K!==fe||dn.current||Mi?(typeof ae=="function"&&(ed(s,a,ae,c),fe=s.memoizedState),($=Mi||dg(s,a,$,c,K,fe,O)||!1)?(Q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,fe,O),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,fe,O)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=fe),w.props=c,w.state=fe,w.context=O,c=$):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),c=!1)}return sd(r,s,a,c,m,d)}function sd(r,s,a,c,d,m){Ig(r,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&Rm(s,a,!1),si(r,s,m);c=s.stateNode,q0.current=s;var k=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&w?(s.child=Do(s,r.child,null,m),s.child=Do(s,null,k,m)):an(r,s,k,m),s.memoizedState=c.state,d&&Rm(s,a,!0),s.child}function Cg(r){var s=r.stateNode;s.pendingContext?Dm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Dm(r,s.context,!1),zh(r,s.containerInfo)}function kg(r,s,a,c,d){return ko(),Vh(d),s.flags|=256,an(r,s,a,c),s.child}var od={dehydrated:null,treeContext:null,retryLane:0};function ad(r){return{baseLanes:r,cachePool:null,transitions:null}}function Dg(r,s,a){var c=s.pendingProps,d=ft.current,m=!1,w=(s.flags&128)!==0,k;if((k=w)||(k=r!==null&&r.memoizedState===null?!1:(d&2)!==0),k?(m=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),tt(ft,d&1),r===null)return Oh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,r=c.fallback,m?(c=s.mode,m=s.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=Ou(w,c,0,null),r=Ms(r,c,a,null),m.return=s,r.return=s,m.sibling=r,s.child=m,s.child.memoizedState=ad(a),s.memoizedState=od,r):ld(s,w));if(d=r.memoizedState,d!==null&&(k=d.dehydrated,k!==null))return G0(r,s,w,c,k,d,a);if(m){m=c.fallback,w=s.mode,d=r.child,k=d.sibling;var O={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=O,s.deletions=null):(c=$i(d,O),c.subtreeFlags=d.subtreeFlags&14680064),k!==null?m=$i(k,m):(m=Ms(m,w,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,w=r.child.memoizedState,w=w===null?ad(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=r.childLanes&~a,s.memoizedState=od,c}return m=r.child,r=m.sibling,c=$i(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=c,s.memoizedState=null,c}function ld(r,s){return s=Ou({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Eu(r,s,a,c){return c!==null&&Vh(c),Do(s,r.child,null,a),r=ld(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function G0(r,s,a,c,d,m,w){if(a)return s.flags&256?(s.flags&=-257,c=nd(Error(t(422))),Eu(r,s,w,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(m=c.fallback,d=s.mode,c=Ou({mode:"visible",children:c.children},d,0,null),m=Ms(m,d,w,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&Do(s,r.child,null,w),s.child.memoizedState=ad(w),s.memoizedState=od,m);if((s.mode&1)===0)return Eu(r,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var k=c.dgst;return c=k,m=Error(t(419)),c=nd(m,c,void 0),Eu(r,s,w,c)}if(k=(w&r.childLanes)!==0,pn||k){if(c=jt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,ri(r,d),ir(c,r,d,-1))}return Id(),c=nd(Error(t(421))),Eu(r,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=r.child,s=oT.bind(null,r),d._reactRetry=s,null):(r=m.treeContext,Nn=xi(d.nextSibling),Rn=s,lt=!0,er=null,r!==null&&(Bn[zn++]=ti,Bn[zn++]=ni,Bn[zn++]=ks,ti=r.id,ni=r.overflow,ks=s),s=ld(s,c.children),s.flags|=4096,s)}function Pg(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Fh(r.return,s,a)}function ud(r,s,a,c,d){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function Rg(r,s,a){var c=s.pendingProps,d=c.revealOrder,m=c.tail;if(an(r,s,c.children,a),c=ft.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Pg(r,a,s);else if(r.tag===19)Pg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(tt(ft,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)r=a.alternate,r!==null&&pu(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),ud(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&pu(r)===null){s.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}ud(s,!0,a,null,m);break;case"together":ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Tu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function si(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),xs|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=$i(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=$i(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function K0(r,s,a){switch(s.tag){case 3:Cg(s),ko();break;case 5:Wm(s);break;case 1:fn(s.type)&&iu(s);break;case 4:zh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;tt(cu,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(tt(ft,ft.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Dg(r,s,a):(tt(ft,ft.current&1),r=si(r,s,a),r!==null?r.sibling:null);tt(ft,ft.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(r.flags&128)!==0){if(c)return Rg(r,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),tt(ft,ft.current),c)break;return null;case 22:case 23:return s.lanes=0,Sg(r,s,a)}return si(r,s,a)}var Ng,cd,xg,bg;Ng=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},cd=function(){},xg=function(r,s,a,c){var d=r.memoizedProps;if(d!==c){r=s.stateNode,Rs(Dr.current);var m=null;switch(a){case"input":d=qe(r,d),c=qe(r,c),m=[];break;case"select":d=te({},d,{value:void 0}),c=te({},c,{value:void 0}),m=[];break;case"textarea":d=cs(r,d),c=cs(r,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=tu)}un(a,c);var w;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var k=d[$];for(w in k)k.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?m||(m=[]):(m=m||[]).push($,null));for($ in c){var O=c[$];if(k=d!=null?d[$]:void 0,c.hasOwnProperty($)&&O!==k&&(O!=null||k!=null))if($==="style")if(k){for(w in k)!k.hasOwnProperty(w)||O&&O.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in O)O.hasOwnProperty(w)&&k[w]!==O[w]&&(a||(a={}),a[w]=O[w])}else a||(m||(m=[]),m.push($,a)),a=O;else $==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,k=k?k.__html:void 0,O!=null&&k!==O&&(m=m||[]).push($,O)):$==="children"?typeof O!="string"&&typeof O!="number"||(m=m||[]).push($,""+O):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(O!=null&&$==="onScroll"&&st("scroll",r),m||k===O||(m=[])):(m=m||[]).push($,O))}a&&(m=m||[]).push("style",a);var $=m;(s.updateQueue=$)&&(s.flags|=4)}},bg=function(r,s,a,c){a!==c&&(s.flags|=4)};function qa(r,s){if(!lt)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Zt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function Y0(r,s,a){var c=s.pendingProps;switch(xh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(s),null;case 1:return fn(s.type)&&ru(),Zt(s),null;case 3:return c=s.stateNode,No(),ot(dn),ot(Jt),Hh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(lu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,er!==null&&(Ed(er),er=null))),cd(r,s),Zt(s),null;case 5:$h(s);var d=Rs(Ba.current);if(a=s.type,r!==null&&s.stateNode!=null)xg(r,s,a,c,d),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Zt(s),null}if(r=Rs(Dr.current),lu(s)){c=s.stateNode,a=s.type;var m=s.memoizedProps;switch(c[kr]=s,c[Ma]=m,r=(s.mode&1)!==0,a){case"dialog":st("cancel",c),st("close",c);break;case"iframe":case"object":case"embed":st("load",c);break;case"video":case"audio":for(d=0;d<ba.length;d++)st(ba[d],c);break;case"source":st("error",c);break;case"img":case"image":case"link":st("error",c),st("load",c);break;case"details":st("toggle",c);break;case"input":On(c,m),st("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},st("invalid",c);break;case"textarea":vi(c,m),st("invalid",c)}un(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var k=m[w];w==="children"?typeof k=="string"?c.textContent!==k&&(m.suppressHydrationWarning!==!0&&eu(c.textContent,k,r),d=["children",k]):typeof k=="number"&&c.textContent!==""+k&&(m.suppressHydrationWarning!==!0&&eu(c.textContent,k,r),d=["children",""+k]):o.hasOwnProperty(w)&&k!=null&&w==="onScroll"&&st("scroll",c)}switch(a){case"input":Ve(c),yi(c,m,!0);break;case"textarea":Ve(c),cr(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=tu)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=hs(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=w.createElement(a,{is:c.is}):(r=w.createElement(a),a==="select"&&(w=r,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):r=w.createElementNS(r,a),r[kr]=s,r[Ma]=c,Ng(r,s,!1,!1),s.stateNode=r;e:{switch(w=zr(a,c),a){case"dialog":st("cancel",r),st("close",r),d=c;break;case"iframe":case"object":case"embed":st("load",r),d=c;break;case"video":case"audio":for(d=0;d<ba.length;d++)st(ba[d],r);d=c;break;case"source":st("error",r),d=c;break;case"img":case"image":case"link":st("error",r),st("load",r),d=c;break;case"details":st("toggle",r),d=c;break;case"input":On(r,c),d=qe(r,c),st("invalid",r);break;case"option":d=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},d=te({},c,{value:void 0}),st("invalid",r);break;case"textarea":vi(r,c),d=cs(r,c),st("invalid",r);break;default:d=c}un(a,d),k=d;for(m in k)if(k.hasOwnProperty(m)){var O=k[m];m==="style"?Br(r,O):m==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&wi(r,O)):m==="children"?typeof O=="string"?(a!=="textarea"||O!=="")&&dr(r,O):typeof O=="number"&&dr(r,""+O):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?O!=null&&m==="onScroll"&&st("scroll",r):O!=null&&oe(r,m,O,w))}switch(a){case"input":Ve(r),yi(r,c,!1);break;case"textarea":Ve(r),cr(r);break;case"option":c.value!=null&&r.setAttribute("value",""+ue(c.value));break;case"select":r.multiple=!!c.multiple,m=c.value,m!=null?_n(r,!!c.multiple,m,!1):c.defaultValue!=null&&_n(r,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=tu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Zt(s),null;case 6:if(r&&s.stateNode!=null)bg(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Rs(Ba.current),Rs(Dr.current),lu(s)){if(c=s.stateNode,a=s.memoizedProps,c[kr]=s,(m=c.nodeValue!==a)&&(r=Rn,r!==null))switch(r.tag){case 3:eu(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&eu(c.nodeValue,a,(r.mode&1)!==0)}m&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[kr]=s,s.stateNode=c}return Zt(s),null;case 13:if(ot(ft),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(lt&&Nn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Mm(),ko(),s.flags|=98560,m=!1;else if(m=lu(s),c!==null&&c.dehydrated!==null){if(r===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[kr]=s}else ko(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Zt(s),m=!1}else er!==null&&(Ed(er),er=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(ft.current&1)!==0?bt===0&&(bt=3):Id())),s.updateQueue!==null&&(s.flags|=4),Zt(s),null);case 4:return No(),cd(r,s),r===null&&Oa(s.stateNode.containerInfo),Zt(s),null;case 10:return jh(s.type._context),Zt(s),null;case 17:return fn(s.type)&&ru(),Zt(s),null;case 19:if(ot(ft),m=s.memoizedState,m===null)return Zt(s),null;if(c=(s.flags&128)!==0,w=m.rendering,w===null)if(c)qa(m,!1);else{if(bt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=pu(r),w!==null){for(s.flags|=128,qa(m,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)m=a,r=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,r=w.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return tt(ft,ft.current&1|2),s.child}r=r.sibling}m.tail!==null&&it()>Vo&&(s.flags|=128,c=!0,qa(m,!1),s.lanes=4194304)}else{if(!c)if(r=pu(w),r!==null){if(s.flags|=128,c=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),qa(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!lt)return Zt(s),null}else 2*it()-m.renderingStartTime>Vo&&a!==1073741824&&(s.flags|=128,c=!0,qa(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(a=m.last,a!==null?a.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=it(),s.sibling=null,a=ft.current,tt(ft,c?a&1|2:a&1),s):(Zt(s),null);case 22:case 23:return Sd(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(xn&1073741824)!==0&&(Zt(s),s.subtreeFlags&6&&(s.flags|=8192)):Zt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Q0(r,s){switch(xh(s),s.tag){case 1:return fn(s.type)&&ru(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return No(),ot(dn),ot(Jt),Hh(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return $h(s),null;case 13:if(ot(ft),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ko()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ot(ft),null;case 4:return No(),null;case 10:return jh(s.type._context),null;case 22:case 23:return Sd(),null;case 24:return null;default:return null}}var Su=!1,en=!1,J0=typeof WeakSet=="function"?WeakSet:Set,de=null;function bo(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){_t(r,s,c)}else a.current=null}function hd(r,s,a){try{a()}catch(c){_t(r,s,c)}}var Og=!1;function X0(r,s){if(Sh=Qr,r=dm(),mh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,k=-1,O=-1,$=0,Q=0,J=r,K=null;t:for(;;){for(var ae;J!==a||d!==0&&J.nodeType!==3||(k=w+d),J!==m||c!==0&&J.nodeType!==3||(O=w+c),J.nodeType===3&&(w+=J.nodeValue.length),(ae=J.firstChild)!==null;)K=J,J=ae;for(;;){if(J===r)break t;if(K===a&&++$===d&&(k=w),K===m&&++Q===c&&(O=w),(ae=J.nextSibling)!==null)break;J=K,K=J.parentNode}J=ae}a=k===-1||O===-1?null:{start:k,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ih={focusedElem:r,selectionRange:a},Qr=!1,de=s;de!==null;)if(s=de,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,de=r;else for(;de!==null;){s=de;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,Et=fe.memoizedState,U=s.stateNode,M=U.getSnapshotBeforeUpdate(s.elementType===s.type?pe:tr(s.type,pe),Et);U.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){_t(s,s.return,Z)}if(r=s.sibling,r!==null){r.return=s.return,de=r;break}de=s.return}return fe=Og,Og=!1,fe}function Ga(r,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&r)===r){var m=d.destroy;d.destroy=void 0,m!==void 0&&hd(s,a,m)}d=d.next}while(d!==c)}}function Iu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function dd(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Vg(r){var s=r.alternate;s!==null&&(r.alternate=null,Vg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[kr],delete s[Ma],delete s[Dh],delete s[O0],delete s[V0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Mg(r){return r.tag===5||r.tag===3||r.tag===4}function Lg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Mg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function fd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=tu));else if(c!==4&&(r=r.child,r!==null))for(fd(r,s,a),r=r.sibling;r!==null;)fd(r,s,a),r=r.sibling}function pd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(pd(r,s,a),r=r.sibling;r!==null;)pd(r,s,a),r=r.sibling}var $t=null,nr=!1;function ji(r,s,a){for(a=a.child;a!==null;)jg(r,s,a),a=a.sibling}function jg(r,s,a){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(gs,a)}catch{}switch(a.tag){case 5:en||bo(a,s);case 6:var c=$t,d=nr;$t=null,ji(r,s,a),$t=c,nr=d,$t!==null&&(nr?(r=$t,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):$t.removeChild(a.stateNode));break;case 18:$t!==null&&(nr?(r=$t,a=a.stateNode,r.nodeType===8?kh(r.parentNode,a):r.nodeType===1&&kh(r,a),Di(r)):kh($t,a.stateNode));break;case 4:c=$t,d=nr,$t=a.stateNode.containerInfo,nr=!0,ji(r,s,a),$t=c,nr=d;break;case 0:case 11:case 14:case 15:if(!en&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&hd(a,s,w),d=d.next}while(d!==c)}ji(r,s,a);break;case 1:if(!en&&(bo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(k){_t(a,s,k)}ji(r,s,a);break;case 21:ji(r,s,a);break;case 22:a.mode&1?(en=(c=en)||a.memoizedState!==null,ji(r,s,a),en=c):ji(r,s,a);break;default:ji(r,s,a)}}function Fg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new J0),s.forEach(function(c){var d=aT.bind(null,r,c);a.has(c)||(a.add(c),c.then(d,d))})}}function rr(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=r,w=s,k=w;e:for(;k!==null;){switch(k.tag){case 5:$t=k.stateNode,nr=!1;break e;case 3:$t=k.stateNode.containerInfo,nr=!0;break e;case 4:$t=k.stateNode.containerInfo,nr=!0;break e}k=k.return}if($t===null)throw Error(t(160));jg(m,w,d),$t=null,nr=!1;var O=d.alternate;O!==null&&(O.return=null),d.return=null}catch($){_t(d,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Ug(s,r),s=s.sibling}function Ug(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(rr(s,r),Rr(r),c&4){try{Ga(3,r,r.return),Iu(3,r)}catch(pe){_t(r,r.return,pe)}try{Ga(5,r,r.return)}catch(pe){_t(r,r.return,pe)}}break;case 1:rr(s,r),Rr(r),c&512&&a!==null&&bo(a,a.return);break;case 5:if(rr(s,r),Rr(r),c&512&&a!==null&&bo(a,a.return),r.flags&32){var d=r.stateNode;try{dr(d,"")}catch(pe){_t(r,r.return,pe)}}if(c&4&&(d=r.stateNode,d!=null)){var m=r.memoizedProps,w=a!==null?a.memoizedProps:m,k=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{k==="input"&&m.type==="radio"&&m.name!=null&&Rt(d,m),zr(k,w);var $=zr(k,m);for(w=0;w<O.length;w+=2){var Q=O[w],J=O[w+1];Q==="style"?Br(d,J):Q==="dangerouslySetInnerHTML"?wi(d,J):Q==="children"?dr(d,J):oe(d,Q,J,$)}switch(k){case"input":Vn(d,m);break;case"textarea":to(d,m);break;case"select":var K=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ae=m.value;ae!=null?_n(d,!!m.multiple,ae,!1):K!==!!m.multiple&&(m.defaultValue!=null?_n(d,!!m.multiple,m.defaultValue,!0):_n(d,!!m.multiple,m.multiple?[]:"",!1))}d[Ma]=m}catch(pe){_t(r,r.return,pe)}}break;case 6:if(rr(s,r),Rr(r),c&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,m=r.memoizedProps;try{d.nodeValue=m}catch(pe){_t(r,r.return,pe)}}break;case 3:if(rr(s,r),Rr(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Di(s.containerInfo)}catch(pe){_t(r,r.return,pe)}break;case 4:rr(s,r),Rr(r);break;case 13:rr(s,r),Rr(r),d=r.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(yd=it())),c&4&&Fg(r);break;case 22:if(Q=a!==null&&a.memoizedState!==null,r.mode&1?(en=($=en)||Q,rr(s,r),en=$):rr(s,r),Rr(r),c&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!Q&&(r.mode&1)!==0)for(de=r,Q=r.child;Q!==null;){for(J=de=Q;de!==null;){switch(K=de,ae=K.child,K.tag){case 0:case 11:case 14:case 15:Ga(4,K,K.return);break;case 1:bo(K,K.return);var fe=K.stateNode;if(typeof fe.componentWillUnmount=="function"){c=K,a=K.return;try{s=c,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(pe){_t(c,a,pe)}}break;case 5:bo(K,K.return);break;case 22:if(K.memoizedState!==null){$g(J);continue}}ae!==null?(ae.return=K,de=ae):$g(J)}Q=Q.sibling}e:for(Q=null,J=r;;){if(J.tag===5){if(Q===null){Q=J;try{d=J.stateNode,$?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(k=J.stateNode,O=J.memoizedProps.style,w=O!=null&&O.hasOwnProperty("display")?O.display:null,k.style.display=wn("display",w))}catch(pe){_t(r,r.return,pe)}}}else if(J.tag===6){if(Q===null)try{J.stateNode.nodeValue=$?"":J.memoizedProps}catch(pe){_t(r,r.return,pe)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===r)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===r)break e;for(;J.sibling===null;){if(J.return===null||J.return===r)break e;Q===J&&(Q=null),J=J.return}Q===J&&(Q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:rr(s,r),Rr(r),c&4&&Fg(r);break;case 21:break;default:rr(s,r),Rr(r)}}function Rr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Mg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(dr(d,""),c.flags&=-33);var m=Lg(r);pd(r,m,d);break;case 3:case 4:var w=c.stateNode.containerInfo,k=Lg(r);fd(r,k,w);break;default:throw Error(t(161))}}catch(O){_t(r,r.return,O)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Z0(r,s,a){de=r,Bg(r)}function Bg(r,s,a){for(var c=(r.mode&1)!==0;de!==null;){var d=de,m=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Su;if(!w){var k=d.alternate,O=k!==null&&k.memoizedState!==null||en;k=Su;var $=en;if(Su=w,(en=O)&&!$)for(de=d;de!==null;)w=de,O=w.child,w.tag===22&&w.memoizedState!==null?Wg(d):O!==null?(O.return=w,de=O):Wg(d);for(;m!==null;)de=m,Bg(m),m=m.sibling;de=d,Su=k,en=$}zg(r)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,de=m):zg(r)}}function zg(r){for(;de!==null;){var s=de;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:en||Iu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!en)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:tr(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&$m(s,m,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}$m(s,w,a)}break;case 5:var k=s.stateNode;if(a===null&&s.flags&4){a=k;var O=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&a.focus();break;case"img":O.src&&(a.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var Q=$.memoizedState;if(Q!==null){var J=Q.dehydrated;J!==null&&Di(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}en||s.flags&512&&dd(s)}catch(K){_t(s,s.return,K)}}if(s===r){de=null;break}if(a=s.sibling,a!==null){a.return=s.return,de=a;break}de=s.return}}function $g(r){for(;de!==null;){var s=de;if(s===r){de=null;break}var a=s.sibling;if(a!==null){a.return=s.return,de=a;break}de=s.return}}function Wg(r){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Iu(4,s)}catch(O){_t(s,a,O)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(O){_t(s,d,O)}}var m=s.return;try{dd(s)}catch(O){_t(s,m,O)}break;case 5:var w=s.return;try{dd(s)}catch(O){_t(s,w,O)}}}catch(O){_t(s,s.return,O)}if(s===r){de=null;break}var k=s.sibling;if(k!==null){k.return=s.return,de=k;break}de=s.return}}var eT=Math.ceil,Au=re.ReactCurrentDispatcher,md=re.ReactCurrentOwner,Hn=re.ReactCurrentBatchConfig,Ge=0,jt=null,Ct=null,Wt=0,xn=0,Oo=bi(0),bt=0,Ka=null,xs=0,Cu=0,gd=0,Ya=null,mn=null,yd=0,Vo=1/0,oi=null,ku=!1,vd=null,Fi=null,Du=!1,Ui=null,Pu=0,Qa=0,_d=null,Ru=-1,Nu=0;function ln(){return(Ge&6)!==0?it():Ru!==-1?Ru:Ru=it()}function Bi(r){return(r.mode&1)===0?1:(Ge&2)!==0&&Wt!==0?Wt&-Wt:L0.transition!==null?(Nu===0&&(Nu=ya()),Nu):(r=$e,r!==0||(r=window.event,r=r===void 0?16:uo(r.type)),r)}function ir(r,s,a,c){if(50<Qa)throw Qa=0,_d=null,Error(t(185));ws(r,a,c),((Ge&2)===0||r!==jt)&&(r===jt&&((Ge&2)===0&&(Cu|=a),bt===4&&zi(r,Wt)),gn(r,c),a===1&&Ge===0&&(s.mode&1)===0&&(Vo=it()+500,su&&Vi()))}function gn(r,s){var a=r.callbackNode;_s(r,s);var c=Gr(r,r===jt?Wt:0);if(c===0)a!==null&&Ii(a),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(a!=null&&Ii(a),s===1)r.tag===0?M0(qg.bind(null,r)):Nm(qg.bind(null,r)),x0(function(){(Ge&6)===0&&Vi()}),a=null;else{switch(yr(c)){case 1:a=ro;break;case 4:a=pa;break;case 16:a=ms;break;case 536870912:a=io;break;default:a=ms}a=ey(a,Hg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Hg(r,s){if(Ru=-1,Nu=0,(Ge&6)!==0)throw Error(t(327));var a=r.callbackNode;if(Mo()&&r.callbackNode!==a)return null;var c=Gr(r,r===jt?Wt:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||s)s=xu(r,c);else{s=c;var d=Ge;Ge|=2;var m=Kg();(jt!==r||Wt!==s)&&(oi=null,Vo=it()+500,Os(r,s));do try{rT();break}catch(k){Gg(r,k)}while(!0);Lh(),Au.current=m,Ge=d,Ct!==null?s=0:(jt=null,Wt=0,s=bt)}if(s!==0){if(s===2&&(d=ga(r),d!==0&&(c=d,s=wd(r,d))),s===1)throw a=Ka,Os(r,0),zi(r,c),gn(r,it()),a;if(s===6)zi(r,c);else{if(d=r.current.alternate,(c&30)===0&&!tT(d)&&(s=xu(r,c),s===2&&(m=ga(r),m!==0&&(c=m,s=wd(r,m))),s===1))throw a=Ka,Os(r,0),zi(r,c),gn(r,it()),a;switch(r.finishedWork=d,r.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:Vs(r,mn,oi);break;case 3:if(zi(r,c),(c&130023424)===c&&(s=yd+500-it(),10<s)){if(Gr(r,0)!==0)break;if(d=r.suspendedLanes,(d&c)!==c){ln(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=Ch(Vs.bind(null,r,mn,oi),s);break}Vs(r,mn,oi);break;case 4:if(zi(r,c),(c&4194240)===c)break;for(s=r.eventTimes,d=-1;0<c;){var w=31-An(c);m=1<<w,w=s[w],w>d&&(d=w),c&=~m}if(c=d,c=it()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*eT(c/1960))-c,10<c){r.timeoutHandle=Ch(Vs.bind(null,r,mn,oi),c);break}Vs(r,mn,oi);break;case 5:Vs(r,mn,oi);break;default:throw Error(t(329))}}}return gn(r,it()),r.callbackNode===a?Hg.bind(null,r):null}function wd(r,s){var a=Ya;return r.current.memoizedState.isDehydrated&&(Os(r,s).flags|=256),r=xu(r,s),r!==2&&(s=mn,mn=a,s!==null&&Ed(s)),r}function Ed(r){mn===null?mn=r:mn.push.apply(mn,r)}function tT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!Zn(m(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zi(r,s){for(s&=~gd,s&=~Cu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-An(s),c=1<<a;r[a]=-1,s&=~c}}function qg(r){if((Ge&6)!==0)throw Error(t(327));Mo();var s=Gr(r,0);if((s&1)===0)return gn(r,it()),null;var a=xu(r,s);if(r.tag!==0&&a===2){var c=ga(r);c!==0&&(s=c,a=wd(r,c))}if(a===1)throw a=Ka,Os(r,0),zi(r,s),gn(r,it()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,Vs(r,mn,oi),gn(r,it()),null}function Td(r,s){var a=Ge;Ge|=1;try{return r(s)}finally{Ge=a,Ge===0&&(Vo=it()+500,su&&Vi())}}function bs(r){Ui!==null&&Ui.tag===0&&(Ge&6)===0&&Mo();var s=Ge;Ge|=1;var a=Hn.transition,c=$e;try{if(Hn.transition=null,$e=1,r)return r()}finally{$e=c,Hn.transition=a,Ge=s,(Ge&6)===0&&Vi()}}function Sd(){xn=Oo.current,ot(Oo)}function Os(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,N0(a)),Ct!==null)for(a=Ct.return;a!==null;){var c=a;switch(xh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ru();break;case 3:No(),ot(dn),ot(Jt),Hh();break;case 5:$h(c);break;case 4:No();break;case 13:ot(ft);break;case 19:ot(ft);break;case 10:jh(c.type._context);break;case 22:case 23:Sd()}a=a.return}if(jt=r,Ct=r=$i(r.current,null),Wt=xn=s,bt=0,Ka=null,gd=Cu=xs=0,mn=Ya=null,Ps!==null){for(s=0;s<Ps.length;s++)if(a=Ps[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,c.next=w}a.pending=c}Ps=null}return r}function Gg(r,s){do{var a=Ct;try{if(Lh(),mu.current=_u,gu){for(var c=pt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}gu=!1}if(Ns=0,Lt=xt=pt=null,za=!1,$a=0,md.current=null,a===null||a.return===null){bt=1,Ka=s,Ct=null;break}e:{var m=r,w=a.return,k=a,O=s;if(s=Wt,k.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var $=O,Q=k,J=Q.tag;if((Q.mode&1)===0&&(J===0||J===11||J===15)){var K=Q.alternate;K?(Q.updateQueue=K.updateQueue,Q.memoizedState=K.memoizedState,Q.lanes=K.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ae=vg(w);if(ae!==null){ae.flags&=-257,_g(ae,w,k,m,s),ae.mode&1&&yg(m,$,s),s=ae,O=$;var fe=s.updateQueue;if(fe===null){var pe=new Set;pe.add(O),s.updateQueue=pe}else fe.add(O);break e}else{if((s&1)===0){yg(m,$,s),Id();break e}O=Error(t(426))}}else if(lt&&k.mode&1){var Et=vg(w);if(Et!==null){(Et.flags&65536)===0&&(Et.flags|=256),_g(Et,w,k,m,s),Vh(xo(O,k));break e}}m=O=xo(O,k),bt!==4&&(bt=2),Ya===null?Ya=[m]:Ya.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var U=mg(m,O,s);zm(m,U);break e;case 1:k=O;var M=m.type,z=m.stateNode;if((m.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Fi===null||!Fi.has(z)))){m.flags|=65536,s&=-s,m.lanes|=s;var Z=gg(m,k,s);zm(m,Z);break e}}m=m.return}while(m!==null)}Qg(a)}catch(me){s=me,Ct===a&&a!==null&&(Ct=a=a.return);continue}break}while(!0)}function Kg(){var r=Au.current;return Au.current=_u,r===null?_u:r}function Id(){(bt===0||bt===3||bt===2)&&(bt=4),jt===null||(xs&268435455)===0&&(Cu&268435455)===0||zi(jt,Wt)}function xu(r,s){var a=Ge;Ge|=2;var c=Kg();(jt!==r||Wt!==s)&&(oi=null,Os(r,s));do try{nT();break}catch(d){Gg(r,d)}while(!0);if(Lh(),Ge=a,Au.current=c,Ct!==null)throw Error(t(261));return jt=null,Wt=0,bt}function nT(){for(;Ct!==null;)Yg(Ct)}function rT(){for(;Ct!==null&&!Hr();)Yg(Ct)}function Yg(r){var s=Zg(r.alternate,r,xn);r.memoizedProps=r.pendingProps,s===null?Qg(r):Ct=s,md.current=null}function Qg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=Y0(a,s,xn),a!==null){Ct=a;return}}else{if(a=Q0(a,s),a!==null){a.flags&=32767,Ct=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{bt=6,Ct=null;return}}if(s=s.sibling,s!==null){Ct=s;return}Ct=s=r}while(s!==null);bt===0&&(bt=5)}function Vs(r,s,a){var c=$e,d=Hn.transition;try{Hn.transition=null,$e=1,iT(r,s,a,c)}finally{Hn.transition=d,$e=c}return null}function iT(r,s,a,c){do Mo();while(Ui!==null);if((Ge&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var m=a.lanes|a.childLanes;if(ch(r,m),r===jt&&(Ct=jt=null,Wt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Du||(Du=!0,ey(ms,function(){return Mo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=Hn.transition,Hn.transition=null;var w=$e;$e=1;var k=Ge;Ge|=4,md.current=null,X0(r,a),Ug(a,r),I0(Ih),Qr=!!Sh,Ih=Sh=null,r.current=a,Z0(a),qr(),Ge=k,$e=w,Hn.transition=m}else r.current=a;if(Du&&(Du=!1,Ui=r,Pu=d),m=r.pendingLanes,m===0&&(Fi=null),Fl(a.stateNode),gn(r,it()),s!==null)for(c=r.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(ku)throw ku=!1,r=vd,vd=null,r;return(Pu&1)!==0&&r.tag!==0&&Mo(),m=r.pendingLanes,(m&1)!==0?r===_d?Qa++:(Qa=0,_d=r):Qa=0,Vi(),null}function Mo(){if(Ui!==null){var r=yr(Pu),s=Hn.transition,a=$e;try{if(Hn.transition=null,$e=16>r?16:r,Ui===null)var c=!1;else{if(r=Ui,Ui=null,Pu=0,(Ge&6)!==0)throw Error(t(331));var d=Ge;for(Ge|=4,de=r.current;de!==null;){var m=de,w=m.child;if((de.flags&16)!==0){var k=m.deletions;if(k!==null){for(var O=0;O<k.length;O++){var $=k[O];for(de=$;de!==null;){var Q=de;switch(Q.tag){case 0:case 11:case 15:Ga(8,Q,m)}var J=Q.child;if(J!==null)J.return=Q,de=J;else for(;de!==null;){Q=de;var K=Q.sibling,ae=Q.return;if(Vg(Q),Q===$){de=null;break}if(K!==null){K.return=ae,de=K;break}de=ae}}}var fe=m.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var Et=pe.sibling;pe.sibling=null,pe=Et}while(pe!==null)}}de=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,de=w;else e:for(;de!==null;){if(m=de,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Ga(9,m,m.return)}var U=m.sibling;if(U!==null){U.return=m.return,de=U;break e}de=m.return}}var M=r.current;for(de=M;de!==null;){w=de;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,de=z;else e:for(w=M;de!==null;){if(k=de,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Iu(9,k)}}catch(me){_t(k,k.return,me)}if(k===w){de=null;break e}var Z=k.sibling;if(Z!==null){Z.return=k.return,de=Z;break e}de=k.return}}if(Ge=d,Vi(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(gs,r)}catch{}c=!0}return c}finally{$e=a,Hn.transition=s}}return!1}function Jg(r,s,a){s=xo(a,s),s=mg(r,s,1),r=Li(r,s,1),s=ln(),r!==null&&(ws(r,1,s),gn(r,s))}function _t(r,s,a){if(r.tag===3)Jg(r,r,a);else for(;s!==null;){if(s.tag===3){Jg(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Fi===null||!Fi.has(c))){r=xo(a,r),r=gg(s,r,1),s=Li(s,r,1),r=ln(),s!==null&&(ws(s,1,r),gn(s,r));break}}s=s.return}}function sT(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),s=ln(),r.pingedLanes|=r.suspendedLanes&a,jt===r&&(Wt&a)===a&&(bt===4||bt===3&&(Wt&130023424)===Wt&&500>it()-yd?Os(r,0):gd|=a),gn(r,s)}function Xg(r,s){s===0&&((r.mode&1)===0?s=1:(s=Ai,Ai<<=1,(Ai&130023424)===0&&(Ai=4194304)));var a=ln();r=ri(r,s),r!==null&&(ws(r,s,a),gn(r,a))}function oT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Xg(r,a)}function aT(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Xg(r,a)}var Zg;Zg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||dn.current)pn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return pn=!1,K0(r,s,a);pn=(r.flags&131072)!==0}else pn=!1,lt&&(s.flags&1048576)!==0&&xm(s,au,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Tu(r,s),r=s.pendingProps;var d=Io(s,Jt.current);Ro(s,a),d=Kh(null,s,c,r,d,a);var m=Yh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,fn(c)?(m=!0,iu(s)):m=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Bh(s),d.updater=wu,s.stateNode=d,d._reactInternals=s,td(s,c,r,a),s=sd(null,s,c,!0,m,a)):(s.tag=0,lt&&m&&Nh(s),an(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Tu(r,s),r=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=uT(c),r=tr(c,r),d){case 0:s=id(null,s,c,r,a);break e;case 1:s=Ag(null,s,c,r,a);break e;case 11:s=wg(null,s,c,r,a);break e;case 14:s=Eg(null,s,c,tr(c.type,r),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:tr(c,d),id(r,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:tr(c,d),Ag(r,s,c,d,a);case 3:e:{if(Cg(s),r===null)throw Error(t(387));c=s.pendingProps,m=s.memoizedState,d=m.element,Bm(r,s),fu(s,c,null,a);var w=s.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){d=xo(Error(t(423)),s),s=kg(r,s,c,a,d);break e}else if(c!==d){d=xo(Error(t(424)),s),s=kg(r,s,c,a,d);break e}else for(Nn=xi(s.stateNode.containerInfo.firstChild),Rn=s,lt=!0,er=null,a=Fm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ko(),c===d){s=si(r,s,a);break e}an(r,s,c,a)}s=s.child}return s;case 5:return Wm(s),r===null&&Oh(s),c=s.type,d=s.pendingProps,m=r!==null?r.memoizedProps:null,w=d.children,Ah(c,d)?w=null:m!==null&&Ah(c,m)&&(s.flags|=32),Ig(r,s),an(r,s,w,a),s.child;case 6:return r===null&&Oh(s),null;case 13:return Dg(r,s,a);case 4:return zh(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Do(s,null,c,a):an(r,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:tr(c,d),wg(r,s,c,d,a);case 7:return an(r,s,s.pendingProps,a),s.child;case 8:return an(r,s,s.pendingProps.children,a),s.child;case 12:return an(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,m=s.memoizedProps,w=d.value,tt(cu,c._currentValue),c._currentValue=w,m!==null)if(Zn(m.value,w)){if(m.children===d.children&&!dn.current){s=si(r,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var k=m.dependencies;if(k!==null){w=m.child;for(var O=k.firstContext;O!==null;){if(O.context===c){if(m.tag===1){O=ii(-1,a&-a),O.tag=2;var $=m.updateQueue;if($!==null){$=$.shared;var Q=$.pending;Q===null?O.next=O:(O.next=Q.next,Q.next=O),$.pending=O}}m.lanes|=a,O=m.alternate,O!==null&&(O.lanes|=a),Fh(m.return,a,s),k.lanes|=a;break}O=O.next}}else if(m.tag===10)w=m.type===s.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,k=w.alternate,k!==null&&(k.lanes|=a),Fh(w,a,s),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}an(r,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,Ro(s,a),d=$n(d),c=c(d),s.flags|=1,an(r,s,c,a),s.child;case 14:return c=s.type,d=tr(c,s.pendingProps),d=tr(c.type,d),Eg(r,s,c,d,a);case 15:return Tg(r,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:tr(c,d),Tu(r,s),s.tag=1,fn(c)?(r=!0,iu(s)):r=!1,Ro(s,a),fg(s,c,d),td(s,c,d,a),sd(null,s,c,!0,r,a);case 19:return Rg(r,s,a);case 22:return Sg(r,s,a)}throw Error(t(156,s.tag))};function ey(r,s){return Wr(r,s)}function lT(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(r,s,a,c){return new lT(r,s,a,c)}function Ad(r){return r=r.prototype,!(!r||!r.isReactComponent)}function uT(r){if(typeof r=="function")return Ad(r)?1:0;if(r!=null){if(r=r.$$typeof,r===V)return 11;if(r===Me)return 14}return 2}function $i(r,s){var a=r.alternate;return a===null?(a=qn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function bu(r,s,a,c,d,m){var w=2;if(c=r,typeof r=="function")Ad(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case P:return Ms(a.children,d,m,s);case A:w=8,d|=8;break;case D:return r=qn(12,a,s,d|2),r.elementType=D,r.lanes=m,r;case C:return r=qn(13,a,s,d),r.elementType=C,r.lanes=m,r;case Oe:return r=qn(19,a,s,d),r.elementType=Oe,r.lanes=m,r;case Fe:return Ou(a,d,m,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:w=10;break e;case x:w=9;break e;case V:w=11;break e;case Me:w=14;break e;case We:w=16,c=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=qn(w,a,s,d),s.elementType=r,s.type=c,s.lanes=m,s}function Ms(r,s,a,c){return r=qn(7,r,c,s),r.lanes=a,r}function Ou(r,s,a,c){return r=qn(22,r,c,s),r.elementType=Fe,r.lanes=a,r.stateNode={isHidden:!1},r}function Cd(r,s,a){return r=qn(6,r,null,s),r.lanes=a,r}function kd(r,s,a){return s=qn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function cT(r,s,a,c,d){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=va(0),this.expirationTimes=va(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=va(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Dd(r,s,a,c,d,m,w,k,O){return r=new cT(r,s,a,k,O),s===1?(s=1,m===!0&&(s|=8)):s=0,m=qn(3,null,null,s),r.current=m,m.stateNode=r,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bh(m),r}function hT(r,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ve,key:c==null?null:""+c,children:r,containerInfo:s,implementation:a}}function ty(r){if(!r)return Oi;r=r._reactInternals;e:{if(Sn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(fn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(fn(a))return Pm(r,a,s)}return s}function ny(r,s,a,c,d,m,w,k,O){return r=Dd(a,c,!0,r,d,m,w,k,O),r.context=ty(null),a=r.current,c=ln(),d=Bi(a),m=ii(c,d),m.callback=s??null,Li(a,m,d),r.current.lanes=d,ws(r,d,c),gn(r,c),r}function Vu(r,s,a,c){var d=s.current,m=ln(),w=Bi(d);return a=ty(a),s.context===null?s.context=a:s.pendingContext=a,s=ii(m,w),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=Li(d,s,w),r!==null&&(ir(r,d,w,m),du(r,d,w)),w}function Mu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ry(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Pd(r,s){ry(r,s),(r=r.alternate)&&ry(r,s)}function dT(){return null}var iy=typeof reportError=="function"?reportError:function(r){console.error(r)};function Rd(r){this._internalRoot=r}Lu.prototype.render=Rd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Vu(r,s,null,null)},Lu.prototype.unmount=Rd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;bs(function(){Vu(null,r,null,null)}),s[Zr]=null}};function Lu(r){this._internalRoot=r}Lu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ta();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Cn.length&&s!==0&&s<Cn[a].priority;a++);Cn.splice(a,0,r),a===0&&ao(r)}};function Nd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ju(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function sy(){}function fT(r,s,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var $=Mu(w);m.call($)}}var w=ny(s,c,r,0,null,!1,!1,"",sy);return r._reactRootContainer=w,r[Zr]=w.current,Oa(r.nodeType===8?r.parentNode:r),bs(),w}for(;d=r.lastChild;)r.removeChild(d);if(typeof c=="function"){var k=c;c=function(){var $=Mu(O);k.call($)}}var O=Dd(r,0,!1,null,null,!1,!1,"",sy);return r._reactRootContainer=O,r[Zr]=O.current,Oa(r.nodeType===8?r.parentNode:r),bs(function(){Vu(s,O,a,c)}),O}function Fu(r,s,a,c,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var k=d;d=function(){var O=Mu(w);k.call(O)}}Vu(s,w,r,d)}else w=fT(a,s,r,d,c);return Mu(w)}wa=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ye(s.pendingLanes);a!==0&&(_a(s,a|1),gn(s,it()),(Ge&6)===0&&(Vo=it()+500,Vi()))}break;case 13:bs(function(){var c=ri(r,1);if(c!==null){var d=ln();ir(c,r,1,d)}}),Pd(r,1)}},so=function(r){if(r.tag===13){var s=ri(r,134217728);if(s!==null){var a=ln();ir(s,r,134217728,a)}Pd(r,134217728)}},Ea=function(r){if(r.tag===13){var s=Bi(r),a=ri(r,s);if(a!==null){var c=ln();ir(a,r,s,c)}Pd(r,s)}},Ta=function(){return $e},Sa=function(r,s){var a=$e;try{return $e=r,s()}finally{$e=a}},Ln=function(r,s,a){switch(s){case"input":if(Vn(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var d=nu(c);if(!d)throw Error(t(90));vt(c),Vn(c,d)}}}break;case"textarea":to(r,a);break;case"select":s=a.value,s!=null&&_n(r,!!a.multiple,s,!1)}},Xe=Td,on=bs;var pT={usingClientEntryPoint:!1,Events:[La,To,nu,dt,En,Td]},Ja={findFiberByHostInstance:As,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mT={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Yt(r),r===null?null:r.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||dT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uu.isDisabled&&Uu.supportsFiber)try{gs=Uu.inject(mT),In=Uu}catch{}}return yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pT,yn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nd(s))throw Error(t(200));return hT(r,s,null,a)},yn.createRoot=function(r,s){if(!Nd(r))throw Error(t(299));var a=!1,c="",d=iy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Dd(r,1,!1,null,null,a,!1,c,d),r[Zr]=s.current,Oa(r.nodeType===8?r.parentNode:r),new Rd(s)},yn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Yt(s),r=r===null?null:r.stateNode,r},yn.flushSync=function(r){return bs(r)},yn.hydrate=function(r,s,a){if(!ju(s))throw Error(t(200));return Fu(null,r,s,!0,a)},yn.hydrateRoot=function(r,s,a){if(!Nd(r))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",w=iy;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=ny(s,null,r,1,a??null,d,!1,m,w),r[Zr]=s.current,Oa(r),c)for(r=0;r<c.length;r++)a=c[r],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Lu(s)},yn.render=function(r,s,a){if(!ju(s))throw Error(t(200));return Fu(null,r,s,!1,a)},yn.unmountComponentAtNode=function(r){if(!ju(r))throw Error(t(40));return r._reactRootContainer?(bs(function(){Fu(null,null,r,!1,function(){r._reactRootContainer=null,r[Zr]=null})}),!0):!1},yn.unstable_batchedUpdates=Td,yn.unstable_renderSubtreeIntoContainer=function(r,s,a,c){if(!ju(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Fu(r,s,a,!1,c)},yn.version="18.3.1-next-f1338f8080-20240426",yn}var fy;function AT(){if(fy)return Od.exports;fy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Od.exports=IT(),Od.exports}var py;function CT(){if(py)return Bu;py=1;var n=AT();return Bu.createRoot=n.createRoot,Bu.hydrateRoot=n.hydrateRoot,Bu}var kT=CT();const DT=l_(kT),my=n=>{const e=new Date(n),t=e.getDay(),o=(t===0?7:t)-1;return e.setDate(e.getDate()-o),e.setHours(0,0,0,0),e},PT=n=>{const e=new Date(n),t=e.getDay(),o=7-(t===0?7:t);return e.setDate(e.getDate()+o),e.setHours(23,59,59,999),e},RT=(n,e)=>{const t=[];let i=my(new Date(n));const o=my(new Date(e));for(;i<=o;)t.push(new Date(i)),i.setDate(i.getDate()+7);return t},Dt=n=>{const e=n.getFullYear(),t=n.getMonth()+1,i=n.getDate();return`${e}-${t<10?"0"+t:t}-${i<10?"0"+i:i}`},je=n=>{if(n.length===10&&n.charAt(4)==="-"&&n.charAt(7)==="-"){const o=+n.substring(0,4),l=+n.substring(5,7),h=+n.substring(8,10);return new Date(o,l-1,h)}const[e,t,i]=n.split("-").map(Number);if(e===void 0||t===void 0||i===void 0)throw new Error(`Invalid date string: ${n}`);return new Date(e,t-1,i)},NT=(n,e)=>{const t=[],i=new Date(n);for(;i<=e;)t.push(new Date(i)),i.setDate(i.getDate()+1);return t},Ho=n=>n.getFullYear()*1e4+(n.getMonth()+1)*100+n.getDate(),hc=n=>{if(n.length===10){const e=+n.substring(0,4),t=+n.substring(5,7),i=+n.substring(8,10);return e*1e4+t*100+i}return parseInt(n.replace(/-/g,""),10)},gy=[{yearsOfService:0,hoursPerMonth:10},{yearsOfService:4,hoursPerMonth:12},{yearsOfService:9,hoursPerMonth:14}],Ld={"5/40":{hoursPerDay:8},"9/80":{hoursPerRegularDay:9,hoursPerNonRDOFriday:8}},yy=(n,e)=>{const t=e.getFullYear()-n.getFullYear(),i=e.getMonth()-n.getMonth(),o=e.getDate()-n.getDate();return i<0||i===0&&o<0?t-1:t},xT=n=>{var t;const e=gy.filter(i=>n>=i.yearsOfService).sort((i,o)=>o.yearsOfService-i.yearsOfService)[0];return(e==null?void 0:e.hoursPerMonth)??((t=gy[0])==null?void 0:t.hoursPerMonth)??10},c_=(n,e,t)=>{const i=new Date(e);i.setHours(0,0,0,0);const o=new Date(t);o.setHours(0,0,0,0);const l=Math.round((o.getTime()-i.getTime())/(1e3*60*60*24))+1,h=yy(n,e),f=yy(n,t),p=Math.max(h,f),y=xT(p),E=365.25/12,R=y/E*7/7*l;return Math.round(R*100)/100},Vc=n=>{const e=n.getDay();return e===0||e===6},vy=new Map,bT=n=>{const e=vy.get(n);if(e!==void 0)return e;const t=new Date(n,0,4),o=4-(t.getDay()||7),l=t.getTime()+o*864e5;return vy.set(n,l),l},OT=6048e5,Qf=(n,e)=>{if(n.getDay()!==5)return!1;const t=n.getTime()-864e5;let i=n.getFullYear();n.getMonth()===0&&n.getDate()===1&&i--;const o=bT(i),l=t-o,f=(1+Math.round(l/OT))%2===0;return e==="even-fridays"?!f:f},Jf=(n,e)=>Vc(n)?0:e.type==="5/40"?Ld["5/40"].hoursPerDay:n.getDay()===5?e.rdoPattern&&Qf(n,e.rdoPattern)?0:Ld["9/80"].hoursPerNonRDOFriday:Ld["9/80"].hoursPerRegularDay,VT=(n,e,t)=>{const i=[],o=new Date(n);for(;o<=e;)o.getDay()===5&&Qf(o,t)&&i.push(new Date(o)),o.setDate(o.getDate()+1);return i},Us=(n,e,t,i=[],o,l)=>{let h=0;const f=new Date(n);let p;for(o?(p=new Set,o.forEach(y=>p.add(hc(y)))):p=new Set(i.map(y=>hc(y.date)));f<=e;){const y=Ho(f);p.has(y)||(h+=Jf(f,t)),f.setDate(f.getDate()+1)}return h},Mc=(n,e)=>e.type!=="9/80"||!e.rdoPattern?!1:Qf(n,e.rdoPattern),Xf=(n,e,t=[])=>{const i=je(n.startDate),o=je(n.endDate);return Us(i,o,e,t)},h_=320,MT=280,LT=40,jT=(n,e,t,i,o)=>{const l=RT(e,t),h=[];let f=n.currentBalance;const p=je(n.startDate),y=je(n.balanceAsOfDate),_=new Set(o.map(L=>L.date)),E=o.map(L=>({original:L,timestamp:je(L.date).getTime()})),I=i.map(L=>({original:L,start:je(L.startDate),end:je(L.endDate),startTimestamp:je(L.startDate).getTime(),endTimestamp:je(L.endDate).getTime(),startYear:je(L.startDate).getFullYear()})),R=new Set(I.filter(L=>L.original.personalDayUsed).map(L=>L.startYear));if(n.personalDayUsedInStartYear){const L=je(n.balanceAsOfDate).getFullYear();R.add(L)}for(const L of l){const N=PT(L),F=L.getTime(),q=N.getTime();let ee=L>=y?c_(p,L,N):0;const oe=L.getFullYear();(N.getFullYear()>oe||N.getMonth()===11&&N.getDate()===31)&&(R.has(oe)||(ee+=8));const Ne=I.filter(V=>V.startTimestamp<=q&&V.endTimestamp>=F),ve=E.filter(V=>V.timestamp>=F&&V.timestamp<=q).map(V=>V.original),P=n.workSchedule.type==="9/80"&&n.workSchedule.rdoPattern?VT(L,N,n.workSchedule.rdoPattern):[],A=Ne.reduce((V,C)=>{const Oe=C.start,Me=C.end,We=Oe>L?Oe:L,Fe=Me<N?Me:N,ne=Us(We,Fe,n.workSchedule,o,_);let le=0;C.original.personalDayUsed&&Oe>=L&&Oe<=N&&(le=8);const te=Math.max(0,ne-le);return V+te},0),D=f,b=D+ee-A,x=Math.min(b,h_);h.push({weekStartDate:Dt(L),weekEndDate:Dt(N),startingBalance:D,accrued:ee,used:A,endingBalance:x,plannedVacations:Ne.map(V=>V.original),holidays:ve,rdoDays:P.map(Dt)}),f=x}return h},_y=(n,e)=>{var y,_;const t=n.filter(E=>je(E.weekStartDate).getFullYear()===e);if(t.length===0)return{year:e,startingBalance:0,totalAccrued:0,totalUsed:0,endingBalance:0,totalPlannedVacations:0,totalHolidayHours:0};const i=((y=t[0])==null?void 0:y.startingBalance)??0,o=t.reduce((E,I)=>E+I.accrued,0),l=t.reduce((E,I)=>E+I.used,0),h=((_=t[t.length-1])==null?void 0:_.endingBalance)??0,f=new Set(t.flatMap(E=>E.plannedVacations.map(I=>I.id))),p=t.reduce((E,I)=>E+I.holidays.reduce((R,L)=>R+L.hours,0),0);return{year:e,startingBalance:i,totalAccrued:o,totalUsed:l,endingBalance:h,totalPlannedVacations:f.size,totalHolidayHours:p}},FT=(n,e,t,i=[])=>{const o=new Date,l=je(n.startDate),h=c_(l,o,e),f=t.filter(p=>je(p.endDate)<=e).reduce((p,y)=>{const _=Xf(y,n.workSchedule,i),E=y.personalDayUsed?8:0;return p+Math.max(0,_-E)},0);return n.currentBalance+h-f},UT=()=>{};var wy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},BT=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],h=n[t++],f=n[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],h=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},f_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],h=o+1<n.length,f=h?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let I=(f&15)<<2|y>>6,R=y&63;p||(R=64,h||(I=64)),i.push(t[_],t[E],t[I],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(d_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new zT;const I=l<<2|f>>4;if(i.push(I),y!==64){const R=f<<4&240|y>>2;if(i.push(R),E!==64){const L=y<<6&192|E;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $T=function(n){const e=d_(n);return f_.encodeByteArray(e,!0)},dc=function(n){return $T(n).replace(/\./g,"")},p_=function(n){try{return f_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=()=>WT().__FIREBASE_DEFAULTS__,qT=()=>{if(typeof process>"u"||typeof wy>"u")return;const n=wy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},GT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&p_(n[1]);return e&&JSON.parse(e)},Lc=()=>{try{return UT()||HT()||qT()||GT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},m_=n=>{var e,t;return(t=(e=Lc())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},KT=n=>{const e=m_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},g_=()=>{var n;return(n=Lc())==null?void 0:n.config},y_=n=>{var e;return(e=Lc())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function v_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[dc(JSON.stringify(t)),dc(JSON.stringify(h)),""].join(".")}const al={};function JT(){const n={prod:[],emulator:[]};for(const e of Object.keys(al))al[e]?n.emulator.push(e):n.prod.push(e);return n}function XT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ey=!1;function __(n,e){if(typeof window>"u"||typeof document>"u"||!sa(window.location.host)||al[n]===e||al[n]||Ey)return;al[n]=e;function t(I){return`__firebase__banner__${I}`}const i="__firebase__banner",l=JT().prod.length>0;function h(){const I=document.getElementById(i);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function p(I,R){I.setAttribute("width","24"),I.setAttribute("id",R),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Ey=!0,h()},I}function _(I,R){I.setAttribute("id",R),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function E(){const I=XT(i),R=t("text"),L=document.getElementById(R)||document.createElement("span"),N=t("learnmore"),F=document.getElementById(N)||document.createElement("a"),q=t("preprendIcon"),ee=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const oe=I.element;f(oe),_(F,N);const re=y();p(ee,q),oe.append(ee,L,F,re),document.body.appendChild(oe)}l?(L.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function eS(){var e;const n=(e=Lc())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iS(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function sS(){return!eS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oS(){try{return typeof indexedDB=="object"}catch{return!1}}function aS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="FirebaseError";class mi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=lS,Object.setPrototypeOf(this,mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?uS(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new mi(o,f,i)}}function uS(n,e){return n.replace(cS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const cS=/\{\$([^}]+)}/g;function hS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ws(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],h=e[o];if(Ty(l)&&Ty(h)){if(!Ws(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Ty(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function dS(n,e){const t=new fS(n,e);return t.subscribe.bind(t)}class fS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");pS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=jd),o.error===void 0&&(o.error=jd),o.complete===void 0&&(o.complete=jd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(n){return n&&n._delegate?n._delegate:n}class Hs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new YT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yS(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:gS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gS(n){return n===Ls?void 0:n}function yS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const _S={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},wS=Ue.INFO,ES={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},TS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=ES[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zf{constructor(e){this.name=e,this._logLevel=wS,this._logHandler=TS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_S[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const SS=(n,e)=>e.some(t=>n instanceof t);let Sy,Iy;function IS(){return Sy||(Sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AS(){return Iy||(Iy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w_=new WeakMap,uf=new WeakMap,E_=new WeakMap,Fd=new WeakMap,ep=new WeakMap;function CS(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(Qi(n.result)),o()},h=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&w_.set(t,n)}).catch(()=>{}),ep.set(e,n),e}function kS(n){if(uf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});uf.set(n,e)}let cf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return uf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||E_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DS(n){cf=n(cf)}function PS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Ud(this),e,...t);return E_.set(i,e.sort?e.sort():[e]),Qi(i)}:AS().includes(n)?function(...e){return n.apply(Ud(this),e),Qi(w_.get(this))}:function(...e){return Qi(n.apply(Ud(this),e))}}function RS(n){return typeof n=="function"?PS(n):(n instanceof IDBTransaction&&kS(n),SS(n,IS())?new Proxy(n,cf):n)}function Qi(n){if(n instanceof IDBRequest)return CS(n);if(Fd.has(n))return Fd.get(n);const e=RS(n);return e!==n&&(Fd.set(n,e),ep.set(e,n)),e}const Ud=n=>ep.get(n);function NS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(n,e),f=Qi(h);return i&&h.addEventListener("upgradeneeded",p=>{i(Qi(h.result),p.oldVersion,p.newVersion,Qi(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const xS=["get","getKey","getAll","getAllKeys","count"],bS=["put","add","delete","clear"],Bd=new Map;function Ay(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Bd.get(e))return Bd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=bS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||xS.includes(t)))return;const l=async function(h,...f){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return Bd.set(e,l),l}DS(n=>({...n,get:(e,t,i)=>Ay(e,t)||n.get(e,t,i),has:(e,t)=>!!Ay(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function VS(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hf="@firebase/app",Cy="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new Zf("@firebase/app"),MS="@firebase/app-compat",LS="@firebase/analytics-compat",jS="@firebase/analytics",FS="@firebase/app-check-compat",US="@firebase/app-check",BS="@firebase/auth",zS="@firebase/auth-compat",$S="@firebase/database",WS="@firebase/data-connect",HS="@firebase/database-compat",qS="@firebase/functions",GS="@firebase/functions-compat",KS="@firebase/installations",YS="@firebase/installations-compat",QS="@firebase/messaging",JS="@firebase/messaging-compat",XS="@firebase/performance",ZS="@firebase/performance-compat",eI="@firebase/remote-config",tI="@firebase/remote-config-compat",nI="@firebase/storage",rI="@firebase/storage-compat",iI="@firebase/firestore",sI="@firebase/ai",oI="@firebase/firestore-compat",aI="firebase",lI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="[DEFAULT]",uI={[hf]:"fire-core",[MS]:"fire-core-compat",[jS]:"fire-analytics",[LS]:"fire-analytics-compat",[US]:"fire-app-check",[FS]:"fire-app-check-compat",[BS]:"fire-auth",[zS]:"fire-auth-compat",[$S]:"fire-rtdb",[WS]:"fire-data-connect",[HS]:"fire-rtdb-compat",[qS]:"fire-fn",[GS]:"fire-fn-compat",[KS]:"fire-iid",[YS]:"fire-iid-compat",[QS]:"fire-fcm",[JS]:"fire-fcm-compat",[XS]:"fire-perf",[ZS]:"fire-perf-compat",[eI]:"fire-rc",[tI]:"fire-rc-compat",[nI]:"fire-gcs",[rI]:"fire-gcs-compat",[iI]:"fire-fst",[oI]:"fire-fst-compat",[sI]:"fire-vertex","fire-js":"fire-js",[aI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new Map,cI=new Map,ff=new Map;function ky(n,e){try{n.container.addComponent(e)}catch(t){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Jo(n){const e=n.name;if(ff.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;ff.set(e,n);for(const t of fc.values())ky(t,n);for(const t of cI.values())ky(t,n);return!0}function tp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function or(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new Al("app","Firebase",hI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=lI;function T_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:df,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ji.create("bad-app-name",{appName:String(o)});if(t||(t=g_()),!t)throw Ji.create("no-options");const l=fc.get(o);if(l){if(Ws(t,l.options)&&Ws(i,l.config))return l;throw Ji.create("duplicate-app",{appName:o})}const h=new vS(o);for(const p of ff.values())h.addComponent(p);const f=new dI(t,i,h);return fc.set(o,f),f}function S_(n=df){const e=fc.get(n);if(!e&&n===df&&g_())return T_();if(!e)throw Ji.create("no-app",{appName:n});return e}function Xi(n,e,t){let i=uI[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(h.join(" "));return}Jo(new Hs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="firebase-heartbeat-database",pI=1,fl="firebase-heartbeat-store";let zd=null;function I_(){return zd||(zd=NS(fI,pI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ji.create("idb-open",{originalErrorMessage:n.message})})),zd}async function mI(n){try{const t=(await I_()).transaction(fl),i=await t.objectStore(fl).get(A_(n));return await t.done,i}catch(e){if(e instanceof mi)hi.warn(e.message);else{const t=Ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(t.message)}}}async function Dy(n,e){try{const i=(await I_()).transaction(fl,"readwrite");await i.objectStore(fl).put(e,A_(n)),await i.done}catch(t){if(t instanceof mi)hi.warn(t.message);else{const i=Ji.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});hi.warn(i.message)}}}function A_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=1024,yI=30;class vI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Py();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>yI){const h=EI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){hi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Py(),{heartbeatsToSend:i,unsentEntries:o}=_I(this._heartbeatsCache.heartbeats),l=dc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return hi.warn(t),""}}}function Py(){return new Date().toISOString().substring(0,10)}function _I(n,e=gI){const t=[];let i=n.slice();for(const o of n){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Ry(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ry(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class wI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oS()?aS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Dy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Dy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ry(n){return dc(JSON.stringify({version:2,heartbeats:n})).length}function EI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(n){Jo(new Hs("platform-logger",e=>new OS(e),"PRIVATE")),Jo(new Hs("heartbeat",e=>new vI(e),"PRIVATE")),Xi(hf,Cy,n),Xi(hf,Cy,"esm2020"),Xi("fire-js","")}TI("");var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zi,C_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,A){function D(){}D.prototype=A.prototype,P.F=A.prototype,P.prototype=new D,P.prototype.constructor=P,P.D=function(b,x,V){for(var C=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)C[Oe-2]=arguments[Oe];return A.prototype[x].apply(b,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,A,D){D||(D=0);const b=Array(16);if(typeof A=="string")for(var x=0;x<16;++x)b[x]=A.charCodeAt(D++)|A.charCodeAt(D++)<<8|A.charCodeAt(D++)<<16|A.charCodeAt(D++)<<24;else for(x=0;x<16;++x)b[x]=A[D++]|A[D++]<<8|A[D++]<<16|A[D++]<<24;A=P.g[0],D=P.g[1],x=P.g[2];let V=P.g[3],C;C=A+(V^D&(x^V))+b[0]+3614090360&4294967295,A=D+(C<<7&4294967295|C>>>25),C=V+(x^A&(D^x))+b[1]+3905402710&4294967295,V=A+(C<<12&4294967295|C>>>20),C=x+(D^V&(A^D))+b[2]+606105819&4294967295,x=V+(C<<17&4294967295|C>>>15),C=D+(A^x&(V^A))+b[3]+3250441966&4294967295,D=x+(C<<22&4294967295|C>>>10),C=A+(V^D&(x^V))+b[4]+4118548399&4294967295,A=D+(C<<7&4294967295|C>>>25),C=V+(x^A&(D^x))+b[5]+1200080426&4294967295,V=A+(C<<12&4294967295|C>>>20),C=x+(D^V&(A^D))+b[6]+2821735955&4294967295,x=V+(C<<17&4294967295|C>>>15),C=D+(A^x&(V^A))+b[7]+4249261313&4294967295,D=x+(C<<22&4294967295|C>>>10),C=A+(V^D&(x^V))+b[8]+1770035416&4294967295,A=D+(C<<7&4294967295|C>>>25),C=V+(x^A&(D^x))+b[9]+2336552879&4294967295,V=A+(C<<12&4294967295|C>>>20),C=x+(D^V&(A^D))+b[10]+4294925233&4294967295,x=V+(C<<17&4294967295|C>>>15),C=D+(A^x&(V^A))+b[11]+2304563134&4294967295,D=x+(C<<22&4294967295|C>>>10),C=A+(V^D&(x^V))+b[12]+1804603682&4294967295,A=D+(C<<7&4294967295|C>>>25),C=V+(x^A&(D^x))+b[13]+4254626195&4294967295,V=A+(C<<12&4294967295|C>>>20),C=x+(D^V&(A^D))+b[14]+2792965006&4294967295,x=V+(C<<17&4294967295|C>>>15),C=D+(A^x&(V^A))+b[15]+1236535329&4294967295,D=x+(C<<22&4294967295|C>>>10),C=A+(x^V&(D^x))+b[1]+4129170786&4294967295,A=D+(C<<5&4294967295|C>>>27),C=V+(D^x&(A^D))+b[6]+3225465664&4294967295,V=A+(C<<9&4294967295|C>>>23),C=x+(A^D&(V^A))+b[11]+643717713&4294967295,x=V+(C<<14&4294967295|C>>>18),C=D+(V^A&(x^V))+b[0]+3921069994&4294967295,D=x+(C<<20&4294967295|C>>>12),C=A+(x^V&(D^x))+b[5]+3593408605&4294967295,A=D+(C<<5&4294967295|C>>>27),C=V+(D^x&(A^D))+b[10]+38016083&4294967295,V=A+(C<<9&4294967295|C>>>23),C=x+(A^D&(V^A))+b[15]+3634488961&4294967295,x=V+(C<<14&4294967295|C>>>18),C=D+(V^A&(x^V))+b[4]+3889429448&4294967295,D=x+(C<<20&4294967295|C>>>12),C=A+(x^V&(D^x))+b[9]+568446438&4294967295,A=D+(C<<5&4294967295|C>>>27),C=V+(D^x&(A^D))+b[14]+3275163606&4294967295,V=A+(C<<9&4294967295|C>>>23),C=x+(A^D&(V^A))+b[3]+4107603335&4294967295,x=V+(C<<14&4294967295|C>>>18),C=D+(V^A&(x^V))+b[8]+1163531501&4294967295,D=x+(C<<20&4294967295|C>>>12),C=A+(x^V&(D^x))+b[13]+2850285829&4294967295,A=D+(C<<5&4294967295|C>>>27),C=V+(D^x&(A^D))+b[2]+4243563512&4294967295,V=A+(C<<9&4294967295|C>>>23),C=x+(A^D&(V^A))+b[7]+1735328473&4294967295,x=V+(C<<14&4294967295|C>>>18),C=D+(V^A&(x^V))+b[12]+2368359562&4294967295,D=x+(C<<20&4294967295|C>>>12),C=A+(D^x^V)+b[5]+4294588738&4294967295,A=D+(C<<4&4294967295|C>>>28),C=V+(A^D^x)+b[8]+2272392833&4294967295,V=A+(C<<11&4294967295|C>>>21),C=x+(V^A^D)+b[11]+1839030562&4294967295,x=V+(C<<16&4294967295|C>>>16),C=D+(x^V^A)+b[14]+4259657740&4294967295,D=x+(C<<23&4294967295|C>>>9),C=A+(D^x^V)+b[1]+2763975236&4294967295,A=D+(C<<4&4294967295|C>>>28),C=V+(A^D^x)+b[4]+1272893353&4294967295,V=A+(C<<11&4294967295|C>>>21),C=x+(V^A^D)+b[7]+4139469664&4294967295,x=V+(C<<16&4294967295|C>>>16),C=D+(x^V^A)+b[10]+3200236656&4294967295,D=x+(C<<23&4294967295|C>>>9),C=A+(D^x^V)+b[13]+681279174&4294967295,A=D+(C<<4&4294967295|C>>>28),C=V+(A^D^x)+b[0]+3936430074&4294967295,V=A+(C<<11&4294967295|C>>>21),C=x+(V^A^D)+b[3]+3572445317&4294967295,x=V+(C<<16&4294967295|C>>>16),C=D+(x^V^A)+b[6]+76029189&4294967295,D=x+(C<<23&4294967295|C>>>9),C=A+(D^x^V)+b[9]+3654602809&4294967295,A=D+(C<<4&4294967295|C>>>28),C=V+(A^D^x)+b[12]+3873151461&4294967295,V=A+(C<<11&4294967295|C>>>21),C=x+(V^A^D)+b[15]+530742520&4294967295,x=V+(C<<16&4294967295|C>>>16),C=D+(x^V^A)+b[2]+3299628645&4294967295,D=x+(C<<23&4294967295|C>>>9),C=A+(x^(D|~V))+b[0]+4096336452&4294967295,A=D+(C<<6&4294967295|C>>>26),C=V+(D^(A|~x))+b[7]+1126891415&4294967295,V=A+(C<<10&4294967295|C>>>22),C=x+(A^(V|~D))+b[14]+2878612391&4294967295,x=V+(C<<15&4294967295|C>>>17),C=D+(V^(x|~A))+b[5]+4237533241&4294967295,D=x+(C<<21&4294967295|C>>>11),C=A+(x^(D|~V))+b[12]+1700485571&4294967295,A=D+(C<<6&4294967295|C>>>26),C=V+(D^(A|~x))+b[3]+2399980690&4294967295,V=A+(C<<10&4294967295|C>>>22),C=x+(A^(V|~D))+b[10]+4293915773&4294967295,x=V+(C<<15&4294967295|C>>>17),C=D+(V^(x|~A))+b[1]+2240044497&4294967295,D=x+(C<<21&4294967295|C>>>11),C=A+(x^(D|~V))+b[8]+1873313359&4294967295,A=D+(C<<6&4294967295|C>>>26),C=V+(D^(A|~x))+b[15]+4264355552&4294967295,V=A+(C<<10&4294967295|C>>>22),C=x+(A^(V|~D))+b[6]+2734768916&4294967295,x=V+(C<<15&4294967295|C>>>17),C=D+(V^(x|~A))+b[13]+1309151649&4294967295,D=x+(C<<21&4294967295|C>>>11),C=A+(x^(D|~V))+b[4]+4149444226&4294967295,A=D+(C<<6&4294967295|C>>>26),C=V+(D^(A|~x))+b[11]+3174756917&4294967295,V=A+(C<<10&4294967295|C>>>22),C=x+(A^(V|~D))+b[2]+718787259&4294967295,x=V+(C<<15&4294967295|C>>>17),C=D+(V^(x|~A))+b[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+x&4294967295,P.g[3]=P.g[3]+V&4294967295}i.prototype.v=function(P,A){A===void 0&&(A=P.length);const D=A-this.blockSize,b=this.C;let x=this.h,V=0;for(;V<A;){if(x==0)for(;V<=D;)o(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<A;)if(b[x++]=P.charCodeAt(V++),x==this.blockSize){o(this,b),x=0;break}}else for(;V<A;)if(b[x++]=P[V++],x==this.blockSize){o(this,b),x=0;break}}this.h=x,this.o+=A},i.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;A=this.o*8;for(var D=P.length-8;D<P.length;++D)P[D]=A&255,A/=256;for(this.v(P),P=Array(16),A=0,D=0;D<4;++D)for(let b=0;b<32;b+=8)P[A++]=this.g[D]>>>b&255;return P};function l(P,A){var D=f;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=A(P)}function h(P,A){this.h=A;const D=[];let b=!0;for(let x=P.length-1;x>=0;x--){const V=P[x]|0;b&&V==A||(D[x]=V,b=!1)}this.g=D}var f={};function p(P){return-128<=P&&P<128?l(P,function(A){return new h([A|0],A<0?-1:0)}):new h([P|0],P<0?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return E;if(P<0)return F(y(-P));const A=[];let D=1;for(let b=0;P>=D;b++)A[b]=P/D|0,D*=4294967296;return new h(A,0)}function _(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return F(_(P.substring(1),A));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=y(Math.pow(A,8));let b=E;for(let V=0;V<P.length;V+=8){var x=Math.min(8,P.length-V);const C=parseInt(P.substring(V,V+x),A);x<8?(x=y(Math.pow(A,x)),b=b.j(x).add(y(C))):(b=b.j(D),b=b.add(y(C)))}return b}var E=p(0),I=p(1),R=p(16777216);n=h.prototype,n.m=function(){if(N(this))return-F(this).m();let P=0,A=1;for(let D=0;D<this.g.length;D++){const b=this.i(D);P+=(b>=0?b:4294967296+b)*A,A*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(L(this))return"0";if(N(this))return"-"+F(this).toString(P);const A=y(Math.pow(P,6));var D=this;let b="";for(;;){const x=re(D,A).g;D=q(D,x.j(A));let V=((D.g.length>0?D.g[0]:D.h)>>>0).toString(P);if(D=x,L(D))return V+b;for(;V.length<6;)V="0"+V;b=V+b}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function L(P){if(P.h!=0)return!1;for(let A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function N(P){return P.h==-1}n.l=function(P){return P=q(this,P),N(P)?-1:L(P)?0:1};function F(P){const A=P.g.length,D=[];for(let b=0;b<A;b++)D[b]=~P.g[b];return new h(D,~P.h).add(I)}n.abs=function(){return N(this)?F(this):this},n.add=function(P){const A=Math.max(this.g.length,P.g.length),D=[];let b=0;for(let x=0;x<=A;x++){let V=b+(this.i(x)&65535)+(P.i(x)&65535),C=(V>>>16)+(this.i(x)>>>16)+(P.i(x)>>>16);b=C>>>16,V&=65535,C&=65535,D[x]=C<<16|V}return new h(D,D[D.length-1]&-2147483648?-1:0)};function q(P,A){return P.add(F(A))}n.j=function(P){if(L(this)||L(P))return E;if(N(this))return N(P)?F(this).j(F(P)):F(F(this).j(P));if(N(P))return F(this.j(F(P)));if(this.l(R)<0&&P.l(R)<0)return y(this.m()*P.m());const A=this.g.length+P.g.length,D=[];for(var b=0;b<2*A;b++)D[b]=0;for(b=0;b<this.g.length;b++)for(let x=0;x<P.g.length;x++){const V=this.i(b)>>>16,C=this.i(b)&65535,Oe=P.i(x)>>>16,Me=P.i(x)&65535;D[2*b+2*x]+=C*Me,ee(D,2*b+2*x),D[2*b+2*x+1]+=V*Me,ee(D,2*b+2*x+1),D[2*b+2*x+1]+=C*Oe,ee(D,2*b+2*x+1),D[2*b+2*x+2]+=V*Oe,ee(D,2*b+2*x+2)}for(P=0;P<A;P++)D[P]=D[2*P+1]<<16|D[2*P];for(P=A;P<2*A;P++)D[P]=0;return new h(D,0)};function ee(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function oe(P,A){this.g=P,this.h=A}function re(P,A){if(L(A))throw Error("division by zero");if(L(P))return new oe(E,E);if(N(P))return A=re(F(P),A),new oe(F(A.g),F(A.h));if(N(A))return A=re(P,F(A)),new oe(F(A.g),A.h);if(P.g.length>30){if(N(P)||N(A))throw Error("slowDivide_ only works with positive integers.");for(var D=I,b=A;b.l(P)<=0;)D=Ne(D),b=Ne(b);var x=ve(D,1),V=ve(b,1);for(b=ve(b,2),D=ve(D,2);!L(b);){var C=V.add(b);C.l(P)<=0&&(x=x.add(D),V=C),b=ve(b,1),D=ve(D,1)}return A=q(P,x.j(A)),new oe(x,A)}for(x=E;P.l(A)>=0;){for(D=Math.max(1,Math.floor(P.m()/A.m())),b=Math.ceil(Math.log(D)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),V=y(D),C=V.j(A);N(C)||C.l(P)>0;)D-=b,V=y(D),C=V.j(A);L(V)&&(V=I),x=x.add(V),P=q(P,C)}return new oe(x,P)}n.B=function(P){return re(this,P).h},n.and=function(P){const A=Math.max(this.g.length,P.g.length),D=[];for(let b=0;b<A;b++)D[b]=this.i(b)&P.i(b);return new h(D,this.h&P.h)},n.or=function(P){const A=Math.max(this.g.length,P.g.length),D=[];for(let b=0;b<A;b++)D[b]=this.i(b)|P.i(b);return new h(D,this.h|P.h)},n.xor=function(P){const A=Math.max(this.g.length,P.g.length),D=[];for(let b=0;b<A;b++)D[b]=this.i(b)^P.i(b);return new h(D,this.h^P.h)};function Ne(P){const A=P.g.length+1,D=[];for(let b=0;b<A;b++)D[b]=P.i(b)<<1|P.i(b-1)>>>31;return new h(D,P.h)}function ve(P,A){const D=A>>5;A%=32;const b=P.g.length-D,x=[];for(let V=0;V<b;V++)x[V]=A>0?P.i(V+D)>>>A|P.i(V+D+1)<<32-A:P.i(V+D);return new h(x,P.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,C_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=_,Zi=h}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var k_,nl,D_,Zu,pf,P_,R_,N_;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof zu=="object"&&zu];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,g){if(g)e:{var v=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var B=u[S];if(!(B in v))break e;v=v[B]}u=u[u.length-1],S=v[u],g=g(S),g!=S&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var v=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&v.push([S,g[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function p(u,g,v){return u.call.apply(u.bind,arguments)}function y(u,g,v){return y=p,y.apply(null,arguments)}function _(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function E(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(S,B,W){for(var ie=Array(arguments.length-2),De=2;De<arguments.length;De++)ie[De-2]=arguments[De];return g.prototype[B].apply(S,ie)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function R(u){const g=u.length;if(g>0){const v=Array(g);for(let S=0;S<g;S++)v[S]=u[S];return v}return[]}function L(u,g){for(let S=1;S<arguments.length;S++){const B=arguments[S];var v=typeof B;if(v=v!="object"?v:B?Array.isArray(B)?"array":v:"null",v=="array"||v=="object"&&typeof B.length=="number"){v=u.length||0;const W=B.length||0;u.length=v+W;for(let ie=0;ie<W;ie++)u[v+ie]=B[ie]}else u.push(B)}}class N{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function F(u){h.setTimeout(()=>{throw u},0)}function q(){var u=P;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ee{constructor(){this.h=this.g=null}add(g,v){const S=oe.get();S.set(g,v),this.h?this.h.next=S:this.g=S,this.h=S}}var oe=new N(()=>new re,u=>u.reset());class re{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,ve=!1,P=new ee,A=()=>{const u=Promise.resolve(void 0);Ne=()=>{u.then(D)}};function D(){for(var u;u=q();){try{u.h.call(u.g)}catch(v){F(v)}var g=oe;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}ve=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,g),h.removeEventListener("test",v,g)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function Oe(u,g){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}E(Oe,x),Oe.prototype.init=function(u,g){const v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),We=0;function Fe(u,g,v,S,B){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!S,this.ha=B,this.key=++We,this.da=this.fa=!1}function ne(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function le(u,g,v){for(const S in u)g.call(v,u[S],S,u)}function te(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function j(u){const g={};for(const v in u)g[v]=u[v];return g}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _e(u,g){let v,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(v in S)u[v]=S[v];for(let W=0;W<H.length;W++)v=H[W],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function Se(u){this.src=u,this.g={},this.h=0}Se.prototype.add=function(u,g,v,S,B){const W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);const ie=Re(u,g,S,B);return ie>-1?(g=u[ie],v||(g.fa=!1)):(g=new Fe(g,this.src,W,!!S,B),g.fa=v,u.push(g)),g};function xe(u,g){const v=g.type;if(v in u.g){var S=u.g[v],B=Array.prototype.indexOf.call(S,g,void 0),W;(W=B>=0)&&Array.prototype.splice.call(S,B,1),W&&(ne(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Re(u,g,v,S){for(let B=0;B<u.length;++B){const W=u[B];if(!W.da&&W.listener==g&&W.capture==!!v&&W.ha==S)return B}return-1}var X="closure_lm_"+(Math.random()*1e6|0),ue={};function ce(u,g,v,S,B){if(Array.isArray(g)){for(let W=0;W<g.length;W++)ce(u,g[W],v,S,B);return null}return v=yi(v),u&&u[Me]?u.J(g,v,f(S)?!!S.capture:!1,B):ye(u,g,v,!1,S,B)}function ye(u,g,v,S,B,W){if(!g)throw Error("Invalid event type");const ie=f(B)?!!B.capture:!!B;let De=Rt(u);if(De||(u[X]=De=new Se(u)),v=De.add(g,v,S,ie,W),v.proxy)return v;if(S=Ve(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)V||(B=ie),B===void 0&&(B=!1),u.addEventListener(g.toString(),S,B);else if(u.attachEvent)u.attachEvent(qe(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ve(){function u(v){return g.call(u.src,u.listener,v)}const g=On;return u}function vt(u,g,v,S,B){if(Array.isArray(g))for(var W=0;W<g.length;W++)vt(u,g[W],v,S,B);else S=f(S)?!!S.capture:!!S,v=yi(v),u&&u[Me]?(u=u.i,W=String(g).toString(),W in u.g&&(g=u.g[W],v=Re(g,v,S,B),v>-1&&(ne(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[W],u.h--)))):u&&(u=Rt(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Re(g,v,S,B)),(v=u>-1?g[u]:null)&&St(v))}function St(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Me])xe(g.i,u);else{var v=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(v,S,u.capture):g.detachEvent?g.detachEvent(qe(v),S):g.addListener&&g.removeListener&&g.removeListener(S),(v=Rt(g))?(xe(v,u),v.h==0&&(v.src=null,g[X]=null)):ne(u)}}}function qe(u){return u in ue?ue[u]:ue[u]="on"+u}function On(u,g){if(u.da)u=!0;else{g=new Oe(g,this);const v=u.listener,S=u.ha||u.src;u.fa&&St(u),u=v.call(S,g)}return u}function Rt(u){return u=u[X],u instanceof Se?u:null}var Vn="__closure_events_fn_"+(Math.random()*1e9>>>0);function yi(u){return typeof u=="function"?u:(u[Vn]||(u[Vn]=function(g){return u.handleEvent(g)}),u[Vn])}function ct(){b.call(this),this.i=new Se(this),this.M=this,this.G=null}E(ct,b),ct.prototype[Me]=!0,ct.prototype.removeEventListener=function(u,g,v,S){vt(this,u,g,v,S)};function ht(u,g){var v,S=u.G;if(S)for(v=[];S;S=S.G)v.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new x(g,u);else if(g instanceof x)g.target=g.target||u;else{var B=g;g=new x(S,u),_e(g,B)}B=!0;let W,ie;if(v)for(ie=v.length-1;ie>=0;ie--)W=g.g=v[ie],B=_n(W,S,!0,g)&&B;if(W=g.g=u,B=_n(W,S,!0,g)&&B,B=_n(W,S,!1,g)&&B,v)for(ie=0;ie<v.length;ie++)W=g.g=v[ie],B=_n(W,S,!1,g)&&B}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let S=0;S<v.length;S++)ne(v[S]);delete u.g[g],u.h--}}this.G=null},ct.prototype.J=function(u,g,v,S){return this.i.add(String(u),g,!1,v,S)},ct.prototype.K=function(u,g,v,S){return this.i.add(String(u),g,!0,v,S)};function _n(u,g,v,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let B=!0;for(let W=0;W<g.length;++W){const ie=g[W];if(ie&&!ie.da&&ie.capture==v){const De=ie.listener,wt=ie.ha||ie.src;ie.fa&&xe(u.i,ie),B=De.call(wt,S)!==!1&&B}}return B&&!S.defaultPrevented}function cs(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:h.setTimeout(u,g||0)}function vi(u){u.g=cs(()=>{u.g=null,u.i&&(u.i=!1,vi(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class to extends b{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:vi(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cr(u){b.call(this),this.h=u,this.g={}}E(cr,b);var hs=[];function _i(u){le(u.g,function(g,v){this.g.hasOwnProperty(v)&&St(g)},u),u.g={}}cr.prototype.N=function(){cr.Z.N.call(this),_i(this)},cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hr=h.JSON.stringify,wi=h.JSON.parse,dr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Yn(){}function no(){}var wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Br(){x.call(this,"d")}E(Br,x);function ds(){x.call(this,"c")}E(ds,x);var un={},zr=null;function Mn(){return zr=zr||new ct}un.Ia="serverreachability";function Ei(u){x.call(this,un.Ia,u)}E(Ei,x);function Ln(u){const g=Mn();ht(g,new Ei(g))}un.STAT_EVENT="statevent";function Qn(u,g){x.call(this,un.STAT_EVENT,u),this.stat=g}E(Qn,x);function nt(u){const g=Mn();ht(g,new Qn(g,u))}un.Ja="timingevent";function It(u,g){x.call(this,un.Ja,u),this.size=g}E(It,x);function dt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},g)}function En(){this.g=!0}En.prototype.ua=function(){this.g=!1};function Xe(u,g,v,S,B,W){u.info(function(){if(u.g)if(W){var ie="",De=W.split("&");for(let Je=0;Je<De.length;Je++){var wt=De[Je].split("=");if(wt.length>1){const At=wt[0];wt=wt[1];const Pn=At.split("_");ie=Pn.length>=2&&Pn[1]=="type"?ie+(At+"="+wt+"&"):ie+(At+"=redacted&")}}}else ie=null;else ie=W;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+g+`
`+v+`
`+ie})}function on(u,g,v,S,B,W,ie){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+g+`
`+v+`
`+W+" "+ie})}function jn(u,g,v,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+fr(u,v)+(S?" "+S:"")})}function Ti(u,g){u.info(function(){return"TIMEOUT: "+g})}En.prototype.info=function(){};function fr(u,g){if(!u.g)return g;if(!g)return null;try{const W=JSON.parse(g);if(W){for(u=0;u<W.length;u++)if(Array.isArray(W[u])){var v=W[u];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ie=1;ie<S.length;ie++)S[ie]=""}}}}return hr(W)}catch{return g}}var Jn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$r;function Tn(){}E(Tn,Yn),Tn.prototype.g=function(){return new XMLHttpRequest},$r=new Tn;function cn(u){return encodeURIComponent(String(u))}function pr(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function hn(u,g,v,S){this.j=u,this.i=g,this.l=v,this.S=S||1,this.V=new cr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Si}function Si(){this.i=null,this.g="",this.h=!1}var fs={},ps={};function Sn(u,g,v){u.M=1,u.A=Gr(Un(g)),u.u=v,u.R=!0,be(u,null)}function be(u,g){u.F=Date.now(),Nt(u),u.B=Un(u.A);var v=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Ta(v.i,"t",S),u.C=0,v=u.j.L,u.h=new Si,u.g=Hl(u.j,v?g:null,!u.u),u.P>0&&(u.O=new to(y(u.Y,u,u.g),u.P)),g=u.V,v=u.g,S=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(hs[0]=B.toString()),B=hs);for(let W=0;W<B.length;W++){const ie=ce(v,B[W],S||g.handleEvent,!1,g.h||g);if(!ie)break;g.g[ie.key]=ie}g=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Ln(),Xe(u.i,u.v,u.B,u.l,u.S,u.u)}hn.prototype.ba=function(u){u=u.target;const g=this.O;g&&Er(u)==3?g.j():this.Y(u)},hn.prototype.Y=function(u){try{if(u==this.g)e:{const De=Er(this.g),wt=this.g.ya(),Je=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||$l(this.g)))){this.K||De!=4||wt==7||(wt==8||Je<=0?Ln(3):Ln(2)),Ii(this);var g=this.g.ca();this.X=g;var v=Ze(this);if(this.o=g==200,on(this.i,this.v,this.B,this.l,this.S,De,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var W=S;break t}}W=null}if(u=W)jn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,it(this,u);else{this.o=!1,this.m=3,nt(12),qr(this),Hr(this);break e}}if(this.R){u=!0;let At;for(;!this.K&&this.C<v.length;)if(At=Yt(this,v),At==ps){De==4&&(this.m=4,nt(14),u=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(At==fs){this.m=4,nt(15),jn(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else jn(this.i,this.l,At,null),it(this,At);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||v.length!=0||this.h.h||(this.m=1,nt(16),u=!1),this.o=this.o&&u,!u)jn(this.i,this.l,v,"[Invalid Chunked Response]"),qr(this),Hr(this);else if(v.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ss(ie),ie.P=!0,nt(11))}}else jn(this.i,this.l,v,null),it(this,v);De==4&&qr(this),this.o&&!this.K&&(De==4?fo(this.j,this):(this.o=!1,Nt(this)))}else Ia(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,nt(12)):(this.m=0,nt(13)),qr(this),Hr(this)}}}catch{}finally{}};function Ze(u){if(!rt(u))return u.g.la();const g=$l(u.g);if(g==="")return"";let v="";const S=g.length,B=Er(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return qr(u),Hr(u),"";u.h.i=new h.TextDecoder}for(let W=0;W<S;W++)u.h.h=!0,v+=u.h.i.decode(g[W],{stream:!(B&&W==S-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function rt(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Yt(u,g){var v=u.C,S=g.indexOf(`
`,v);return S==-1?ps:(v=Number(g.substring(v,S)),isNaN(v)?fs:(S+=1,S+v>g.length?ps:(g=g.slice(S,S+v),u.C=S+v,g)))}hn.prototype.cancel=function(){this.K=!0,qr(this)};function Nt(u){u.T=Date.now()+u.H,Wr(u,u.H)}function Wr(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=dt(y(u.aa,u),g)}function Ii(u){u.D&&(h.clearTimeout(u.D),u.D=null)}hn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ti(this.i,this.B),this.M!=2&&(Ln(),nt(17)),qr(this),this.m=2,Hr(this)):Wr(this,this.T-u)};function Hr(u){u.j.I==0||u.K||fo(u.j,u)}function qr(u){Ii(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,_i(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function it(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||ma(v.h,u))){if(!u.L&&ma(v.h,u)&&v.I==3){try{var S=v.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)ho(v),kn(v);else break e;Ir(v),nt(18)}}else v.xa=B[1],0<v.xa-v.K&&B[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=dt(y(v.Va,v),6e3));ms(v.h)<=1&&v.ta&&(v.ta=void 0)}else Dn(v,11)}else if((u.L||v.g==u)&&ho(v),!C(g))for(B=v.Ba.g.parse(g),g=0;g<B.length;g++){let Je=B[g];const At=Je[0];if(!(At<=v.K))if(v.K=At,Je=Je[1],v.I==2)if(Je[0]=="c"){v.M=Je[1],v.ba=Je[2];const Pn=Je[3];Pn!=null&&(v.ka=Pn,v.j.info("VER="+v.ka));const Xr=Je[4];Xr!=null&&(v.za=Xr,v.j.info("SVER="+v.za));const Ar=Je[5];Ar!=null&&typeof Ar=="number"&&Ar>0&&(S=1.5*Ar,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Cr=u.g;if(Cr){const go=Cr.g?Cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(go){var W=S.h;W.g||go.indexOf("spdy")==-1&&go.indexOf("quic")==-1&&go.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(io(W,W.h),W.h=null))}if(S.G){const ka=Cr.g?Cr.g.getResponseHeader("X-HTTP-Session-Id"):null;ka&&(S.wa=ka,Ye(S.J,S.G,ka))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var ie=u;if(S.na=Ca(S,S.L?S.ba:null,S.W),ie.L){gs(S.h,ie);var De=ie,wt=S.O;wt&&(De.H=wt),De.D&&(Ii(De),Nt(De)),S.g=ie}else Qt(S);v.i.length>0&&Jr(v)}else Je[0]!="stop"&&Je[0]!="close"||Dn(v,7);else v.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Dn(v,7):uo(v):Je[0]!="noop"&&v.l&&v.l.qa(Je),v.A=0)}}Ln(4)}catch{}}var uh=class{constructor(u,g){this.g=u,this.map=g}};function ro(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function pa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ms(u){return u.h?1:u.g?u.g.size:0}function ma(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function io(u,g){u.g?u.g.add(g):u.h=g}function gs(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}ro.prototype.cancel=function(){if(this.i=In(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function In(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return R(u.i)}var Fl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function An(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const S=u[v].indexOf("=");let B,W=null;S>=0?(B=u[v].substring(0,S),W=u[v].substring(S+1)):B=u[v],g(B,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function mr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof mr?(this.l=u.l,ys(this,u.j),this.o=u.o,this.g=u.g,gr(this,u.u),this.h=u.h,Ai(this,Sa(u.i)),this.m=u.m):u&&(g=String(u).match(Fl))?(this.l=!1,ys(this,g[1]||"",!0),this.o=vs(g[2]||""),this.g=vs(g[3]||"",!0),gr(this,g[4]),this.h=vs(g[5]||"",!0),Ai(this,g[6]||"",!0),this.m=vs(g[7]||"")):(this.l=!1,this.i=new $e(null,this.l))}mr.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(_s(g,ya,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(_s(g,ya,!0),"@"),u.push(cn(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(_s(v,v.charAt(0)=="/"?ws:va,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",_s(v,_a)),u.join("")},mr.prototype.resolve=function(u){const g=Un(this);let v=!!u.j;v?ys(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var S=u.h;if(v)gr(g,u.u);else if(v=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=g.h.lastIndexOf("/");B!=-1&&(S=g.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const W=[];for(let ie=0;ie<B.length;){const De=B[ie++];De=="."?S&&ie==B.length&&W.push(""):De==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),S&&ie==B.length&&W.push("")):(W.push(De),S=!0)}S=W.join("/")}else S=B}return v?g.h=S:v=u.i.toString()!=="",v?Ai(g,Sa(u.i)):v=!!u.m,v&&(g.m=u.m),g};function Un(u){return new mr(u)}function ys(u,g,v){u.j=v?vs(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function gr(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Ai(u,g,v){g instanceof $e?(u.i=g,oo(u.i,u.l)):(v||(g=_s(g,ch)),u.i=new $e(g,u.l))}function Ye(u,g,v){u.i.set(g,v)}function Gr(u){return Ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function vs(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _s(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,ga),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ga(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ya=/[#\/\?@]/g,va=/[#\?:]/g,ws=/[#\?]/g,ch=/[#\?@]/g,_a=/#/g;function $e(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function yr(u){u.g||(u.g=new Map,u.h=0,u.i&&An(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=$e.prototype,n.add=function(u,g){yr(this),this.i=null,u=vr(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function wa(u,g){yr(u),g=vr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function so(u,g){return yr(u),g=vr(u,g),u.g.has(g)}n.forEach=function(u,g){yr(this),this.g.forEach(function(v,S){v.forEach(function(B){u.call(g,B,S,this)},this)},this)};function Ea(u,g){yr(u);let v=[];if(typeof g=="string")so(u,g)&&(v=v.concat(u.g.get(vr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}n.set=function(u,g){return yr(this),this.i=null,u=vr(this,u),so(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=Ea(this,u),u.length>0?String(u[0]):g):g};function Ta(u,g,v){wa(u,g),v.length>0&&(u.i=null,u.g.set(vr(u,g),R(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var v=g[S];const B=cn(v);v=Ea(this,v);for(let W=0;W<v.length;W++){let ie=B;v[W]!==""&&(ie+="="+cn(v[W])),u.push(ie)}}return this.i=u.join("&")};function Sa(u){const g=new $e;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function vr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function oo(u,g){g&&!u.j&&(yr(u),u.i=null,u.g.forEach(function(v,S){const B=S.toLowerCase();S!=B&&(wa(this,S),Ta(this,B,v))},u)),u.j=g}function _r(u,g){const v=new En;if(h.Image){const S=new Image;S.onload=_(Bt,v,"TestLoadImage: loaded",!0,g,S),S.onerror=_(Bt,v,"TestLoadImage: error",!1,g,S),S.onabort=_(Bt,v,"TestLoadImage: abort",!1,g,S),S.ontimeout=_(Bt,v,"TestLoadImage: timeout",!1,g,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function wr(u,g){const v=new En,S=new AbortController,B=setTimeout(()=>{S.abort(),Bt(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(W=>{clearTimeout(B),W.ok?Bt(v,"TestPingServer: ok",!0,g):Bt(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Bt(v,"TestPingServer: error",!1,g)})}function Bt(u,g,v,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(v)}catch{}}function Es(){this.g=new dr}function Kr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Kr,Yn),Kr.prototype.g=function(){return new Cn(this.i,this.h)};function Cn(u,g){ct.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Cn,ct),n=Cn.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Xn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||h).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ul(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ul(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ci(this):Xn(this),this.readyState==3&&Ul(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Ci(this))},n.Na=function(u){this.g&&(this.response=u,Ci(this))},n.ga=function(){this.g&&Ci(this)};function Ci(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Xn(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Xn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Cn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Bl(u){let g="";return le(u,function(v,S){g+=S,g+=":",g+=v,g+=`\r
`}),g}function ao(u,g,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Bl(v),typeof u=="string"?v!=null&&cn(v):Ye(u,g,v))}function et(u){ct.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(et,ct);var zl=/^https?$/i,hh=["POST","PUT"];n=et.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$r.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(W){ki(this,W);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)v.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())v.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),B=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(hh,g,void 0)>=0)||S||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ie]of v)this.g.setRequestHeader(W,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(W){ki(this,W)}};function ki(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Di(u),Qr(u)}function Di(u){u.A||(u.A=!0,ht(u,"complete"),ht(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ht(this,"complete"),ht(this,"abort"),Qr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qr(this,!0)),et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Yr(this):this.Xa())},n.Xa=function(){Yr(this)};function Yr(u){if(u.h&&typeof l<"u"){if(u.v&&Er(u)==4)setTimeout(u.Ca.bind(u),0);else if(ht(u,"readystatechange"),Er(u)==4){u.h=!1;try{const W=u.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var S;if(S=W===0){let ie=String(u.D).match(Fl)[1]||null;!ie&&h.self&&h.self.location&&(ie=h.self.location.protocol.slice(0,-1)),S=!zl.test(ie?ie.toLowerCase():"")}v=S}if(v)ht(u,"complete"),ht(u,"success");else{u.o=6;try{var B=Er(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",Di(u)}}finally{Qr(u)}}}}function Qr(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||ht(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Er(u){return u.g?u.g.readyState:0}n.ca=function(){try{return Er(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),wi(g)}};function $l(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ia(u){const g={};u=(u.g&&Er(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(C(u[S]))continue;var v=pr(u[S]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=g[B]||[];g[B]=W,W.push(v)}te(g,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tr(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function lo(u){this.za=0,this.i=[],this.j=new En,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Tr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Tr("baseRetryDelayMs",5e3,u),this.Za=Tr("retryDelaySeedMs",1e4,u),this.Ta=Tr("forwardChannelMaxRetries",2,u),this.va=Tr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ro(u&&u.concurrentRequestLimit),this.Ba=new Es,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=lo.prototype,n.ka=8,n.I=1,n.connect=function(u,g,v,S){nt(0),this.W=u,this.H=g||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Ca(this,null,this.W),Jr(this)};function uo(u){if(co(u),u.I==3){var g=u.V++,v=Un(u.J);if(Ye(v,"SID",u.M),Ye(v,"RID",g),Ye(v,"TYPE","terminate"),Sr(u,v),g=new hn(u,u.j,g),g.M=2,g.A=Gr(Un(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=g.A,v=!0),v||(g.g=Hl(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Nt(g)}Is(u)}function kn(u){u.g&&(Ss(u),u.g.cancel(),u.g=null)}function co(u){kn(u),u.v&&(h.clearTimeout(u.v),u.v=null),ho(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Jr(u){if(!pa(u.h)&&!u.m){u.m=!0;var g=u.Ea;Ne||A(),ve||(Ne(),ve=!0),P.add(g,u),u.D=0}}function Wl(u,g){return ms(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=dt(y(u.Ea,u,g),po(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new hn(this,this.j,u);let W=this.o;if(this.U&&(W?(W=j(W),_e(W,this.U)):W=this.U),this.u!==null||this.R||(B.J=W,W=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Aa(this,B,g),v=Un(this.J),Ye(v,"RID",u),Ye(v,"CVER",22),this.G&&Ye(v,"X-HTTP-Session-Id",this.G),Sr(this,v),W&&(this.R?g="headers="+cn(Bl(W))+"&"+g:this.u&&ao(v,this.u,W)),io(this.h,B),this.Ra&&Ye(v,"TYPE","init"),this.S?(Ye(v,"$req",g),Ye(v,"SID","null"),B.U=!0,Sn(B,v,null)):Sn(B,v,g),this.I=2}}else this.I==3&&(u?Ts(this,u):this.i.length==0||pa(this.h)||Ts(this))};function Ts(u,g){var v;g?v=g.l:v=u.V++;const S=Un(u.J);Ye(S,"SID",u.M),Ye(S,"RID",v),Ye(S,"AID",u.K),Sr(u,S),u.u&&u.o&&ao(S,u.u,u.o),v=new hn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Aa(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),io(u.h,v),Sn(v,S,g)}function Sr(u,g){u.H&&le(u.H,function(v,S){Ye(g,S,v)}),u.l&&le({},function(v,S){Ye(g,S,v)})}function Aa(u,g,v){v=Math.min(u.i.length,v);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var B=u.i;let De=-1;for(;;){const wt=["count="+v];De==-1?v>0?(De=B[0].g,wt.push("ofs="+De)):De=0:wt.push("ofs="+De);let Je=!0;for(let At=0;At<v;At++){var W=B[At].g;const Pn=B[At].map;if(W-=De,W<0)De=Math.max(0,B[At].g-100),Je=!1;else try{W="req"+W+"_"||"";try{var ie=Pn instanceof Map?Pn:Object.entries(Pn);for(const[Xr,Ar]of ie){let Cr=Ar;f(Ar)&&(Cr=hr(Ar)),wt.push(W+Xr+"="+encodeURIComponent(Cr))}}catch(Xr){throw wt.push(W+"type="+encodeURIComponent("_badmap")),Xr}}catch{S&&S(Pn)}}if(Je){ie=wt.join("&");break e}}ie=void 0}return u=u.i.splice(0,v),g.G=u,ie}function Qt(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Ne||A(),ve||(Ne(),ve=!0),P.add(g,u),u.A=0}}function Ir(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=dt(y(u.Da,u),po(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Pi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=dt(y(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,nt(10),kn(this),Pi(this))};function Ss(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Pi(u){u.g=new hn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Un(u.na);Ye(g,"RID","rpc"),Ye(g,"SID",u.M),Ye(g,"AID",u.K),Ye(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ye(g,"TO",u.ia),Ye(g,"TYPE","xmlhttp"),Sr(u,g),u.u&&u.o&&ao(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Gr(Un(g)),v.u=null,v.R=!0,be(v,u)}n.Va=function(){this.C!=null&&(this.C=null,kn(this),Ir(this),nt(19))};function ho(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function fo(u,g){var v=null;if(u.g==g){ho(u),Ss(u),u.g=null;var S=2}else if(ma(u.h,g))v=g.G,gs(u.h,g),S=1;else return;if(u.I!=0){if(g.o)if(S==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var B=u.D;S=Mn(),ht(S,new It(S,v)),Jr(u)}else Qt(u);else if(B=g.m,B==3||B==0&&g.X>0||!(S==1&&Wl(u,g)||S==2&&Ir(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),B){case 1:Dn(u,5);break;case 4:Dn(u,10);break;case 3:Dn(u,6);break;default:Dn(u,2)}}}function po(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function Dn(u,g){if(u.j.info("Error code "+g),g==2){var v=y(u.bb,u),S=u.Ua;const B=!S;S=new mr(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ys(S,"https"),Gr(S),B?_r(S.toString(),v):wr(S.toString(),v)}else nt(2);u.I=0,u.l&&u.l.pa(g),Is(u),co(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Is(u){if(u.I=0,u.ja=[],u.l){const g=In(u.h);(g.length!=0||u.i.length!=0)&&(L(u.ja,g),L(u.ja,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.oa()}}function Ca(u,g,v){var S=v instanceof mr?Un(v):new mr(v);if(S.g!="")g&&(S.g=g+"."+S.g),gr(S,S.u);else{var B=h.location;S=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;const W=new mr(null);S&&ys(W,S),g&&(W.g=g),B&&gr(W,B),v&&(W.h=v),S=W}return v=u.G,g=u.wa,v&&g&&Ye(S,v,g),Ye(S,"VER",u.ka),Sr(u,S),S}function Hl(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new et(new Kr({ab:v})):new et(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ql(){}n=ql.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function mo(){}mo.prototype.g=function(u,g){return new zt(u,g)};function zt(u,g){ct.call(this),this.g=new lo(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Ri(this)}E(zt,ct),zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){uo(this.g)},zt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=hr(u),u=v);g.i.push(new uh(g.Ya++,u)),g.I==3&&Jr(g)},zt.prototype.N=function(){this.g.l=null,delete this.j,uo(this.g),delete this.g,zt.Z.N.call(this)};function Gl(u){Br.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}E(Gl,Br);function Kl(){ds.call(this),this.status=1}E(Kl,ds);function Ri(u){this.g=u}E(Ri,ql),Ri.prototype.ra=function(){ht(this.g,"a")},Ri.prototype.qa=function(u){ht(this.g,new Gl(u))},Ri.prototype.pa=function(u){ht(this.g,new Kl)},Ri.prototype.oa=function(){ht(this.g,"b")},mo.prototype.createWebChannel=mo.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,N_=function(){return new mo},R_=function(){return Mn()},P_=un,pf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Jn.NO_ERROR=0,Jn.TIMEOUT=8,Jn.HTTP_ERROR=6,Zu=Jn,Fn.COMPLETE="complete",D_=Fn,no.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",ct.prototype.listen=ct.prototype.J,nl=no,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,k_=et}).apply(typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{});const xy="@firebase/firestore",by="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aa="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new Zf("@firebase/firestore");function jo(){return qs.logLevel}function he(n,...e){if(qs.logLevel<=Ue.DEBUG){const t=e.map(np);qs.debug(`Firestore (${aa}): ${n}`,...t)}}function di(n,...e){if(qs.logLevel<=Ue.ERROR){const t=e.map(np);qs.error(`Firestore (${aa}): ${n}`,...t)}}function Xo(n,...e){if(qs.logLevel<=Ue.WARN){const t=e.map(np);qs.warn(`Firestore (${aa}): ${n}`,...t)}}function np(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,x_(n,i,t)}function x_(n,e,t){let i=`FIRESTORE (${aa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw di(i),new Error(i)}function Qe(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||x_(e,o,i)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends mi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class II{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class AI{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new es;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new es,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new es)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new b_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class CI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new CI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Oy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=PI(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Be(n,e){return n<e?-1:n>e?1:0}function mf(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),l=e.charAt(i);if(o!==l)return $d(o)===$d(l)?Be(o,l):$d(o)?1:-1}return Be(n.length,e.length)}const RI=55296,NI=57343;function $d(n){const e=n.charCodeAt(0);return e>=RI&&e<=NI}function Zo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="__name__";class xr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=xr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Be(e.length,t.length)}static compareSegments(e,t){const i=xr.isNumericId(e),o=xr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?xr.extractNumericId(e).compare(xr.extractNumericId(t)):mf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zi.fromString(e.substring(4,e.length-2))}}class gt extends xr{construct(e,t,i){return new gt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new gt(t)}static emptyPath(){return new gt([])}}const xI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends xr{construct(e,t,i){return new qt(e,t,i)}static isValidIdentifier(e){return xI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vy}static keyField(){return new qt([Vy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ge(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ge(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ge(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(t)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(gt.fromString(e))}static fromName(e){return new Te(gt.fromString(e).popFirst(5))}static empty(){return new Te(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(n,e,t){if(!t)throw new ge(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function OI(n,e,t,i){if(e===!0&&i===!0)throw new ge(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function My(n){if(!Te.isDocumentKey(n))throw new ge(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function O_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ip(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function ts(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ip(n);throw new ge(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function kl(n,e){if(!O_(n))throw new ge(Y.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const h=n[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ge(Y.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=-62135596800,jy=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*jy);return new at(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ly)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jy}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kl(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ly;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:Pt("string",at._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new at(0,0))}static max(){return new ke(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function VI(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(i===1e9?new at(t+1,0):new at(t,i));return new ns(o,Te.empty(),e)}function MI(n){return new ns(n.readTime,n.key,pl)}class ns{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ns(ke.min(),Te.empty(),pl)}static max(){return new ns(ke.max(),Te.empty(),pl)}}function LI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==jI)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,i)=>{t(e)}))}static reject(e){return new G(((t,i)=>{i(e)}))}static waitFor(e){return new G(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(p=>i(p)))})),h=!0,l===o&&t()}))}static or(e){let t=G.resolve(!1);for(const i of e)t=t.next((o=>o?G.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new G(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((_=>{h[y]=_,++f,f===l&&i(h)}),(_=>o(_)))}}))}static doWhile(e,t){return new G(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function UI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ua(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=-1;function Fc(n){return n==null}function pc(n){return n===0&&1/n==-1/0}function BI(n){return typeof n=="number"&&Number.isInteger(n)&&!pc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="";function zI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Fy(e)),e=$I(n.get(t),e);return Fy(e)}function $I(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case V_:t+="";break;default:t+=l}}return t}function Fy(n){return n+V_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ys(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function M_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||Ht.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $u(this.root,e,this.comparator,!1)}getReverseIterator(){return new $u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $u(this.root,e,this.comparator,!0)}}class $u{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ht.RED,this.left=o??Ht.EMPTY,this.right=l??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ht(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ht.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ht(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new By(this.data.getIterator())}getIteratorFrom(e){return new By(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Mt(this.comparator);return t.data=e,t}}class By{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new ar([])}unionWith(e){let t=new Mt(qt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ar(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new L_("Invalid base64 string: "+l):l}})(e);return new Kt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const WI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=WI.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function is(n){return typeof n=="string"?Kt.fromBase64String(n):Kt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="server_timestamp",F_="__type__",U_="__previous_value__",B_="__local_write_time__";function op(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[F_])==null?void 0:i.stringValue)===j_}function Uc(n){const e=n.mapValue.fields[U_];return op(e)?Uc(e):e}function ml(n){const e=rs(n.mapValue.fields[B_].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,t,i,o,l,h,f,p,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=_}}const mc="(default)";class gl{constructor(e,t){this.projectId=e,this.database=t||mc}static empty(){return new gl("","")}get isDefaultDatabase(){return this.database===mc}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="__type__",qI="__max__",Wu={mapValue:{}},$_="__vector__",gc="value";function ss(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?op(n)?4:KI(n)?9007199254740991:GI(n)?10:11:Ie(28295,{value:n})}function jr(n,e){if(n===e)return!0;const t=ss(n);if(t!==ss(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ml(n).isEqual(ml(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=rs(o.timestampValue),f=rs(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return is(o.bytesValue).isEqual(is(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Tt(o.geoPointValue.latitude)===Tt(l.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Tt(o.integerValue)===Tt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=Tt(o.doubleValue),f=Tt(l.doubleValue);return h===f?pc(h)===pc(f):isNaN(h)&&isNaN(f)}return!1})(n,e);case 9:return Zo(n.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Uy(h)!==Uy(f))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(f[p]===void 0||!jr(h[p],f[p])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function yl(n,e){return(n.values||[]).find((t=>jr(t,e)))!==void 0}function ea(n,e){if(n===e)return 0;const t=ss(n),i=ss(e);if(t!==i)return Be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=Tt(l.integerValue||l.doubleValue),p=Tt(h.integerValue||h.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return zy(n.timestampValue,e.timestampValue);case 4:return zy(ml(n),ml(e));case 5:return mf(n.stringValue,e.stringValue);case 6:return(function(l,h){const f=is(l),p=is(h);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),p=h.split("/");for(let y=0;y<f.length&&y<p.length;y++){const _=Be(f[y],p[y]);if(_!==0)return _}return Be(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Be(Tt(l.latitude),Tt(h.latitude));return f!==0?f:Be(Tt(l.longitude),Tt(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return $y(n.arrayValue,e.arrayValue);case 10:return(function(l,h){var I,R,L,N;const f=l.fields||{},p=h.fields||{},y=(I=f[gc])==null?void 0:I.arrayValue,_=(R=p[gc])==null?void 0:R.arrayValue,E=Be(((L=y==null?void 0:y.values)==null?void 0:L.length)||0,((N=_==null?void 0:_.values)==null?void 0:N.length)||0);return E!==0?E:$y(y,_)})(n.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Wu.mapValue&&h===Wu.mapValue)return 0;if(l===Wu.mapValue)return 1;if(h===Wu.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=h.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const I=mf(p[E],_[E]);if(I!==0)return I;const R=ea(f[p[E]],y[_[E]]);if(R!==0)return R}return Be(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function zy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=rs(n),i=rs(e),o=Be(t.seconds,i.seconds);return o!==0?o:Be(t.nanos,i.nanos)}function $y(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=ea(t[o],i[o]);if(l)return l}return Be(t.length,i.length)}function ta(n){return gf(n)}function gf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=rs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return is(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=gf(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${gf(t.fields[h])}`;return o+"}"})(n.mapValue):Ie(61005,{value:n})}function ec(n){switch(ss(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uc(n);return e?16+ec(e):16;case 5:return 2*n.stringValue.length;case 6:return is(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+ec(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Ys(i.fields,((l,h)=>{o+=l.length+ec(h)})),o})(n.mapValue);default:throw Ie(13486,{value:n})}}function yf(n){return!!n&&"integerValue"in n}function ap(n){return!!n&&"arrayValue"in n}function Wy(n){return!!n&&"nullValue"in n}function Hy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tc(n){return!!n&&"mapValue"in n}function GI(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[z_])==null?void 0:i.stringValue)===$_}function ll(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ys(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ll(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ll(n.arrayValue.values[t]);return e}return{...n}}function KI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===qI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!tc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(t)}setAll(e){let t=qt.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=ll(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());tc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];tc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ys(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Gn(ll(this.value))}}function W_(n){const e=[];return Ys(n.fields,((t,i)=>{const o=new qt([t]);if(tc(i)){const l=W_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new rn(e,0,ke.min(),ke.min(),ke.min(),Gn.empty(),0)}static newFoundDocument(e,t,i,o){return new rn(e,1,t,ke.min(),i,o,0)}static newNoDocument(e,t){return new rn(e,2,t,ke.min(),ke.min(),Gn.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,ke.min(),ke.min(),Gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t){this.position=e,this.inclusive=t}}function qy(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(l.field.isKeyField()?i=Te.comparator(Te.fromName(h.referenceValue),t.key):i=ea(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Gy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function YI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{}class Ot extends H_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new JI(e,t,i):t==="array-contains"?new e1(e,i):t==="in"?new t1(e,i):t==="not-in"?new n1(e,i):t==="array-contains-any"?new r1(e,i):new Ot(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new XI(e,i):new ZI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ea(t,this.value)):t!==null&&ss(this.value)===ss(t)&&this.matchesComparison(ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fr extends H_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fr(e,t)}matches(e){return q_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function q_(n){return n.op==="and"}function G_(n){return QI(n)&&q_(n)}function QI(n){for(const e of n.filters)if(e instanceof Fr)return!1;return!0}function vf(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+ta(n.value);if(G_(n))return n.filters.map((e=>vf(e))).join(",");{const e=n.filters.map((t=>vf(t))).join(",");return`${n.op}(${e})`}}function K_(n,e){return n instanceof Ot?(function(i,o){return o instanceof Ot&&i.op===o.op&&i.field.isEqual(o.field)&&jr(i.value,o.value)})(n,e):n instanceof Fr?(function(i,o){return o instanceof Fr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&K_(h,o.filters[f])),!0):!1})(n,e):void Ie(19439)}function Y_(n){return n instanceof Ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${ta(t.value)}`})(n):n instanceof Fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Y_).join(" ,")+"}"})(n):"Filter"}class JI extends Ot{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class XI extends Ot{constructor(e,t){super(e,"in",t),this.keys=Q_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ZI extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=Q_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Q_(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Te.fromName(i.referenceValue)))}class e1 extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ap(t)&&yl(t.arrayValue,this.value)}}class t1 extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yl(this.value.arrayValue,t)}}class n1 extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yl(this.value.arrayValue,t)}}class r1 extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ap(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>yl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function Ky(n,e=null,t=[],i=[],o=null,l=null,h=null){return new i1(n,e,t,i,o,l,h)}function lp(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>vf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Fc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>ta(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>ta(i))).join(",")),e.Te=t}return e.Te}function up(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!K_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Gy(n.startAt,e.startAt)&&Gy(n.endAt,e.endAt)}function _f(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function s1(n,e,t,i,o,l,h,f){return new Bc(n,e,t,i,o,l,h,f)}function zc(n){return new Bc(n)}function Yy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function o1(n){return n.collectionGroup!==null}function ul(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Mt(qt.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new vc(l,i))})),t.has(qt.keyField().canonicalString())||e.Ie.push(new vc(qt.keyField(),i))}return e.Ie}function br(n){const e=Pe(n);return e.Ee||(e.Ee=a1(e,ul(n))),e.Ee}function a1(n,e){if(n.limitType==="F")return Ky(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new vc(o.field,l)}));const t=n.endAt?new yc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new yc(n.startAt.position,n.startAt.inclusive):null;return Ky(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function wf(n,e,t){return new Bc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $c(n,e){return up(br(n),br(e))&&n.limitType===e.limitType}function J_(n){return`${lp(br(n))}|lt:${n.limitType}`}function Fo(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Y_(o))).join(", ")}]`),Fc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>ta(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>ta(o))).join(",")),`Target(${i})`})(br(n))}; limitType=${n.limitType})`}function Wc(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Te.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of ul(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,p){const y=qy(h,f,p);return h.inclusive?y<=0:y<0})(i.startAt,ul(i),o)||i.endAt&&!(function(h,f,p){const y=qy(h,f,p);return h.inclusive?y>=0:y>0})(i.endAt,ul(i),o))})(n,e)}function l1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function X_(n){return(e,t)=>{let i=!1;for(const o of ul(n)){const l=u1(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function u1(n,e,t){const i=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,h,f){const p=h.data.field(l),y=f.data.field(l);return p!==null&&y!==null?ea(p,y):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return M_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new yt(Te.comparator);function fi(){return c1}const Z_=new yt(Te.comparator);function rl(...n){let e=Z_;for(const t of n)e=e.insert(t.key,t);return e}function ew(n){let e=Z_;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function js(){return cl()}function tw(){return cl()}function cl(){return new Qs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const h1=new yt(Te.comparator),d1=new Mt(Te.comparator);function ze(...n){let e=d1;for(const t of n)e=e.add(t);return e}const f1=new Mt(Be);function p1(){return f1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function nw(n){return{integerValue:""+n}}function m1(n,e){return BI(e)?nw(e):cp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this._=void 0}}function g1(n,e,t){return n instanceof _c?(function(o,l){const h={fields:{[F_]:{stringValue:j_},[B_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&op(l)&&(l=Uc(l)),l&&(h.fields[U_]=l),{mapValue:h}})(t,e):n instanceof vl?iw(n,e):n instanceof _l?sw(n,e):(function(o,l){const h=rw(o,l),f=Qy(h)+Qy(o.Ae);return yf(h)&&yf(o.Ae)?nw(f):cp(o.serializer,f)})(n,e)}function y1(n,e,t){return n instanceof vl?iw(n,e):n instanceof _l?sw(n,e):t}function rw(n,e){return n instanceof wc?(function(i){return yf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class _c extends Hc{}class vl extends Hc{constructor(e){super(),this.elements=e}}function iw(n,e){const t=ow(e);for(const i of n.elements)t.some((o=>jr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class _l extends Hc{constructor(e){super(),this.elements=e}}function sw(n,e){let t=ow(e);for(const i of n.elements)t=t.filter((o=>!jr(o,i)));return{arrayValue:{values:t}}}class wc extends Hc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Qy(n){return Tt(n.integerValue||n.doubleValue)}function ow(n){return ap(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function v1(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof vl&&o instanceof vl||i instanceof _l&&o instanceof _l?Zo(i.elements,o.elements,jr):i instanceof wc&&o instanceof wc?jr(i.Ae,o.Ae):i instanceof _c&&o instanceof _c})(n.transform,e.transform)}class _1{constructor(e,t){this.version=e,this.transformResults=t}}class ci{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ci}static exists(e){return new ci(void 0,e)}static updateTime(e){return new ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qc{}function aw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new uw(n.key,ci.none()):new Dl(n.key,n.data,ci.none());{const t=n.data,i=Gn.empty();let o=new Mt(qt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Js(n.key,i,new ar(o.toArray()),ci.none())}}function w1(n,e,t){n instanceof Dl?(function(o,l,h){const f=o.value.clone(),p=Xy(o.fieldTransforms,l,h.transformResults);f.setAll(p),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Js?(function(o,l,h){if(!nc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Xy(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(lw(o)),p.setAll(f),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function hl(n,e,t,i){return n instanceof Dl?(function(l,h,f,p){if(!nc(l.precondition,h))return f;const y=l.value.clone(),_=Zy(l.fieldTransforms,p,h);return y.setAll(_),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Js?(function(l,h,f,p){if(!nc(l.precondition,h))return f;const y=Zy(l.fieldTransforms,p,h),_=h.data;return _.setAll(lw(l)),_.setAll(y),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,h,f){return nc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(n,e,t)}function E1(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=rw(i.transform,o||null);l!=null&&(t===null&&(t=Gn.empty()),t.set(i.field,l))}return t||null}function Jy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Zo(i,o,((l,h)=>v1(l,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Dl extends qc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Js extends qc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function lw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Xy(n,e,t){const i=new Map;Qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,y1(h,f,t[o]))}return i}function Zy(n,e,t){const i=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);i.set(o.field,g1(l,h,e))}return i}class uw extends qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T1 extends qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&w1(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=hl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=hl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=tw();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const p=aw(h,f);p!==null&&i.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,((t,i)=>Jy(t,i)))&&Zo(this.baseMutations,e.baseMutations,((t,i)=>Jy(t,i)))}}class hp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return h1})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new hp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,He;function C1(n){switch(n){case Y.OK:return Ie(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function cw(n){if(n===void 0)return di("GRPC error has no .code"),Y.UNKNOWN;switch(n){case kt.OK:return Y.OK;case kt.CANCELLED:return Y.CANCELLED;case kt.UNKNOWN:return Y.UNKNOWN;case kt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case kt.INTERNAL:return Y.INTERNAL;case kt.UNAVAILABLE:return Y.UNAVAILABLE;case kt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case kt.NOT_FOUND:return Y.NOT_FOUND;case kt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case kt.ABORTED:return Y.ABORTED;case kt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case kt.DATA_LOSS:return Y.DATA_LOSS;default:return Ie(39323,{code:n})}}(He=kt||(kt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=new Zi([4294967295,4294967295],0);function ev(n){const e=k1().encode(n),t=new C_;return t.update(e),new Uint8Array(t.digest())}function tv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Zi([t,i],0),new Zi([o,l],0)]}class dp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new il(`Invalid padding: ${t}`);if(i<0)throw new il(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new il(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new il(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zi.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Zi.fromNumber(i)));return o.compare(D1)===1&&(o=new Zi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ev(e),[i,o]=tv(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new dp(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=ev(e),[i,o]=tv(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Pl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Gc(ke.min(),o,new yt(Be),fi(),ze())}}class Pl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Pl(i,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class hw{constructor(e,t){this.targetId=e,this.Ce=t}}class dw{constructor(e,t,i=Kt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class nv{constructor(){this.ve=0,this.Fe=rv(),this.Me=Kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),i=ze();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie(38017,{changeType:l})}})),new Pl(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=rv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class P1{constructor(e){this.Ge=e,this.ze=new Map,this.je=fi(),this.Je=Hu(),this.He=Hu(),this.Ye=new yt(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(_f(l))if(i===0){const h=new Te(l.path);this.et(t,h,rn.newNoDocument(h,ke.min()))}else Qe(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const f=this.ut(e),p=f?this.ct(f,e,h):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=is(i).toUint8Array()}catch(p){if(p instanceof L_)return Xo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new dp(h,o,l)}catch(p){return Xo(p instanceof il?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&_f(f.target)){const p=new Te(f.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,rn.newNoDocument(p,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=ze();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Gc(e,t,this.Ye,this.je,i);return this.je=fi(),this.Je=Hu(),this.He=Hu(),this.Ye=new yt(Be),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Mt(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Mt(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Hu(){return new yt(Te.comparator)}function rv(){return new yt(Te.comparator)}const R1={asc:"ASCENDING",desc:"DESCENDING"},N1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x1={and:"AND",or:"OR"};class b1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ef(n,e){return n.useProto3Json||Fc(e)?e:{value:e}}function Ec(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function O1(n,e){return Ec(n,e.toTimestamp())}function Or(n){return Qe(!!n,49232),ke.fromTimestamp((function(t){const i=rs(t);return new at(i.seconds,i.nanos)})(n))}function fp(n,e){return Tf(n,e).canonicalString()}function Tf(n,e){const t=(function(o){return new gt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pw(n){const e=gt.fromString(n);return Qe(_w(e),10190,{key:e.toString()}),e}function Sf(n,e){return fp(n.databaseId,e.path)}function Wd(n,e){const t=pw(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(gw(t))}function mw(n,e){return fp(n.databaseId,e)}function V1(n){const e=pw(n);return e.length===4?gt.emptyPath():gw(e)}function If(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gw(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function iv(n,e,t){return{name:Sf(n,e),fields:t.value.mapValue.fields}}function M1(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(Qe(_===void 0||typeof _=="string",58123),Kt.fromBase64String(_||"")):(Qe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Kt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const _=y.code===void 0?Y.UNKNOWN:cw(y.code);return new ge(_,y.message||"")})(h);t=new dw(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Wd(n,i.document.name),l=Or(i.document.updateTime),h=i.document.createTime?Or(i.document.createTime):ke.min(),f=new Gn({mapValue:{fields:i.document.fields}}),p=rn.newFoundDocument(o,l,h,f),y=i.targetIds||[],_=i.removedTargetIds||[];t=new rc(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Wd(n,i.document),l=i.readTime?Or(i.readTime):ke.min(),h=rn.newNoDocument(o,l),f=i.removedTargetIds||[];t=new rc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Wd(n,i.document),l=i.removedTargetIds||[];t=new rc([],l,o,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new A1(o,l),f=i.targetId;t=new hw(f,h)}}return t}function L1(n,e){let t;if(e instanceof Dl)t={update:iv(n,e.key,e.value)};else if(e instanceof uw)t={delete:Sf(n,e.key)};else if(e instanceof Js)t={update:iv(n,e.key,e.data),updateMask:q1(e.fieldMask)};else{if(!(e instanceof T1))return Ie(16599,{Vt:e.type});t={verify:Sf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof _c)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof vl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof _l)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof wc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw Ie(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:O1(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie(27497)})(n,e.precondition)),t}function j1(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(o,l){let h=o.updateTime?Or(o.updateTime):Or(l);return h.isEqual(ke.min())&&(h=Or(l)),new _1(h,o.transformResults||[])})(t,e)))):[]}function F1(n,e){return{documents:[mw(n,e.path)]}}function U1(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=mw(n,o);const l=(function(y){if(y.length!==0)return vw(Fr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((_=>(function(I){return{field:Uo(I.field),direction:$1(I.dir)}})(_)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=Ef(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function B1(n){let e=V1(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Qe(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const I=yw(E);return I instanceof Fr&&G_(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((I=>(function(L){return new vc(Bo(L.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let I;return I=typeof E=="object"?E.value:E,Fc(I)?null:I})(t.limit));let p=null;t.startAt&&(p=(function(E){const I=!!E.before,R=E.values||[];return new yc(R,I)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const I=!E.before,R=E.values||[];return new yc(R,I)})(t.endAt)),s1(e,o,h,l,f,"F",p,y)}function z1(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Bo(t.unaryFilter.field);return Ot.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Bo(t.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Bo(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Bo(t.unaryFilter.field);return Ot.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ot.create(Bo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Fr.create(t.compositeFilter.filters.map((i=>yw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function $1(n){return R1[n]}function W1(n){return N1[n]}function H1(n){return x1[n]}function Uo(n){return{fieldPath:n.canonicalString()}}function Bo(n){return qt.fromServerFormat(n.fieldPath)}function vw(n){return n instanceof Ot?(function(t){if(t.op==="=="){if(Hy(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NAN"}};if(Wy(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hy(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NAN"}};if(Wy(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(t.field),op:W1(t.op),value:t.value}}})(n):n instanceof Fr?(function(t){const i=t.getFilters().map((o=>vw(o)));return i.length===1?i[0]:{compositeFilter:{op:H1(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function q1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function _w(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t,i,o,l=ke.min(),h=ke.min(),f=Kt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.yt=e}}function K1(n){const e=B1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?wf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.Cn=new Q1}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(ns.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class Q1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Mt(gt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Mt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ww=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(ww,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new na(0)}static cr(){return new na(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="LruGarbageCollector",J1=1048576;function av([n,e],[t,i]){const o=Be(n,t);return o===0?Be(e,i):o}class X1{constructor(e){this.Ir=e,this.buffer=new Mt(av),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();av(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Z1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(ov,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ua(t)?he(ov,"Ignoring IndexedDB error during garbage collection: ",t):await la(t)}await this.Vr(3e5)}))}}class eA{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(jc.ce);const i=new X1(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(sv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,f,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,f=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),jo()<=Ue.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${E} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function tA(n,e){return new eA(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.changes=new Qs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&hl(i.mutation,o,ar.empty(),at.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ze()){const o=js();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=rl();return l.forEach(((f,p)=>{h=h.insert(f,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=js();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ze())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=fi();const h=cl(),f=(function(){return cl()})();return t.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Js)?l=l.insert(y.key,y):_!==void 0?(h.set(y.key,_.mutation.getFieldMask()),hl(_.mutation,y,_.mutation.getFieldMask(),at.now())):h.set(y.key,ar.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,_)=>h.set(y,_))),t.forEach(((y,_)=>f.set(y,new rA(_,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=cl();let o=new yt(((h,f)=>h-f)),l=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||ar.empty();_=f.applyToLocalView(y,_),i.set(p,_);const E=(o.get(f.batchId)||ze()).add(p);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,_=p.value,E=tw();_.forEach((I=>{if(!l.has(I)){const R=aw(t.get(I),i.get(I));R!==null&&E.set(I,R),l=l.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return G.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return Te.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):o1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):G.resolve(js());let f=pl,p=l;return h.next((y=>G.forEach(y,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?G.resolve():this.remoteDocumentCache.getEntry(e,_).next((I=>{p=p.insert(_,I)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,ze()))).next((_=>({batchId:f,changes:ew(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((i=>{let o=rl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=rl();return this.indexManager.getCollectionParents(e,l).next((f=>G.forEach(f,(p=>{const y=(function(E,I){return new Bc(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,I)=>{h=h.insert(E,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((p,y)=>{const _=y.getKey();h.get(_)===null&&(h=h.insert(_,rn.newInvalidDocument(_)))}));let f=rl();return h.forEach(((p,y)=>{const _=l.get(p);_!==void 0&&hl(_.mutation,y,ar.empty(),at.now()),Wc(t,y)&&(f=f.insert(p,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Or(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:K1(o.bundledQuery),readTime:Or(o.readTime)}})(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.overlays=new yt(Te.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const i=js();return G.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),G.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){const o=js(),l=t.length+1,h=new Te(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new yt(((y,_)=>y-_));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=js(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const f=js(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>f.set(y,_))),!(f.size()>=o)););return G.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new I1(t,i));let l=this.qr.get(t);l===void 0&&(l=ze(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(){this.Qr=new Mt(Ut.$r),this.Ur=new Mt(Ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ut(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ut(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Te(new gt([])),i=new Ut(t,e),o=new Ut(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new gt([])),i=new Ut(t,e),o=new Ut(t,e+1);let l=ze();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Ut(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ut{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Mt(Ut.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new S1(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new Ut(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?sp:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ut(t,0),o=new Ut(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Mt(Be);return t.forEach((o=>{const l=new Ut(o,0),h=new Ut(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{i=i.add(f.Yr)}))})),G.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Te.isDocumentKey(l)||(l=l.child(""));const h=new Ut(new Te(l),0);let f=new Mt(Be);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.Yr)),!0)}),h),G.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return G.forEach(t.mutations,(o=>{const l=new Ut(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ut(t,0),o=this.Zr.firstAfterOrEqual(i);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.ri=e,this.docs=(function(){return new yt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let i=fi();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():rn.newInvalidDocument(o))})),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=fi();const h=t.path,f=new Te(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||LI(MI(_),i)<=0||(o.has(_.key)||Wc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ie(9500)}ii(e,t){return G.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new cA(this)}getSize(e){return G.resolve(this.size)}}class cA extends nA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.persistence=e,this.si=new Qs((t=>lp(t)),up),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new pp,this.targetCount=0,this.ai=na.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new na(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),G.waitFor(l).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),G.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t){this.ui={},this.overlays={},this.ci=new jc(0),this.li=!1,this.li=!0,this.hi=new aA,this.referenceDelegate=e(this),this.Pi=new hA(this),this.indexManager=new Y1,this.remoteDocumentCache=(function(o){return new uA(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new G1(t),this.Ii=new sA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new lA(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const o=new dA(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return G.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class dA extends FI{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Ri=new pp,this.Vi=null}static mi(e){return new mp(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,(i=>{const o=Te.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Tc{constructor(e,t){this.persistence=e,this.pi=new Qs((i=>zI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=tA(this,t)}static mi(e,t){return new Tc(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return G.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?G.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(i++,l.removeEntry(h,ke.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ec(e.data.value)),t}br(e,t,i){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return G.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=ze(),o=ze();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new gp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sS()?8:UI(sn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new fA;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(jo()<=Ue.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(jo()<=Ue.DEBUG&&he("QueryEngine","Query:",Fo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(jo()<=Ue.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,br(t))):G.resolve())}ys(e,t){if(Yy(t))return G.resolve(null);let i=br(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=wf(t,null,"F"),i=br(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=ze(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.Ds(t,f);return this.Cs(t,y,h,p.readTime)?this.ys(e,wf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ws(e,t,i,o){return Yy(t)||o.isEqual(ke.min())?G.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?G.resolve(null):(jo()<=Ue.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fo(t)),this.vs(e,h,t,VI(o,pl)).next((f=>f)))}))}Ds(e,t){let i=new Mt(X_(e));return t.forEach(((o,l)=>{Wc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return jo()<=Ue.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Fo(t)),this.ps.getDocumentsMatchingQuery(e,t,ns.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="LocalStore",mA=3e8;class gA{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new yt(Be),this.xs=new Qs((l=>lp(l)),up),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function yA(n,e,t,i){return new gA(n,e,t,i)}async function Tw(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let p=ze();for(const y of o){h.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){f.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function vA(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,y,_){const E=y.batch,I=E.keys();let R=G.resolve();return I.forEach((L=>{R=R.next((()=>_.getEntry(p,L))).next((N=>{const F=y.docVersions.get(L);Qe(F!==null,48541),N.version.compareTo(F)<0&&(E.applyToRemoteDocument(N,y),N.isValidDocument()&&(N.setReadTime(y.commitVersion),_.addEntry(N)))}))})),R.next((()=>f.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=ze();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Sw(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function _A(n,e){const t=Pe(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((_,E)=>{const I=o.get(E);if(!I)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,E))));let R=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(Kt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,i)),o=o.insert(E,R),(function(N,F,q){return N.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=mA?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(I,R,_)&&f.push(t.Pi.updateTargetData(l,R))}));let p=fi(),y=ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(wA(l,h,e.documentUpdates).next((_=>{p=_.ks,y=_.qs}))),!i.isEqual(ke.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return G.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function wA(n,e,t){let i=ze(),o=ze();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let h=fi();return t.forEach(((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(ke.min())?(e.removeEntry(f,p.readTime),h=h.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(f,p)):he(yp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function EA(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=sp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function TA(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,G.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new Yi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Af(n,e,t){const i=Pe(n),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ua(h))throw h;he(yp,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function lv(n,e,t){const i=Pe(n);let o=ke.min(),l=ze();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,y,_){const E=Pe(p),I=E.xs.get(_);return I!==void 0?G.resolve(E.Ms.get(I)):E.Pi.getTargetData(y,_)})(i,h,br(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,f.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:ke.min(),t?l:ze()))).next((f=>(SA(i,l1(e),f),{documents:f,Qs:l})))))}function SA(n,e,t){let i=n.Os.get(e)||ke.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class uv{constructor(){this.activeTargetIds=p1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IA{constructor(){this.Mo=new uv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new uv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="ConnectivityMonitor";class hv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(cv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(cv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu=null;function Cf(){return qu===null?qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():qu++,"0x"+qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="RestConnection",CA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===mc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=Cf(),f=this.zo(e,t.toUriEncodedString());he(Hd,`Sending RPC '${e}' ${h}:`,f,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:y}=new URL(f),_=sa(y);return this.Jo(e,f,p,i,_).then((E=>(he(Hd,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Xo(Hd,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",i),E}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+aa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=CA[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class PA extends kA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=Cf();return new Promise(((f,p)=>{const y=new k_;y.setWithCredentials(!0),y.listenOnce(D_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Zu.NO_ERROR:const E=y.getResponseJson();he(tn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case Zu.TIMEOUT:he(tn,`RPC '${e}' ${h} timed out`),p(new ge(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const I=y.getStatus();if(he(tn,`RPC '${e}' ${h} failed with status:`,I,"response text:",y.getResponseText()),I>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=R==null?void 0:R.error;if(L&&L.status&&L.message){const N=(function(q){const ee=q.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(ee)>=0?ee:Y.UNKNOWN})(L.status);p(new ge(N,L.message))}else p(new ge(Y.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ge(Y.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(tn,`RPC '${e}' ${h} completed.`)}}));const _=JSON.stringify(o);he(tn,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=Cf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=N_(),f=R_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");he(tn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=h.createWebChannel(_,p);this.I_(E);let I=!1,R=!1;const L=new DA({Yo:F=>{R?he(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(I||(he(tn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),he(tn,`RPC '${e}' stream ${o} sending:`,F),E.send(F))},Zo:()=>E.close()}),N=(F,q,ee)=>{F.listen(q,(oe=>{try{ee(oe)}catch(re){setTimeout((()=>{throw re}),0)}}))};return N(E,nl.EventType.OPEN,(()=>{R||(he(tn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),N(E,nl.EventType.CLOSE,(()=>{R||(R=!0,he(tn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(E))})),N(E,nl.EventType.ERROR,(F=>{R||(R=!0,Xo(tn,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),L.a_(new ge(Y.UNAVAILABLE,"The operation could not be completed")))})),N(E,nl.EventType.MESSAGE,(F=>{var q;if(!R){const ee=F.data[0];Qe(!!ee,16349);const oe=ee,re=(oe==null?void 0:oe.error)||((q=oe[0])==null?void 0:q.error);if(re){he(tn,`RPC '${e}' stream ${o} received error:`,re);const Ne=re.status;let ve=(function(D){const b=kt[D];if(b!==void 0)return cw(b)})(Ne),P=re.message;ve===void 0&&(ve=Y.INTERNAL,P="Unknown error status: "+Ne+" with message "+re.message),R=!0,L.a_(new ge(ve,P)),E.close()}else he(tn,`RPC '${e}' stream ${o} received:`,ee),L.u_(ee)}})),N(f,P_.STAT_EVENT,(F=>{F.stat===pf.PROXY?he(tn,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===pf.NOPROXY&&he(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(n){return new b1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="PersistentStream";class Aw{constructor(e,t,i,o,l,h,f,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Iw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(di(t.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ge(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(dv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(dv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class RA extends Aw{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=M1(this.serializer,e),i=(function(l){if(!("targetChange"in l))return ke.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?ke.min():h.readTime?Or(h.readTime):ke.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=If(this.serializer),t.addTarget=(function(l,h){let f;const p=h.target;if(f=_f(p)?{documents:F1(l,p)}:{query:U1(l,p).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=fw(l,h.resumeToken);const y=Ef(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(ke.min())>0){f.readTime=Ec(l,h.snapshotVersion.toTimestamp());const y=Ef(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=z1(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=If(this.serializer),t.removeTarget=e,this.q_(t)}}class NA extends Aw{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=j1(e.writeResults,e.commitTime),i=Or(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=If(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>L1(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{}class bA extends xA{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,Tf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(Y.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,Tf(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ge(Y.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class OA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(di(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class VA{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Xs(this)&&(he(Gs,"Restarting streams for network reachability change."),await(async function(p){const y=Pe(p);y.Ea.add(4),await Rl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Yc(y)})(this))}))})),this.Ra=new OA(i,o)}}async function Yc(n){if(Xs(n))for(const e of n.da)await e(!0)}async function Rl(n){for(const e of n.da)await e(!1)}function Cw(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ep(t)?wp(t):ca(t).O_()&&_p(t,e))}function vp(n,e){const t=Pe(n),i=ca(t);t.Ia.delete(e),i.O_()&&kw(t,e),t.Ia.size===0&&(i.O_()?i.L_():Xs(t)&&t.Ra.set("Unknown"))}function _p(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ca(n).Y_(e)}function kw(n,e){n.Va.Ue(e),ca(n).Z_(e)}function wp(n){n.Va=new P1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ca(n).start(),n.Ra.ua()}function Ep(n){return Xs(n)&&!ca(n).x_()&&n.Ia.size>0}function Xs(n){return Pe(n).Ea.size===0}function Dw(n){n.Va=void 0}async function MA(n){n.Ra.set("Online")}async function LA(n){n.Ia.forEach(((e,t)=>{_p(n,e)}))}async function jA(n,e){Dw(n),Ep(n)?(n.Ra.ha(e),wp(n)):n.Ra.set("Unknown")}async function FA(n,e,t){if(n.Ra.set("Online"),e instanceof dw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(n,e)}catch(i){he(Gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Sc(n,i)}else if(e instanceof rc?n.Va.Ze(e):e instanceof hw?n.Va.st(e):n.Va.tt(e),!t.isEqual(ke.min()))try{const i=await Sw(n.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(y);_&&l.Ia.set(y,_.withResumeToken(p.resumeToken,h))}})),f.targetMismatches.forEach(((p,y)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(Kt.EMPTY_BYTE_STRING,_.snapshotVersion)),kw(l,p);const E=new Yi(_.target,p,y,_.sequenceNumber);_p(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){he(Gs,"Failed to raise snapshot:",i),await Sc(n,i)}}async function Sc(n,e,t){if(!ua(e))throw e;n.Ea.add(1),await Rl(n),n.Ra.set("Offline"),t||(t=()=>Sw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(Gs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Yc(n)}))}function Pw(n,e){return e().catch((t=>Sc(n,t,e)))}async function Qc(n){const e=Pe(n),t=os(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sp;for(;UA(e);)try{const o=await EA(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,BA(e,o)}catch(o){await Sc(e,o)}Rw(e)&&Nw(e)}function UA(n){return Xs(n)&&n.Ta.length<10}function BA(n,e){n.Ta.push(e);const t=os(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Rw(n){return Xs(n)&&!os(n).x_()&&n.Ta.length>0}function Nw(n){os(n).start()}async function zA(n){os(n).ra()}async function $A(n){const e=os(n);for(const t of n.Ta)e.ea(t.mutations)}async function WA(n,e,t){const i=n.Ta.shift(),o=hp.from(i,e,t);await Pw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Qc(n)}async function HA(n,e){e&&os(n).X_&&await(async function(i,o){if((function(h){return C1(h)&&h!==Y.ABORTED})(o.code)){const l=i.Ta.shift();os(i).B_(),await Pw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Qc(i)}})(n,e),Rw(n)&&Nw(n)}async function fv(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),he(Gs,"RemoteStore received new credentials");const i=Xs(t);t.Ea.add(3),await Rl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Yc(t)}async function qA(n,e){const t=Pe(n);e?(t.Ea.delete(2),await Yc(t)):e||(t.Ea.add(2),await Rl(t),t.Ra.set("Unknown"))}function ca(n){return n.ma||(n.ma=(function(t,i,o){const l=Pe(t);return l.sa(),new RA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:MA.bind(null,n),t_:LA.bind(null,n),r_:jA.bind(null,n),H_:FA.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Ep(n)?wp(n):n.Ra.set("Unknown")):(await n.ma.stop(),Dw(n))}))),n.ma}function os(n){return n.fa||(n.fa=(function(t,i,o){const l=Pe(t);return l.sa(),new NA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:zA.bind(null,n),r_:HA.bind(null,n),ta:$A.bind(null,n),na:WA.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Qc(n)):(await n.fa.stop(),n.Ta.length>0&&(he(Gs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new Tp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sp(n,e){if(di("AsyncQueue",`${e}: ${n}`),ua(n))return new ge(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{static emptySet(e){return new qo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=rl(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new qo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this.ga=new yt(Te.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ra{constructor(e,t,i,o,l,h,f,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new ra(e,t,qo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class KA{constructor(){this.queries=mv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Pe(t),l=o.queries;o.queries=mv(),l.forEach(((h,f)=>{for(const p of f.Sa)p.onError(i)}))})(this,new ge(Y.ABORTED,"Firestore shutting down"))}}function mv(){return new Qs((n=>J_(n)),$c)}async function xw(n,e){const t=Pe(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new GA,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Sp(h,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Ip(t)}async function bw(n,e){const t=Pe(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function YA(n,e){const t=Pe(n);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(i=!0);h.wa=o}}i&&Ip(t)}function QA(n,e,t){const i=Pe(n),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Ip(n){n.Ca.forEach((e=>{e.next()}))}var kf,gv;(gv=kf||(kf={})).Ma="default",gv.Cache="cache";class Ow{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ra(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.key=e}}class Mw{constructor(e){this.key=e}}class JA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=X_(e),this.tu=new qo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new pv,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const I=o.get(_),R=Wc(this.query,E)?E:null,L=!!I&&this.mutatedKeys.has(I.key),N=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let F=!1;I&&R?I.data.isEqual(R.data)?L!==N&&(i.track({type:3,doc:R}),F=!0):this.su(I,R)||(i.track({type:2,doc:R}),F=!0,(p&&this.eu(R,p)>0||y&&this.eu(R,y)<0)&&(f=!0)):!I&&R?(i.track({type:0,doc:R}),F=!0):I&&!R&&(i.track({type:1,doc:I}),F=!0,(p||y)&&(f=!0)),F&&(R?(h=h.add(R),l=N?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:h,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((_,E)=>(function(R,L){const N=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:F})}};return N(R)-N(L)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,h.length!==0||y?{snapshot:new ra(this.query,e.tu,l,h,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new Mw(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new Vw(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ra.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ap="SyncEngine";class XA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ZA{constructor(e){this.key=e,this.hu=!1}}class eC{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Qs((f=>J_(f)),$c),this.Iu=new Map,this.Eu=new Set,this.du=new yt(Te.comparator),this.Au=new Map,this.Ru=new pp,this.Vu={},this.mu=new Map,this.fu=na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tC(n,e,t=!0){const i=zw(n);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Lw(i,e,t,!0),o}async function nC(n,e){const t=zw(n);await Lw(t,e,!0,!1)}async function Lw(n,e,t,i){const o=await TA(n.localStore,br(e)),l=o.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await rC(n,e,l,h==="current",o.resumeToken)),n.isPrimaryClient&&t&&Cw(n.remoteStore,o),f}async function rC(n,e,t,i,o){n.pu=(E,I,R)=>(async function(N,F,q,ee){let oe=F.view.ru(q);oe.Cs&&(oe=await lv(N.localStore,F.query,!1).then((({documents:P})=>F.view.ru(P,oe))));const re=ee&&ee.targetChanges.get(F.targetId),Ne=ee&&ee.targetMismatches.get(F.targetId)!=null,ve=F.view.applyChanges(oe,N.isPrimaryClient,re,Ne);return vv(N,F.targetId,ve.au),ve.snapshot})(n,E,I,R);const l=await lv(n.localStore,e,!0),h=new JA(e,l.Qs),f=h.ru(l.documents),p=Pl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=h.applyChanges(f,n.isPrimaryClient,p);vv(n,t,y.au);const _=new XA(e,t,h);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function iC(n,e,t){const i=Pe(n),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!$c(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Af(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&vp(i.remoteStore,o.targetId),Df(i,o.targetId)})).catch(la)):(Df(i,o.targetId),await Af(i.localStore,o.targetId,!0))}async function sC(n,e){const t=Pe(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),vp(t.remoteStore,i.targetId))}async function oC(n,e,t){const i=fC(n);try{const o=await(function(h,f){const p=Pe(h),y=at.now(),_=f.reduce(((R,L)=>R.add(L.key)),ze());let E,I;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let L=fi(),N=ze();return p.Ns.getEntries(R,_).next((F=>{L=F,L.forEach(((q,ee)=>{ee.isValidDocument()||(N=N.add(q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,L))).next((F=>{E=F;const q=[];for(const ee of f){const oe=E1(ee,E.get(ee.key).overlayedDocument);oe!=null&&q.push(new Js(ee.key,oe,W_(oe.value.mapValue),ci.exists(!0)))}return p.mutationQueue.addMutationBatch(R,y,q,f)})).next((F=>{I=F;const q=F.applyToLocalDocumentSet(E,N);return p.documentOverlayCache.saveOverlays(R,F.batchId,q)}))})).then((()=>({batchId:I.batchId,changes:ew(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,p){let y=h.Vu[h.currentUser.toKey()];y||(y=new yt(Be)),y=y.insert(f,p),h.Vu[h.currentUser.toKey()]=y})(i,o.batchId,t),await Nl(i,o.changes),await Qc(i.remoteStore)}catch(o){const l=Sp(o,"Failed to persist write");t.reject(l)}}async function jw(n,e){const t=Pe(n);try{const i=await _A(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Qe(h.hu,14607):o.removedDocuments.size>0&&(Qe(h.hu,42227),h.hu=!1))})),await Nl(t,i,e)}catch(i){await la(i)}}function yv(n,e,t){const i=Pe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const p=Pe(h);p.onlineState=f;let y=!1;p.queries.forEach(((_,E)=>{for(const I of E.Sa)I.va(f)&&(y=!0)})),y&&Ip(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function aC(n,e,t){const i=Pe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new yt(Te.comparator);h=h.insert(l,rn.newNoDocument(l,ke.min()));const f=ze().add(l),p=new Gc(ke.min(),new Map,new yt(Be),h,f);await jw(i,p),i.du=i.du.remove(l),i.Au.delete(e),Cp(i)}else await Af(i.localStore,e,!1).then((()=>Df(i,e,t))).catch(la)}async function lC(n,e){const t=Pe(n),i=e.batch.batchId;try{const o=await vA(t.localStore,e);Uw(t,i,null),Fw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Nl(t,o)}catch(o){await la(o)}}async function uC(n,e,t){const i=Pe(n);try{const o=await(function(h,f){const p=Pe(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,f).next((E=>(Qe(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);Uw(i,e,t),Fw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Nl(i,o)}catch(o){await la(o)}}function Fw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Uw(n,e,t){const i=Pe(n);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Df(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Bw(n,i)}))}function Bw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(vp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Cp(n))}function vv(n,e,t){for(const i of t)i instanceof Vw?(n.Ru.addReference(i.key,e),cC(n,i)):i instanceof Mw?(he(Ap,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Bw(n,i.key)):Ie(19791,{wu:i})}function cC(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(he(Ap,"New document in limbo: "+t),n.Eu.add(i),Cp(n))}function Cp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(gt.fromString(e)),i=n.fu.next();n.Au.set(i,new ZA(t)),n.du=n.du.insert(t,i),Cw(n.remoteStore,new Yi(br(zc(t.path)),i,"TargetPurposeLimboResolution",jc.ce))}}async function Nl(n,e,t){const i=Pe(n),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,p)=>{h.push(i.pu(p,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=gp.As(p.targetId,y);l.push(E)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(p,y){const _=Pe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>G.forEach(y,(I=>G.forEach(I.Es,(R=>_.persistence.referenceDelegate.addReference(E,I.targetId,R))).next((()=>G.forEach(I.ds,(R=>_.persistence.referenceDelegate.removeReference(E,I.targetId,R)))))))))}catch(E){if(!ua(E))throw E;he(yp,"Failed to update sequence numbers: "+E)}for(const E of y){const I=E.targetId;if(!E.fromCache){const R=_.Ms.get(I),L=R.snapshotVersion,N=R.withLastLimboFreeSnapshotVersion(L);_.Ms=_.Ms.insert(I,N)}}})(i.localStore,l))}async function hC(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){he(Ap,"User change. New user:",e.toKey());const i=await Tw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new ge(Y.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Nl(t,i.Ls)}}function dC(n,e){const t=Pe(n),i=t.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let o=ze();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function zw(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aC.bind(null,e),e.Pu.H_=YA.bind(null,e.eventManager),e.Pu.yu=QA.bind(null,e.eventManager),e}function fC(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uC.bind(null,e),e}class Ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return yA(this.persistence,new pA,e.initialUser,this.serializer)}Cu(e){return new Ew(mp.mi,this.serializer)}Du(e){return new IA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ic.provider={build:()=>new Ic};class pC extends Ic{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof Tc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Z1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new Ew((i=>Tc.mi(i,t)),this.serializer)}}class Pf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hC.bind(null,this.syncEngine),await qA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KA})()}createDatastore(e){const t=Kc(e.databaseInfo.databaseId),i=(function(l){return new PA(l)})(e.databaseInfo);return(function(l,h,f,p){return new bA(l,h,f,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new VA(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>yv(this.syncEngine,t,0)),(function(){return hv.v()?new hv:new AA})())}createSyncEngine(e,t){return(function(o,l,h,f,p,y,_){const E=new eC(o,l,h,f,p,y);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Pe(o);he(Gs,"RemoteStore shutting down."),l.Ea.add(5),await Rl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Pf.provider={build:()=>new Pf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):di("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="FirestoreClient";class mC{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{he(as,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(he(as,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Sp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Gd(n,e){n.asyncQueue.verifyOperationInProgress(),he(as,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Tw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function _v(n,e){n.asyncQueue.verifyOperationInProgress();const t=await gC(n);he(as,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>fv(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>fv(e.remoteStore,o))),n._onlineComponents=e}async function gC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(as,"Using user provided OfflineComponentProvider");try{await Gd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Y.FAILED_PRECONDITION||o.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Xo("Error using user provided cache. Falling back to memory cache: "+t),await Gd(n,new Ic)}}else he(as,"Using default OfflineComponentProvider"),await Gd(n,new pC(void 0));return n._offlineComponents}async function Ww(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(as,"Using user provided OnlineComponentProvider"),await _v(n,n._uninitializedComponentsProvider._online)):(he(as,"Using default OnlineComponentProvider"),await _v(n,new Pf))),n._onlineComponents}function yC(n){return Ww(n).then((e=>e.syncEngine))}async function Rf(n){const e=await Ww(n),t=e.eventManager;return t.onListen=tC.bind(null,e.syncEngine),t.onUnlisten=iC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sC.bind(null,e.syncEngine),t}function vC(n,e,t={}){const i=new es;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,y){const _=new $w({next:I=>{_.Nu(),h.enqueueAndForget((()=>bw(l,E)));const R=I.docs.has(f);!R&&I.fromCache?y.reject(new ge(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&I.fromCache&&p&&p.source==="server"?y.reject(new ge(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),E=new Ow(zc(f.path),_,{includeMetadataChanges:!0,qa:!0});return xw(l,E)})(await Rf(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="firestore.googleapis.com",Ev=!0;class Tv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qw,this.ssl=Ev}else this.host=e.host,this.ssl=e.ssl??Ev;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ww;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<J1)throw new ge(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kp{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new SI;switch(i.type){case"firstParty":return new kI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=wv.get(t);i&&(he("ComponentProvider","Removing Datastore"),wv.delete(t),i.terminate())})(this),Promise.resolve()}}function _C(n,e,t,i={}){var y;n=ts(n,kp);const o=sa(e),l=n._getSettings(),h={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(v_(`https://${f}`),__("Firestore",!0)),l.host!==qw&&l.host!==f&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:o,emulatorOptions:i};if(!Ws(p,h)&&(n._setSettings(p),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=nn.MOCK_USER;else{_=QT(i.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new ge(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new nn(I)}n._authCredentials=new II(new b_(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Jc(this.firestore,e,this._query)}}class Vt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(kl(t,Vt._jsonSchema))return new Vt(e,i||null,new Te(gt.fromString(t.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Pt("string",Vt._jsonSchemaVersion),referencePath:Pt("string")};class wl extends Jc{constructor(e,t,i){super(e,t,zc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new Te(e))}withConverter(e){return new wl(this.firestore,e,this._path)}}function Za(n,e,...t){if(n=bn(n),arguments.length===1&&(e=rp.newId()),bI("doc","path",e),n instanceof kp){const i=gt.fromString(e,...t);return My(i),new Vt(n,null,new Te(i))}{if(!(n instanceof Vt||n instanceof wl))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(gt.fromString(e,...t));return My(i),new Vt(n.firestore,n instanceof wl?n.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="AsyncQueue";class Iv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Iw(this,"async_queue_retry"),this._c=()=>{const i=qd();i&&he(Sv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=qd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=qd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new es;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ua(e))throw e;he(Sv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,di("INTERNAL UNHANDLED ERROR: ",Av(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Tp.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ie(47125,{Pc:Av(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Av(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class El extends kp{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Iv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Iv(e),this._firestoreClient=void 0,await e}}}function wC(n,e){const t=typeof n=="object"?n:S_(),i=typeof n=="string"?n:mc,o=tp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=KT("firestore");l&&_C(o,...l)}return o}function Dp(n){if(n._terminated)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||EC(n),n._firestoreClient}function EC(n){var i,o,l;const e=n._freezeSettings(),t=(function(f,p,y,_){return new HI(f,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Hw(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new mC(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(Kt.fromBase64String(e))}catch(t){throw new ge(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kl(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Pt("string",Kn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vr._jsonSchemaVersion}}static fromJSON(e){if(kl(e,Vr._jsonSchema))return new Vr(e.latitude,e.longitude)}}Vr._jsonSchemaVersion="firestore/geoPoint/1.0",Vr._jsonSchema={type:Pt("string",Vr._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kl(e,Mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Mr(e.vectorValues);throw new ge(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mr._jsonSchemaVersion="firestore/vectorValue/1.0",Mr._jsonSchema={type:Pt("string",Mr._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=/^__.*__$/;class SC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Js(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dl(e,this.data,t,this.fieldTransforms)}}function Kw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class Rp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ac(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Kw(this.Ac)&&TC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class IC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Kc(e)}Cc(e,t,i,o=!1){return new Rp({Ac:e,methodName:t,Dc:i,path:qt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function AC(n){const e=n._freezeSettings(),t=Kc(n._databaseId);return new IC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CC(n,e,t,i,o,l={}){const h=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);Xw("Data must be an object, but it was:",h,i);const f=Qw(i,h);let p,y;if(l.merge)p=new ar(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const I=kC(e,E,t);if(!h.contains(I))throw new ge(Y.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);PC(_,I)||_.push(I)}p=new ar(_),y=h.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=h.fieldTransforms;return new SC(new Gn(f),p,y)}function Yw(n,e){if(Jw(n=bn(n)))return Xw("Unsupported field value:",e,n),Qw(n,e);if(n instanceof Gw)return(function(i,o){if(!Kw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let p=Yw(f,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=bn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return m1(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=at.fromDate(i);return{timestampValue:Ec(o.serializer,l)}}if(i instanceof at){const l=new at(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ec(o.serializer,l)}}if(i instanceof Vr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Kn)return{bytesValue:fw(o.serializer,i._byteString)};if(i instanceof Vt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:fp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Mr)return(function(h,f){return{mapValue:{fields:{[z_]:{stringValue:$_},[gc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return cp(f.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${ip(i)}`)})(n,e)}function Qw(n,e){const t={};return M_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ys(n,((i,o)=>{const l=Yw(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Jw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof at||n instanceof Vr||n instanceof Kn||n instanceof Vt||n instanceof Gw||n instanceof Mr)}function Xw(n,e,t){if(!Jw(t)||!O_(t)){const i=ip(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function kC(n,e,t){if((e=bn(e))instanceof Pp)return e._internalPath;if(typeof e=="string")return Zw(n,e);throw Ac("Field path arguments must be of type string or ",n,!1,void 0,t)}const DC=new RegExp("[~\\*/\\[\\]]");function Zw(n,e,t){if(e.search(DC)>=0)throw Ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pp(...e.split("."))._internalPath}catch{throw Ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ac(n,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${i}`),h&&(p+=` in document ${o}`),p+=")"),new ge(Y.INVALID_ARGUMENT,f+n+p)}function PC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class RC extends eE{data(){return super.data()}}function tE(n,e){return typeof e=="string"?Zw(n,e):e instanceof Pp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xC{convertValue(e,t="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ys(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[gc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>Tt(h.doubleValue)));return new Mr(t)}convertGeoPoint(e){return new Vr(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Uc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const t=rs(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=gt.fromString(e);Qe(_w(i),9688,{name:e});const o=new gl(i.get(1),i.get(3)),l=new Te(i.popFirst(5));return o.isEqual(t)||di(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class sl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bs extends eE{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(tE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Bs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bs._jsonSchema={type:Pt("string",Bs._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class ic extends Bs{data(e={}){return super.data(e)}}class Go{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new sl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new ic(this._firestore,this._userDataWriter,i.key,i,new sl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const p=new ic(o._firestore,o._userDataWriter,f.doc.key,f.doc,new sl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new ic(o._firestore,o._userDataWriter,f.doc.key,f.doc,new sl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),_=h.indexOf(f.doc.key)),{type:OC(f.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(n){n=ts(n,Vt);const e=ts(n.firestore,El);return vC(Dp(e),n._key).then((t=>rE(e,n,t)))}Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:Pt("string",Go._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class nE extends xC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}}function Dv(n,e,t){n=ts(n,Vt);const i=ts(n.firestore,El),o=bC(n.converter,e);return MC(i,[CC(AC(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ci.none())])}function VC(n,...e){var p,y,_;n=bn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Cv(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Cv(e[i])){const E=e[i];e[i]=(p=E.next)==null?void 0:p.bind(E),e[i+1]=(y=E.error)==null?void 0:y.bind(E),e[i+2]=(_=E.complete)==null?void 0:_.bind(E)}let l,h,f;if(n instanceof Vt)h=ts(n.firestore,El),f=zc(n._key.path),l={next:E=>{e[i]&&e[i](rE(h,n,E))},error:e[i+1],complete:e[i+2]};else{const E=ts(n,Jc);h=ts(E.firestore,El),f=E._query;const I=new nE(h);l={next:R=>{e[i]&&e[i](new Go(h,I,E,R))},error:e[i+1],complete:e[i+2]},NC(n._query)}return(function(I,R,L,N){const F=new $w(N),q=new Ow(R,F,L);return I.asyncQueue.enqueueAndForget((async()=>xw(await Rf(I),q))),()=>{F.Nu(),I.asyncQueue.enqueueAndForget((async()=>bw(await Rf(I),q)))}})(Dp(h),f,o,l)}function MC(n,e){return(function(i,o){const l=new es;return i.asyncQueue.enqueueAndForget((async()=>oC(await yC(i),o,l))),l.promise})(Dp(n),e)}function rE(n,e,t){const i=t.docs.get(e._key),o=new nE(n);return new Bs(n,o,e._key,i,new sl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){aa=o})(oa),Jo(new Hs("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new El(new AI(i.getProvider("auth-internal")),new DI(h,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ge(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(y.options.projectId,_)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Xi(xy,by,e),Xi(xy,by,"esm2020")})();var LC="firebase",jC="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(LC,jC,"app");function iE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FC=iE,sE=new Al("auth","Firebase",iE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Zf("@firebase/auth");function UC(n,...e){Cc.logLevel<=Ue.WARN&&Cc.warn(`Auth (${oa}): ${n}`,...e)}function sc(n,...e){Cc.logLevel<=Ue.ERROR&&Cc.error(`Auth (${oa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(n,...e){throw xp(n,...e)}function ur(n,...e){return xp(n,...e)}function Np(n,e,t){const i={...FC(),[e]:t};return new Al("auth","Firebase",i).create(e,{appName:n.name})}function zs(n){return Np(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BC(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ur(n,"argument-error"),Np(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return sE.create(n,...e)}function Ce(n,e,...t){if(!n)throw xp(e,...t)}function li(n){const e="INTERNAL ASSERTION FAILED: "+n;throw sc(e),new Error(e)}function pi(n,e){n||li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function zC(){return Pv()==="http:"||Pv()==="https:"}function Pv(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zC()||nS()||"connection"in navigator)?navigator.onLine:!0}function WC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,t){this.shortDelay=e,this.longDelay=t,pi(t>e,"Short delay should be less than long delay!"),this.isMobile=ZT()||rS()}get(){return $C()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(n,e){pi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GC=new xl(3e4,6e4);function Op(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ha(n,e,t,i,o={}){return aE(n,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=Cl({key:n.config.apiKey,...h}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:p,...l};return tS()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&sa(n.emulatorConfig.host)&&(y.credentials="include"),oE.fetch()(await lE(n,n.config.apiHost,t,f),y)})}async function aE(n,e,t){n._canInitEmulator=!1;const i={...HC,...e};try{const o=new YC(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Gu(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gu(n,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Gu(n,"email-already-in-use",h);if(p==="USER_DISABLED")throw Gu(n,"user-disabled",h);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Np(n,_,y);Ur(n,_)}}catch(o){if(o instanceof mi)throw o;Ur(n,"network-request-failed",{message:String(o)})}}async function KC(n,e,t,i,o={}){const l=await ha(n,e,t,i,o);return"mfaPendingCredential"in l&&Ur(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function lE(n,e,t,i){const o=`${e}${t}?${i}`,l=n,h=l.config.emulator?bp(n.config,o):`${n.config.apiScheme}://${o}`;return qC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class YC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ur(this.auth,"network-request-failed")),GC.get())})}}function Gu(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ur(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(n,e){return ha(n,"POST","/v1/accounts:delete",e)}async function kc(n,e){return ha(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JC(n,e=!1){const t=bn(n),i=await t.getIdToken(e),o=Vp(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:dl(Kd(o.auth_time)),issuedAtTime:dl(Kd(o.iat)),expirationTime:dl(Kd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Kd(n){return Number(n)*1e3}function Vp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return sc("JWT malformed, contained fewer than 3 sections"),null;try{const o=p_(t);return o?JSON.parse(o):(sc("Failed to decode base64 JWT payload"),null)}catch(o){return sc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Rv(n){const e=Vp(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof mi&&XC(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function XC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dl(this.lastLoginAt),this.creationTime=dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(n){var E;const e=n.auth,t=await n.getIdToken(),i=await Tl(n,kc(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?uE(o.providerUserInfo):[],h=tk(n.providerData,l),f=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),y=f?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new xf(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,_)}async function ek(n){const e=bn(n);await Dc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tk(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function uE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(n,e){const t=await aE(n,{},async()=>{const i=Cl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,h=await lE(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return n.emulatorConfig&&sa(n.emulatorConfig.host)&&(p.credentials="include"),oE.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function rk(n,e){return ha(n,"POST","/v2/accounts:revokeToken",Op(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=Rv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await nk(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Ko;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ce(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class lr{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new ZC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Tl(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return JC(this,e)}reload(){return ek(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new lr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Dc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(zs(this.auth));const e=await this.getIdToken();return await Tl(this,QC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:I,isAnonymous:R,providerData:L,stsTokenManager:N}=t;Ce(E&&N,e,"internal-error");const F=Ko.fromJSON(this.name,N);Ce(typeof E=="string",e,"internal-error"),Hi(i,e.name),Hi(o,e.name),Ce(typeof I=="boolean",e,"internal-error"),Ce(typeof R=="boolean",e,"internal-error"),Hi(l,e.name),Hi(h,e.name),Hi(f,e.name),Hi(p,e.name),Hi(y,e.name),Hi(_,e.name);const q=new lr({uid:E,auth:e,email:o,emailVerified:I,displayName:i,isAnonymous:R,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:F,createdAt:y,lastLoginAt:_});return L&&Array.isArray(L)&&(q.providerData=L.map(ee=>({...ee}))),p&&(q._redirectEventId=p),q}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ko;o.updateFromServerResponse(t);const l=new lr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Dc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?uE(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Ko;f.updateFromIdToken(i);const p=new lr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new xf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;function ui(n){pi(n instanceof Function,"Expected a class definition");let e=Nv.get(n);return e?(pi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Nv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}cE.type="NONE";const xv=cE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(n,e,t){return`firebase:${n}:${e}:${t}`}class Yo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=oc(this.userKey,o.apiKey,l),this.fullPersistenceKey=oc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await kc(this.auth,{idToken:e}).catch(()=>{});return t?lr._fromGetAccountInfoResponse(this.auth,t,e):null}return lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Yo(ui(xv),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||ui(xv);const h=oc(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const _=await y._get(h);if(_){let E;if(typeof _=="string"){const I=await kc(e,{idToken:_}).catch(()=>{});if(!I)break;E=await lr._fromGetAccountInfoResponse(e,I,_)}else E=lr._fromJSON(e,_);y!==l&&(f=E),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Yo(l,e,i):(l=p[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Yo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gE(e))return"Blackberry";if(yE(e))return"Webos";if(dE(e))return"Safari";if((e.includes("chrome/")||fE(e))&&!e.includes("edge/"))return"Chrome";if(mE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function hE(n=sn()){return/firefox\//i.test(n)}function dE(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fE(n=sn()){return/crios\//i.test(n)}function pE(n=sn()){return/iemobile/i.test(n)}function mE(n=sn()){return/android/i.test(n)}function gE(n=sn()){return/blackberry/i.test(n)}function yE(n=sn()){return/webos/i.test(n)}function Mp(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ik(n=sn()){var e;return Mp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function sk(){return iS()&&document.documentMode===10}function vE(n=sn()){return Mp(n)||mE(n)||yE(n)||gE(n)||/windows phone/i.test(n)||pE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(n,e=[]){let t;switch(n){case"Browser":t=bv(sn());break;case"Worker":t=`${bv(sn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${oa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const p=e(l);h(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(n,e={}){return ha(n,"GET","/v2/passwordPolicy",Op(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=6;class uk{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??lk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ov(this),this.idTokenSubscription=new Ov(this),this.beforeStateQueue=new ok(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ui(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Yo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await kc(this,{idToken:e}),i=await lr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(or(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===f)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(zs(this));const t=e?bn(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ak(this),t=new uk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Al("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await rk(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ui(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Yo.create(this,[ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_E(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&UC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xc(n){return bn(n)}class Ov{constructor(e){this.auth=e,this.observer=null,this.addObserver=dS(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hk(n){Lp=n}function dk(n){return Lp.loadJS(n)}function fk(){return Lp.gapiScript}function pk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(n,e){const t=tp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ws(l,e??{}))return o;Ur(o,"already-initialized")}return t.initialize({options:e})}function gk(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ui);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function yk(n,e,t){const i=Xc(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=wE(e),{host:h,port:f}=vk(e),p=f===null?"":`:${f}`,y={url:`${l}//${h}${p}/`},_=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(Ws(y,i.config.emulator)&&Ws(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,sa(h)?(v_(`${l}//${h}${p}`),__("Auth",!0)):_k()}function wE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function vk(n){const e=wE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Vv(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Vv(h)}}}function Vv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function _k(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return li("not implemented")}_getIdTokenResponse(e){return li("not implemented")}_linkToIdToken(e,t){return li("not implemented")}_getReauthenticationResolver(e){return li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(n,e){return KC(n,"POST","/v1/accounts:signInWithIdp",Op(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="http://localhost";class Ks extends EE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new Ks(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Qo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Qo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qo(e,t)}buildRequest(){const e={requestUri:wk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends jp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends bl{constructor(){super("facebook.com")}static credential(e){return Ks._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ks._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ai.credential(t,i)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends bl{constructor(){super("github.com")}static credential(e){return Ks._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gi.credential(e.oauthAccessToken)}catch{return null}}}Gi.GITHUB_SIGN_IN_METHOD="github.com";Gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends bl{constructor(){super("twitter.com")}static credential(e,t){return Ks._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ki.credential(t,i)}catch{return null}}}Ki.TWITTER_SIGN_IN_METHOD="twitter.com";Ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await lr._fromIdTokenResponse(e,i,o),h=Mv(i);return new ia({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Mv(i);return new ia({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Mv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends mi{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Pc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Pc(e,t,i,o)}}function TE(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Pc._fromErrorAndOperation(n,l,e,i):l})}async function Ek(n,e,t=!1){const i=await Tl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ia._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(n,e,t=!1){const{auth:i}=n;if(or(i.app))return Promise.reject(zs(i));const o="reauthenticate";try{const l=await Tl(n,TE(i,o,e,n),t);Ce(l.idToken,i,"internal-error");const h=Vp(l.idToken);Ce(h,i,"internal-error");const{sub:f}=h;return Ce(n.uid===f,i,"user-mismatch"),ia._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ur(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(n,e,t=!1){if(or(n.app))return Promise.reject(zs(n));const i="signIn",o=await TE(n,i,e),l=await ia._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}function Ik(n,e,t,i){return bn(n).onIdTokenChanged(e,t,i)}function Ak(n,e,t){return bn(n).beforeAuthStateChanged(e,t)}function Ck(n,e,t,i){return bn(n).onAuthStateChanged(e,t,i)}function kk(n){return bn(n).signOut()}const Rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rc,"1"),this.storage.removeItem(Rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=1e3,Pk=10;class IE extends SE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,p)=>{this.notifyListeners(h,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);sk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Pk):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Dk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}IE.type="LOCAL";const Rk=IE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE extends SE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}AE.type="SESSION";const CE=AE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Zc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),p=await Nk(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,p)=>{const y=Fp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(E){const I=E;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function bk(n){Lr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function Ok(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Vk(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Mk(){return kE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="firebaseLocalStorageDb",Lk=1,Nc="firebaseLocalStorage",PE="fbase_key";class Ol{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function eh(n,e){return n.transaction([Nc],e?"readwrite":"readonly").objectStore(Nc)}function jk(){const n=indexedDB.deleteDatabase(DE);return new Ol(n).toPromise()}function bf(){const n=indexedDB.open(DE,Lk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Nc,{keyPath:PE})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Nc)?e(i):(i.close(),await jk(),e(await bf()))})})}async function Lv(n,e,t){const i=eh(n,!0).put({[PE]:e,value:t});return new Ol(i).toPromise()}async function Fk(n,e){const t=eh(n,!1).get(e),i=await new Ol(t).toPromise();return i===void 0?null:i.value}function jv(n,e){const t=eh(n,!0).delete(e);return new Ol(t).toPromise()}const Uk=800,Bk=3;class RE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Bk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zc._getInstance(Mk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Ok(),!this.activeServiceWorker)return;this.sender=new xk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Vk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bf();return await Lv(e,Rc,"1"),await jv(e,Rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Lv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Fk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>jv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=eh(o,!1).getAll();return new Ol(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Uk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RE.type="LOCAL";const zk=RE;new xl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(n,e){return e?ui(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up extends EE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $k(n){return Sk(n.auth,new Up(n),n.bypassAuthState)}function Wk(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),Tk(t,new Up(n),n.bypassAuthState)}async function Hk(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),Ek(t,new Up(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $k;case"linkViaPopup":case"linkViaRedirect":return Hk;case"reauthViaPopup":case"reauthViaRedirect":return Wk;default:Ur(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=new xl(2e3,1e4);async function Gk(n,e,t){if(or(n.app))return Promise.reject(ur(n,"operation-not-supported-in-this-environment"));const i=Xc(n);BC(n,e,jp);const o=NE(i,t);return new Fs(i,"signInViaPopup",e,o).executeNotNull()}class Fs extends xE{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=Fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qk.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="pendingRedirect",ac=new Map;class Yk extends xE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ac.get(this.auth._key());if(!e){try{const i=await Qk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ac.set(this.auth._key(),e)}return this.bypassAuthState||ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Qk(n,e){const t=Zk(e),i=Xk(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Jk(n,e){ac.set(n._key(),e)}function Xk(n){return ui(n._redirectPersistence)}function Zk(n){return oc(Kk,n.config.apiKey,n.name)}async function eD(n,e,t=!1){if(or(n.app))return Promise.reject(zs(n));const i=Xc(n),o=NE(i,e),h=await new Yk(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=600*1e3;class nD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!bE(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(ur(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fv(e))}saveEventToCache(e){this.cachedEventUids.add(Fv(e)),this.lastProcessedEventTime=Date.now()}}function Fv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function bE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(n,e={}){return ha(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oD=/^https?/;async function aD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await iD(n);for(const t of e)try{if(lD(t))return}catch{}Ur(n,"unauthorized-domain")}function lD(n){const e=Nf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!oD.test(t))return!1;if(sD.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=new xl(3e4,6e4);function Uv(){const n=Lr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cD(n){return new Promise((e,t)=>{var o,l,h;function i(){Uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uv(),t(ur(n,"network-request-failed"))},timeout:uD.get()})}if((l=(o=Lr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=Lr().gapi)!=null&&h.load)i();else{const f=pk("iframefcb");return Lr()[f]=()=>{gapi.load?i():t(ur(n,"network-request-failed"))},dk(`${fk()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw lc=null,e})}let lc=null;function hD(n){return lc=lc||cD(n),lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=new xl(5e3,15e3),fD="__/auth/iframe",pD="emulator/auth/iframe",mD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yD(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?bp(e,pD):`https://${n.config.authDomain}/${fD}`,i={apiKey:e.apiKey,appName:n.name,v:oa},o=gD.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Cl(i).slice(1)}`}async function vD(n){const e=await hD(n),t=Lr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:yD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mD,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=ur(n,"network-request-failed"),f=Lr().setTimeout(()=>{l(h)},dD.get());function p(){Lr().clearTimeout(f),o(i)}i.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wD=500,ED=600,TD="_blank",SD="http://localhost";class Bv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ID(n,e,t,i=wD,o=ED){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={..._D,width:i.toString(),height:o.toString(),top:l,left:h},y=sn().toLowerCase();t&&(f=fE(y)?TD:t),hE(y)&&(e=e||SD,p.scrollbars="yes");const _=Object.entries(p).reduce((I,[R,L])=>`${I}${R}=${L},`,"");if(ik(y)&&f!=="_self")return AD(e||"",f),new Bv(null);const E=window.open(e||"",f,_);Ce(E,n,"popup-blocked");try{E.focus()}catch{}return new Bv(E)}function AD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD="__/auth/handler",kD="emulator/auth/handler",DD=encodeURIComponent("fac");async function zv(n,e,t,i,o,l){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:oa,eventId:o};if(e instanceof jp){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",hS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))h[_]=E}if(e instanceof bl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(h.scopes=_.join(","))}n.tenantId&&(h.tid=n.tenantId);const f=h;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const p=await n._getAppCheckToken(),y=p?`#${DD}=${encodeURIComponent(p)}`:"";return`${PD(n)}?${Cl(f).slice(1)}${y}`}function PD({config:n}){return n.emulator?bp(n,kD):`https://${n.authDomain}/${CD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="webStorageSupport";class RD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CE,this._completeRedirectFn=eD,this._overrideRedirectResult=Jk}async _openPopup(e,t,i,o){var h;pi((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await zv(e,t,i,Nf(),o);return ID(e,l,Fp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await zv(e,t,i,Nf(),o);return bk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(pi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await vD(e),i=new nD(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yd,{type:Yd},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Yd];l!==void 0&&t(!!l),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vE()||dE()||Mp()}}const ND=RD;var $v="@firebase/auth",Wv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OD(n){Jo(new Hs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;Ce(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:h,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_E(n)},y=new ck(i,o,l,p);return gk(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Jo(new Hs("auth-internal",e=>{const t=Xc(e.getProvider("auth").getImmediate());return(i=>new xD(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi($v,Wv,bD(n)),Xi($v,Wv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=300,MD=y_("authIdTokenMaxAge")||VD;let Hv=null;const LD=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>MD)return;const o=t==null?void 0:t.token;Hv!==o&&(Hv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function jD(n=S_()){const e=tp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=mk(n,{popupRedirectResolver:ND,persistence:[zk,Rk,CE]}),i=y_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=LD(l.toString());Ak(t,h,()=>h(t.currentUser)),Ik(t,f=>h(f))}}const o=m_("auth");return o&&yk(t,`http://${o}`),t}function FD(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}hk({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=ur("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",FD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OD("Browser");const mt=(n,e)=>{{const t=e instanceof Error?e.message:String(e);console.error(`${n}: ${t}`)}},uc={apiKey:"AIzaSyCXxatUkVDpVnR0BKkZTNlB_G_3agOfoY0",authDomain:"jpl-vacation-forecast.firebaseapp.com",projectId:"jpl-vacation-forecast",storageBucket:"jpl-vacation-forecast.firebasestorage.app",messagingSenderId:"732269508238",appId:"1:732269508238:web:464689fab6d9d91aeefbdf"};let el=null,xc=null,bc=null;const OE=()=>!!(uc.apiKey&&uc.authDomain&&uc.projectId),VE=()=>{if(!OE())return{app:null,auth:null,db:null};try{return el||(el=T_(uc),xc=jD(el),bc=wC(el)),{app:el,auth:xc,db:bc}}catch(n){return mt("Failed to initialize Firebase",n),{app:null,auth:null,db:null}}},Qd=()=>{if(!xc){const{auth:n}=VE();return n}return xc},tl=()=>{if(!bc){const{db:n}=VE();return n}return bc};class UD{constructor(){Lo(this,"mode","localStorage");Lo(this,"userId",null);Lo(this,"listeners",new Map);Lo(this,"unsubscribers",new Map);Lo(this,"validators",new Map)}registerValidator(e,t){this.validators.set(e,t)}getMode(){return this.mode}setMode(e,t){const i=this.mode==="cloud-sync";this.mode=e,this.userId=t||null,i&&e==="localStorage"&&this.cleanupFirebaseListeners()}async get(e,t){const i=this.validators.get(e);try{const o=window.localStorage.getItem(e);if(o){const l=JSON.parse(o);return i&&!i(l)?(mt(`Validation failed for ${e} from localStorage`,{value:l}),t):l}}catch(o){mt(`Error reading ${e} from localStorage`,o)}if(this.mode==="cloud-sync"&&this.userId)try{const o=tl();if(o){const l=Za(o,"users",this.userId,"data",e),h=await kv(l);if(h.exists()){const f=h.data().value;return i&&!i(f)?(mt(`Validation failed for ${e} from Firebase`,{value:f}),t):f}}}catch(o){mt(`Error reading ${e} from Firebase`,o)}return t}async set(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(i){mt(`Error writing ${e} to localStorage`,i)}if(this.mode==="cloud-sync"&&this.userId)try{const i=tl();if(i){const o=Za(i,"users",this.userId,"data",e);await Dv(o,{value:t,updatedAt:new Date().toISOString()})}}catch(i){mt(`Error writing ${e} to Firebase`,i)}this.notifyListeners(e,t)}subscribe(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),this.mode==="cloud-sync"&&this.userId&&!this.unsubscribers.has(e)&&this.setupFirebaseListener(e),()=>{const i=this.listeners.get(e);if(i&&(i.delete(t),i.size===0)){this.listeners.delete(e);const o=this.unsubscribers.get(e);o&&(o(),this.unsubscribers.delete(e))}}}async syncToCloud(e){if(this.mode!=="cloud-sync"||!this.userId)throw new Error("Cloud sync not enabled");const t=tl();if(!t)throw new Error("Firebase not configured");for(const i of e)try{const o=window.localStorage.getItem(i);if(o){const l=JSON.parse(o),h=Za(t,"users",this.userId,"data",i);await Dv(h,{value:l,updatedAt:new Date().toISOString()})}}catch(o){mt(`Error syncing ${i} to Firebase`,o)}}async syncFromCloud(e){if(this.mode!=="cloud-sync"||!this.userId)throw new Error("Cloud sync not enabled");const t=tl();if(!t)throw new Error("Firebase not configured");for(const i of e)try{const o=Za(t,"users",this.userId,"data",i),l=await kv(o);if(l.exists()){const f=l.data().value,p=this.validators.get(i);if(p&&!p(f)){mt(`Validation failed for ${i} during initial sync`,{value:f});continue}window.localStorage.setItem(i,JSON.stringify(f)),this.notifyListeners(i,f)}}catch(o){mt(`Error loading ${i} from Firebase`,o)}}setupFirebaseListener(e){if(!this.userId)return;const t=tl();if(t)try{const i=Za(t,"users",this.userId,"data",e),o=VC(i,l=>{if(l.exists()){const f=l.data().value,p=this.validators.get(e);if(p&&!p(f)){mt(`Validation failed for incoming cloud sync data for ${e}`,{value:f});return}window.localStorage.setItem(e,JSON.stringify(f)),this.notifyListeners(e,f)}},l=>{mt(`Firebase listener error for ${e}`,l)});this.unsubscribers.set(e,o)}catch(i){mt(`Error setting up Firebase listener for ${e}`,i)}}notifyListeners(e,t){const i=this.listeners.get(e);i&&i.forEach(o=>{try{o(t)}catch(l){mt("Error in storage listener",l)}})}cleanupFirebaseListeners(){this.unsubscribers.forEach(e=>e()),this.unsubscribers.clear()}}const sr=new UD;function Jd(n,e,t){const[i,o]=se.useState(()=>{t&&sr.registerValidator(n,t);try{const h=window.localStorage.getItem(n);if(h){const f=JSON.parse(h);return t&&!t(f)?(mt(`Validation failed for ${n} in localStorage`,{value:f}),e):f}return e}catch(h){return mt(`Error loading ${n} from localStorage`,h),e}});return se.useEffect(()=>sr.subscribe(n,f=>{if(t&&!t(f)){mt(`Validation failed for update to ${n}`,{value:f});return}o(f)}),[n,t]),[i,h=>{try{const f=h instanceof Function?h(i):h;o(f),sr.set(n,f).catch(p=>{mt(`Error saving ${n}`,p)})}catch(f){mt(`Error saving ${n}`,f)}}]}const BD=n=>!(!n||typeof n!="object"||typeof n.startDate!="string"||typeof n.currentBalance!="number"||typeof n.balanceAsOfDate!="string"||!n.workSchedule||typeof n.workSchedule!="object"||!["5/40","9/80"].includes(n.workSchedule.type)||n.personalDayUsedInStartYear!==void 0&&typeof n.personalDayUsedInStartYear!="boolean"),zD=n=>!(!n||typeof n!="object"||typeof n.id!="string"||typeof n.startDate!="string"||typeof n.endDate!="string"||n.description!==void 0&&typeof n.description!="string"||n.personalDayUsed!==void 0&&typeof n.personalDayUsed!="boolean"),$D=n=>Array.isArray(n)?n.every(zD):!1,WD=n=>!(!n||typeof n!="object"||typeof n.name!="string"||typeof n.date!="string"||typeof n.hours!="number"),HD=n=>Array.isArray(n)?n.every(WD):!1,qD=n=>n===null||BD(n),GD=()=>{const[n,e]=Jd("jpl-vacation-user-profile",null,qD),[t,i]=Jd("jpl-vacation-planned-vacations",[],$D),[o,l]=Jd("jpl-vacation-holidays",[],HD);se.useEffect(()=>{n&&n.workSchedule.type==="9/80"&&n.workSchedule.rdoPattern==="even-fridays"&&e({...n,workSchedule:{...n.workSchedule,rdoPattern:"odd-fridays"}})},[n,e]);const h=se.useMemo(()=>{if(!n){const N=new Date;return{startDate:new Date(N.getFullYear(),0,1),endDate:new Date(N.getFullYear()+1,11,31)}}const R=je(n.balanceAsOfDate),L=new Date(R.getFullYear()+10,11,31);return{startDate:R,endDate:L}},[n]),f=se.useMemo(()=>n?jT(n,h.startDate,h.endDate,t,o):[],[n,h,t,o]),p=se.useMemo(()=>{if(f.length===0)return[];const R=new Date().getFullYear();return[_y(f,R),_y(f,R+1)]},[f]);return{userProfile:n,setUserProfile:e,plannedVacations:t,addPlannedVacation:R=>{const L={...R,id:crypto.randomUUID()};i([...t,L])},updatePlannedVacation:(R,L)=>{i(t.map(N=>N.id===R?{...N,...L}:N))},deletePlannedVacation:R=>{i(t.filter(L=>L.id!==R))},holidays:o,setHolidays:l,weeklyBalances:f,annualSummaries:p,forecastPeriod:h,canAffordVacation:(R,L)=>{if(!n)return{canAfford:!1,projectedBalance:0};const N=je(R.endDate),F=L?t.filter(ee=>ee.id!==L):t,q=FT(n,N,[...F,{...R,id:R.id||"temp"}],o);return{canAfford:q>=0,projectedBalance:q}}}},KD="1.3",YD={2025:[{name:"Christmas",date:"2025-12-25",type:"federal"},{name:"JPL Floating",date:"2025-12-24",type:"jpl"},{name:"JPL Floating",date:"2025-12-23",type:"jpl",scheduleFilter:"9/80-only"},{name:"JPL Floating",date:"2025-12-26",type:"jpl",scheduleFilter:"5/40-only"}],2026:[{name:"New Year's Day",date:"2026-01-01",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2026-01-19",type:"federal"},{name:"Presidents' Day",date:"2026-02-16",type:"federal"},{name:"Memorial Day",date:"2026-05-25",type:"federal"},{name:"Juneteenth",date:"2026-06-19",type:"federal"},{name:"Independence Day",date:"2026-07-03",type:"federal",notes:"Observed"},{name:"Labor Day",date:"2026-09-07",type:"federal"},{name:"Thanksgiving",date:"2026-11-26",type:"federal"},{name:"Day After Thanksgiving (Observed)",date:"2026-11-25",type:"federal",scheduleFilter:"9/80-only"},{name:"Day After Thanksgiving",date:"2026-11-27",type:"federal",scheduleFilter:"5/40-only"},{name:"Christmas (Observed)",date:"2026-12-24",type:"federal",scheduleFilter:"9/80-only"},{name:"Christmas",date:"2026-12-25",type:"federal",scheduleFilter:"5/40-only"},{name:"JPL Floating",date:"2026-01-02",type:"jpl"},{name:"JPL Floating",date:"2026-12-28",type:"jpl"}],2027:[{name:"New Year's Day",date:"2027-01-01",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2027-01-18",type:"federal"},{name:"Presidents' Day",date:"2027-02-15",type:"federal"},{name:"Memorial Day",date:"2027-05-31",type:"federal"},{name:"Juneteenth",date:"2027-06-18",type:"federal"},{name:"Independence Day (Observed)",date:"2027-07-05",type:"federal",notes:"Observed"},{name:"Labor Day",date:"2027-09-06",type:"federal"},{name:"Thanksgiving",date:"2027-11-25",type:"federal"},{name:"Day After Thanksgiving (Observed)",date:"2027-11-24",type:"federal",scheduleFilter:"9/80-only"},{name:"Day After Thanksgiving",date:"2027-11-26",type:"federal",scheduleFilter:"5/40-only"},{name:"Christmas (Observed)",date:"2027-12-23",type:"federal",scheduleFilter:"9/80-only"},{name:"Christmas (Observed)",date:"2027-12-24",type:"federal",scheduleFilter:"5/40-only"},{name:"JPL Floating",date:"2027-12-22",type:"jpl"},{name:"JPL Floating",date:"2027-12-21",type:"jpl",scheduleFilter:"9/80-only"},{name:"JPL Floating",date:"2027-12-23",type:"jpl",scheduleFilter:"5/40-only"}],2028:[{name:"New Year's Day (Observed)",date:"2027-12-31",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2028-01-17",type:"federal"},{name:"Presidents' Day",date:"2028-02-21",type:"federal"},{name:"Memorial Day",date:"2028-05-29",type:"federal"},{name:"Juneteenth",date:"2028-06-19",type:"federal"},{name:"Independence Day",date:"2028-07-04",type:"federal",notes:"Observed"},{name:"Labor Day",date:"2028-09-04",type:"federal"},{name:"Thanksgiving (Observed)",date:"2028-11-24",type:"federal",scheduleFilter:"5/40-only"},{name:"Thanksgiving (Observed)",date:"2028-11-23",type:"federal",scheduleFilter:"9/80-only"},{name:"Day After Thanksgiving (Observed)",date:"2028-11-22",type:"federal",scheduleFilter:"9/80-only"},{name:"Day After Thanksgiving (Observed)",date:"2028-11-2",type:"federal",scheduleFilter:"5/40-only"},{name:"Christmas",date:"2028-12-25",type:"federal"},{name:"JPL Floating",date:"2028-07-03",type:"jpl"},{name:"JPL Floating",date:"2028-12-26",type:"jpl"}]},ME={version:KD,holidays:YD},QD=(n,e,t)=>{const i=[];for(let o=n;o<=e;o++){const l=o.toString(),h=ME.holidays[l];h&&i.push(...h.filter(f=>!f.scheduleFilter||f.scheduleFilter==="All"||!t?!0:t==="5/40"?f.scheduleFilter!=="9/80-only":t==="9/80"?f.scheduleFilter!=="5/40-only":!0).map(f=>({name:f.name,date:f.date})))}return i},JD=(n,e,t)=>({defaultHolidays:se.useMemo(()=>{if(!n)return[];const o=new Date,l=e||o,h=t||new Date(o.getFullYear()+10,11,31),f=l.getFullYear(),p=h.getFullYear();return QD(f,p,n.type).map(_=>({..._,hours:Jf(je(_.date),n)}))},[n,e,t])}),Xd=["jpl-vacation-user-profile","jpl-vacation-planned-vacations","theme","jpl-vacation-calendar-view-mode"];function th(){const[n,e]=se.useState(null),[t,i]=se.useState(!0),[o,l]=se.useState(null),[h]=se.useState(OE()),[f,p]=se.useState(!1);return se.useEffect(()=>{if(!h){i(!1);return}const E=Qd();if(!E){i(!1);return}const I=Ck(E,async R=>{if(e(R),i(!1),R){sr.setMode("cloud-sync",R.uid);try{await sr.syncFromCloud(Xd)}catch{try{await sr.syncToCloud(Xd)}catch(N){mt("Error syncing to cloud",N)}}finally{p(!0)}}else sr.setMode("localStorage"),p(!0)});return()=>I()},[h]),{user:n,loading:t,error:o,isFirebaseAvailable:h,initialSyncComplete:f,signInWithGoogle:async()=>{if(!h){l("Firebase is not configured. Cloud sync is not available.");return}l(null),i(!0);try{const E=Qd();if(!E)throw new Error("Firebase auth not initialized");const I=new ai,R=await Gk(E,I);sr.setMode("cloud-sync",R.user.uid),await sr.syncToCloud(Xd),e(R.user)}catch(E){mt("Sign in error",E),l(E.message||"Failed to sign in"),sr.setMode("localStorage")}finally{i(!1)}},signOut:async()=>{if(h){l(null),i(!0);try{const E=Qd();if(!E)throw new Error("Firebase auth not initialized");await kk(E),sr.setMode("localStorage"),e(null)}catch(E){mt("Sign out error",E),l(E.message||"Failed to sign out")}finally{i(!1)}}}}}const qv=({onSubmit:n,onBack:e})=>{const[t,i]=se.useState(""),[o,l]=se.useState(""),[h,f]=se.useState(""),[p,y]=se.useState("5/40"),[_,E]=se.useState(!1),R=h&&!(N=>{if(!N)return!0;try{return je(N).getDay()===0}catch{return!0}})(h),L=N=>{N.preventDefault();const F={startDate:t,currentBalance:parseFloat(o),balanceAsOfDate:h,workSchedule:{type:p,rdoPattern:p==="9/80"?"odd-fridays":void 0},personalDayUsedInStartYear:_};n(F)};return T.jsxs("div",{className:"user-input-form-container",children:[e&&T.jsx("button",{onClick:e,className:"back-button",type:"button",children:" Back"}),T.jsx("h2",{children:"Welcome to JPL Vacation Forecast"}),T.jsx("p",{children:"Let's set up your vacation tracking profile"}),T.jsxs("form",{onSubmit:L,className:"user-input-form",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"startDate",children:"JPL Start Date"}),T.jsx("input",{type:"date",id:"startDate",value:t,onChange:N=>i(N.target.value),required:!0,autoFocus:!0,"aria-describedby":"startDate-help"}),T.jsx("small",{id:"startDate-help",children:"This determines your vacation accrual rate"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"currentBalance",children:"Current Vacation Balance (hours)"}),T.jsx("input",{type:"number",id:"currentBalance",value:o,onChange:N=>l(N.target.value),min:"0",step:"0.01",required:!0,"aria-describedby":"currentBalance-help"}),T.jsx("small",{id:"currentBalance-help",children:"Include any carryover from previous year"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"balanceAsOfDate",children:"Balance As Of Date"}),T.jsx("input",{type:"date",id:"balanceAsOfDate",value:h,onChange:N=>f(N.target.value),required:!0,"aria-invalid":R?"true":"false","aria-describedby":R?"sunday-warning":"balanceAsOfDate-help"}),R?T.jsx("small",{id:"sunday-warning",className:"warning-text",role:"alert",children:" Warning: Selected date is not a Sunday. Weekly calculations may be inaccurate."}):T.jsx("small",{id:"balanceAsOfDate-help",children:"When was this balance taken? Should be the start of a week (Sunday)"})]}),T.jsxs("div",{className:"form-group checkbox-group",children:[T.jsxs("label",{children:[T.jsx("input",{type:"checkbox",checked:_,onChange:N=>E(N.target.checked),"aria-describedby":"personalDay-help"}),T.jsx("span",{children:"I already used my Personal Day this year"})]}),T.jsxs("small",{id:"personalDay-help",children:["Check this if you took a personal day before ",h||"your balance date"]})]}),T.jsxs("fieldset",{className:"form-group radio-fieldset",children:[T.jsx("legend",{children:"Work Schedule"}),T.jsxs("div",{className:"radio-group",children:[T.jsxs("label",{className:"radio-label",children:[T.jsx("input",{type:"radio",name:"scheduleType",value:"5/40",checked:p==="5/40",onChange:()=>y("5/40")}),T.jsx("span",{children:"5/40 (Five 8-hour days per week)"})]}),T.jsxs("label",{className:"radio-label",children:[T.jsx("input",{type:"radio",name:"scheduleType",value:"9/80",checked:p==="9/80",onChange:()=>y("9/80")}),T.jsx("span",{children:"9/80 (Nine 9-hour days + one 8-hour day over 2 weeks, alternating Friday off)"})]})]})]}),T.jsx("button",{type:"submit",className:"submit-button",children:"Start Forecasting"})]})]})};function LE(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=LE(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function nh(){for(var n,e,t=0,i="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=LE(n))&&(i&&(i+=" "),i+=e);return i}const XD=(n,e,t,i)=>{if(t==="length"||t==="prototype"||t==="arguments"||t==="caller")return;const o=Object.getOwnPropertyDescriptor(n,t),l=Object.getOwnPropertyDescriptor(e,t);!ZD(o,l)&&i||Object.defineProperty(n,t,l)},ZD=function(n,e){return n===void 0||n.configurable||n.writable===e.writable&&n.enumerable===e.enumerable&&n.configurable===e.configurable&&(n.writable||n.value===e.value)},eP=(n,e)=>{const t=Object.getPrototypeOf(e);t!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,t)},tP=(n,e)=>`/* Wrapped ${n}*/
${e}`,nP=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),rP=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),iP=(n,e,t)=>{const i=t===""?"":`with ${t.trim()}() `,o=tP.bind(null,i,e.toString());Object.defineProperty(o,"name",rP);const{writable:l,enumerable:h,configurable:f}=nP;Object.defineProperty(n,"toString",{value:o,writable:l,enumerable:h,configurable:f})};function sP(n,e,{ignoreNonConfigurable:t=!1}={}){const{name:i}=n;for(const o of Reflect.ownKeys(e))XD(n,e,o,t);return eP(n,e),iP(n,e,i),n}const Ku=2147483647,oP=new WeakMap,Zd=new WeakMap,aP=new WeakMap;function lP(n,e){const t=n.get(e);if(t){if(t.maxAge<=Date.now()){n.delete(e);return}return t}}function jE(n,{cacheKey:e,cache:t=new Map,maxAge:i}={}){if(i===0)return n;if(typeof i=="number"&&Number.isFinite(i)){if(i>Ku)throw new TypeError(`The \`maxAge\` option cannot exceed ${Ku}.`);if(i<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const o=function(...l){var _;const h=e?e(l):l[0],f=lP(t,h);if(f)return f.data;const p=n.apply(this,l),y=typeof i=="function"?i(...l):i;if(y!==void 0&&y!==Number.POSITIVE_INFINITY){if(!Number.isFinite(y))throw new TypeError("The `maxAge` function must return a finite number, `0`, or `Infinity`.");if(y<=0)return p;if(y>Ku)throw new TypeError(`The \`maxAge\` function result cannot exceed ${Ku}.`)}if(t.set(h,{data:p,maxAge:y===void 0||y===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:Date.now()+y}),y!==void 0&&y!==Number.POSITIVE_INFINITY){const E=setTimeout(()=>{var R;t.delete(h),(R=Zd.get(o))==null||R.delete(E)},y);(_=E.unref)==null||_.call(E);const I=Zd.get(o)??new Set;I.add(E),Zd.set(o,I)}return p};return sP(o,n,{ignoreNonConfigurable:!0}),oP.set(o,t),aP.set(o,e??(l=>l[0])),o}function uP(n){return typeof n=="string"}function cP(n,e,t){return t.indexOf(n)===e}function hP(n){return n.toLowerCase()===n}function Gv(n){return n.indexOf(",")===-1?n:n.split(",")}function Of(n){if(!n)return n;if(n==="C"||n==="posix"||n==="POSIX")return"en-US";if(n.indexOf(".")!==-1){var e=n.split(".")[0],t=e===void 0?"":e;return Of(t)}if(n.indexOf("@")!==-1){var i=n.split("@")[0],t=i===void 0?"":i;return Of(t)}if(n.indexOf("-")===-1||!hP(n))return n;var o=n.split("-"),l=o[0],h=o[1],f=h===void 0?"":h;return"".concat(l,"-").concat(f.toUpperCase())}function dP(n){var e=n===void 0?{}:n,t=e.useFallbackLocale,i=t===void 0?!0:t,o=e.fallbackLocale,l=o===void 0?"en-US":o,h=[];if(typeof navigator<"u"){for(var f=navigator.languages||[],p=[],y=0,_=f;y<_.length;y++){var E=_[y];p=p.concat(Gv(E))}var I=navigator.language,R=I&&Gv(I);h=h.concat(p,R)}return i&&h.push(l),h.filter(uP).map(Of).filter(cP)}var fP=jE(dP,{cacheKey:JSON.stringify});function pP(n){return fP(n)[0]||null}var FE=jE(pP,{cacheKey:JSON.stringify});function gi(n,e,t){return function(o,l=t){const h=n(o)+l;return e(h)}}function Vl(n){return function(t){return new Date(n(t).getTime()-1)}}function Ml(n,e){return function(i){return[n(i),e(i)]}}function ut(n){if(n instanceof Date)return n.getFullYear();if(typeof n=="number")return n;const e=Number.parseInt(n,10);if(typeof n=="string"&&!Number.isNaN(e))return e;throw new Error(`Failed to get year from date: ${n}.`)}function ls(n){if(n instanceof Date)return n.getMonth();throw new Error(`Failed to get month from date: ${n}.`)}function rh(n){if(n instanceof Date)return n.getDate();throw new Error(`Failed to get year from date: ${n}.`)}function da(n){const e=ut(n),t=e+(-e+1)%100,i=new Date;return i.setFullYear(t,0,1),i.setHours(0,0,0,0),i}const mP=gi(ut,da,-100),UE=gi(ut,da,100),Bp=Vl(UE),gP=gi(ut,Bp,-100),BE=Ml(da,Bp);function us(n){const e=ut(n),t=e+(-e+1)%10,i=new Date;return i.setFullYear(t,0,1),i.setHours(0,0,0,0),i}const zE=gi(ut,us,-10),zp=gi(ut,us,10),ih=Vl(zp),$E=gi(ut,ih,-10),WE=Ml(us,ih);function fa(n){const e=ut(n),t=new Date;return t.setFullYear(e,0,1),t.setHours(0,0,0,0),t}const HE=gi(ut,fa,-1),$p=gi(ut,fa,1),sh=Vl($p),qE=gi(ut,sh,-1),yP=Ml(fa,sh);function Wp(n,e){return function(i,o=e){const l=ut(i),h=ls(i)+o,f=new Date;return f.setFullYear(l,h,1),f.setHours(0,0,0,0),n(f)}}function Zs(n){const e=ut(n),t=ls(n),i=new Date;return i.setFullYear(e,t,1),i.setHours(0,0,0,0),i}const GE=Wp(Zs,-1),Hp=Wp(Zs,1),Ll=Vl(Hp),KE=Wp(Ll,-1),vP=Ml(Zs,Ll);function _P(n,e){return function(i,o=e){const l=ut(i),h=ls(i),f=rh(i)+o,p=new Date;return p.setFullYear(l,h,f),p.setHours(0,0,0,0),n(p)}}function jl(n){const e=ut(n),t=ls(n),i=rh(n),o=new Date;return o.setFullYear(e,t,i),o.setHours(0,0,0,0),o}const wP=_P(jl,1),qp=Vl(wP),EP=Ml(jl,qp);function YE(n){return rh(Ll(n))}var Gt={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},TP={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Gp=[0,1,2,3,4,5,6],ef=new Map;function SP(n){return function(t,i){var o=t||FE();ef.has(o)||ef.set(o,new Map);var l=ef.get(o);return l.has(n)||l.set(n,new Intl.DateTimeFormat(o||void 0,n).format),l.get(n)(i)}}function IP(n){var e=new Date(n);return new Date(e.setHours(12))}function eo(n){return function(e,t){return SP(n)(e,IP(t))}}var AP={day:"numeric"},CP={day:"numeric",month:"long",year:"numeric"},kP={month:"long"},DP={month:"long",year:"numeric"},PP={weekday:"short"},RP={weekday:"long"},NP={year:"numeric"},xP=eo(AP),bP=eo(CP),OP=eo(kP),QE=eo(DP),VP=eo(PP),MP=eo(RP),oh=eo(NP),LP=Gp[0],jP=Gp[5],Kv=Gp[6];function Sl(n,e){e===void 0&&(e=Gt.ISO_8601);var t=n.getDay();switch(e){case Gt.ISO_8601:return(t+6)%7;case Gt.ISLAMIC:return(t+1)%7;case Gt.HEBREW:case Gt.GREGORY:return t;default:throw new Error("Unsupported calendar type.")}}function FP(n){var e=da(n);return ut(e)}function UP(n){var e=us(n);return ut(e)}function Vf(n,e){e===void 0&&(e=Gt.ISO_8601);var t=ut(n),i=ls(n),o=n.getDate()-Sl(n,e);return new Date(t,i,o)}function BP(n,e){e===void 0&&(e=Gt.ISO_8601);var t=e===Gt.GREGORY?Gt.GREGORY:Gt.ISO_8601,i=Vf(n,e),o=ut(n)+1,l,h;do l=new Date(o,0,t===Gt.ISO_8601?4:1),h=Vf(l,e),o-=1;while(n<h);return Math.round((i.getTime()-h.getTime())/(864e5*7))+1}function $s(n,e){switch(n){case"century":return da(e);case"decade":return us(e);case"year":return fa(e);case"month":return Zs(e);case"day":return jl(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function zP(n,e){switch(n){case"century":return mP(e);case"decade":return zE(e);case"year":return HE(e);case"month":return GE(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function JE(n,e){switch(n){case"century":return UE(e);case"decade":return zp(e);case"year":return $p(e);case"month":return Hp(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function $P(n,e){switch(n){case"decade":return zE(e,-100);case"year":return HE(e,-10);case"month":return GE(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function WP(n,e){switch(n){case"decade":return zp(e,100);case"year":return $p(e,10);case"month":return Hp(e,12);default:throw new Error("Invalid rangeType: ".concat(n))}}function XE(n,e){switch(n){case"century":return Bp(e);case"decade":return ih(e);case"year":return sh(e);case"month":return Ll(e);case"day":return qp(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function HP(n,e){switch(n){case"century":return gP(e);case"decade":return $E(e);case"year":return qE(e);case"month":return KE(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function qP(n,e){switch(n){case"decade":return $E(e,-100);case"year":return qE(e,-10);case"month":return KE(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function Yv(n,e){switch(n){case"century":return BE(e);case"decade":return WE(e);case"year":return yP(e);case"month":return vP(e);case"day":return EP(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function GP(n,e,t){var i=[e,t].sort(function(o,l){return o.getTime()-l.getTime()});return[$s(n,i[0]),XE(n,i[1])]}function ZE(n,e,t){return t.map(function(i){return(e||oh)(n,i)}).join("  ")}function KP(n,e,t){return ZE(n,e,BE(t))}function e0(n,e,t){return ZE(n,e,WE(t))}function YP(n){return n.getDay()===new Date().getDay()}function t0(n,e){e===void 0&&(e=Gt.ISO_8601);var t=n.getDay();switch(e){case Gt.ISLAMIC:case Gt.HEBREW:return t===jP||t===Kv;case Gt.ISO_8601:case Gt.GREGORY:return t===Kv||t===LP;default:throw new Error("Unsupported calendar type.")}}var Nr="react-calendar__navigation";function QP(n){var e=n.activeStartDate,t=n.drillUp,i=n.formatMonthYear,o=i===void 0?QE:i,l=n.formatYear,h=l===void 0?oh:l,f=n.locale,p=n.maxDate,y=n.minDate,_=n.navigationAriaLabel,E=_===void 0?"":_,I=n.navigationAriaLive,R=n.navigationLabel,L=n.next2AriaLabel,N=L===void 0?"":L,F=n.next2Label,q=F===void 0?"":F,ee=n.nextAriaLabel,oe=ee===void 0?"":ee,re=n.nextLabel,Ne=re===void 0?"":re,ve=n.prev2AriaLabel,P=ve===void 0?"":ve,A=n.prev2Label,D=A===void 0?"":A,b=n.prevAriaLabel,x=b===void 0?"":b,V=n.prevLabel,C=V===void 0?"":V,Oe=n.setActiveStartDate,Me=n.showDoubleView,We=n.view,Fe=n.views,ne=Fe.indexOf(We)>0,le=We!=="century",te=zP(We,e),j=le?$P(We,e):void 0,H=JE(We,e),_e=le?WP(We,e):void 0,Se=(function(){if(te.getFullYear()<0)return!0;var qe=HP(We,e);return y&&y>=qe})(),xe=le&&(function(){if(j.getFullYear()<0)return!0;var qe=qP(We,e);return y&&y>=qe})(),Re=p&&p<H,X=le&&p&&p<_e;function ue(){Oe(te,"prev")}function ce(){Oe(j,"prev2")}function ye(){Oe(H,"next")}function Ve(){Oe(_e,"next2")}function vt(qe){var On=(function(){switch(We){case"century":return KP(f,h,qe);case"decade":return e0(f,h,qe);case"year":return h(f,qe);case"month":return o(f,qe);default:throw new Error("Invalid view: ".concat(We,"."))}})();return R?R({date:qe,label:On,locale:f||FE()||void 0,view:We}):On}function St(){var qe="".concat(Nr,"__label");return T.jsxs("button",{"aria-label":E,"aria-live":I,className:qe,disabled:!ne,onClick:t,style:{flexGrow:1},type:"button",children:[T.jsx("span",{className:"".concat(qe,"__labelText ").concat(qe,"__labelText--from"),children:vt(e)}),Me?T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"".concat(qe,"__divider"),children:"  "}),T.jsx("span",{className:"".concat(qe,"__labelText ").concat(qe,"__labelText--to"),children:vt(H)})]}):null]})}return T.jsxs("div",{className:Nr,children:[D!==null&&le?T.jsx("button",{"aria-label":P,className:"".concat(Nr,"__arrow ").concat(Nr,"__prev2-button"),disabled:xe,onClick:ce,type:"button",children:D}):null,C!==null&&T.jsx("button",{"aria-label":x,className:"".concat(Nr,"__arrow ").concat(Nr,"__prev-button"),disabled:Se,onClick:ue,type:"button",children:C}),St(),Ne!==null&&T.jsx("button",{"aria-label":oe,className:"".concat(Nr,"__arrow ").concat(Nr,"__next-button"),disabled:Re,onClick:ye,type:"button",children:Ne}),q!==null&&le?T.jsx("button",{"aria-label":N,className:"".concat(Nr,"__arrow ").concat(Nr,"__next2-button"),disabled:X,onClick:Ve,type:"button",children:q}):null]})}var zo=function(){return zo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},zo.apply(this,arguments)},JP=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function Qv(n){return"".concat(n,"%")}function Kp(n){var e=n.children,t=n.className,i=n.count,o=n.direction,l=n.offset,h=n.style,f=n.wrap,p=JP(n,["children","className","count","direction","offset","style","wrap"]);return T.jsx("div",zo({className:t,style:zo({display:"flex",flexDirection:o,flexWrap:f?"wrap":"nowrap"},h)},p,{children:se.Children.map(e,function(y,_){var E=l&&_===0?Qv(100*l/i):null;return se.cloneElement(y,zo(zo({},y.props),{style:{flexBasis:Qv(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:E,marginInlineStart:E,marginInlineEnd:0}}))})}))}function XP(n,e,t){return e&&e>n?e:t&&t<n?t:n}function Il(n,e){return e[0]<=n&&e[1]>=n}function ZP(n,e){return n[0]<=e[0]&&n[1]>=e[1]}function n0(n,e){return Il(n[0],e)||Il(n[1],e)}function Jv(n,e,t){var i=n0(e,n),o=[];if(i){o.push(t);var l=Il(n[0],e),h=Il(n[1],e);l&&o.push("".concat(t,"Start")),h&&o.push("".concat(t,"End")),l&&h&&o.push("".concat(t,"BothEnds"))}return o}function eR(n){return Array.isArray(n)?n[0]!==null&&n[1]!==null:n!==null}function tR(n){if(!n)throw new Error("args is required");var e=n.value,t=n.date,i=n.hover,o="react-calendar__tile",l=[o];if(!t)return l;var h=new Date,f=(function(){if(Array.isArray(t))return t;var R=n.dateType;if(!R)throw new Error("dateType is required when date is not an array of two dates");return Yv(R,t)})();if(Il(h,f)&&l.push("".concat(o,"--now")),!e||!eR(e))return l;var p=(function(){if(Array.isArray(e))return e;var R=n.valueType;if(!R)throw new Error("valueType is required when value is not an array of two dates");return Yv(R,e)})();ZP(p,f)?l.push("".concat(o,"--active")):n0(p,f)&&l.push("".concat(o,"--hasActive"));var y=Jv(p,f,"".concat(o,"--range"));l.push.apply(l,y);var _=Array.isArray(e)?e:[e];if(i&&_.length===1){var E=i>p[0]?[p[0],i]:[i,p[0]],I=Jv(E,f,"".concat(o,"--hover"));l.push.apply(l,I)}return l}function ah(n){for(var e=n.className,t=n.count,i=t===void 0?3:t,o=n.dateTransform,l=n.dateType,h=n.end,f=n.hover,p=n.offset,y=n.renderTile,_=n.start,E=n.step,I=E===void 0?1:E,R=n.value,L=n.valueType,N=[],F=_;F<=h;F+=I){var q=o(F);N.push(y({classes:tR({date:q,dateType:l,hover:f,value:R,valueType:L}),date:q}))}return T.jsx(Kp,{className:e,count:i,offset:p,wrap:!0,children:N})}function lh(n){var e=n.activeStartDate,t=n.children,i=n.classes,o=n.date,l=n.formatAbbr,h=n.locale,f=n.maxDate,p=n.maxDateTransform,y=n.minDate,_=n.minDateTransform,E=n.onClick,I=n.onMouseOver,R=n.style,L=n.tileClassName,N=n.tileContent,F=n.tileDisabled,q=n.view,ee=se.useMemo(function(){var re={activeStartDate:e,date:o,view:q};return typeof L=="function"?L(re):L},[e,o,L,q]),oe=se.useMemo(function(){var re={activeStartDate:e,date:o,view:q};return typeof N=="function"?N(re):N},[e,o,N,q]);return T.jsxs("button",{className:nh(i,ee),disabled:y&&_(y)>o||f&&p(f)<o||(F==null?void 0:F({activeStartDate:e,date:o,view:q})),onClick:E?function(re){return E(o,re)}:void 0,onFocus:I?function(){return I(o)}:void 0,onMouseOver:I?function(){return I(o)}:void 0,style:R,type:"button",children:[l?T.jsx("abbr",{"aria-label":l(h,o),children:t}):t,oe]})}var Mf=function(){return Mf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Mf.apply(this,arguments)},nR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Xv="react-calendar__century-view__decades__decade";function rR(n){var e=n.classes,t=e===void 0?[]:e,i=n.currentCentury,o=n.formatYear,l=o===void 0?oh:o,h=nR(n,["classes","currentCentury","formatYear"]),f=h.date,p=h.locale,y=[];return t&&y.push.apply(y,t),y.push(Xv),da(f).getFullYear()!==i&&y.push("".concat(Xv,"--neighboringCentury")),T.jsx(lh,Mf({},h,{classes:y,maxDateTransform:ih,minDateTransform:us,view:"century",children:e0(p,l,f)}))}var Lf=function(){return Lf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Lf.apply(this,arguments)},Zv=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function iR(n){var e=n.activeStartDate,t=n.hover,i=n.showNeighboringCentury,o=n.value,l=n.valueType,h=Zv(n,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),f=FP(e),p=f+(i?119:99);return T.jsx(ah,{className:"react-calendar__century-view__decades",dateTransform:us,dateType:"decade",end:p,hover:t,renderTile:function(y){var _=y.date,E=Zv(y,["date"]);return T.jsx(rR,Lf({},h,E,{activeStartDate:e,currentCentury:f,date:_}),_.getTime())},start:f,step:10,value:o,valueType:l})}var jf=function(){return jf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},jf.apply(this,arguments)};function sR(n){function e(){return T.jsx(iR,jf({},n))}return T.jsx("div",{className:"react-calendar__century-view",children:e()})}var Ff=function(){return Ff=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Ff.apply(this,arguments)},oR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},e_="react-calendar__decade-view__years__year";function aR(n){var e=n.classes,t=e===void 0?[]:e,i=n.currentDecade,o=n.formatYear,l=o===void 0?oh:o,h=oR(n,["classes","currentDecade","formatYear"]),f=h.date,p=h.locale,y=[];return t&&y.push.apply(y,t),y.push(e_),us(f).getFullYear()!==i&&y.push("".concat(e_,"--neighboringDecade")),T.jsx(lh,Ff({},h,{classes:y,maxDateTransform:sh,minDateTransform:fa,view:"decade",children:l(p,f)}))}var Uf=function(){return Uf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Uf.apply(this,arguments)},t_=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function lR(n){var e=n.activeStartDate,t=n.hover,i=n.showNeighboringDecade,o=n.value,l=n.valueType,h=t_(n,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),f=UP(e),p=f+(i?11:9);return T.jsx(ah,{className:"react-calendar__decade-view__years",dateTransform:fa,dateType:"year",end:p,hover:t,renderTile:function(y){var _=y.date,E=t_(y,["date"]);return T.jsx(aR,Uf({},h,E,{activeStartDate:e,currentDecade:f,date:_}),_.getTime())},start:f,value:o,valueType:l})}var Bf=function(){return Bf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Bf.apply(this,arguments)};function uR(n){function e(){return T.jsx(lR,Bf({},n))}return T.jsx("div",{className:"react-calendar__decade-view",children:e()})}var zf=function(){return zf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},zf.apply(this,arguments)},cR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},n_=function(n,e,t){if(t||arguments.length===2)for(var i=0,o=e.length,l;i<o;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return n.concat(l||Array.prototype.slice.call(e))},hR="react-calendar__year-view__months__month";function dR(n){var e=n.classes,t=e===void 0?[]:e,i=n.formatMonth,o=i===void 0?OP:i,l=n.formatMonthYear,h=l===void 0?QE:l,f=cR(n,["classes","formatMonth","formatMonthYear"]),p=f.date,y=f.locale;return T.jsx(lh,zf({},f,{classes:n_(n_([],t,!0),[hR],!1),formatAbbr:h,maxDateTransform:Ll,minDateTransform:Zs,view:"year",children:o(y,p)}))}var $f=function(){return $f=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},$f.apply(this,arguments)},r_=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function fR(n){var e=n.activeStartDate,t=n.hover,i=n.value,o=n.valueType,l=r_(n,["activeStartDate","hover","value","valueType"]),h=0,f=11,p=ut(e);return T.jsx(ah,{className:"react-calendar__year-view__months",dateTransform:function(y){var _=new Date;return _.setFullYear(p,y,1),Zs(_)},dateType:"month",end:f,hover:t,renderTile:function(y){var _=y.date,E=r_(y,["date"]);return T.jsx(dR,$f({},l,E,{activeStartDate:e,date:_}),_.getTime())},start:h,value:i,valueType:o})}var Wf=function(){return Wf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Wf.apply(this,arguments)};function pR(n){function e(){return T.jsx(fR,Wf({},n))}return T.jsx("div",{className:"react-calendar__year-view",children:e()})}var Hf=function(){return Hf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Hf.apply(this,arguments)},mR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},tf="react-calendar__month-view__days__day";function gR(n){var e=n.calendarType,t=n.classes,i=t===void 0?[]:t,o=n.currentMonthIndex,l=n.formatDay,h=l===void 0?xP:l,f=n.formatLongDate,p=f===void 0?bP:f,y=mR(n,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),_=y.date,E=y.locale,I=[];return i&&I.push.apply(I,i),I.push(tf),t0(_,e)&&I.push("".concat(tf,"--weekend")),_.getMonth()!==o&&I.push("".concat(tf,"--neighboringMonth")),T.jsx(lh,Hf({},y,{classes:I,formatAbbr:p,maxDateTransform:qp,minDateTransform:jl,view:"month",children:h(E,_)}))}var qf=function(){return qf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},qf.apply(this,arguments)},i_=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function yR(n){var e=n.activeStartDate,t=n.calendarType,i=n.hover,o=n.showFixedNumberOfWeeks,l=n.showNeighboringMonth,h=n.value,f=n.valueType,p=i_(n,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),y=ut(e),_=ls(e),E=o||l,I=Sl(e,t),R=E?0:I,L=(E?-I:0)+1,N=(function(){if(o)return L+42-1;var F=YE(e);if(l){var q=new Date;q.setFullYear(y,_,F),q.setHours(0,0,0,0);var ee=7-Sl(q,t)-1;return F+ee}return F})();return T.jsx(ah,{className:"react-calendar__month-view__days",count:7,dateTransform:function(F){var q=new Date;return q.setFullYear(y,_,F),jl(q)},dateType:"day",hover:i,end:N,renderTile:function(F){var q=F.date,ee=i_(F,["date"]);return T.jsx(gR,qf({},p,ee,{activeStartDate:e,calendarType:t,currentMonthIndex:_,date:q}),q.getTime())},offset:R,start:L,value:h,valueType:f})}var r0="react-calendar__month-view__weekdays",nf="".concat(r0,"__weekday");function vR(n){for(var e=n.calendarType,t=n.formatShortWeekday,i=t===void 0?VP:t,o=n.formatWeekday,l=o===void 0?MP:o,h=n.locale,f=n.onMouseLeave,p=new Date,y=Zs(p),_=ut(y),E=ls(y),I=[],R=1;R<=7;R+=1){var L=new Date(_,E,R-Sl(y,e)),N=l(h,L);I.push(T.jsx("div",{className:nh(nf,YP(L)&&"".concat(nf,"--current"),t0(L,e)&&"".concat(nf,"--weekend")),children:T.jsx("abbr",{"aria-label":N,title:N,children:i(h,L).replace(".","")})},R))}return T.jsx(Kp,{className:r0,count:7,onFocus:f,onMouseOver:f,children:I})}var Oc=function(){return Oc=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Oc.apply(this,arguments)},s_=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},o_="react-calendar__tile";function _R(n){var e=n.onClickWeekNumber,t=n.weekNumber,i=T.jsx("span",{children:t});if(e){var o=n.date,l=n.onClickWeekNumber,h=n.weekNumber,f=s_(n,["date","onClickWeekNumber","weekNumber"]);return T.jsx("button",Oc({},f,{className:o_,onClick:function(p){return l(h,o,p)},type:"button",children:i}))}else{n.date,n.onClickWeekNumber,n.weekNumber;var f=s_(n,["date","onClickWeekNumber","weekNumber"]);return T.jsx("div",Oc({},f,{className:o_,children:i}))}}function wR(n){var e=n.activeStartDate,t=n.calendarType,i=n.onClickWeekNumber,o=n.onMouseLeave,l=n.showFixedNumberOfWeeks,h=(function(){if(l)return 6;var y=YE(e),_=Sl(e,t),E=y-(7-_);return 1+Math.ceil(E/7)})(),f=(function(){for(var y=ut(e),_=ls(e),E=rh(e),I=[],R=0;R<h;R+=1)I.push(Vf(new Date(y,_,E+R*7),t));return I})(),p=f.map(function(y){return BP(y,t)});return T.jsx(Kp,{className:"react-calendar__month-view__weekNumbers",count:h,direction:"column",onFocus:o,onMouseOver:o,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:p.map(function(y,_){var E=f[_];if(!E)throw new Error("date is not defined");return T.jsx(_R,{date:E,onClickWeekNumber:i,weekNumber:y},y)})})}var Gf=function(){return Gf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Gf.apply(this,arguments)},ER=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function TR(n){if(n)for(var e=0,t=Object.entries(TP);e<t.length;e++){var i=t[e],o=i[0],l=i[1];if(l.includes(n))return o}return Gt.ISO_8601}function SR(n){var e=n.activeStartDate,t=n.locale,i=n.onMouseLeave,o=n.showFixedNumberOfWeeks,l=n.calendarType,h=l===void 0?TR(t):l,f=n.formatShortWeekday,p=n.formatWeekday,y=n.onClickWeekNumber,_=n.showWeekNumbers,E=ER(n,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function I(){return T.jsx(vR,{calendarType:h,formatShortWeekday:f,formatWeekday:p,locale:t,onMouseLeave:i})}function R(){return _?T.jsx(wR,{activeStartDate:e,calendarType:h,onClickWeekNumber:y,onMouseLeave:i,showFixedNumberOfWeeks:o}):null}function L(){return T.jsx(yR,Gf({calendarType:h},E))}var N="react-calendar__month-view";return T.jsx("div",{className:nh(N,_?"".concat(N,"--weekNumbers"):""),children:T.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[R(),T.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[I(),L()]})]})})}var $o=function(){return $o=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},$o.apply(this,arguments)},Yu="react-calendar",cc=["century","decade","year","month"],IR=["decade","year","month","day"],Yp=new Date;Yp.setFullYear(1,0,1);Yp.setHours(0,0,0,0);var AR=new Date(864e13);function ol(n){return n instanceof Date?n:new Date(n)}function i0(n,e){return cc.slice(cc.indexOf(n),cc.indexOf(e)+1)}function CR(n,e,t){var i=i0(e,t);return i.indexOf(n)!==-1}function Qp(n,e,t){return n&&CR(n,e,t)?n:t}function s0(n){var e=cc.indexOf(n);return IR[e]}function kR(n,e){var t=Array.isArray(n)?n[e]:n;if(!t)return null;var i=ol(t);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(n));return i}function o0(n,e){var t=n.value,i=n.minDate,o=n.maxDate,l=n.maxDetail,h=kR(t,e);if(!h)return null;var f=s0(l),p=(function(){switch(e){case 0:return $s(f,h);case 1:return XE(f,h);default:throw new Error("Invalid index value: ".concat(e))}})();return XP(p,i,o)}var Jp=function(n){return o0(n,0)},a0=function(n){return o0(n,1)},DR=function(n){return[Jp,a0].map(function(e){return e(n)})};function l0(n){var e=n.maxDate,t=n.maxDetail,i=n.minDate,o=n.minDetail,l=n.value,h=n.view,f=Qp(h,o,t),p=Jp({value:l,minDate:i,maxDate:e,maxDetail:t})||new Date;return $s(f,p)}function PR(n){var e=n.activeStartDate,t=n.defaultActiveStartDate,i=n.defaultValue,o=n.defaultView,l=n.maxDate,h=n.maxDetail,f=n.minDate,p=n.minDetail,y=n.value,_=n.view,E=Qp(_,p,h),I=e||t;return I?$s(E,I):l0({maxDate:l,maxDetail:h,minDate:f,minDetail:p,value:y||i,view:_||o})}function rf(n){return n&&(!Array.isArray(n)||n.length===1)}function Qu(n,e){return n instanceof Date&&e instanceof Date&&n.getTime()===e.getTime()}var RR=se.forwardRef(function(e,t){var i=e.activeStartDate,o=e.allowPartialRange,l=e.calendarType,h=e.className,f=e.defaultActiveStartDate,p=e.defaultValue,y=e.defaultView,_=e.formatDay,E=e.formatLongDate,I=e.formatMonth,R=e.formatMonthYear,L=e.formatShortWeekday,N=e.formatWeekday,F=e.formatYear,q=e.goToRangeStartOnSelect,ee=q===void 0?!0:q,oe=e.inputRef,re=e.locale,Ne=e.maxDate,ve=Ne===void 0?AR:Ne,P=e.maxDetail,A=P===void 0?"month":P,D=e.minDate,b=D===void 0?Yp:D,x=e.minDetail,V=x===void 0?"century":x,C=e.navigationAriaLabel,Oe=e.navigationAriaLive,Me=e.navigationLabel,We=e.next2AriaLabel,Fe=e.next2Label,ne=e.nextAriaLabel,le=e.nextLabel,te=e.onActiveStartDateChange,j=e.onChange,H=e.onClickDay,_e=e.onClickDecade,Se=e.onClickMonth,xe=e.onClickWeekNumber,Re=e.onClickYear,X=e.onDrillDown,ue=e.onDrillUp,ce=e.onViewChange,ye=e.prev2AriaLabel,Ve=e.prev2Label,vt=e.prevAriaLabel,St=e.prevLabel,qe=e.returnValue,On=qe===void 0?"start":qe,Rt=e.selectRange,Vn=e.showDoubleView,yi=e.showFixedNumberOfWeeks,ct=e.showNavigation,ht=ct===void 0?!0:ct,_n=e.showNeighboringCentury,cs=e.showNeighboringDecade,vi=e.showNeighboringMonth,to=vi===void 0?!0:vi,cr=e.showWeekNumbers,hs=e.tileClassName,_i=e.tileContent,hr=e.tileDisabled,wi=e.value,dr=e.view,Yn=se.useState(f),no=Yn[0],wn=Yn[1],Br=se.useState(null),ds=Br[0],un=Br[1],zr=se.useState(Array.isArray(p)?p.map(function(be){return be!==null?ol(be):null}):p!=null?ol(p):null),Mn=zr[0],Ei=zr[1],Ln=se.useState(y),Qn=Ln[0],nt=Ln[1],It=i||no||PR({activeStartDate:i,defaultActiveStartDate:f,defaultValue:p,defaultView:y,maxDate:ve,maxDetail:A,minDate:b,minDetail:V,value:wi,view:dr}),dt=(function(){var be=(function(){return Rt&&rf(Mn)?Mn:wi!==void 0?wi:Mn})();return be?Array.isArray(be)?be.map(function(Ze){return Ze!==null?ol(Ze):null}):be!==null?ol(be):null:null})(),En=s0(A),Xe=Qp(dr||Qn,V,A),on=i0(V,A),jn=Rt?ds:null,Ti=on.indexOf(Xe)<on.length-1,fr=on.indexOf(Xe)>0,Jn=se.useCallback(function(be){var Ze=(function(){switch(On){case"start":return Jp;case"end":return a0;case"range":return DR;default:throw new Error("Invalid returnValue.")}})();return Ze({maxDate:ve,maxDetail:A,minDate:b,value:be})},[ve,A,b,On]),Fn=se.useCallback(function(be,Ze){wn(be);var rt={action:Ze,activeStartDate:be,value:dt,view:Xe};te&&!Qu(It,be)&&te(rt)},[It,te,dt,Xe]),$r=se.useCallback(function(be,Ze){var rt=(function(){switch(Xe){case"century":return _e;case"decade":return Re;case"year":return Se;case"month":return H;default:throw new Error("Invalid view: ".concat(Xe,"."))}})();rt&&rt(be,Ze)},[H,_e,Se,Re,Xe]),Tn=se.useCallback(function(be,Ze){if(Ti){$r(be,Ze);var rt=on[on.indexOf(Xe)+1];if(!rt)throw new Error("Attempted to drill down from the lowest view.");wn(be),nt(rt);var Yt={action:"drillDown",activeStartDate:be,value:dt,view:rt};te&&!Qu(It,be)&&te(Yt),ce&&Xe!==rt&&ce(Yt),X&&X(Yt)}},[It,Ti,te,$r,X,ce,dt,Xe,on]),cn=se.useCallback(function(){if(fr){var be=on[on.indexOf(Xe)-1];if(!be)throw new Error("Attempted to drill up from the highest view.");var Ze=$s(be,It);wn(Ze),nt(be);var rt={action:"drillUp",activeStartDate:Ze,value:dt,view:be};te&&!Qu(It,Ze)&&te(rt),ce&&Xe!==be&&ce(rt),ue&&ue(rt)}},[It,fr,te,ue,ce,dt,Xe,on]),pr=se.useCallback(function(be,Ze){var rt=dt;$r(be,Ze);var Yt=Rt&&!rf(rt),Nt;if(Rt)if(Yt)Nt=$s(En,be);else{if(!rt)throw new Error("previousValue is required");if(Array.isArray(rt))throw new Error("previousValue must not be an array");Nt=GP(En,rt,be)}else Nt=Jn(be);var Wr=!Rt||Yt||ee?l0({maxDate:ve,maxDetail:A,minDate:b,minDetail:V,value:Nt,view:Xe}):null;Ze.persist(),wn(Wr),Ei(Nt);var Ii={action:"onChange",activeStartDate:Wr,value:Nt,view:Xe};if(te&&!Qu(It,Wr)&&te(Ii),j)if(Rt){var Hr=rf(Nt);if(!Hr)j(Nt||null,Ze);else if(o){if(Array.isArray(Nt))throw new Error("value must not be an array");j([Nt||null,null],Ze)}}else j(Nt||null,Ze)},[It,o,Jn,ee,ve,A,b,V,te,j,$r,Rt,dt,En,Xe]);function hn(be){un(be)}function Si(){un(null)}se.useImperativeHandle(t,function(){return{activeStartDate:It,drillDown:Tn,drillUp:cn,onChange:pr,setActiveStartDate:Fn,value:dt,view:Xe}},[It,Tn,cn,pr,Fn,dt,Xe]);function fs(be){var Ze=be?JE(Xe,It):$s(Xe,It),rt=Ti?Tn:pr,Yt={activeStartDate:Ze,hover:jn,locale:re,maxDate:ve,minDate:b,onClick:rt,onMouseOver:Rt?hn:void 0,tileClassName:hs,tileContent:_i,tileDisabled:hr,value:dt,valueType:En};switch(Xe){case"century":return T.jsx(sR,$o({formatYear:F,showNeighboringCentury:_n},Yt));case"decade":return T.jsx(uR,$o({formatYear:F,showNeighboringDecade:cs},Yt));case"year":return T.jsx(pR,$o({formatMonth:I,formatMonthYear:R},Yt));case"month":return T.jsx(SR,$o({calendarType:l,formatDay:_,formatLongDate:E,formatShortWeekday:L,formatWeekday:N,onClickWeekNumber:xe,onMouseLeave:Rt?Si:void 0,showFixedNumberOfWeeks:typeof yi<"u"?yi:Vn,showNeighboringMonth:to,showWeekNumbers:cr},Yt));default:throw new Error("Invalid view: ".concat(Xe,"."))}}function ps(){return ht?T.jsx(QP,{activeStartDate:It,drillUp:cn,formatMonthYear:R,formatYear:F,locale:re,maxDate:ve,minDate:b,navigationAriaLabel:C,navigationAriaLive:Oe,navigationLabel:Me,next2AriaLabel:We,next2Label:Fe,nextAriaLabel:ne,nextLabel:le,prev2AriaLabel:ye,prev2Label:Ve,prevAriaLabel:vt,prevLabel:St,setActiveStartDate:Fn,showDoubleView:Vn,view:Xe,views:on}):null}var Sn=Array.isArray(dt)?dt:[dt];return T.jsxs("div",{className:nh(Yu,Rt&&Sn.length===1&&"".concat(Yu,"--selectRange"),Vn&&"".concat(Yu,"--doubleView"),h),ref:oe,children:[ps(),T.jsxs("div",{className:"".concat(Yu,"__viewContainer"),onBlur:Rt?Si:void 0,onMouseLeave:Rt?Si:void 0,children:[fs(),Vn?fs(!0):null]})]})}),Wo=(n=>(n.REGULAR="regular",n.RDO="rdo",n.HOLIDAY="holiday",n.PLANNED_VACATION="planned_vacation",n.WEEKEND="weekend",n))(Wo||{});const NR=(n,e,t,i,o,l)=>{const h=new Map,f=new Map;t.forEach(E=>f.set(hc(E.date),E));const p=new Map;n.forEach(E=>{const I=hc(E.weekEndDate);p.set(I,E)});const y=e.map(E=>{const I=je(E.startDate),R=Xf(E,i,t);return{original:E,start:I.getTime(),end:je(E.endDate).getTime(),startDateKey:Ho(I),totalHours:R}}),_=new Date(o);for(;_<=l;){const E=new Date(_),I=Ho(E),R=E.getTime(),L=[];Vc(E)&&L.push(Wo.WEEKEND);const N=Mc(E,i);N&&L.push(Wo.RDO);const F=f.get(I);F&&L.push(Wo.HOLIDAY);const q=y.find(re=>R>=re.start&&R<=re.end);q&&L.push(Wo.PLANNED_VACATION);let ee,oe;if(E.getDay()===0){const re=p.get(I);ee=re==null?void 0:re.endingBalance,oe=re==null?void 0:re.accrued}h.set(I,{date:E,types:L,hours:Jf(E,i),vacationHours:q?q.totalHours:void 0,balance:ee,accrualRate:oe,isInVacation:!!q,vacationId:q==null?void 0:q.original.id,isHoliday:!!F,holidayName:F==null?void 0:F.name,isRDO:N,isPersonalDayStart:(q==null?void 0:q.original.personalDayUsed)&&q.startDateKey===I}),_.setDate(_.getDate()+1)}return h},xR=({dayInfo:n,isInSelectionRange:e,isSelectionStart:t,isSelectionEnd:i})=>n?T.jsxs("div",{className:"calendar-tile-content",title:n.holidayName,children:[T.jsxs("div",{className:"day-indicators",children:[n.isPersonalDayStart&&T.jsx("span",{className:"indicator personal-day",title:"Personal Day Applied",children:"P"}),n.isInVacation&&T.jsx("span",{className:"indicator vacation",title:"Planned Vacation",children:"V"}),n.isHoliday&&T.jsx("span",{className:"indicator holiday",title:n.holidayName,children:"H"}),n.isRDO&&T.jsx("span",{className:"indicator rdo",title:"Regular Day Off",children:"R"})]}),n.balance!==void 0&&T.jsxs("div",{className:`balance-display ${n.balance<0?"negative":n.balance>=h_?"at-max":n.balance>MT?"warning":n.balance<=LT?"low-warning":"positive"}`,title:n.accrualRate!==void 0?`Accrual rate: +${n.accrualRate.toFixed(2)} hours`:void 0,children:[n.balance.toFixed(1),"h"]}),e&&T.jsx("div",{className:"selection-overlay"}),t&&T.jsx("div",{className:"selection-start-marker"}),i&&T.jsx("div",{className:"selection-end-marker"})]}):null,bR=u_.memo(xR),OR=({vacation:n,isOpen:e,workSchedule:t,holidays:i,onSave:o,onDelete:l,onClose:h,canAffordVacation:f})=>{const[p,y]=se.useState(""),[_,E]=se.useState(""),[I,R]=se.useState(""),[L,N]=se.useState(!1),[F,q]=se.useState(""),[ee,oe]=se.useState(!1);se.useEffect(()=>{n&&(y(n.startDate),E(n.endDate),R(n.description||""),N(n.personalDayUsed||!1),q(""),oe(!1))},[n]);const re=se.useMemo(()=>{if(!p||!_)return 0;try{const A=Us(je(p),je(_),t,i);return L?Math.max(0,A-8):A}catch{return 0}},[p,_,t,i,L]),Ne=()=>{if(!n)return;if(!p||!_){q("Both start and end dates are required");return}if(je(_)<je(p)){q("End date must be after start date");return}const{canAfford:A,projectedBalance:D}=f({startDate:p,endDate:_,personalDayUsed:L},n.id);if(!A){q(`Cannot afford this change. Need ${re}h, will have ${D.toFixed(2)}h`);return}o(n.id,{startDate:p,endDate:_,description:I.trim()||void 0,personalDayUsed:L}),h()},ve=()=>{if(n){if(!ee){oe(!0);return}l(n.id),h()}},P=()=>{oe(!1),h()};return se.useEffect(()=>{const A=D=>{e&&D.key==="Escape"&&P()};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[e]),!e||!n?null:T.jsx("div",{className:"modal-overlay",onClick:P,role:"dialog","aria-modal":"true","aria-labelledby":"edit-vacation-title",children:T.jsxs("div",{className:"modal-content",onClick:A=>A.stopPropagation(),children:[T.jsx("button",{onClick:P,className:"modal-close-button","aria-label":"Close modal",children:""}),T.jsx("h2",{id:"edit-vacation-title",children:"Edit Vacation"}),T.jsxs("form",{onSubmit:A=>{A.preventDefault(),Ne()},children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"edit-start-date",children:"Start Date"}),T.jsx("input",{type:"date",id:"edit-start-date",value:p,onChange:A=>y(A.target.value),required:!0,autoFocus:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"edit-end-date",children:"End Date"}),T.jsx("input",{type:"date",id:"edit-end-date",value:_,onChange:A=>E(A.target.value),required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"edit-description",children:"Description (optional)"}),T.jsx("input",{type:"text",id:"edit-description",value:I,onChange:A=>R(A.target.value),placeholder:"e.g., Summer vacation"})]}),T.jsx("div",{className:"form-group checkbox-group",children:T.jsxs("label",{children:[T.jsx("input",{type:"checkbox",checked:L,onChange:A=>N(A.target.checked)}),"Use Personal Day (8h credit)"]})}),T.jsxs("div",{className:"hours-estimate","aria-live":"polite",children:[T.jsx("strong",{children:"Hours needed:"})," ",re.toFixed(2)]}),F&&T.jsx("div",{className:"error-message",children:F}),T.jsxs("div",{className:"modal-actions",children:[T.jsx("button",{type:"button",onClick:ve,className:"delete-button",children:ee?"Confirm Delete":"Delete"}),T.jsxs("div",{className:"right-actions",children:[T.jsx("button",{type:"button",onClick:P,className:"cancel-button",children:"Cancel"}),T.jsx("button",{type:"submit",className:"save-button",children:"Save Changes"})]})]})]})]})})},VR=({vacations:n,workSchedule:e,holidays:t,onEdit:i,onDelete:o})=>{const l=se.useMemo(()=>{if(n.length===0)return[];const p={};return n.forEach(_=>{const E=je(_.startDate).getFullYear();p[E]||(p[E]=[]),p[E].push(_)}),Object.keys(p).map(_=>{const E=parseInt(_,10),I=p[E];return{year:E,vacations:I?I.sort((R,L)=>R.startDate.localeCompare(L.startDate)):[]}}).sort((_,E)=>_.year-E.year)},[n]),h=p=>je(p).toLocaleDateString("en-US",{month:"short",day:"numeric"}),f=p=>{const y=je(p.startDate),_=je(p.endDate),E=Math.ceil((_.getTime()-y.getTime())/(1e3*60*60*24))+1;return E===1?"1 day":`${E} days`};return n.length===0?null:T.jsxs("div",{className:"vacation-list-by-year",children:[T.jsx("h3",{children:"Planned Vacations"}),l.map(p=>T.jsxs("div",{className:"vacation-year-group",children:[T.jsx("h4",{className:"vacation-year-header",children:p.year}),T.jsx("div",{className:"vacation-table-wrapper",children:T.jsxs("table",{className:"vacation-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Dates"}),T.jsx("th",{children:"Description"}),T.jsx("th",{children:"Duration"}),T.jsx("th",{children:"Vacation Hours"}),T.jsx("th",{children:"Actions"})]})}),T.jsx("tbody",{children:p.vacations.map(y=>T.jsxs("tr",{children:[T.jsxs("td",{className:"vacation-dates",children:[h(y.startDate)," - ",h(y.endDate)]}),T.jsx("td",{className:"vacation-description",children:y.description||T.jsx("span",{className:"no-description",children:""})}),T.jsx("td",{className:"vacation-duration",children:f(y)}),T.jsxs("td",{className:"vacation-hours",children:[Xf(y,e,t).toFixed(1),"h"]}),T.jsxs("td",{className:"vacation-actions",children:[T.jsx("button",{onClick:()=>i(y),className:"action-button edit-button",title:"Edit vacation",children:"Edit"}),T.jsx("button",{onClick:()=>o(y.id),className:"action-button delete-button",title:"Delete vacation",children:"Delete"})]})]},y.id))})]})})]},p.year))]})},u0=(n,e)=>{const t=Dt(n);return e.some(i=>i.date===t)},Ju=(n,e,t)=>Vc(n)||Mc(n,e)?!0:u0(n,t),sf=(n,e,t,i)=>{const o=new Date(n);o.setDate(o.getDate()-1);const l=Ju(n,t,i)&&!Ju(o,t,i),h=new Date(e);h.setDate(h.getDate()+1);const f=Ju(e,t,i)&&!Ju(h,t,i);return l&&f},of=(n,e,t,i)=>{let o;i===0?o=t>=4?3:1.5:o=Math.min(n,5);const l=o/5*50,h=e?25:0,f=Math.min(Math.log(t)/Math.log(14)*25,25);return l+h+f},Xu=(n,e)=>{const t=Dt(n),i=e.find(o=>o.date===t);return i?i.name:null},af=(n,e,t,i)=>{const o=NT(n,e);let l=0,h=0,f=0;for(const p of o)Vc(p)?l++:u0(p,i)?h++:Mc(p,t)&&f++;return{weekends:l,holidays:h,rdos:f}},lf=(n,e,t,i)=>{const o=[],l=new Date(n);l.setDate(l.getDate()-1);const h=new Date(e);h.setDate(h.getDate()+1);const f=Xu(l,i),p=Xu(h,i),y=Xu(n,i),_=Xu(e,i);return f&&o.push(`${f} on ${Dt(l)}`),p&&o.push(`${p} on ${Dt(h)}`),y&&!f&&o.push(`starts on ${y}`),_&&!p&&o.push(`ends on ${_}`),t.weekends>0&&o.push(`includes ${t.weekends} weekend day${t.weekends>1?"s":""}`),t.holidays>0&&o.push(`${t.holidays} holiday${t.holidays>1?"s":""}`),t.rdos>0&&o.push(`${t.rdos} RDO${t.rdos>1?"s":""}`),o.length>0?o.join(", "):"Extends weekend"},MR=(n,e,t,i=1)=>{const o=[];for(let h=1;h<=14;h++){const f=new Date(n);if(f.setDate(f.getDate()-h),f<new Date)continue;const p=Us(f,n,e,t),y=h+1;let _;if(p===0)y>=4?_=999:_=10;else{const E=e.type==="9/80"?9:8,I=p/E;_=y/I}if(_>=i){const E=af(f,n,e,t),I=lf(f,n,E,t),R=sf(f,n,e,t),L=of(_,R,y,p);o.push({id:`before-${Dt(n)}-${h}`,startDate:Dt(f),endDate:Dt(n),totalDays:y,vacationHours:p,efficiency:_,score:L,isBracketed:R,context:I,freeDays:E})}}for(let h=1;h<=14;h++){const f=new Date(n);f.setDate(f.getDate()+h);const p=Us(n,f,e,t),y=h+1;let _;if(p===0)y>=4?_=999:_=10;else{const E=e.type==="9/80"?9:8,I=p/E;_=y/I}if(_>=i){const E=af(n,f,e,t),I=lf(n,f,E,t),R=sf(n,f,e,t),L=of(_,R,y,p);o.push({id:`after-${Dt(n)}-${h}`,startDate:Dt(n),endDate:Dt(f),totalDays:y,vacationHours:p,efficiency:_,score:L,isBracketed:R,context:I,freeDays:E})}}for(let h=1;h<=9;h++)for(let f=1;f<=9;f++){const p=new Date(n);p.setDate(p.getDate()-h);const y=new Date(n);if(y.setDate(y.getDate()+f),p<new Date)continue;const _=Us(p,y,e,t),E=h+f+1;let I;if(_===0)E>=4?I=999:I=10;else{const R=e.type==="9/80"?9:8,L=_/R;I=E/L}if(I>=i){const R=af(p,y,e,t),L=lf(p,y,R,t),N=sf(p,y,e,t),F=of(I,N,E,_);o.push({id:`around-${Dt(n)}-${h}-${f}`,startDate:Dt(p),endDate:Dt(y),totalDays:E,vacationHours:_,efficiency:I,score:F,isBracketed:N,context:L,freeDays:R})}}return o},LR=(n,e,t)=>{if(t.type!=="9/80"||!t.rdoPattern)return[];const i=[],o=new Date(n);for(;o<=e;)o.getDay()===5&&Mc(o,t)&&i.push(new Date(o)),o.setDate(o.getDate()+1);return i},jR=(n,e,t=new Date,i=new Date(new Date().setFullYear(new Date().getFullYear()+1)),o=[],l=10)=>{const h=[],f=[];for(const L of e){const N=je(L.date);N>=t&&N<=i&&f.push(N)}const p=LR(t,i,n);f.push(...p);const y=new Date(t);for(;y<=i;)y.getDay()===5&&f.push(new Date(y)),y.getDay()===1&&f.push(new Date(y)),y.setDate(y.getDate()+1);for(const L of f){const N=MR(L,n,e,1.5);h.push(...N)}const _=new Map;for(const L of h){const N=`${L.startDate}-${L.endDate}`,F=_.get(N);(!F||L.score>F.score)&&_.set(N,L)}const E=o.map(L=>({start:je(L.startDate),end:je(L.endDate)}));return Array.from(_.values()).filter(L=>{const N=je(L.startDate),F=je(L.endDate);return!E.some(q=>N<=q.end&&F>=q.start)}).sort((L,N)=>N.score-L.score).slice(0,l)},FR=({userProfile:n,holidays:e,plannedVacations:t,onSelectRecommendation:i})=>{const[o,l]=se.useState(!1),h=new Date().getMonth()>=9?new Date().getFullYear()+1:new Date().getFullYear(),[f,p]=se.useState(h),[y,_]=se.useState("all"),E=se.useMemo(()=>{const N=new Date(f,0,1),F=new Date(f,11,31);let ee=jR(n.workSchedule,e,N>new Date?N:new Date,F,t,1e4);return y==="short"?ee=ee.filter(oe=>oe.totalDays<=7):y==="medium"?ee=ee.filter(oe=>oe.totalDays>=8&&oe.totalDays<=14):y==="long"&&(ee=ee.filter(oe=>oe.totalDays>14)),ee.slice(0,10)},[n.workSchedule,e,t,f,y]),I=se.useMemo(()=>{const N=new Date,F=N.getFullYear();return N.getMonth()>=9?[F+1,F+2,F+3]:[F,F+1,F+2]},[]),R=(N,F)=>{const q=je(N),ee=je(F),oe={month:"short",day:"numeric",year:"numeric"},re=q.toLocaleDateString("en-US",oe),Ne=ee.toLocaleDateString("en-US",oe);return`${re} - ${Ne}`},L=N=>N>=80?{text:"Excellent",className:"excellent"}:N>=65?{text:"Great",className:"great"}:N>=50?{text:"Good",className:"good"}:{text:"Fair",className:"fair"};return o?T.jsxs("div",{className:"vacation-recommender",children:[T.jsxs("div",{className:"recommender-header",children:[T.jsxs("div",{className:"header-content",children:[T.jsxs("h2",{children:[T.jsx("span",{className:"icon",children:""}),"Vince's Top Picks!"]}),T.jsx("p",{className:"subtitle",children:"Maximize your time off by booking around holidays, weekends, and RDOs"})]}),T.jsx("button",{className:"collapse-button",onClick:()=>l(!1),"aria-label":"Hide recommendations",children:""})]}),T.jsxs("div",{className:"year-selector",children:[T.jsx("label",{children:"Show recommendations for:"}),T.jsx("div",{className:"year-buttons",children:I.map(N=>T.jsx("button",{className:f===N?"active":"",onClick:()=>p(N),children:N},N))})]}),T.jsxs("div",{className:"trip-length-filter",children:[T.jsx("label",{children:"Trip length:"}),T.jsxs("div",{className:"filter-buttons",children:[T.jsx("button",{className:y==="all"?"active":"",onClick:()=>_("all"),children:"All"}),T.jsx("button",{className:y==="short"?"active":"",onClick:()=>_("short"),children:"Short (1 wk)"}),T.jsx("button",{className:y==="medium"?"active":"",onClick:()=>_("medium"),children:"Medium (1-2 wks)"}),T.jsx("button",{className:y==="long"?"active":"",onClick:()=>_("long"),children:"Long (2+ wks)"})]})]}),E.length===0?T.jsxs("div",{className:"no-recommendations",children:[T.jsxs("p",{children:["No high-value vacation opportunities found for ",f,"."]}),T.jsx("p",{className:"hint",children:"Try selecting a different year or check your holiday calendar."})]}):T.jsxs("div",{className:"recommendations-list",children:[T.jsxs("div",{className:"list-header",children:[T.jsxs("span",{className:"header-label",children:["Top ",E.length," Opportunities"]}),T.jsxs("div",{className:"header-definitions",children:[T.jsx("span",{className:"efficiency-hint",children:"Efficiency = Days off  Work days used"}),T.jsx("span",{className:"bracketed-hint",children:"Bracketed = Starts/ends on free day with workdays outside"})]})]}),E.map((N,F)=>{const q=L(N.score);return T.jsxs("div",{className:"recommendation-card",children:[T.jsxs("div",{className:"card-header",children:[T.jsxs("div",{className:"rank-badge",children:["#",F+1]}),T.jsx("div",{className:"date-range",children:R(N.startDate,N.endDate)}),T.jsx("div",{className:`efficiency-badge ${q.className}`,children:q.text})]}),T.jsxs("div",{className:"card-stats",children:[T.jsxs("div",{className:"stat",children:[T.jsx("span",{className:"stat-value",children:N.totalDays}),T.jsx("span",{className:"stat-label",children:"days off"})]}),T.jsx("div",{className:"stat-divider",children:"for"}),T.jsxs("div",{className:"stat",children:[T.jsx("span",{className:"stat-value",children:N.vacationHours}),T.jsx("span",{className:"stat-label",children:"hours"})]}),T.jsx("div",{className:"stat-divider",children:"="}),T.jsxs("div",{className:"stat",children:[T.jsx("span",{className:"stat-value",children:N.efficiency===999?"":`${N.efficiency.toFixed(1)}x`}),T.jsx("span",{className:"stat-label",children:"value"})]})]}),T.jsxs("div",{className:"score-breakdown",children:[T.jsx("div",{className:"score-header",children:T.jsxs("span",{className:"score-title",children:["Composite Score: ",N.score.toFixed(1)]})}),T.jsxs("div",{className:"score-components",children:[T.jsxs("div",{className:"score-component",children:[T.jsx("div",{className:"score-bar-container",children:T.jsx("div",{className:"score-bar efficiency-bar",style:{width:`${Math.min(N.vacationHours===0?(N.totalDays>=4?3:1.5)/5*100:Math.min(N.efficiency,5)/5*100,100)}%`}})}),T.jsx("span",{className:"score-label",children:"Efficiency (50%)"})]}),T.jsxs("div",{className:"score-component",children:[T.jsx("div",{className:"score-bar-container",children:T.jsx("div",{className:"score-bar bracketing-bar",style:{width:N.isBracketed?"100%":"0%"}})}),T.jsx("span",{className:"score-label",children:"Bracketing (25%)"})]}),T.jsxs("div",{className:"score-component",children:[T.jsx("div",{className:"score-bar-container",children:T.jsx("div",{className:"score-bar length-bar",style:{width:`${Math.min(Math.log(N.totalDays)/Math.log(14)*100,100)}%`}})}),T.jsx("span",{className:"score-label",children:"Length (25%)"})]})]})]}),N.context&&T.jsx("div",{className:"card-context",children:N.context}),T.jsxs("div",{className:"card-breakdown",children:[N.isBracketed&&T.jsx("span",{className:"free-day-tag bracketed",children:"Bracketed"}),N.freeDays.weekends>0&&T.jsxs("span",{className:"free-day-tag weekend",children:[N.freeDays.weekends," weekend day",N.freeDays.weekends>1?"s":""]}),N.freeDays.holidays>0&&T.jsxs("span",{className:"free-day-tag holiday",children:[N.freeDays.holidays," holiday",N.freeDays.holidays>1?"s":""]}),N.freeDays.rdos>0&&T.jsxs("span",{className:"free-day-tag rdo",children:[N.freeDays.rdos," RDO",N.freeDays.rdos>1?"s":""]})]}),T.jsx("button",{className:"select-button",onClick:()=>i(N),children:"Add to Calendar"})]},N.id)})]}),T.jsx("div",{className:"recommender-footer",children:T.jsxs("p",{className:"tip",children:[T.jsx("strong",{children:"How it works:"}),' Recommendations are scored using a composite formula: 50% efficiency (days off  work days), 25% bracketing bonus (starts/ends on a free day with workdays outside), and 25% trip length. "Bracketed" vacations maximize your time off by beginning the day after your last workday and ending the day before your next workday.']})})]}):T.jsx("div",{className:"vacation-recommender-collapsed",children:T.jsxs("button",{className:"expand-button",onClick:()=>l(!0),"aria-label":"Show vacation recommendations",children:[T.jsx("span",{className:"icon",children:""}),T.jsx("span",{className:"text",children:"See Vince's Top Picks!"}),T.jsx("span",{className:"badge",children:E.length})]})})},UR=({weeklyBalances:n,plannedVacations:e,holidays:t,userProfile:i,onAddVacation:o,onUpdateVacation:l,onDeleteVacation:h,canAffordVacation:f})=>{const[p,y]=se.useState("idle"),[_,E]=se.useState(null),[I,R]=se.useState(null),[L,N]=se.useState(null),[F,q]=se.useState(!1),[ee,oe]=se.useState(""),[re,Ne]=se.useState(()=>localStorage.getItem("jpl-vacation-calendar-view-mode")||"2-month"),[ve,P]=se.useState(window.innerWidth>=768),[A,D]=se.useState(new Date),[b,x]=se.useState(null);se.useEffect(()=>{const X=()=>{re==="2-month"&&P(window.innerWidth>=768)};return window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[re]);const V=se.useMemo(()=>{if(n.length===0){const ce=new Date;return{start:new Date(ce.getFullYear(),ce.getMonth()-1,1),end:new Date(ce.getFullYear(),ce.getMonth()+3,0)}}const X=n[0],ue=n[n.length-1];return{start:je(X.weekStartDate),end:je(ue.weekEndDate)}},[n]),C=se.useMemo(()=>NR(n,e,t,i.workSchedule,V.start,V.end),[n,e,t,i.workSchedule,V]),Me=se.useCallback(()=>p==="selecting"&&_&&I?{start:_<I?_:I,end:_<I?I:_}:null,[p,_,I])(),We=X=>{const ue=Ho(X),ce=C.get(ue);if(ce!=null&&ce.isInVacation&&ce.vacationId){const ye=e.find(Ve=>Ve.id===ce.vacationId);if(ye){N(ye),q(!0),Fe();return}}if(p==="idle"){y("selecting"),E(X),oe("");return}if(p==="selecting"&&_){const[ye,Ve]=X<_?[X,_]:[_,X],{canAfford:vt,projectedBalance:St}=f({startDate:Dt(ye),endDate:Dt(Ve)});if(!vt){const qe=Us(ye,Ve,i.workSchedule,t);oe(`Insufficient balance. Need ${qe}h, will have ${St.toFixed(2)}h`),Fe();return}o({startDate:Dt(ye),endDate:Dt(Ve)}),Fe()}},Fe=()=>{y("idle"),E(null),R(null),oe("")};se.useEffect(()=>{const X=ue=>{const ce=ue.target;ce.tagName==="INPUT"||ce.tagName==="TEXTAREA"||ce.isContentEditable||(ue.key==="Escape"?Fe():ue.key==="ArrowLeft"?(ue.preventDefault(),x("backward"),D(ye=>new Date(ye.getFullYear(),ye.getMonth()-1,1)),setTimeout(()=>x(null),600)):ue.key==="ArrowRight"&&(ue.preventDefault(),x("forward"),D(ye=>new Date(ye.getFullYear(),ye.getMonth()+1,1)),setTimeout(()=>x(null),600)))};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[]);const ne=se.useCallback(({date:X,view:ue,activeStartDate:ce})=>{if(ue!=="month")return!1;const ye=ce.getMonth(),Ve=ce.getFullYear(),vt=new Date(Ve,ye+1,0);if(X<new Date(Ve,ye,1))return!0;const St=vt.getDay(),qe=St===6?0:(6-St+7)%7,On=new Date(Ve,ye,vt.getDate()+qe);return X>On},[]),le=se.useCallback(({date:X,activeStartDate:ue})=>{const ce=ue.getMonth(),ye=ue.getFullYear(),Ve=new Date(ye,ce+1,0);return X>Ve},[]),te=se.useCallback(({date:X,view:ue,activeStartDate:ce})=>{if(ue!=="month")return"";const ye=[];if(ne({date:X,view:ue,activeStartDate:ce}))return ye.push("react-calendar__tile--hidden"),ye.join(" ");le({date:X,activeStartDate:ce})&&ye.push("react-calendar__tile--next-month");const Ve=C.get(Ho(X));if(Ve!=null&&Ve.isInVacation&&ye.push("react-calendar__tile--vacation"),Ve!=null&&Ve.isHoliday&&ye.push("react-calendar__tile--holiday"),Ve!=null&&Ve.isRDO&&ye.push("react-calendar__tile--rdo"),Ve!=null&&Ve.types.includes(Wo.WEEKEND)&&ye.push("react-calendar__tile--weekend"),Me){const vt=X.getTime(),St=Me.start.getTime(),qe=Me.end.getTime();vt>=St&&vt<=qe&&ye.push("react-calendar__tile--in-selection"),vt===St&&ye.push("react-calendar__tile--selection-start"),vt===qe&&ye.push("react-calendar__tile--selection-end")}return ye.join(" ")},[C,Me,ne,le]),j=se.useCallback(({date:X,view:ue})=>{if(ue!=="month")return null;const ce=C.get(Ho(X)),ye=Me&&X>=Me.start&&X<=Me.end,Ve=_&&X.getTime()===_.getTime(),vt=I&&X.getTime()===I.getTime();return T.jsx("div",{className:"calendar-tile-wrapper",onMouseEnter:()=>{p==="selecting"&&_&&R(X)},children:T.jsx(bR,{dayInfo:ce,isInSelectionRange:!!ye,isSelectionStart:!!Ve,isSelectionEnd:!!vt&&p==="selecting"})})},[C,Me,_,I,p]),H=()=>{D(new Date)},_e=se.useMemo(()=>{const X=new Date,ue=A.getMonth(),ce=A.getFullYear();return ue===X.getMonth()&&ce===X.getFullYear()},[A]),Se=X=>{Ne(X),localStorage.setItem("jpl-vacation-calendar-view-mode",X),X==="2-month"&&P(window.innerWidth>=768)},xe=X=>{const{canAfford:ue,projectedBalance:ce}=f({startDate:X.startDate,endDate:X.endDate});if(!ue){oe(`Insufficient balance. Need ${X.vacationHours}h, will have ${ce.toFixed(2)}h`);return}o({startDate:X.startDate,endDate:X.endDate,description:`Recommended: ${X.context}`}),D(je(X.startDate))},Re=se.useMemo(()=>{const X=re==="12-month"?12:re==="6-month"?6:2,ue=[],ce=new Date(A);for(let ye=0;ye<X;ye++){const Ve=new Date(ce.getFullYear(),ce.getMonth()+ye,1);ue.push(Ve)}return ue},[A,re,ve]);return T.jsxs("div",{className:"calendar-view",children:[T.jsxs("div",{className:"banner-container",children:[p==="selecting"&&T.jsx("div",{className:"selection-banner",children:T.jsxs("span",{children:["Selecting vacation: Click the end date or"," ",T.jsx("button",{onClick:Fe,className:"cancel-link",children:"Cancel"})]})}),ee&&T.jsxs("div",{className:"error-banner",role:"alert",children:[ee,T.jsx("button",{onClick:()=>oe(""),className:"close-error",children:""})]})]}),T.jsxs("div",{className:"calendar-header-controls",children:[T.jsxs("div",{className:"view-toggle-buttons",role:"group","aria-label":"Calendar View Duration",children:[T.jsx("button",{onClick:()=>Se("2-month"),className:`view-toggle-button ${re==="2-month"?"active":""}`,"aria-pressed":re==="2-month",children:"2-Month View"}),T.jsx("button",{onClick:()=>Se("6-month"),className:`view-toggle-button ${re==="6-month"?"active":""}`,"aria-pressed":re==="6-month",children:"6-Month View"}),T.jsx("button",{onClick:()=>Se("12-month"),className:`view-toggle-button ${re==="12-month"?"active":""}`,"aria-pressed":re==="12-month",children:"12-Month View"})]}),T.jsx("button",{onClick:H,className:"jump-to-today-button",disabled:_e,title:_e?"Already viewing current month":"Jump to current month","aria-label":_e?"Already viewing current month":"Jump to current month",children:"Jump to Today"})]}),T.jsxs("div",{className:"calendar-navigation-controls",children:[T.jsx("button",{onClick:()=>{const X=new Date(A.getFullYear(),A.getMonth()-1,1);x("backward"),D(X),setTimeout(()=>x(null),600)},className:"calendar-nav-button",title:"Previous Month (Left Arrow)","aria-label":"Previous Month",children:" Previous"}),T.jsx("button",{onClick:()=>{const X=new Date(A.getFullYear(),A.getMonth()+1,1);x("forward"),D(X),setTimeout(()=>x(null),600)},className:"calendar-nav-button",title:"Next Month (Right Arrow)","aria-label":"Next Month",children:"Next "})]}),T.jsx("div",{className:`${re==="12-month"?"twelve-month-grid":re==="6-month"?"six-month-grid":"two-month-grid"} ${b?`slide-${b}`:""}`,children:Re.map((X,ue)=>T.jsxs("div",{className:`${re==="12-month"?"twelve-month-calendar":re==="6-month"?"six-month-calendar":"two-month-calendar"}`,children:[T.jsx("div",{className:`${re==="12-month"?"twelve-month-calendar-header":re==="6-month"?"six-month-calendar-header":"two-month-calendar-header"}`,children:X.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),T.jsx(RR,{showDoubleView:!1,showNeighboringMonth:!0,selectRange:!1,tileContent:j,tileClassName:te,onClickDay:We,minDetail:"month",maxDetail:"month",locale:"en-US",activeStartDate:X,showNavigation:!1})]},ue))}),T.jsx(FR,{userProfile:i,holidays:t,plannedVacations:e,onSelectRecommendation:xe}),T.jsx(OR,{vacation:L,isOpen:F,workSchedule:i.workSchedule,holidays:t,onSave:l,onDelete:h,onClose:()=>{q(!1),N(null)},canAffordVacation:f}),T.jsx(VR,{vacations:e,workSchedule:i.workSchedule,holidays:t,onEdit:X=>{N(X),q(!0)},onDelete:h})]})},BR=()=>T.jsxs("div",{className:"calendar-legend",children:[T.jsx("h3",{children:"Legend"}),T.jsxs("div",{className:"legend-items",children:[T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-indicator vacation",children:"V"}),T.jsx("span",{className:"legend-label",children:"Planned Vacation"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-indicator holiday",children:"H"}),T.jsx("span",{className:"legend-label",children:"Holiday"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-indicator rdo",children:"R"}),T.jsx("span",{className:"legend-label",children:"RDO (9/80)"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-indicator personal-day",children:"P"}),T.jsx("span",{className:"legend-label",children:"Personal Day"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-box weekend"}),T.jsx("span",{className:"legend-label",children:"Weekend"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-box balance-positive"}),T.jsx("span",{className:"legend-label",children:"Balance (on Sundays)"})]})]})]}),Kf=({context:n})=>{const[e,t]=se.useState(!1),i=()=>{t(!e)},l=n==="welcome"?{summary:"Your vacation data is stored privately on your device. Optionally sync across devices with Google.",details:T.jsxs("ul",{className:"privacy-details-list",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"Local Storage:"})," Your data is stored in your browser's localStorage, which is private to this device and not shared with anyone."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Optional Cloud Sync:"})," You can optionally enable cloud sync via your Google account to access your data across devices."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"No Third-Party Access:"})," We don't use analytics, tracking, or share your data with any third parties."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Data Collected:"})," JPL start date, current vacation balance, planned vacations, and work schedule preferences."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Your Control:"})," You can reset or delete all your data at any time using the reset button in the app."]})]})}:{summary:"Cloud sync uses your Google account to securely sync data across devices.",details:T.jsxs("ul",{className:"privacy-details-list",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"Google Authentication:"})," Sign in securely using your Google account credentials."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Firebase Platform:"})," Data is synced via Google Firebase, ensuring enterprise-grade security."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Encryption:"})," Your data is encrypted both in transit and at rest."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Access Control:"})," Only you can access your data via your Google account. No one else has access."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Data Synced:"})," Your vacation profile and planned vacations are synced across devices."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Disconnect Anytime:"})," You can disable cloud sync at any time. Your local data will remain on your device."]})]})};return T.jsxs("div",{className:"privacy-notice",children:[T.jsxs("div",{className:"privacy-summary",children:[T.jsx("span",{className:"privacy-icon",children:""}),T.jsx("span",{className:"privacy-text",children:l.summary}),T.jsx("button",{onClick:i,className:"privacy-toggle","aria-expanded":e,"aria-label":e?"Hide privacy details":"Show privacy details",children:e?"Show Less":"Learn More"})]}),e&&T.jsx("div",{className:"privacy-details",children:l.details})]})};function zR({isOpen:n=!0,onClose:e}){const{user:t,loading:i,error:o,isFirebaseAvailable:l,signInWithGoogle:h,signOut:f}=th();return!l||!n?null:i?T.jsxs("div",{className:"cloud-sync-settings loading","aria-busy":"true","aria-live":"polite",role:"status",children:[e&&T.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),T.jsx("div",{className:"spinner"}),T.jsx("p",{children:"Connecting to cloud..."})]}):t?T.jsxs("div",{className:"cloud-sync-settings signed-in",children:[e&&T.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),T.jsxs("div",{className:"sync-status",children:[T.jsx("div",{className:"sync-icon",children:""}),T.jsxs("div",{className:"sync-info",children:[T.jsx("div",{className:"sync-title",children:"Cloud Sync Enabled"}),T.jsx("div",{className:"sync-email",children:t.email}),T.jsx("div",{className:"sync-description",children:"Your vacation data is automatically synced across all your devices"})]})]}),T.jsx(Kf,{context:"cloudsync"}),T.jsx("button",{onClick:f,className:"sign-out-button",children:"Disable Cloud Sync"}),o&&T.jsx("div",{className:"error-message",children:o})]}):T.jsxs("div",{className:"cloud-sync-settings signed-out",children:[e&&T.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),T.jsxs("div",{className:"sync-promo",children:[T.jsx("div",{className:"sync-icon",children:""}),T.jsxs("div",{className:"sync-info",children:[T.jsx("div",{className:"sync-title",children:"Enable Cloud Sync"}),T.jsx("div",{className:"sync-description",children:"Sign in with Google to sync your vacation data across multiple devices and browsers"})]})]}),T.jsx(Kf,{context:"cloudsync"}),T.jsx("button",{onClick:h,className:"sign-in-button",children:"Sign in with Google"}),o&&T.jsx("div",{className:"error-message",children:o})]})}function $R({onClick:n}){const{user:e,isFirebaseAvailable:t}=th();if(!t)return null;const i=!!e,o=i?"Synced":"Sync",l=i?"Cloud sync enabled - Click to manage":"Click to enable cloud sync";return T.jsxs("button",{className:"sync-status-indicator",title:l,onClick:n,children:[T.jsx("span",{className:"sync-icon",children:""}),T.jsx("span",{className:"sync-text",children:o})]})}const WR=({onNewUser:n})=>{const{signInWithGoogle:e,error:t,loading:i,isFirebaseAvailable:o}=th(),[l,h]=se.useState(!1),f=async()=>{h(!0);try{await e()}catch(p){mt("Sign-in error",p),h(!1)}};return T.jsx("div",{className:"welcome-screen",children:T.jsxs("div",{className:"welcome-content",children:[T.jsx("h2",{children:"Welcome to JPL Vacation Forecast"}),T.jsx("p",{className:"welcome-subtitle",children:"Track your vacation balance and plan your time off"}),T.jsx(Kf,{context:"welcome"}),T.jsxs("div",{className:"user-choice-container",children:[T.jsxs("div",{className:"choice-card",children:[T.jsx("div",{className:"choice-icon",children:""}),T.jsx("h3",{children:"New User"}),T.jsx("p",{children:"Set up your vacation tracking profile"}),T.jsx("button",{onClick:n,className:"choice-button primary-button",disabled:l,children:"Get Started"})]}),o&&T.jsxs("div",{className:"choice-card",children:[T.jsx("div",{className:"choice-icon",children:""}),T.jsx("h3",{children:"Existing User"}),T.jsx("p",{children:"Sign in to sync your data across devices"}),T.jsx("button",{onClick:f,className:"choice-button secondary-button",disabled:i||l,children:l?"Signing in...":"Sign in with Google"})]})]}),t&&T.jsx("div",{className:"error-message",children:t}),!o&&T.jsx("div",{className:"info-message",children:"Cloud sync is not available. You can still use the app with local storage only."})]})})},a_=({message:n="Loading..."})=>T.jsx("div",{className:"loading-screen",children:T.jsxs("div",{className:"loading-content",children:[T.jsx("div",{className:"spinner"}),T.jsx("p",{className:"loading-message",children:n})]})}),HR=()=>{const{userProfile:n,setUserProfile:e,plannedVacations:t,addPlannedVacation:i,updatePlannedVacation:o,deletePlannedVacation:l,holidays:h,setHolidays:f,weeklyBalances:p,forecastPeriod:y,canAffordVacation:_}=GD(),{defaultHolidays:E}=JD((n==null?void 0:n.workSchedule)??null,y.startDate,y.endDate),{user:I,loading:R,initialSyncComplete:L}=th(),[N,F]=se.useState(()=>localStorage.getItem("theme")==="dark"),[q,ee]=se.useState(!0),[oe,re]=se.useState(!1);se.useEffect(()=>{I&&L&&ee(!1)},[I,L]),se.useEffect(()=>{const P=document.documentElement;N?(P.classList.add("dark"),localStorage.setItem("theme","dark")):(P.classList.remove("dark"),localStorage.setItem("theme","light"))},[N]);const Ne=()=>{F(!N)};se.useEffect(()=>{if(!n||E.length===0)return;const P="jpl-vacation-holidays-version",A=localStorage.getItem(P),D=ME.version,b=()=>{f(E),localStorage.setItem(P,D)};if(h.length===0){b();return}if(A!==D){b();return}if(h.length!==E.length||h.some((C,Oe)=>{const Me=E[Oe];return!Me||C.date!==Me.date||C.hours!==Me.hours})){b();return}h.some(C=>C.date&&C.date.startsWith("2027"))||b()},[n,h,E,f]);const ve=()=>R?T.jsx(a_,{message:"Checking authentication..."}):n?T.jsxs("div",{className:"dashboard",children:[T.jsx("div",{className:"dashboard-header",children:T.jsx("button",{onClick:()=>e(null),className:"reset-button",children:"Reset Profile"})}),T.jsx(zR,{isOpen:q,onClose:()=>ee(!1)}),T.jsx(BR,{}),T.jsx(UR,{weeklyBalances:p,plannedVacations:t,holidays:h,userProfile:n,onAddVacation:i,onUpdateVacation:o,onDeleteVacation:l,canAffordVacation:_})]}):I&&!n?L?T.jsx(qv,{onSubmit:e,onBack:()=>re(!1)}):T.jsx(a_,{message:"Loading your data..."}):oe?T.jsx(qv,{onSubmit:e,onBack:()=>re(!1)}):T.jsx(WR,{onNewUser:()=>re(!0)});return T.jsxs("div",{className:"app",children:[T.jsx("header",{className:"app-header",children:T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[T.jsx("h1",{children:"JPL Vacation Forecast "}),T.jsxs("div",{style:{display:"flex",gap:"12px",marginLeft:"auto",alignItems:"center"},children:[T.jsx($R,{onClick:()=>ee(!q)}),T.jsx("button",{onClick:Ne,className:"reset-button","aria-label":N?"Switch to light mode":"Switch to dark mode",children:N?" Light Mode":" Dark Mode"})]})]})}),T.jsx("main",{className:"app-main",children:ve()})]})},c0=document.getElementById("root");if(!c0)throw new Error("Failed to find the root element");DT.createRoot(c0).render(T.jsx(u_.StrictMode,{children:T.jsx(HR,{})}));

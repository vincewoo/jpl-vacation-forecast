var nT=Object.defineProperty;var rT=(n,e,t)=>e in n?nT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ka=(n,e,t)=>rT(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function qv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ad={exports:{}},Ya={},Cd={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function iT(){if(Kg)return be;Kg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function I(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,$={};function U(V,H,Te){this.props=V,this.context=H,this.refs=$,this.updater=Te||O}U.prototype.isReactComponent={},U.prototype.setState=function(V,H){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,H,"setState")},U.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function X(){}X.prototype=U.prototype;function re(V,H,Te){this.props=V,this.context=H,this.refs=$,this.updater=Te||O}var me=re.prototype=new X;me.constructor=re,W(me,U.prototype),me.isPureReactComponent=!0;var ae=Array.isArray,Oe=Object.prototype.hasOwnProperty,le={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function S(V,H,Te){var Ie,Ne={},J=null,ye=null;if(H!=null)for(Ie in H.ref!==void 0&&(ye=H.ref),H.key!==void 0&&(J=""+H.key),H)Oe.call(H,Ie)&&!D.hasOwnProperty(Ie)&&(Ne[Ie]=H[Ie]);var de=arguments.length-2;if(de===1)Ne.children=Te;else if(1<de){for(var oe=Array(de),Ae=0;Ae<de;Ae++)oe[Ae]=arguments[Ae+2];Ne.children=oe}if(V&&V.defaultProps)for(Ie in de=V.defaultProps,de)Ne[Ie]===void 0&&(Ne[Ie]=de[Ie]);return{$$typeof:n,type:V,key:J,ref:ye,props:Ne,_owner:le.current}}function P(V,H){return{$$typeof:n,type:V.type,key:H,ref:V.ref,props:V.props,_owner:V._owner}}function x(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function N(V){var H={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Te){return H[Te]})}var L=/\/+/g;function C(V,H){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):H.toString(36)}function je(V,H,Te,Ie,Ne){var J=typeof V;(J==="undefined"||J==="boolean")&&(V=null);var ye=!1;if(V===null)ye=!0;else switch(J){case"string":case"number":ye=!0;break;case"object":switch(V.$$typeof){case n:case e:ye=!0}}if(ye)return ye=V,Ne=Ne(ye),V=Ie===""?"."+C(ye,0):Ie,ae(Ne)?(Te="",V!=null&&(Te=V.replace(L,"$&/")+"/"),je(Ne,H,Te,"",function(Ae){return Ae})):Ne!=null&&(x(Ne)&&(Ne=P(Ne,Te+(!Ne.key||ye&&ye.key===Ne.key?"":(""+Ne.key).replace(L,"$&/")+"/")+V)),H.push(Ne)),1;if(ye=0,Ie=Ie===""?".":Ie+":",ae(V))for(var de=0;de<V.length;de++){J=V[de];var oe=Ie+C(J,de);ye+=je(J,H,Te,oe,Ne)}else if(oe=I(V),typeof oe=="function")for(V=oe.call(V),de=0;!(J=V.next()).done;)J=J.value,oe=Ie+C(J,de++),ye+=je(J,H,Te,oe,Ne);else if(J==="object")throw H=String(V),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ye}function He(V,H,Te){if(V==null)return V;var Ie=[],Ne=0;return je(V,Ie,"","",function(J){return H.call(Te,J,Ne++)}),Ie}function $e(V){if(V._status===-1){var H=V._result;H=H(),H.then(function(Te){(V._status===0||V._status===-1)&&(V._status=1,V._result=Te)},function(Te){(V._status===0||V._status===-1)&&(V._status=2,V._result=Te)}),V._status===-1&&(V._status=0,V._result=H)}if(V._status===1)return V._result.default;throw V._result}var Ue={current:null},te={transition:null},ue={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:te,ReactCurrentOwner:le};function ee(){throw Error("act(...) is not supported in production builds of React.")}return be.Children={map:He,forEach:function(V,H,Te){He(V,function(){H.apply(this,arguments)},Te)},count:function(V){var H=0;return He(V,function(){H++}),H},toArray:function(V){return He(V,function(H){return H})||[]},only:function(V){if(!x(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},be.Component=U,be.Fragment=t,be.Profiler=o,be.PureComponent=re,be.StrictMode=i,be.Suspense=g,be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,be.act=ee,be.cloneElement=function(V,H,Te){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Ie=W({},V.props),Ne=V.key,J=V.ref,ye=V._owner;if(H!=null){if(H.ref!==void 0&&(J=H.ref,ye=le.current),H.key!==void 0&&(Ne=""+H.key),V.type&&V.type.defaultProps)var de=V.type.defaultProps;for(oe in H)Oe.call(H,oe)&&!D.hasOwnProperty(oe)&&(Ie[oe]=H[oe]===void 0&&de!==void 0?de[oe]:H[oe])}var oe=arguments.length-2;if(oe===1)Ie.children=Te;else if(1<oe){de=Array(oe);for(var Ae=0;Ae<oe;Ae++)de[Ae]=arguments[Ae+2];Ie.children=de}return{$$typeof:n,type:V.type,key:Ne,ref:J,props:Ie,_owner:ye}},be.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},be.createElement=S,be.createFactory=function(V){var H=S.bind(null,V);return H.type=V,H},be.createRef=function(){return{current:null}},be.forwardRef=function(V){return{$$typeof:f,render:V}},be.isValidElement=x,be.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:$e}},be.memo=function(V,H){return{$$typeof:y,type:V,compare:H===void 0?null:H}},be.startTransition=function(V){var H=te.transition;te.transition={};try{V()}finally{te.transition=H}},be.unstable_act=ee,be.useCallback=function(V,H){return Ue.current.useCallback(V,H)},be.useContext=function(V){return Ue.current.useContext(V)},be.useDebugValue=function(){},be.useDeferredValue=function(V){return Ue.current.useDeferredValue(V)},be.useEffect=function(V,H){return Ue.current.useEffect(V,H)},be.useId=function(){return Ue.current.useId()},be.useImperativeHandle=function(V,H,Te){return Ue.current.useImperativeHandle(V,H,Te)},be.useInsertionEffect=function(V,H){return Ue.current.useInsertionEffect(V,H)},be.useLayoutEffect=function(V,H){return Ue.current.useLayoutEffect(V,H)},be.useMemo=function(V,H){return Ue.current.useMemo(V,H)},be.useReducer=function(V,H,Te){return Ue.current.useReducer(V,H,Te)},be.useRef=function(V){return Ue.current.useRef(V)},be.useState=function(V){return Ue.current.useState(V)},be.useSyncExternalStore=function(V,H,Te){return Ue.current.useSyncExternalStore(V,H,Te)},be.useTransition=function(){return Ue.current.useTransition()},be.version="18.3.1",be}var Yg;function Mf(){return Yg||(Yg=1,Cd.exports=iT()),Cd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function sT(){if(Qg)return Ya;Qg=1;var n=Mf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var _,E={},I=null,O=null;y!==void 0&&(I=""+y),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(O=g.ref);for(_ in g)i.call(g,_)&&!l.hasOwnProperty(_)&&(E[_]=g[_]);if(f&&f.defaultProps)for(_ in g=f.defaultProps,g)E[_]===void 0&&(E[_]=g[_]);return{$$typeof:e,type:f,key:I,ref:O,props:E,_owner:o.current}}return Ya.Fragment=t,Ya.jsx=h,Ya.jsxs=h,Ya}var Xg;function oT(){return Xg||(Xg=1,Ad.exports=sT()),Ad.exports}var k=oT(),he=Mf();const Gv=qv(he);var Fu={},kd={exports:{}},mn={},Pd={exports:{}},Rd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function aT(){return Jg||(Jg=1,(function(n){function e(te,ue){var ee=te.length;te.push(ue);e:for(;0<ee;){var V=ee-1>>>1,H=te[V];if(0<o(H,ue))te[V]=ue,te[ee]=H,ee=V;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var ue=te[0],ee=te.pop();if(ee!==ue){te[0]=ee;e:for(var V=0,H=te.length,Te=H>>>1;V<Te;){var Ie=2*(V+1)-1,Ne=te[Ie],J=Ie+1,ye=te[J];if(0>o(Ne,ee))J<H&&0>o(ye,Ne)?(te[V]=ye,te[J]=ee,V=J):(te[V]=Ne,te[Ie]=ee,V=Ie);else if(J<H&&0>o(ye,ee))te[V]=ye,te[J]=ee,V=J;else break e}}return ue}function o(te,ue){var ee=te.sortIndex-ue.sortIndex;return ee!==0?ee:te.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var g=[],y=[],_=1,E=null,I=3,O=!1,W=!1,$=!1,U=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function me(te){for(var ue=t(y);ue!==null;){if(ue.callback===null)i(y);else if(ue.startTime<=te)i(y),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=t(y)}}function ae(te){if($=!1,me(te),!W)if(t(g)!==null)W=!0,$e(Oe);else{var ue=t(y);ue!==null&&Ue(ae,ue.startTime-te)}}function Oe(te,ue){W=!1,$&&($=!1,X(S),S=-1),O=!0;var ee=I;try{for(me(ue),E=t(g);E!==null&&(!(E.expirationTime>ue)||te&&!N());){var V=E.callback;if(typeof V=="function"){E.callback=null,I=E.priorityLevel;var H=V(E.expirationTime<=ue);ue=n.unstable_now(),typeof H=="function"?E.callback=H:E===t(g)&&i(g),me(ue)}else i(g);E=t(g)}if(E!==null)var Te=!0;else{var Ie=t(y);Ie!==null&&Ue(ae,Ie.startTime-ue),Te=!1}return Te}finally{E=null,I=ee,O=!1}}var le=!1,D=null,S=-1,P=5,x=-1;function N(){return!(n.unstable_now()-x<P)}function L(){if(D!==null){var te=n.unstable_now();x=te;var ue=!0;try{ue=D(!0,te)}finally{ue?C():(le=!1,D=null)}}else le=!1}var C;if(typeof re=="function")C=function(){re(L)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,He=je.port2;je.port1.onmessage=L,C=function(){He.postMessage(null)}}else C=function(){U(L,0)};function $e(te){D=te,le||(le=!0,C())}function Ue(te,ue){S=U(function(){te(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_continueExecution=function(){W||O||(W=!0,$e(Oe))},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(g)},n.unstable_next=function(te){switch(I){case 1:case 2:case 3:var ue=3;break;default:ue=I}var ee=I;I=ue;try{return te()}finally{I=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(te,ue){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ee=I;I=te;try{return ue()}finally{I=ee}},n.unstable_scheduleCallback=function(te,ue,ee){var V=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?V+ee:V):ee=V,te){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ee+H,te={id:_++,callback:ue,priorityLevel:te,startTime:ee,expirationTime:H,sortIndex:-1},ee>V?(te.sortIndex=ee,e(y,te),t(g)===null&&te===t(y)&&($?(X(S),S=-1):$=!0,Ue(ae,ee-V))):(te.sortIndex=H,e(g,te),W||O||(W=!0,$e(Oe))),te},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(te){var ue=I;return function(){var ee=I;I=ue;try{return te.apply(this,arguments)}finally{I=ee}}}})(Rd)),Rd}var Zg;function lT(){return Zg||(Zg=1,Pd.exports=aT()),Pd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function uT(){if(ey)return mn;ey=1;var n=Mf(),e=lT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function I(r){return g.call(E,r)?!0:g.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function O(r,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function W(r,s,a,c){if(s===null||typeof s>"u"||O(r,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function $(r,s,a,c,d,p,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=p,this.removeEmptyString=w}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){U[r]=new $(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];U[s]=new $(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){U[r]=new $(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){U[r]=new $(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){U[r]=new $(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){U[r]=new $(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){U[r]=new $(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){U[r]=new $(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){U[r]=new $(r,5,!1,r.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function re(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(X,re);U[s]=new $(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(X,re);U[s]=new $(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(X,re);U[s]=new $(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){U[r]=new $(r,1,!1,r.toLowerCase(),null,!1,!1)}),U.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){U[r]=new $(r,1,!1,r.toLowerCase(),null,!0,!0)});function me(r,s,a,c){var d=U.hasOwnProperty(s)?U[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(W(s,a,d,c)&&(a=null),c||d===null?I(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?r.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?r.setAttributeNS(c,s,a):r.setAttribute(s,a))))}var ae=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oe=Symbol.for("react.element"),le=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),$e=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),te=Symbol.iterator;function ue(r){return r===null||typeof r!="object"?null:(r=te&&r[te]||r["@@iterator"],typeof r=="function"?r:null)}var ee=Object.assign,V;function H(r){if(V===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||""}return`
`+V+r}var Te=!1;function Ie(r,s){if(!r||Te)return"";Te=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var c=z}Reflect.construct(r,[],s)}else{try{s.call()}catch(z){c=z}r.call(s.prototype)}else{try{throw Error()}catch(z){c=z}r()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,A=p.length-1;1<=w&&0<=A&&d[w]!==p[A];)A--;for(;1<=w&&0<=A;w--,A--)if(d[w]!==p[A]){if(w!==1||A!==1)do if(w--,A--,0>A||d[w]!==p[A]){var R=`
`+d[w].replace(" at new "," at ");return r.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",r.displayName)),R}while(1<=w&&0<=A);break}}}finally{Te=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?H(r):""}function Ne(r){switch(r.tag){case 5:return H(r.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return r=Ie(r.type,!1),r;case 11:return r=Ie(r.type.render,!1),r;case 1:return r=Ie(r.type,!0),r;default:return""}}function J(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case le:return"Portal";case P:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case je:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case N:return(r.displayName||"Context")+".Consumer";case x:return(r._context.displayName||"Context")+".Provider";case L:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case He:return s=r.displayName||null,s!==null?s:J(r.type)||"Memo";case $e:s=r._payload,r=r._init;try{return J(r(s))}catch{}}return null}function ye(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function de(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function oe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ae(r){var s=oe(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function gt(r){r._valueTracker||(r._valueTracker=Ae(r))}function bt(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=oe(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function Ct(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Ye(r,s){var a=s.checked;return ee({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function ar(r,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=de(s.value!=null?s.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function kt(r,s){s=s.checked,s!=null&&me(r,"checked",s,!1)}function On(r,s){kt(r,s);var a=de(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?ut(r,s.type,a):s.hasOwnProperty("defaultValue")&&ut(r,s.type,de(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function gi(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function ut(r,s,a){(s!=="number"||Ct(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var ct=Array.isArray;function yn(r,s,a,c){if(r=r.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=s.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&c&&(r[a].defaultSelected=!0)}else{for(a=""+de(a),s=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,c&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function us(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function yi(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(ct(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:de(a)}}function Zs(r,s){var a=de(s.value),c=de(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function lr(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function cs(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vi(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?cs(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ur,_i=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return r(s,a,c,d)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(ur=ur||document.createElement("div"),ur.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ur.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function cr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Gn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eo=["Webkit","ms","Moz","O"];Object.keys(Gn).forEach(function(r){eo.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Gn[s]=Gn[r]})});function vn(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Gn.hasOwnProperty(r)&&Gn[r]?(""+s).trim():s+"px"}function Ur(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=vn(a,s[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,d):r[a]=d}}var hs=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function an(r,s){if(s){if(hs[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function zr(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bn=null;function wi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Vn=null,Kn=null,et=null;function Et(r){if(r=Oa(r)){if(typeof Vn!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Zl(s),Vn(r.stateNode,r.type,s))}}function ht(r){Kn?et?et.push(r):et=[r]:Kn=r}function _n(){if(Kn){var r=Kn,s=et;if(et=Kn=null,Et(r),s)for(r=0;r<s.length;r++)Et(s[r])}}function Qe(r,s){return r(s)}function rn(){}var Ln=!1;function Ei(r,s,a){if(Ln)return r(s,a);Ln=!0;try{return Qe(r,s,a)}finally{Ln=!1,(Kn!==null||et!==null)&&(rn(),_n())}}function hr(r,s){var a=r.stateNode;if(a===null)return null;var c=Zl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Yn=!1;if(f)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{Yn=!1}function Br(r,s,a,c,d,p,w,A,R){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(Y){this.onError(Y)}}var wn=!1,ln=null,dr=!1,un=null,Ti={onError:function(r){wn=!0,ln=r}};function ds(r,s,a,c,d,p,w,A,R){wn=!1,ln=null,Br.apply(Ti,arguments)}function fs(r,s,a,c,d,p,w,A,R){if(ds.apply(this,arguments),wn){if(wn){var z=ln;wn=!1,ln=null}else throw Error(t(198));dr||(dr=!0,un=z)}}function En(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function xe(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Xe(r){if(En(r)!==r)throw Error(t(188))}function tt(r){var s=r.alternate;if(!s){if(s=En(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,c=s;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Xe(d),r;if(p===c)return Xe(d),s;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,A=d.child;A;){if(A===a){w=!0,a=d,c=p;break}if(A===c){w=!0,c=d,a=p;break}A=A.sibling}if(!w){for(A=p.child;A;){if(A===a){w=!0,a=p,c=d;break}if(A===c){w=!0,c=p,a=d;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function Gt(r){return r=tt(r),r!==null?Pt(r):null}function Pt(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Pt(r);if(s!==null)return s;r=r.sibling}return null}var $r=e.unstable_scheduleCallback,Ii=e.unstable_cancelCallback,Wr=e.unstable_shouldYield,Hr=e.unstable_requestPaint,nt=e.unstable_now,nh=e.unstable_getCurrentPriorityLevel,to=e.unstable_ImmediatePriority,ca=e.unstable_UserBlockingPriority,ps=e.unstable_NormalPriority,ha=e.unstable_LowPriority,no=e.unstable_IdlePriority,ms=null,Tn=null;function Ll(r){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(ms,r,void 0,(r.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:gs,fr=Math.log,Fn=Math.LN2;function gs(r){return r>>>=0,r===0?32:31-(fr(r)/Fn|0)|0}var pr=64,Si=4194304;function qe(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function qr(r,s){var a=r.pendingLanes;if(a===0)return 0;var c=0,d=r.suspendedLanes,p=r.pingedLanes,w=a&268435455;if(w!==0){var A=w&~d;A!==0?c=qe(A):(p&=w,p!==0&&(c=qe(p)))}else w=a&~d,w!==0?c=qe(w):p!==0&&(c=qe(p));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,p=s&-s,d>=p||d===16&&(p&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)a=31-In(s),d=1<<a,c|=r[a],s&=~d;return c}function ys(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vs(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,p=r.pendingLanes;0<p;){var w=31-In(p),A=1<<w,R=d[w];R===-1?((A&a)===0||(A&c)!==0)&&(d[w]=ys(A,s)):R<=s&&(r.expiredLanes|=A),p&=~A}}function da(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function fa(){var r=pr;return pr<<=1,(pr&4194240)===0&&(pr=64),r}function pa(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function _s(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-In(s),r[s]=a}function rh(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-In(a),p=1<<d;s[d]=0,c[d]=-1,r[d]=-1,a&=~p}}function ma(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-In(a),d=1<<c;d&s|r[c]&s&&(r[c]|=s),a&=~d}}var Fe=0;function mr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ga,ro,ya,va,_a,gr=!1,io=[],yr=null,vr=null,jt=null,ws=new Map,Gr=new Map,Sn=[],Ml="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ai(r,s){switch(r){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":ws.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(s.pointerId)}}function Qn(r,s,a,c,d,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},s!==null&&(s=Oa(s),s!==null&&ro(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function Fl(r,s,a,c,d){switch(s){case"focusin":return yr=Qn(yr,r,s,a,c,d),!0;case"dragenter":return vr=Qn(vr,r,s,a,c,d),!0;case"mouseover":return jt=Qn(jt,r,s,a,c,d),!0;case"pointerover":var p=d.pointerId;return ws.set(p,Qn(ws.get(p)||null,r,s,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Gr.set(p,Qn(Gr.get(p)||null,r,s,a,c,d)),!0}return!1}function so(r){var s=Ss(r.target);if(s!==null){var a=En(s);if(a!==null){if(s=a.tag,s===13){if(s=xe(a),s!==null){r.blockedOn=s,_a(r.priority,function(){ya(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Je(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=oo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);bn=c,a.target.dispatchEvent(c),bn=null}else return s=Oa(a),s!==null&&ro(s),r.blockedOn=a,!1;s.shift()}return!0}function jl(r,s,a){Je(r)&&a.delete(s)}function ih(){gr=!1,yr!==null&&Je(yr)&&(yr=null),vr!==null&&Je(vr)&&(vr=null),jt!==null&&Je(jt)&&(jt=null),ws.forEach(jl),Gr.forEach(jl)}function Ci(r,s){r.blockedOn===s&&(r.blockedOn=null,gr||(gr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ih)))}function ki(r){function s(d){return Ci(d,r)}if(0<io.length){Ci(io[0],r);for(var a=1;a<io.length;a++){var c=io[a];c.blockedOn===r&&(c.blockedOn=null)}}for(yr!==null&&Ci(yr,r),vr!==null&&Ci(vr,r),jt!==null&&Ci(jt,r),ws.forEach(s),Gr.forEach(s),a=0;a<Sn.length;a++)c=Sn[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<Sn.length&&(a=Sn[0],a.blockedOn===null);)so(a),a.blockedOn===null&&Sn.shift()}var Kr=ae.ReactCurrentBatchConfig,Yr=!0;function _r(r,s,a,c){var d=Fe,p=Kr.transition;Kr.transition=null;try{Fe=1,wa(r,s,a,c)}finally{Fe=d,Kr.transition=p}}function Ul(r,s,a,c){var d=Fe,p=Kr.transition;Kr.transition=null;try{Fe=4,wa(r,s,a,c)}finally{Fe=d,Kr.transition=p}}function wa(r,s,a,c){if(Yr){var d=oo(r,s,a,c);if(d===null)mh(r,s,c,wr,a),Ai(r,c);else if(Fl(d,r,s,a,c))c.stopPropagation();else if(Ai(r,c),s&4&&-1<Ml.indexOf(r)){for(;d!==null;){var p=Oa(d);if(p!==null&&ga(p),p=oo(r,s,a,c),p===null&&mh(r,s,c,wr,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else mh(r,s,c,null,a)}}var wr=null;function oo(r,s,a,c){if(wr=null,r=wi(c),r=Ss(r),r!==null)if(s=En(r),s===null)r=null;else if(a=s.tag,a===13){if(r=xe(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return wr=r,null}function ao(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nh()){case to:return 1;case ca:return 4;case ps:case ha:return 16;case no:return 536870912;default:return 16}default:return 16}}var An=null,lo=null,Qr=null;function zl(){if(Qr)return Qr;var r,s=lo,a=s.length,c,d="value"in An?An.value:An.textContent,p=d.length;for(r=0;r<a&&s[r]===d[r];r++);var w=a-r;for(c=1;c<=w&&s[a-c]===d[p-c];c++);return Qr=d.slice(r,1<c?1-c:void 0)}function Es(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Er(){return!0}function Ea(){return!1}function Kt(r){function s(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(a=r[A],this[A]=a?a(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Er:Ea,this.isPropagationStopped=Ea,this}return ee(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),s}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ts=Kt(Tr),Pi=ee({},Tr,{view:0,detail:0}),uo=Kt(Pi),co,ho,Cn,Is=ee({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Cn&&(Cn&&r.type==="mousemove"?(co=r.screenX-Cn.screenX,ho=r.screenY-Cn.screenY):ho=co=0,Cn=r),co)},movementY:function(r){return"movementY"in r?r.movementY:ho}}),Ta=Kt(Is),Bl=ee({},Is,{dataTransfer:0}),$l=Kt(Bl),fo=ee({},Pi,{relatedTarget:0}),Ut=Kt(fo),Wl=ee({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hl=Kt(Wl),Ri=ee({},Tr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=Kt(Ri),m=ee({},Tr,{data:0}),v=Kt(m),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ne(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=B[r])?!!s[r]:!1}function Re(){return ne}var vt=ee({},Pi,{key:function(r){if(r.key){var s=T[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Es(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?F[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(r){return r.type==="keypress"?Es(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Es(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ke=Kt(vt),Tt=ee({},Is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kn=Kt(Tt),Xr=ee({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),Ir=Kt(Xr),Sr=ee({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),po=Kt(Sr),Ia=ee({},Is,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),QE=Kt(Ia),XE=[9,13,27,32],sh=f&&"CompositionEvent"in window,Sa=null;f&&"documentMode"in document&&(Sa=document.documentMode);var JE=f&&"TextEvent"in window&&!Sa,Up=f&&(!sh||Sa&&8<Sa&&11>=Sa),zp=" ",Bp=!1;function $p(r,s){switch(r){case"keyup":return XE.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var mo=!1;function ZE(r,s){switch(r){case"compositionend":return Wp(s);case"keypress":return s.which!==32?null:(Bp=!0,zp);case"textInput":return r=s.data,r===zp&&Bp?null:r;default:return null}}function e0(r,s){if(mo)return r==="compositionend"||!sh&&$p(r,s)?(r=zl(),Qr=lo=An=null,mo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Up&&s.locale!=="ko"?null:s.data;default:return null}}var t0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!t0[r.type]:s==="textarea"}function qp(r,s,a,c){ht(c),s=Ql(s,"onChange"),0<s.length&&(a=new Ts("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var Aa=null,Ca=null;function n0(r){cm(r,0)}function ql(r){var s=wo(r);if(bt(s))return r}function r0(r,s){if(r==="change")return s}var Gp=!1;if(f){var oh;if(f){var ah="oninput"in document;if(!ah){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),ah=typeof Kp.oninput=="function"}oh=ah}else oh=!1;Gp=oh&&(!document.documentMode||9<document.documentMode)}function Yp(){Aa&&(Aa.detachEvent("onpropertychange",Qp),Ca=Aa=null)}function Qp(r){if(r.propertyName==="value"&&ql(Ca)){var s=[];qp(s,Ca,r,wi(r)),Ei(n0,s)}}function i0(r,s,a){r==="focusin"?(Yp(),Aa=s,Ca=a,Aa.attachEvent("onpropertychange",Qp)):r==="focusout"&&Yp()}function s0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ql(Ca)}function o0(r,s){if(r==="click")return ql(s)}function a0(r,s){if(r==="input"||r==="change")return ql(s)}function l0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Xn=typeof Object.is=="function"?Object.is:l0;function ka(r,s){if(Xn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(s,d)||!Xn(r[d],s[d]))return!1}return!0}function Xp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Jp(r,s){var a=Xp(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xp(a)}}function Zp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Zp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function em(){for(var r=window,s=Ct();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Ct(r.document)}return s}function lh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function u0(r){var s=em(),a=r.focusedElem,c=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&Zp(a.ownerDocument.documentElement,a)){if(c!==null&&lh(a)){if(s=c.start,r=c.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!r.extend&&p>c&&(d=c,c=p,p=d),d=Jp(a,p);var w=Jp(a,c);d&&w&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),r.removeAllRanges(),p>c?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var c0=f&&"documentMode"in document&&11>=document.documentMode,go=null,uh=null,Pa=null,ch=!1;function tm(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ch||go==null||go!==Ct(c)||(c=go,"selectionStart"in c&&lh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Pa&&ka(Pa,c)||(Pa=c,c=Ql(uh,"onSelect"),0<c.length&&(s=new Ts("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=go)))}function Gl(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var yo={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionend:Gl("Transition","TransitionEnd")},hh={},nm={};f&&(nm=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function Kl(r){if(hh[r])return hh[r];if(!yo[r])return r;var s=yo[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in nm)return hh[r]=s[a];return r}var rm=Kl("animationend"),im=Kl("animationiteration"),sm=Kl("animationstart"),om=Kl("transitionend"),am=new Map,lm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(r,s){am.set(r,s),l(s,[r])}for(var dh=0;dh<lm.length;dh++){var fh=lm[dh],h0=fh.toLowerCase(),d0=fh[0].toUpperCase()+fh.slice(1);Di(h0,"on"+d0)}Di(rm,"onAnimationEnd"),Di(im,"onAnimationIteration"),Di(sm,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(om,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function um(r,s,a){var c=r.type||"unknown-event";r.currentTarget=a,fs(c,s,void 0,r),r.currentTarget=null}function cm(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],d=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var w=c.length-1;0<=w;w--){var A=c[w],R=A.instance,z=A.currentTarget;if(A=A.listener,R!==p&&d.isPropagationStopped())break e;um(d,A,z),p=R}else for(w=0;w<c.length;w++){if(A=c[w],R=A.instance,z=A.currentTarget,A=A.listener,R!==p&&d.isPropagationStopped())break e;um(d,A,z),p=R}}}if(dr)throw r=un,dr=!1,un=null,r}function rt(r,s){var a=s[Eh];a===void 0&&(a=s[Eh]=new Set);var c=r+"__bubble";a.has(c)||(hm(s,r,2,!1),a.add(c))}function ph(r,s,a){var c=0;s&&(c|=4),hm(a,r,c,s)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function Da(r){if(!r[Yl]){r[Yl]=!0,i.forEach(function(a){a!=="selectionchange"&&(f0.has(a)||ph(a,!1,r),ph(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Yl]||(s[Yl]=!0,ph("selectionchange",!1,s))}}function hm(r,s,a,c){switch(ao(s)){case 1:var d=_r;break;case 4:d=Ul;break;default:d=wa}a=d.bind(null,s,a,r),d=void 0,!Yn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?r.addEventListener(s,a,{capture:!0,passive:d}):r.addEventListener(s,a,!0):d!==void 0?r.addEventListener(s,a,{passive:d}):r.addEventListener(s,a,!1)}function mh(r,s,a,c,d){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var R=w.tag;if((R===3||R===4)&&(R=w.stateNode.containerInfo,R===d||R.nodeType===8&&R.parentNode===d))return;w=w.return}for(;A!==null;){if(w=Ss(A),w===null)return;if(R=w.tag,R===5||R===6){c=p=w;continue e}A=A.parentNode}}c=c.return}Ei(function(){var z=p,Y=wi(a),Q=[];e:{var G=am.get(r);if(G!==void 0){var ie=Ts,fe=r;switch(r){case"keypress":if(Es(a)===0)break e;case"keydown":case"keyup":ie=Ke;break;case"focusin":fe="focus",ie=Ut;break;case"focusout":fe="blur",ie=Ut;break;case"beforeblur":case"afterblur":ie=Ut;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Ta;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=$l;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=Ir;break;case rm:case im:case sm:ie=Hl;break;case om:ie=po;break;case"scroll":ie=uo;break;case"wheel":ie=QE;break;case"copy":case"cut":case"paste":ie=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=kn}var pe=(s&4)!==0,_t=!pe&&r==="scroll",M=pe?G!==null?G+"Capture":null:G;pe=[];for(var b=z,j;b!==null;){j=b;var Z=j.stateNode;if(j.tag===5&&Z!==null&&(j=Z,M!==null&&(Z=hr(b,M),Z!=null&&pe.push(Na(b,Z,j)))),_t)break;b=b.return}0<pe.length&&(G=new ie(G,fe,null,a,Y),Q.push({event:G,listeners:pe}))}}if((s&7)===0){e:{if(G=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",G&&a!==bn&&(fe=a.relatedTarget||a.fromElement)&&(Ss(fe)||fe[Jr]))break e;if((ie||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,ie?(fe=a.relatedTarget||a.toElement,ie=z,fe=fe?Ss(fe):null,fe!==null&&(_t=En(fe),fe!==_t||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ie=null,fe=z),ie!==fe)){if(pe=Ta,Z="onMouseLeave",M="onMouseEnter",b="mouse",(r==="pointerout"||r==="pointerover")&&(pe=kn,Z="onPointerLeave",M="onPointerEnter",b="pointer"),_t=ie==null?G:wo(ie),j=fe==null?G:wo(fe),G=new pe(Z,b+"leave",ie,a,Y),G.target=_t,G.relatedTarget=j,Z=null,Ss(Y)===z&&(pe=new pe(M,b+"enter",fe,a,Y),pe.target=j,pe.relatedTarget=_t,Z=pe),_t=Z,ie&&fe)t:{for(pe=ie,M=fe,b=0,j=pe;j;j=vo(j))b++;for(j=0,Z=M;Z;Z=vo(Z))j++;for(;0<b-j;)pe=vo(pe),b--;for(;0<j-b;)M=vo(M),j--;for(;b--;){if(pe===M||M!==null&&pe===M.alternate)break t;pe=vo(pe),M=vo(M)}pe=null}else pe=null;ie!==null&&dm(Q,G,ie,pe,!1),fe!==null&&_t!==null&&dm(Q,_t,fe,pe,!0)}}e:{if(G=z?wo(z):window,ie=G.nodeName&&G.nodeName.toLowerCase(),ie==="select"||ie==="input"&&G.type==="file")var ge=r0;else if(Hp(G))if(Gp)ge=a0;else{ge=s0;var _e=i0}else(ie=G.nodeName)&&ie.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(ge=o0);if(ge&&(ge=ge(r,z))){qp(Q,ge,a,Y);break e}_e&&_e(r,G,z),r==="focusout"&&(_e=G._wrapperState)&&_e.controlled&&G.type==="number"&&ut(G,"number",G.value)}switch(_e=z?wo(z):window,r){case"focusin":(Hp(_e)||_e.contentEditable==="true")&&(go=_e,uh=z,Pa=null);break;case"focusout":Pa=uh=go=null;break;case"mousedown":ch=!0;break;case"contextmenu":case"mouseup":case"dragend":ch=!1,tm(Q,a,Y);break;case"selectionchange":if(c0)break;case"keydown":case"keyup":tm(Q,a,Y)}var we;if(sh)e:{switch(r){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else mo?$p(r,a)&&(Ce="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(Up&&a.locale!=="ko"&&(mo||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&mo&&(we=zl()):(An=Y,lo="value"in An?An.value:An.textContent,mo=!0)),_e=Ql(z,Ce),0<_e.length&&(Ce=new v(Ce,r,null,a,Y),Q.push({event:Ce,listeners:_e}),we?Ce.data=we:(we=Wp(a),we!==null&&(Ce.data=we)))),(we=JE?ZE(r,a):e0(r,a))&&(z=Ql(z,"onBeforeInput"),0<z.length&&(Y=new v("onBeforeInput","beforeinput",null,a,Y),Q.push({event:Y,listeners:z}),Y.data=we))}cm(Q,s)})}function Na(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Ql(r,s){for(var a=s+"Capture",c=[];r!==null;){var d=r,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=hr(r,a),p!=null&&c.unshift(Na(r,p,d)),p=hr(r,s),p!=null&&c.push(Na(r,p,d))),r=r.return}return c}function vo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function dm(r,s,a,c,d){for(var p=s._reactName,w=[];a!==null&&a!==c;){var A=a,R=A.alternate,z=A.stateNode;if(R!==null&&R===c)break;A.tag===5&&z!==null&&(A=z,d?(R=hr(a,p),R!=null&&w.unshift(Na(a,R,A))):d||(R=hr(a,p),R!=null&&w.push(Na(a,R,A)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var p0=/\r\n?/g,m0=/\u0000|\uFFFD/g;function fm(r){return(typeof r=="string"?r:""+r).replace(p0,`
`).replace(m0,"")}function Xl(r,s,a){if(s=fm(s),fm(r)!==s&&a)throw Error(t(425))}function Jl(){}var gh=null,yh=null;function vh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var _h=typeof setTimeout=="function"?setTimeout:void 0,g0=typeof clearTimeout=="function"?clearTimeout:void 0,pm=typeof Promise=="function"?Promise:void 0,y0=typeof queueMicrotask=="function"?queueMicrotask:typeof pm<"u"?function(r){return pm.resolve(null).then(r).catch(v0)}:_h;function v0(r){setTimeout(function(){throw r})}function wh(r,s){var a=s,c=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){r.removeChild(d),ki(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ki(s)}function Ni(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function mm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var _o=Math.random().toString(36).slice(2),Ar="__reactFiber$"+_o,xa="__reactProps$"+_o,Jr="__reactContainer$"+_o,Eh="__reactEvents$"+_o,_0="__reactListeners$"+_o,w0="__reactHandles$"+_o;function Ss(r){var s=r[Ar];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Jr]||a[Ar]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=mm(r);r!==null;){if(a=r[Ar])return a;r=mm(r)}return s}r=a,a=r.parentNode}return null}function Oa(r){return r=r[Ar]||r[Jr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function wo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Zl(r){return r[xa]||null}var Th=[],Eo=-1;function xi(r){return{current:r}}function it(r){0>Eo||(r.current=Th[Eo],Th[Eo]=null,Eo--)}function Ze(r,s){Eo++,Th[Eo]=r.current,r.current=s}var Oi={},Yt=xi(Oi),cn=xi(!1),As=Oi;function To(r,s){var a=r.type.contextTypes;if(!a)return Oi;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=s[p];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=d),d}function hn(r){return r=r.childContextTypes,r!=null}function eu(){it(cn),it(Yt)}function gm(r,s,a){if(Yt.current!==Oi)throw Error(t(168));Ze(Yt,s),Ze(cn,a)}function ym(r,s,a){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,ye(r)||"Unknown",d));return ee({},a,c)}function tu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Oi,As=Yt.current,Ze(Yt,r),Ze(cn,cn.current),!0}function vm(r,s,a){var c=r.stateNode;if(!c)throw Error(t(169));a?(r=ym(r,s,As),c.__reactInternalMemoizedMergedChildContext=r,it(cn),it(Yt),Ze(Yt,r)):it(cn),Ze(cn,a)}var Zr=null,nu=!1,Ih=!1;function _m(r){Zr===null?Zr=[r]:Zr.push(r)}function E0(r){nu=!0,_m(r)}function bi(){if(!Ih&&Zr!==null){Ih=!0;var r=0,s=Fe;try{var a=Zr;for(Fe=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}Zr=null,nu=!1}catch(d){throw Zr!==null&&(Zr=Zr.slice(r+1)),$r(to,bi),d}finally{Fe=s,Ih=!1}}return null}var Io=[],So=0,ru=null,iu=0,jn=[],Un=0,Cs=null,ei=1,ti="";function ks(r,s){Io[So++]=iu,Io[So++]=ru,ru=r,iu=s}function wm(r,s,a){jn[Un++]=ei,jn[Un++]=ti,jn[Un++]=Cs,Cs=r;var c=ei;r=ti;var d=32-In(c)-1;c&=~(1<<d),a+=1;var p=32-In(s)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,ei=1<<32-In(s)+d|a<<d|c,ti=p+r}else ei=1<<p|a<<d|c,ti=r}function Sh(r){r.return!==null&&(ks(r,1),wm(r,1,0))}function Ah(r){for(;r===ru;)ru=Io[--So],Io[So]=null,iu=Io[--So],Io[So]=null;for(;r===Cs;)Cs=jn[--Un],jn[Un]=null,ti=jn[--Un],jn[Un]=null,ei=jn[--Un],jn[Un]=null}var Pn=null,Rn=null,at=!1,Jn=null;function Em(r,s){var a=Wn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Tm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Pn=r,Rn=Ni(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Pn=r,Rn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Cs!==null?{id:ei,overflow:ti}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Wn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,Pn=r,Rn=null,!0):!1;default:return!1}}function Ch(r){return(r.mode&1)!==0&&(r.flags&128)===0}function kh(r){if(at){var s=Rn;if(s){var a=s;if(!Tm(r,s)){if(Ch(r))throw Error(t(418));s=Ni(a.nextSibling);var c=Pn;s&&Tm(r,s)?Em(c,a):(r.flags=r.flags&-4097|2,at=!1,Pn=r)}}else{if(Ch(r))throw Error(t(418));r.flags=r.flags&-4097|2,at=!1,Pn=r}}}function Im(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Pn=r}function su(r){if(r!==Pn)return!1;if(!at)return Im(r),at=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!vh(r.type,r.memoizedProps)),s&&(s=Rn)){if(Ch(r))throw Sm(),Error(t(418));for(;s;)Em(r,s),s=Ni(s.nextSibling)}if(Im(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){Rn=Ni(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}Rn=null}}else Rn=Pn?Ni(r.stateNode.nextSibling):null;return!0}function Sm(){for(var r=Rn;r;)r=Ni(r.nextSibling)}function Ao(){Rn=Pn=null,at=!1}function Ph(r){Jn===null?Jn=[r]:Jn.push(r)}var T0=ae.ReactCurrentBatchConfig;function ba(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,r));var d=c,p=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(w){var A=d.refs;w===null?delete A[p]:A[p]=w},s._stringRef=p,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function ou(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Am(r){var s=r._init;return s(r._payload)}function Cm(r){function s(M,b){if(r){var j=M.deletions;j===null?(M.deletions=[b],M.flags|=16):j.push(b)}}function a(M,b){if(!r)return null;for(;b!==null;)s(M,b),b=b.sibling;return null}function c(M,b){for(M=new Map;b!==null;)b.key!==null?M.set(b.key,b):M.set(b.index,b),b=b.sibling;return M}function d(M,b){return M=Bi(M,b),M.index=0,M.sibling=null,M}function p(M,b,j){return M.index=j,r?(j=M.alternate,j!==null?(j=j.index,j<b?(M.flags|=2,b):j):(M.flags|=2,b)):(M.flags|=1048576,b)}function w(M){return r&&M.alternate===null&&(M.flags|=2),M}function A(M,b,j,Z){return b===null||b.tag!==6?(b=_d(j,M.mode,Z),b.return=M,b):(b=d(b,j),b.return=M,b)}function R(M,b,j,Z){var ge=j.type;return ge===D?Y(M,b,j.props.children,Z,j.key):b!==null&&(b.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===$e&&Am(ge)===b.type)?(Z=d(b,j.props),Z.ref=ba(M,b,j),Z.return=M,Z):(Z=Du(j.type,j.key,j.props,null,M.mode,Z),Z.ref=ba(M,b,j),Z.return=M,Z)}function z(M,b,j,Z){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=wd(j,M.mode,Z),b.return=M,b):(b=d(b,j.children||[]),b.return=M,b)}function Y(M,b,j,Z,ge){return b===null||b.tag!==7?(b=Vs(j,M.mode,Z,ge),b.return=M,b):(b=d(b,j),b.return=M,b)}function Q(M,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return b=_d(""+b,M.mode,j),b.return=M,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Oe:return j=Du(b.type,b.key,b.props,null,M.mode,j),j.ref=ba(M,null,b),j.return=M,j;case le:return b=wd(b,M.mode,j),b.return=M,b;case $e:var Z=b._init;return Q(M,Z(b._payload),j)}if(ct(b)||ue(b))return b=Vs(b,M.mode,j,null),b.return=M,b;ou(M,b)}return null}function G(M,b,j,Z){var ge=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return ge!==null?null:A(M,b,""+j,Z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Oe:return j.key===ge?R(M,b,j,Z):null;case le:return j.key===ge?z(M,b,j,Z):null;case $e:return ge=j._init,G(M,b,ge(j._payload),Z)}if(ct(j)||ue(j))return ge!==null?null:Y(M,b,j,Z,null);ou(M,j)}return null}function ie(M,b,j,Z,ge){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return M=M.get(j)||null,A(b,M,""+Z,ge);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Oe:return M=M.get(Z.key===null?j:Z.key)||null,R(b,M,Z,ge);case le:return M=M.get(Z.key===null?j:Z.key)||null,z(b,M,Z,ge);case $e:var _e=Z._init;return ie(M,b,j,_e(Z._payload),ge)}if(ct(Z)||ue(Z))return M=M.get(j)||null,Y(b,M,Z,ge,null);ou(b,Z)}return null}function fe(M,b,j,Z){for(var ge=null,_e=null,we=b,Ce=b=0,Mt=null;we!==null&&Ce<j.length;Ce++){we.index>Ce?(Mt=we,we=null):Mt=we.sibling;var We=G(M,we,j[Ce],Z);if(We===null){we===null&&(we=Mt);break}r&&we&&We.alternate===null&&s(M,we),b=p(We,b,Ce),_e===null?ge=We:_e.sibling=We,_e=We,we=Mt}if(Ce===j.length)return a(M,we),at&&ks(M,Ce),ge;if(we===null){for(;Ce<j.length;Ce++)we=Q(M,j[Ce],Z),we!==null&&(b=p(we,b,Ce),_e===null?ge=we:_e.sibling=we,_e=we);return at&&ks(M,Ce),ge}for(we=c(M,we);Ce<j.length;Ce++)Mt=ie(we,M,Ce,j[Ce],Z),Mt!==null&&(r&&Mt.alternate!==null&&we.delete(Mt.key===null?Ce:Mt.key),b=p(Mt,b,Ce),_e===null?ge=Mt:_e.sibling=Mt,_e=Mt);return r&&we.forEach(function($i){return s(M,$i)}),at&&ks(M,Ce),ge}function pe(M,b,j,Z){var ge=ue(j);if(typeof ge!="function")throw Error(t(150));if(j=ge.call(j),j==null)throw Error(t(151));for(var _e=ge=null,we=b,Ce=b=0,Mt=null,We=j.next();we!==null&&!We.done;Ce++,We=j.next()){we.index>Ce?(Mt=we,we=null):Mt=we.sibling;var $i=G(M,we,We.value,Z);if($i===null){we===null&&(we=Mt);break}r&&we&&$i.alternate===null&&s(M,we),b=p($i,b,Ce),_e===null?ge=$i:_e.sibling=$i,_e=$i,we=Mt}if(We.done)return a(M,we),at&&ks(M,Ce),ge;if(we===null){for(;!We.done;Ce++,We=j.next())We=Q(M,We.value,Z),We!==null&&(b=p(We,b,Ce),_e===null?ge=We:_e.sibling=We,_e=We);return at&&ks(M,Ce),ge}for(we=c(M,we);!We.done;Ce++,We=j.next())We=ie(we,M,Ce,We.value,Z),We!==null&&(r&&We.alternate!==null&&we.delete(We.key===null?Ce:We.key),b=p(We,b,Ce),_e===null?ge=We:_e.sibling=We,_e=We);return r&&we.forEach(function(tT){return s(M,tT)}),at&&ks(M,Ce),ge}function _t(M,b,j,Z){if(typeof j=="object"&&j!==null&&j.type===D&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Oe:e:{for(var ge=j.key,_e=b;_e!==null;){if(_e.key===ge){if(ge=j.type,ge===D){if(_e.tag===7){a(M,_e.sibling),b=d(_e,j.props.children),b.return=M,M=b;break e}}else if(_e.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===$e&&Am(ge)===_e.type){a(M,_e.sibling),b=d(_e,j.props),b.ref=ba(M,_e,j),b.return=M,M=b;break e}a(M,_e);break}else s(M,_e);_e=_e.sibling}j.type===D?(b=Vs(j.props.children,M.mode,Z,j.key),b.return=M,M=b):(Z=Du(j.type,j.key,j.props,null,M.mode,Z),Z.ref=ba(M,b,j),Z.return=M,M=Z)}return w(M);case le:e:{for(_e=j.key;b!==null;){if(b.key===_e)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){a(M,b.sibling),b=d(b,j.children||[]),b.return=M,M=b;break e}else{a(M,b);break}else s(M,b);b=b.sibling}b=wd(j,M.mode,Z),b.return=M,M=b}return w(M);case $e:return _e=j._init,_t(M,b,_e(j._payload),Z)}if(ct(j))return fe(M,b,j,Z);if(ue(j))return pe(M,b,j,Z);ou(M,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,b!==null&&b.tag===6?(a(M,b.sibling),b=d(b,j),b.return=M,M=b):(a(M,b),b=_d(j,M.mode,Z),b.return=M,M=b),w(M)):a(M,b)}return _t}var Co=Cm(!0),km=Cm(!1),au=xi(null),lu=null,ko=null,Rh=null;function Dh(){Rh=ko=lu=null}function Nh(r){var s=au.current;it(au),r._currentValue=s}function xh(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function Po(r,s){lu=r,Rh=ko=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(dn=!0),r.firstContext=null)}function zn(r){var s=r._currentValue;if(Rh!==r)if(r={context:r,memoizedValue:s,next:null},ko===null){if(lu===null)throw Error(t(308));ko=r,lu.dependencies={lanes:0,firstContext:r}}else ko=ko.next=r;return s}var Ps=null;function Oh(r){Ps===null?Ps=[r]:Ps.push(r)}function Pm(r,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Oh(s)):(a.next=d.next,d.next=a),s.interleaved=a,ni(r,c)}function ni(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Vi=!1;function bh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ri(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Li(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Be&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,ni(r,a)}return d=c.interleaved,d===null?(s.next=s,Oh(c)):(s.next=d.next,d.next=s),c.interleaved=s,ni(r,a)}function uu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ma(r,a)}}function Dm(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=s:p=p.next=s}else d=p=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function cu(r,s,a,c){var d=r.updateQueue;Vi=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var R=A,z=R.next;R.next=null,w===null?p=z:w.next=z,w=R;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==w&&(A===null?Y.firstBaseUpdate=z:A.next=z,Y.lastBaseUpdate=R))}if(p!==null){var Q=d.baseState;w=0,Y=z=R=null,A=p;do{var G=A.lane,ie=A.eventTime;if((c&G)===G){Y!==null&&(Y=Y.next={eventTime:ie,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var fe=r,pe=A;switch(G=s,ie=a,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){Q=fe.call(ie,Q,G);break e}Q=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,G=typeof fe=="function"?fe.call(ie,Q,G):fe,G==null)break e;Q=ee({},Q,G);break e;case 2:Vi=!0}}A.callback!==null&&A.lane!==0&&(r.flags|=64,G=d.effects,G===null?d.effects=[A]:G.push(A))}else ie={eventTime:ie,lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?(z=Y=ie,R=Q):Y=Y.next=ie,w|=G;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;G=A,A=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Y===null&&(R=Q),d.baseState=R,d.firstBaseUpdate=z,d.lastBaseUpdate=Y,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else p===null&&(d.shared.lanes=0);Ns|=w,r.lanes=w,r.memoizedState=Q}}function Nm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Va={},Cr=xi(Va),La=xi(Va),Ma=xi(Va);function Rs(r){if(r===Va)throw Error(t(174));return r}function Vh(r,s){switch(Ze(Ma,s),Ze(La,r),Ze(Cr,Va),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vi(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=vi(s,r)}it(Cr),Ze(Cr,s)}function Ro(){it(Cr),it(La),it(Ma)}function xm(r){Rs(Ma.current);var s=Rs(Cr.current),a=vi(s,r.type);s!==a&&(Ze(La,r),Ze(Cr,a))}function Lh(r){La.current===r&&(it(Cr),it(La))}var dt=xi(0);function hu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Mh=[];function Fh(){for(var r=0;r<Mh.length;r++)Mh[r]._workInProgressVersionPrimary=null;Mh.length=0}var du=ae.ReactCurrentDispatcher,jh=ae.ReactCurrentBatchConfig,Ds=0,ft=null,Rt=null,Vt=null,fu=!1,Fa=!1,ja=0,I0=0;function Qt(){throw Error(t(321))}function Uh(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Xn(r[a],s[a]))return!1;return!0}function zh(r,s,a,c,d,p){if(Ds=p,ft=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,du.current=r===null||r.memoizedState===null?k0:P0,r=a(c,d),Fa){p=0;do{if(Fa=!1,ja=0,25<=p)throw Error(t(301));p+=1,Vt=Rt=null,s.updateQueue=null,du.current=R0,r=a(c,d)}while(Fa)}if(du.current=gu,s=Rt!==null&&Rt.next!==null,Ds=0,Vt=Rt=ft=null,fu=!1,s)throw Error(t(300));return r}function Bh(){var r=ja!==0;return ja=0,r}function kr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ft.memoizedState=Vt=r:Vt=Vt.next=r,Vt}function Bn(){if(Rt===null){var r=ft.alternate;r=r!==null?r.memoizedState:null}else r=Rt.next;var s=Vt===null?ft.memoizedState:Vt.next;if(s!==null)Vt=s,Rt=r;else{if(r===null)throw Error(t(310));Rt=r,r={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Vt===null?ft.memoizedState=Vt=r:Vt=Vt.next=r}return Vt}function Ua(r,s){return typeof s=="function"?s(r):s}function $h(r){var s=Bn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=Rt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var A=w=null,R=null,z=p;do{var Y=z.lane;if((Ds&Y)===Y)R!==null&&(R=R.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:r(c,z.action);else{var Q={lane:Y,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};R===null?(A=R=Q,w=c):R=R.next=Q,ft.lanes|=Y,Ns|=Y}z=z.next}while(z!==null&&z!==p);R===null?w=c:R.next=A,Xn(c,s.memoizedState)||(dn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=R,a.lastRenderedState=c}if(r=a.interleaved,r!==null){d=r;do p=d.lane,ft.lanes|=p,Ns|=p,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Wh(r){var s=Bn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=a.dispatch,d=a.pending,p=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=r(p,w.action),w=w.next;while(w!==d);Xn(p,s.memoizedState)||(dn=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,c]}function Om(){}function bm(r,s){var a=ft,c=Bn(),d=s(),p=!Xn(c.memoizedState,d);if(p&&(c.memoizedState=d,dn=!0),c=c.queue,Hh(Mm.bind(null,a,c,r),[r]),c.getSnapshot!==s||p||Vt!==null&&Vt.memoizedState.tag&1){if(a.flags|=2048,za(9,Lm.bind(null,a,c,d,s),void 0,null),Lt===null)throw Error(t(349));(Ds&30)!==0||Vm(a,s,d)}return d}function Vm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=ft.updateQueue,s===null?(s={lastEffect:null,stores:null},ft.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Lm(r,s,a,c){s.value=a,s.getSnapshot=c,Fm(s)&&jm(r)}function Mm(r,s,a){return a(function(){Fm(s)&&jm(r)})}function Fm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Xn(r,a)}catch{return!0}}function jm(r){var s=ni(r,1);s!==null&&nr(s,r,1,-1)}function Um(r){var s=kr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:r},s.queue=r,r=r.dispatch=C0.bind(null,ft,r),[s.memoizedState,r]}function za(r,s,a,c){return r={tag:r,create:s,destroy:a,deps:c,next:null},s=ft.updateQueue,s===null?(s={lastEffect:null,stores:null},ft.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r)),r}function zm(){return Bn().memoizedState}function pu(r,s,a,c){var d=kr();ft.flags|=r,d.memoizedState=za(1|s,a,void 0,c===void 0?null:c)}function mu(r,s,a,c){var d=Bn();c=c===void 0?null:c;var p=void 0;if(Rt!==null){var w=Rt.memoizedState;if(p=w.destroy,c!==null&&Uh(c,w.deps)){d.memoizedState=za(s,a,p,c);return}}ft.flags|=r,d.memoizedState=za(1|s,a,p,c)}function Bm(r,s){return pu(8390656,8,r,s)}function Hh(r,s){return mu(2048,8,r,s)}function $m(r,s){return mu(4,2,r,s)}function Wm(r,s){return mu(4,4,r,s)}function Hm(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function qm(r,s,a){return a=a!=null?a.concat([r]):null,mu(4,4,Hm.bind(null,s,r),a)}function qh(){}function Gm(r,s){var a=Bn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Uh(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function Km(r,s){var a=Bn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Uh(s,c[1])?c[0]:(r=r(),a.memoizedState=[r,s],r)}function Ym(r,s,a){return(Ds&21)===0?(r.baseState&&(r.baseState=!1,dn=!0),r.memoizedState=a):(Xn(a,s)||(a=fa(),ft.lanes|=a,Ns|=a,r.baseState=!0),s)}function S0(r,s){var a=Fe;Fe=a!==0&&4>a?a:4,r(!0);var c=jh.transition;jh.transition={};try{r(!1),s()}finally{Fe=a,jh.transition=c}}function Qm(){return Bn().memoizedState}function A0(r,s,a){var c=Ui(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Xm(r))Jm(s,a);else if(a=Pm(r,s,a,c),a!==null){var d=on();nr(a,r,c,d),Zm(a,s,c)}}function C0(r,s,a){var c=Ui(r),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Xm(r))Jm(s,d);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var w=s.lastRenderedState,A=p(w,a);if(d.hasEagerState=!0,d.eagerState=A,Xn(A,w)){var R=s.interleaved;R===null?(d.next=d,Oh(s)):(d.next=R.next,R.next=d),s.interleaved=d;return}}catch{}finally{}a=Pm(r,s,d,c),a!==null&&(d=on(),nr(a,r,c,d),Zm(a,s,c))}}function Xm(r){var s=r.alternate;return r===ft||s!==null&&s===ft}function Jm(r,s){Fa=fu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function Zm(r,s,a){if((a&4194240)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ma(r,a)}}var gu={readContext:zn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},k0={readContext:zn,useCallback:function(r,s){return kr().memoizedState=[r,s===void 0?null:s],r},useContext:zn,useEffect:Bm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,pu(4194308,4,Hm.bind(null,s,r),a)},useLayoutEffect:function(r,s){return pu(4194308,4,r,s)},useInsertionEffect:function(r,s){return pu(4,2,r,s)},useMemo:function(r,s){var a=kr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var c=kr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=A0.bind(null,ft,r),[c.memoizedState,r]},useRef:function(r){var s=kr();return r={current:r},s.memoizedState=r},useState:Um,useDebugValue:qh,useDeferredValue:function(r){return kr().memoizedState=r},useTransition:function(){var r=Um(!1),s=r[0];return r=S0.bind(null,r[1]),kr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var c=ft,d=kr();if(at){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Lt===null)throw Error(t(349));(Ds&30)!==0||Vm(c,s,a)}d.memoizedState=a;var p={value:a,getSnapshot:s};return d.queue=p,Bm(Mm.bind(null,c,p,r),[r]),c.flags|=2048,za(9,Lm.bind(null,c,p,a,s),void 0,null),a},useId:function(){var r=kr(),s=Lt.identifierPrefix;if(at){var a=ti,c=ei;a=(c&~(1<<32-In(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=ja++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=I0++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},P0={readContext:zn,useCallback:Gm,useContext:zn,useEffect:Hh,useImperativeHandle:qm,useInsertionEffect:$m,useLayoutEffect:Wm,useMemo:Km,useReducer:$h,useRef:zm,useState:function(){return $h(Ua)},useDebugValue:qh,useDeferredValue:function(r){var s=Bn();return Ym(s,Rt.memoizedState,r)},useTransition:function(){var r=$h(Ua)[0],s=Bn().memoizedState;return[r,s]},useMutableSource:Om,useSyncExternalStore:bm,useId:Qm,unstable_isNewReconciler:!1},R0={readContext:zn,useCallback:Gm,useContext:zn,useEffect:Hh,useImperativeHandle:qm,useInsertionEffect:$m,useLayoutEffect:Wm,useMemo:Km,useReducer:Wh,useRef:zm,useState:function(){return Wh(Ua)},useDebugValue:qh,useDeferredValue:function(r){var s=Bn();return Rt===null?s.memoizedState=r:Ym(s,Rt.memoizedState,r)},useTransition:function(){var r=Wh(Ua)[0],s=Bn().memoizedState;return[r,s]},useMutableSource:Om,useSyncExternalStore:bm,useId:Qm,unstable_isNewReconciler:!1};function Zn(r,s){if(r&&r.defaultProps){s=ee({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Gh(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:ee({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var yu={isMounted:function(r){return(r=r._reactInternals)?En(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var c=on(),d=Ui(r),p=ri(c,d);p.payload=s,a!=null&&(p.callback=a),s=Li(r,p,d),s!==null&&(nr(s,r,d,c),uu(s,r,d))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=on(),d=Ui(r),p=ri(c,d);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=Li(r,p,d),s!==null&&(nr(s,r,d,c),uu(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=on(),c=Ui(r),d=ri(a,c);d.tag=2,s!=null&&(d.callback=s),s=Li(r,d,c),s!==null&&(nr(s,r,c,a),uu(s,r,c))}};function eg(r,s,a,c,d,p,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,p,w):s.prototype&&s.prototype.isPureReactComponent?!ka(a,c)||!ka(d,p):!0}function tg(r,s,a){var c=!1,d=Oi,p=s.contextType;return typeof p=="object"&&p!==null?p=zn(p):(d=hn(s)?As:Yt.current,c=s.contextTypes,p=(c=c!=null)?To(r,d):Oi),s=new s(a,p),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=yu,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=p),s}function ng(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&yu.enqueueReplaceState(s,s.state,null)}function Kh(r,s,a,c){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},bh(r);var p=s.contextType;typeof p=="object"&&p!==null?d.context=zn(p):(p=hn(s)?As:Yt.current,d.context=To(r,p)),d.state=r.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Gh(r,s,p,a),d.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&yu.enqueueReplaceState(d,d.state,null),cu(r,a,d,c),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function Do(r,s){try{var a="",c=s;do a+=Ne(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:r,source:s,stack:d,digest:null}}function Yh(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function Qh(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var D0=typeof WeakMap=="function"?WeakMap:Map;function rg(r,s,a){a=ri(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Su||(Su=!0,hd=c),Qh(r,s)},a}function ig(r,s,a){a=ri(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){Qh(r,s)}}var p=r.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Qh(r,s),typeof c!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function sg(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new D0;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),r=W0.bind(null,r,s,a),s.then(r,r))}function og(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function ag(r,s,a,c,d){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=ri(-1,1),s.tag=2,Li(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var N0=ae.ReactCurrentOwner,dn=!1;function sn(r,s,a,c){s.child=r===null?km(s,null,a,c):Co(s,r.child,a,c)}function lg(r,s,a,c,d){a=a.render;var p=s.ref;return Po(s,d),c=zh(r,s,a,c,p,d),a=Bh(),r!==null&&!dn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,ii(r,s,d)):(at&&a&&Sh(s),s.flags|=1,sn(r,s,c,d),s.child)}function ug(r,s,a,c,d){if(r===null){var p=a.type;return typeof p=="function"&&!vd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,cg(r,s,p,c,d)):(r=Du(a.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,(r.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:ka,a(w,c)&&r.ref===s.ref)return ii(r,s,d)}return s.flags|=1,r=Bi(p,c),r.ref=s.ref,r.return=s,s.child=r}function cg(r,s,a,c,d){if(r!==null){var p=r.memoizedProps;if(ka(p,c)&&r.ref===s.ref)if(dn=!1,s.pendingProps=c=p,(r.lanes&d)!==0)(r.flags&131072)!==0&&(dn=!0);else return s.lanes=r.lanes,ii(r,s,d)}return Xh(r,s,a,c,d)}function hg(r,s,a){var c=s.pendingProps,d=c.children,p=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(xo,Dn),Dn|=a;else{if((a&1073741824)===0)return r=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ze(xo,Dn),Dn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Ze(xo,Dn),Dn|=c}else p!==null?(c=p.baseLanes|a,s.memoizedState=null):c=a,Ze(xo,Dn),Dn|=c;return sn(r,s,d,a),s.child}function dg(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Xh(r,s,a,c,d){var p=hn(a)?As:Yt.current;return p=To(s,p),Po(s,d),a=zh(r,s,a,c,p,d),c=Bh(),r!==null&&!dn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,ii(r,s,d)):(at&&c&&Sh(s),s.flags|=1,sn(r,s,a,d),s.child)}function fg(r,s,a,c,d){if(hn(a)){var p=!0;tu(s)}else p=!1;if(Po(s,d),s.stateNode===null)_u(r,s),tg(s,a,c),Kh(s,a,c,d),c=!0;else if(r===null){var w=s.stateNode,A=s.memoizedProps;w.props=A;var R=w.context,z=a.contextType;typeof z=="object"&&z!==null?z=zn(z):(z=hn(a)?As:Yt.current,z=To(s,z));var Y=a.getDerivedStateFromProps,Q=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";Q||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==c||R!==z)&&ng(s,w,c,z),Vi=!1;var G=s.memoizedState;w.state=G,cu(s,c,w,d),R=s.memoizedState,A!==c||G!==R||cn.current||Vi?(typeof Y=="function"&&(Gh(s,a,Y,c),R=s.memoizedState),(A=Vi||eg(s,a,A,c,G,R,z))?(Q||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=R),w.props=c,w.state=R,w.context=z,c=A):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Rm(r,s),A=s.memoizedProps,z=s.type===s.elementType?A:Zn(s.type,A),w.props=z,Q=s.pendingProps,G=w.context,R=a.contextType,typeof R=="object"&&R!==null?R=zn(R):(R=hn(a)?As:Yt.current,R=To(s,R));var ie=a.getDerivedStateFromProps;(Y=typeof ie=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==Q||G!==R)&&ng(s,w,c,R),Vi=!1,G=s.memoizedState,w.state=G,cu(s,c,w,d);var fe=s.memoizedState;A!==Q||G!==fe||cn.current||Vi?(typeof ie=="function"&&(Gh(s,a,ie,c),fe=s.memoizedState),(z=Vi||eg(s,a,z,c,G,fe,R)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,fe,R),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,fe,R)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=fe),w.props=c,w.state=fe,w.context=R,c=z):(typeof w.componentDidUpdate!="function"||A===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),c=!1)}return Jh(r,s,a,c,p,d)}function Jh(r,s,a,c,d,p){dg(r,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&vm(s,a,!1),ii(r,s,p);c=s.stateNode,N0.current=s;var A=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&w?(s.child=Co(s,r.child,null,p),s.child=Co(s,null,A,p)):sn(r,s,A,p),s.memoizedState=c.state,d&&vm(s,a,!0),s.child}function pg(r){var s=r.stateNode;s.pendingContext?gm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&gm(r,s.context,!1),Vh(r,s.containerInfo)}function mg(r,s,a,c,d){return Ao(),Ph(d),s.flags|=256,sn(r,s,a,c),s.child}var Zh={dehydrated:null,treeContext:null,retryLane:0};function ed(r){return{baseLanes:r,cachePool:null,transitions:null}}function gg(r,s,a){var c=s.pendingProps,d=dt.current,p=!1,w=(s.flags&128)!==0,A;if((A=w)||(A=r!==null&&r.memoizedState===null?!1:(d&2)!==0),A?(p=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),Ze(dt,d&1),r===null)return kh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,r=c.fallback,p?(c=s.mode,p=s.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=Nu(w,c,0,null),r=Vs(r,c,a,null),p.return=s,r.return=s,p.sibling=r,s.child=p,s.child.memoizedState=ed(a),s.memoizedState=Zh,r):td(s,w));if(d=r.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return x0(r,s,w,c,A,d,a);if(p){p=c.fallback,w=s.mode,d=r.child,A=d.sibling;var R={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=R,s.deletions=null):(c=Bi(d,R),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?p=Bi(A,p):(p=Vs(p,w,a,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,w=r.child.memoizedState,w=w===null?ed(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=r.childLanes&~a,s.memoizedState=Zh,c}return p=r.child,r=p.sibling,c=Bi(p,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=c,s.memoizedState=null,c}function td(r,s){return s=Nu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function vu(r,s,a,c){return c!==null&&Ph(c),Co(s,r.child,null,a),r=td(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function x0(r,s,a,c,d,p,w){if(a)return s.flags&256?(s.flags&=-257,c=Yh(Error(t(422))),vu(r,s,w,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(p=c.fallback,d=s.mode,c=Nu({mode:"visible",children:c.children},d,0,null),p=Vs(p,d,w,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,(s.mode&1)!==0&&Co(s,r.child,null,w),s.child.memoizedState=ed(w),s.memoizedState=Zh,p);if((s.mode&1)===0)return vu(r,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,p=Error(t(419)),c=Yh(p,c,void 0),vu(r,s,w,c)}if(A=(w&r.childLanes)!==0,dn||A){if(c=Lt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,ni(r,d),nr(c,r,d,-1))}return yd(),c=Yh(Error(t(421))),vu(r,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=r.child,s=H0.bind(null,r),d._reactRetry=s,null):(r=p.treeContext,Rn=Ni(d.nextSibling),Pn=s,at=!0,Jn=null,r!==null&&(jn[Un++]=ei,jn[Un++]=ti,jn[Un++]=Cs,ei=r.id,ti=r.overflow,Cs=s),s=td(s,c.children),s.flags|=4096,s)}function yg(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),xh(r.return,s,a)}function nd(r,s,a,c,d){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function vg(r,s,a){var c=s.pendingProps,d=c.revealOrder,p=c.tail;if(sn(r,s,c.children,a),c=dt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&yg(r,a,s);else if(r.tag===19)yg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(Ze(dt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)r=a.alternate,r!==null&&hu(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),nd(s,!1,d,a,p);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&hu(r)===null){s.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}nd(s,!0,a,null,p);break;case"together":nd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function _u(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function ii(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),Ns|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=Bi(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=Bi(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function O0(r,s,a){switch(s.tag){case 3:pg(s),Ao();break;case 5:xm(s);break;case 1:hn(s.type)&&tu(s);break;case 4:Vh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Ze(au,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ze(dt,dt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?gg(r,s,a):(Ze(dt,dt.current&1),r=ii(r,s,a),r!==null?r.sibling:null);Ze(dt,dt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(r.flags&128)!==0){if(c)return vg(r,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ze(dt,dt.current),c)break;return null;case 22:case 23:return s.lanes=0,hg(r,s,a)}return ii(r,s,a)}var _g,rd,wg,Eg;_g=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},rd=function(){},wg=function(r,s,a,c){var d=r.memoizedProps;if(d!==c){r=s.stateNode,Rs(Cr.current);var p=null;switch(a){case"input":d=Ye(r,d),c=Ye(r,c),p=[];break;case"select":d=ee({},d,{value:void 0}),c=ee({},c,{value:void 0}),p=[];break;case"textarea":d=us(r,d),c=us(r,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=Jl)}an(a,c);var w;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var A=d[z];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?p||(p=[]):(p=p||[]).push(z,null));for(z in c){var R=c[z];if(A=d!=null?d[z]:void 0,c.hasOwnProperty(z)&&R!==A&&(R!=null||A!=null))if(z==="style")if(A){for(w in A)!A.hasOwnProperty(w)||R&&R.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in R)R.hasOwnProperty(w)&&A[w]!==R[w]&&(a||(a={}),a[w]=R[w])}else a||(p||(p=[]),p.push(z,a)),a=R;else z==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,A=A?A.__html:void 0,R!=null&&A!==R&&(p=p||[]).push(z,R)):z==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(z,""+R):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(R!=null&&z==="onScroll"&&rt("scroll",r),p||A===R||(p=[])):(p=p||[]).push(z,R))}a&&(p=p||[]).push("style",a);var z=p;(s.updateQueue=z)&&(s.flags|=4)}},Eg=function(r,s,a,c){a!==c&&(s.flags|=4)};function Ba(r,s){if(!at)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Xt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function b0(r,s,a){var c=s.pendingProps;switch(Ah(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(s),null;case 1:return hn(s.type)&&eu(),Xt(s),null;case 3:return c=s.stateNode,Ro(),it(cn),it(Yt),Fh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(su(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jn!==null&&(pd(Jn),Jn=null))),rd(r,s),Xt(s),null;case 5:Lh(s);var d=Rs(Ma.current);if(a=s.type,r!==null&&s.stateNode!=null)wg(r,s,a,c,d),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Xt(s),null}if(r=Rs(Cr.current),su(s)){c=s.stateNode,a=s.type;var p=s.memoizedProps;switch(c[Ar]=s,c[xa]=p,r=(s.mode&1)!==0,a){case"dialog":rt("cancel",c),rt("close",c);break;case"iframe":case"object":case"embed":rt("load",c);break;case"video":case"audio":for(d=0;d<Ra.length;d++)rt(Ra[d],c);break;case"source":rt("error",c);break;case"img":case"image":case"link":rt("error",c),rt("load",c);break;case"details":rt("toggle",c);break;case"input":ar(c,p),rt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},rt("invalid",c);break;case"textarea":yi(c,p),rt("invalid",c)}an(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var A=p[w];w==="children"?typeof A=="string"?c.textContent!==A&&(p.suppressHydrationWarning!==!0&&Xl(c.textContent,A,r),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(p.suppressHydrationWarning!==!0&&Xl(c.textContent,A,r),d=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&rt("scroll",c)}switch(a){case"input":gt(c),gi(c,p,!0);break;case"textarea":gt(c),lr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=Jl)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=cs(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=w.createElement(a,{is:c.is}):(r=w.createElement(a),a==="select"&&(w=r,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):r=w.createElementNS(r,a),r[Ar]=s,r[xa]=c,_g(r,s,!1,!1),s.stateNode=r;e:{switch(w=zr(a,c),a){case"dialog":rt("cancel",r),rt("close",r),d=c;break;case"iframe":case"object":case"embed":rt("load",r),d=c;break;case"video":case"audio":for(d=0;d<Ra.length;d++)rt(Ra[d],r);d=c;break;case"source":rt("error",r),d=c;break;case"img":case"image":case"link":rt("error",r),rt("load",r),d=c;break;case"details":rt("toggle",r),d=c;break;case"input":ar(r,c),d=Ye(r,c),rt("invalid",r);break;case"option":d=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},d=ee({},c,{value:void 0}),rt("invalid",r);break;case"textarea":yi(r,c),d=us(r,c),rt("invalid",r);break;default:d=c}an(a,d),A=d;for(p in A)if(A.hasOwnProperty(p)){var R=A[p];p==="style"?Ur(r,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&_i(r,R)):p==="children"?typeof R=="string"?(a!=="textarea"||R!=="")&&cr(r,R):typeof R=="number"&&cr(r,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?R!=null&&p==="onScroll"&&rt("scroll",r):R!=null&&me(r,p,R,w))}switch(a){case"input":gt(r),gi(r,c,!1);break;case"textarea":gt(r),lr(r);break;case"option":c.value!=null&&r.setAttribute("value",""+de(c.value));break;case"select":r.multiple=!!c.multiple,p=c.value,p!=null?yn(r,!!c.multiple,p,!1):c.defaultValue!=null&&yn(r,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=Jl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Xt(s),null;case 6:if(r&&s.stateNode!=null)Eg(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Rs(Ma.current),Rs(Cr.current),su(s)){if(c=s.stateNode,a=s.memoizedProps,c[Ar]=s,(p=c.nodeValue!==a)&&(r=Pn,r!==null))switch(r.tag){case 3:Xl(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Xl(c.nodeValue,a,(r.mode&1)!==0)}p&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Ar]=s,s.stateNode=c}return Xt(s),null;case 13:if(it(dt),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(at&&Rn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Sm(),Ao(),s.flags|=98560,p=!1;else if(p=su(s),c!==null&&c.dehydrated!==null){if(r===null){if(!p)throw Error(t(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[Ar]=s}else Ao(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Xt(s),p=!1}else Jn!==null&&(pd(Jn),Jn=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(dt.current&1)!==0?Dt===0&&(Dt=3):yd())),s.updateQueue!==null&&(s.flags|=4),Xt(s),null);case 4:return Ro(),rd(r,s),r===null&&Da(s.stateNode.containerInfo),Xt(s),null;case 10:return Nh(s.type._context),Xt(s),null;case 17:return hn(s.type)&&eu(),Xt(s),null;case 19:if(it(dt),p=s.memoizedState,p===null)return Xt(s),null;if(c=(s.flags&128)!==0,w=p.rendering,w===null)if(c)Ba(p,!1);else{if(Dt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=hu(r),w!==null){for(s.flags|=128,Ba(p,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)p=a,r=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=r,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,r=w.dependencies,p.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Ze(dt,dt.current&1|2),s.child}r=r.sibling}p.tail!==null&&nt()>Oo&&(s.flags|=128,c=!0,Ba(p,!1),s.lanes=4194304)}else{if(!c)if(r=hu(w),r!==null){if(s.flags|=128,c=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ba(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!at)return Xt(s),null}else 2*nt()-p.renderingStartTime>Oo&&a!==1073741824&&(s.flags|=128,c=!0,Ba(p,!1),s.lanes=4194304);p.isBackwards?(w.sibling=s.child,s.child=w):(a=p.last,a!==null?a.sibling=w:s.child=w,p.last=w)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=nt(),s.sibling=null,a=dt.current,Ze(dt,c?a&1|2:a&1),s):(Xt(s),null);case 22:case 23:return gd(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Dn&1073741824)!==0&&(Xt(s),s.subtreeFlags&6&&(s.flags|=8192)):Xt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function V0(r,s){switch(Ah(s),s.tag){case 1:return hn(s.type)&&eu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ro(),it(cn),it(Yt),Fh(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Lh(s),null;case 13:if(it(dt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ao()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return it(dt),null;case 4:return Ro(),null;case 10:return Nh(s.type._context),null;case 22:case 23:return gd(),null;case 24:return null;default:return null}}var wu=!1,Jt=!1,L0=typeof WeakSet=="function"?WeakSet:Set,ce=null;function No(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){yt(r,s,c)}else a.current=null}function id(r,s,a){try{a()}catch(c){yt(r,s,c)}}var Tg=!1;function M0(r,s){if(gh=Yr,r=em(),lh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,A=-1,R=-1,z=0,Y=0,Q=r,G=null;t:for(;;){for(var ie;Q!==a||d!==0&&Q.nodeType!==3||(A=w+d),Q!==p||c!==0&&Q.nodeType!==3||(R=w+c),Q.nodeType===3&&(w+=Q.nodeValue.length),(ie=Q.firstChild)!==null;)G=Q,Q=ie;for(;;){if(Q===r)break t;if(G===a&&++z===d&&(A=w),G===p&&++Y===c&&(R=w),(ie=Q.nextSibling)!==null)break;Q=G,G=Q.parentNode}Q=ie}a=A===-1||R===-1?null:{start:A,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(yh={focusedElem:r,selectionRange:a},Yr=!1,ce=s;ce!==null;)if(s=ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ce=r;else for(;ce!==null;){s=ce;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,_t=fe.memoizedState,M=s.stateNode,b=M.getSnapshotBeforeUpdate(s.elementType===s.type?pe:Zn(s.type,pe),_t);M.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){yt(s,s.return,Z)}if(r=s.sibling,r!==null){r.return=s.return,ce=r;break}ce=s.return}return fe=Tg,Tg=!1,fe}function $a(r,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&r)===r){var p=d.destroy;d.destroy=void 0,p!==void 0&&id(s,a,p)}d=d.next}while(d!==c)}}function Eu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function sd(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Ig(r){var s=r.alternate;s!==null&&(r.alternate=null,Ig(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Ar],delete s[xa],delete s[Eh],delete s[_0],delete s[w0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Sg(r){return r.tag===5||r.tag===3||r.tag===4}function Ag(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Sg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function od(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Jl));else if(c!==4&&(r=r.child,r!==null))for(od(r,s,a),r=r.sibling;r!==null;)od(r,s,a),r=r.sibling}function ad(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(ad(r,s,a),r=r.sibling;r!==null;)ad(r,s,a),r=r.sibling}var zt=null,er=!1;function Mi(r,s,a){for(a=a.child;a!==null;)Cg(r,s,a),a=a.sibling}function Cg(r,s,a){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(ms,a)}catch{}switch(a.tag){case 5:Jt||No(a,s);case 6:var c=zt,d=er;zt=null,Mi(r,s,a),zt=c,er=d,zt!==null&&(er?(r=zt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):zt.removeChild(a.stateNode));break;case 18:zt!==null&&(er?(r=zt,a=a.stateNode,r.nodeType===8?wh(r.parentNode,a):r.nodeType===1&&wh(r,a),ki(r)):wh(zt,a.stateNode));break;case 4:c=zt,d=er,zt=a.stateNode.containerInfo,er=!0,Mi(r,s,a),zt=c,er=d;break;case 0:case 11:case 14:case 15:if(!Jt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&id(a,s,w),d=d.next}while(d!==c)}Mi(r,s,a);break;case 1:if(!Jt&&(No(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){yt(a,s,A)}Mi(r,s,a);break;case 21:Mi(r,s,a);break;case 22:a.mode&1?(Jt=(c=Jt)||a.memoizedState!==null,Mi(r,s,a),Jt=c):Mi(r,s,a);break;default:Mi(r,s,a)}}function kg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new L0),s.forEach(function(c){var d=q0.bind(null,r,c);a.has(c)||(a.add(c),c.then(d,d))})}}function tr(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=r,w=s,A=w;e:for(;A!==null;){switch(A.tag){case 5:zt=A.stateNode,er=!1;break e;case 3:zt=A.stateNode.containerInfo,er=!0;break e;case 4:zt=A.stateNode.containerInfo,er=!0;break e}A=A.return}if(zt===null)throw Error(t(160));Cg(p,w,d),zt=null,er=!1;var R=d.alternate;R!==null&&(R.return=null),d.return=null}catch(z){yt(d,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Pg(s,r),s=s.sibling}function Pg(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(tr(s,r),Pr(r),c&4){try{$a(3,r,r.return),Eu(3,r)}catch(pe){yt(r,r.return,pe)}try{$a(5,r,r.return)}catch(pe){yt(r,r.return,pe)}}break;case 1:tr(s,r),Pr(r),c&512&&a!==null&&No(a,a.return);break;case 5:if(tr(s,r),Pr(r),c&512&&a!==null&&No(a,a.return),r.flags&32){var d=r.stateNode;try{cr(d,"")}catch(pe){yt(r,r.return,pe)}}if(c&4&&(d=r.stateNode,d!=null)){var p=r.memoizedProps,w=a!==null?a.memoizedProps:p,A=r.type,R=r.updateQueue;if(r.updateQueue=null,R!==null)try{A==="input"&&p.type==="radio"&&p.name!=null&&kt(d,p),zr(A,w);var z=zr(A,p);for(w=0;w<R.length;w+=2){var Y=R[w],Q=R[w+1];Y==="style"?Ur(d,Q):Y==="dangerouslySetInnerHTML"?_i(d,Q):Y==="children"?cr(d,Q):me(d,Y,Q,z)}switch(A){case"input":On(d,p);break;case"textarea":Zs(d,p);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ie=p.value;ie!=null?yn(d,!!p.multiple,ie,!1):G!==!!p.multiple&&(p.defaultValue!=null?yn(d,!!p.multiple,p.defaultValue,!0):yn(d,!!p.multiple,p.multiple?[]:"",!1))}d[xa]=p}catch(pe){yt(r,r.return,pe)}}break;case 6:if(tr(s,r),Pr(r),c&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,p=r.memoizedProps;try{d.nodeValue=p}catch(pe){yt(r,r.return,pe)}}break;case 3:if(tr(s,r),Pr(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ki(s.containerInfo)}catch(pe){yt(r,r.return,pe)}break;case 4:tr(s,r),Pr(r);break;case 13:tr(s,r),Pr(r),d=r.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(cd=nt())),c&4&&kg(r);break;case 22:if(Y=a!==null&&a.memoizedState!==null,r.mode&1?(Jt=(z=Jt)||Y,tr(s,r),Jt=z):tr(s,r),Pr(r),c&8192){if(z=r.memoizedState!==null,(r.stateNode.isHidden=z)&&!Y&&(r.mode&1)!==0)for(ce=r,Y=r.child;Y!==null;){for(Q=ce=Y;ce!==null;){switch(G=ce,ie=G.child,G.tag){case 0:case 11:case 14:case 15:$a(4,G,G.return);break;case 1:No(G,G.return);var fe=G.stateNode;if(typeof fe.componentWillUnmount=="function"){c=G,a=G.return;try{s=c,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(pe){yt(c,a,pe)}}break;case 5:No(G,G.return);break;case 22:if(G.memoizedState!==null){Ng(Q);continue}}ie!==null?(ie.return=G,ce=ie):Ng(Q)}Y=Y.sibling}e:for(Y=null,Q=r;;){if(Q.tag===5){if(Y===null){Y=Q;try{d=Q.stateNode,z?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(A=Q.stateNode,R=Q.memoizedProps.style,w=R!=null&&R.hasOwnProperty("display")?R.display:null,A.style.display=vn("display",w))}catch(pe){yt(r,r.return,pe)}}}else if(Q.tag===6){if(Y===null)try{Q.stateNode.nodeValue=z?"":Q.memoizedProps}catch(pe){yt(r,r.return,pe)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===r)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===r)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===r)break e;Y===Q&&(Y=null),Q=Q.return}Y===Q&&(Y=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:tr(s,r),Pr(r),c&4&&kg(r);break;case 21:break;default:tr(s,r),Pr(r)}}function Pr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Sg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(cr(d,""),c.flags&=-33);var p=Ag(r);ad(r,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,A=Ag(r);od(r,A,w);break;default:throw Error(t(161))}}catch(R){yt(r,r.return,R)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function F0(r,s,a){ce=r,Rg(r)}function Rg(r,s,a){for(var c=(r.mode&1)!==0;ce!==null;){var d=ce,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||wu;if(!w){var A=d.alternate,R=A!==null&&A.memoizedState!==null||Jt;A=wu;var z=Jt;if(wu=w,(Jt=R)&&!z)for(ce=d;ce!==null;)w=ce,R=w.child,w.tag===22&&w.memoizedState!==null?xg(d):R!==null?(R.return=w,ce=R):xg(d);for(;p!==null;)ce=p,Rg(p),p=p.sibling;ce=d,wu=A,Jt=z}Dg(r)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ce=p):Dg(r)}}function Dg(r){for(;ce!==null;){var s=ce;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Jt||Eu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Jt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Zn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&Nm(s,p,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Nm(s,w,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var R=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&a.focus();break;case"img":R.src&&(a.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var Q=Y.dehydrated;Q!==null&&ki(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Jt||s.flags&512&&sd(s)}catch(G){yt(s,s.return,G)}}if(s===r){ce=null;break}if(a=s.sibling,a!==null){a.return=s.return,ce=a;break}ce=s.return}}function Ng(r){for(;ce!==null;){var s=ce;if(s===r){ce=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ce=a;break}ce=s.return}}function xg(r){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Eu(4,s)}catch(R){yt(s,a,R)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(R){yt(s,d,R)}}var p=s.return;try{sd(s)}catch(R){yt(s,p,R)}break;case 5:var w=s.return;try{sd(s)}catch(R){yt(s,w,R)}}}catch(R){yt(s,s.return,R)}if(s===r){ce=null;break}var A=s.sibling;if(A!==null){A.return=s.return,ce=A;break}ce=s.return}}var j0=Math.ceil,Tu=ae.ReactCurrentDispatcher,ld=ae.ReactCurrentOwner,$n=ae.ReactCurrentBatchConfig,Be=0,Lt=null,It=null,Bt=0,Dn=0,xo=xi(0),Dt=0,Wa=null,Ns=0,Iu=0,ud=0,Ha=null,fn=null,cd=0,Oo=1/0,si=null,Su=!1,hd=null,Fi=null,Au=!1,ji=null,Cu=0,qa=0,dd=null,ku=-1,Pu=0;function on(){return(Be&6)!==0?nt():ku!==-1?ku:ku=nt()}function Ui(r){return(r.mode&1)===0?1:(Be&2)!==0&&Bt!==0?Bt&-Bt:T0.transition!==null?(Pu===0&&(Pu=fa()),Pu):(r=Fe,r!==0||(r=window.event,r=r===void 0?16:ao(r.type)),r)}function nr(r,s,a,c){if(50<qa)throw qa=0,dd=null,Error(t(185));_s(r,a,c),((Be&2)===0||r!==Lt)&&(r===Lt&&((Be&2)===0&&(Iu|=a),Dt===4&&zi(r,Bt)),pn(r,c),a===1&&Be===0&&(s.mode&1)===0&&(Oo=nt()+500,nu&&bi()))}function pn(r,s){var a=r.callbackNode;vs(r,s);var c=qr(r,r===Lt?Bt:0);if(c===0)a!==null&&Ii(a),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(a!=null&&Ii(a),s===1)r.tag===0?E0(bg.bind(null,r)):_m(bg.bind(null,r)),y0(function(){(Be&6)===0&&bi()}),a=null;else{switch(mr(c)){case 1:a=to;break;case 4:a=ca;break;case 16:a=ps;break;case 536870912:a=no;break;default:a=ps}a=Bg(a,Og.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Og(r,s){if(ku=-1,Pu=0,(Be&6)!==0)throw Error(t(327));var a=r.callbackNode;if(bo()&&r.callbackNode!==a)return null;var c=qr(r,r===Lt?Bt:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||s)s=Ru(r,c);else{s=c;var d=Be;Be|=2;var p=Lg();(Lt!==r||Bt!==s)&&(si=null,Oo=nt()+500,Os(r,s));do try{B0();break}catch(A){Vg(r,A)}while(!0);Dh(),Tu.current=p,Be=d,It!==null?s=0:(Lt=null,Bt=0,s=Dt)}if(s!==0){if(s===2&&(d=da(r),d!==0&&(c=d,s=fd(r,d))),s===1)throw a=Wa,Os(r,0),zi(r,c),pn(r,nt()),a;if(s===6)zi(r,c);else{if(d=r.current.alternate,(c&30)===0&&!U0(d)&&(s=Ru(r,c),s===2&&(p=da(r),p!==0&&(c=p,s=fd(r,p))),s===1))throw a=Wa,Os(r,0),zi(r,c),pn(r,nt()),a;switch(r.finishedWork=d,r.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:bs(r,fn,si);break;case 3:if(zi(r,c),(c&130023424)===c&&(s=cd+500-nt(),10<s)){if(qr(r,0)!==0)break;if(d=r.suspendedLanes,(d&c)!==c){on(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=_h(bs.bind(null,r,fn,si),s);break}bs(r,fn,si);break;case 4:if(zi(r,c),(c&4194240)===c)break;for(s=r.eventTimes,d=-1;0<c;){var w=31-In(c);p=1<<w,w=s[w],w>d&&(d=w),c&=~p}if(c=d,c=nt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*j0(c/1960))-c,10<c){r.timeoutHandle=_h(bs.bind(null,r,fn,si),c);break}bs(r,fn,si);break;case 5:bs(r,fn,si);break;default:throw Error(t(329))}}}return pn(r,nt()),r.callbackNode===a?Og.bind(null,r):null}function fd(r,s){var a=Ha;return r.current.memoizedState.isDehydrated&&(Os(r,s).flags|=256),r=Ru(r,s),r!==2&&(s=fn,fn=a,s!==null&&pd(s)),r}function pd(r){fn===null?fn=r:fn.push.apply(fn,r)}function U0(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Xn(p(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zi(r,s){for(s&=~ud,s&=~Iu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-In(s),c=1<<a;r[a]=-1,s&=~c}}function bg(r){if((Be&6)!==0)throw Error(t(327));bo();var s=qr(r,0);if((s&1)===0)return pn(r,nt()),null;var a=Ru(r,s);if(r.tag!==0&&a===2){var c=da(r);c!==0&&(s=c,a=fd(r,c))}if(a===1)throw a=Wa,Os(r,0),zi(r,s),pn(r,nt()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,bs(r,fn,si),pn(r,nt()),null}function md(r,s){var a=Be;Be|=1;try{return r(s)}finally{Be=a,Be===0&&(Oo=nt()+500,nu&&bi())}}function xs(r){ji!==null&&ji.tag===0&&(Be&6)===0&&bo();var s=Be;Be|=1;var a=$n.transition,c=Fe;try{if($n.transition=null,Fe=1,r)return r()}finally{Fe=c,$n.transition=a,Be=s,(Be&6)===0&&bi()}}function gd(){Dn=xo.current,it(xo)}function Os(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,g0(a)),It!==null)for(a=It.return;a!==null;){var c=a;switch(Ah(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&eu();break;case 3:Ro(),it(cn),it(Yt),Fh();break;case 5:Lh(c);break;case 4:Ro();break;case 13:it(dt);break;case 19:it(dt);break;case 10:Nh(c.type._context);break;case 22:case 23:gd()}a=a.return}if(Lt=r,It=r=Bi(r.current,null),Bt=Dn=s,Dt=0,Wa=null,ud=Iu=Ns=0,fn=Ha=null,Ps!==null){for(s=0;s<Ps.length;s++)if(a=Ps[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}Ps=null}return r}function Vg(r,s){do{var a=It;try{if(Dh(),du.current=gu,fu){for(var c=ft.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}fu=!1}if(Ds=0,Vt=Rt=ft=null,Fa=!1,ja=0,ld.current=null,a===null||a.return===null){Dt=1,Wa=s,It=null;break}e:{var p=r,w=a.return,A=a,R=s;if(s=Bt,A.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var z=R,Y=A,Q=Y.tag;if((Y.mode&1)===0&&(Q===0||Q===11||Q===15)){var G=Y.alternate;G?(Y.updateQueue=G.updateQueue,Y.memoizedState=G.memoizedState,Y.lanes=G.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ie=og(w);if(ie!==null){ie.flags&=-257,ag(ie,w,A,p,s),ie.mode&1&&sg(p,z,s),s=ie,R=z;var fe=s.updateQueue;if(fe===null){var pe=new Set;pe.add(R),s.updateQueue=pe}else fe.add(R);break e}else{if((s&1)===0){sg(p,z,s),yd();break e}R=Error(t(426))}}else if(at&&A.mode&1){var _t=og(w);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),ag(_t,w,A,p,s),Ph(Do(R,A));break e}}p=R=Do(R,A),Dt!==4&&(Dt=2),Ha===null?Ha=[p]:Ha.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var M=rg(p,R,s);Dm(p,M);break e;case 1:A=R;var b=p.type,j=p.stateNode;if((p.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Fi===null||!Fi.has(j)))){p.flags|=65536,s&=-s,p.lanes|=s;var Z=ig(p,A,s);Dm(p,Z);break e}}p=p.return}while(p!==null)}Fg(a)}catch(ge){s=ge,It===a&&a!==null&&(It=a=a.return);continue}break}while(!0)}function Lg(){var r=Tu.current;return Tu.current=gu,r===null?gu:r}function yd(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Lt===null||(Ns&268435455)===0&&(Iu&268435455)===0||zi(Lt,Bt)}function Ru(r,s){var a=Be;Be|=2;var c=Lg();(Lt!==r||Bt!==s)&&(si=null,Os(r,s));do try{z0();break}catch(d){Vg(r,d)}while(!0);if(Dh(),Be=a,Tu.current=c,It!==null)throw Error(t(261));return Lt=null,Bt=0,Dt}function z0(){for(;It!==null;)Mg(It)}function B0(){for(;It!==null&&!Wr();)Mg(It)}function Mg(r){var s=zg(r.alternate,r,Dn);r.memoizedProps=r.pendingProps,s===null?Fg(r):It=s,ld.current=null}function Fg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=b0(a,s,Dn),a!==null){It=a;return}}else{if(a=V0(a,s),a!==null){a.flags&=32767,It=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Dt=6,It=null;return}}if(s=s.sibling,s!==null){It=s;return}It=s=r}while(s!==null);Dt===0&&(Dt=5)}function bs(r,s,a){var c=Fe,d=$n.transition;try{$n.transition=null,Fe=1,$0(r,s,a,c)}finally{$n.transition=d,Fe=c}return null}function $0(r,s,a,c){do bo();while(ji!==null);if((Be&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var p=a.lanes|a.childLanes;if(rh(r,p),r===Lt&&(It=Lt=null,Bt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Au||(Au=!0,Bg(ps,function(){return bo(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=$n.transition,$n.transition=null;var w=Fe;Fe=1;var A=Be;Be|=4,ld.current=null,M0(r,a),Pg(a,r),u0(yh),Yr=!!gh,yh=gh=null,r.current=a,F0(a),Hr(),Be=A,Fe=w,$n.transition=p}else r.current=a;if(Au&&(Au=!1,ji=r,Cu=d),p=r.pendingLanes,p===0&&(Fi=null),Ll(a.stateNode),pn(r,nt()),s!==null)for(c=r.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Su)throw Su=!1,r=hd,hd=null,r;return(Cu&1)!==0&&r.tag!==0&&bo(),p=r.pendingLanes,(p&1)!==0?r===dd?qa++:(qa=0,dd=r):qa=0,bi(),null}function bo(){if(ji!==null){var r=mr(Cu),s=$n.transition,a=Fe;try{if($n.transition=null,Fe=16>r?16:r,ji===null)var c=!1;else{if(r=ji,ji=null,Cu=0,(Be&6)!==0)throw Error(t(331));var d=Be;for(Be|=4,ce=r.current;ce!==null;){var p=ce,w=p.child;if((ce.flags&16)!==0){var A=p.deletions;if(A!==null){for(var R=0;R<A.length;R++){var z=A[R];for(ce=z;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:$a(8,Y,p)}var Q=Y.child;if(Q!==null)Q.return=Y,ce=Q;else for(;ce!==null;){Y=ce;var G=Y.sibling,ie=Y.return;if(Ig(Y),Y===z){ce=null;break}if(G!==null){G.return=ie,ce=G;break}ce=ie}}}var fe=p.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var _t=pe.sibling;pe.sibling=null,pe=_t}while(pe!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,ce=w;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:$a(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,ce=M;break e}ce=p.return}}var b=r.current;for(ce=b;ce!==null;){w=ce;var j=w.child;if((w.subtreeFlags&2064)!==0&&j!==null)j.return=w,ce=j;else e:for(w=b;ce!==null;){if(A=ce,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Eu(9,A)}}catch(ge){yt(A,A.return,ge)}if(A===w){ce=null;break e}var Z=A.sibling;if(Z!==null){Z.return=A.return,ce=Z;break e}ce=A.return}}if(Be=d,bi(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(ms,r)}catch{}c=!0}return c}finally{Fe=a,$n.transition=s}}return!1}function jg(r,s,a){s=Do(a,s),s=rg(r,s,1),r=Li(r,s,1),s=on(),r!==null&&(_s(r,1,s),pn(r,s))}function yt(r,s,a){if(r.tag===3)jg(r,r,a);else for(;s!==null;){if(s.tag===3){jg(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Fi===null||!Fi.has(c))){r=Do(a,r),r=ig(s,r,1),s=Li(s,r,1),r=on(),s!==null&&(_s(s,1,r),pn(s,r));break}}s=s.return}}function W0(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),s=on(),r.pingedLanes|=r.suspendedLanes&a,Lt===r&&(Bt&a)===a&&(Dt===4||Dt===3&&(Bt&130023424)===Bt&&500>nt()-cd?Os(r,0):ud|=a),pn(r,s)}function Ug(r,s){s===0&&((r.mode&1)===0?s=1:(s=Si,Si<<=1,(Si&130023424)===0&&(Si=4194304)));var a=on();r=ni(r,s),r!==null&&(_s(r,s,a),pn(r,a))}function H0(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Ug(r,a)}function q0(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Ug(r,a)}var zg;zg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||cn.current)dn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return dn=!1,O0(r,s,a);dn=(r.flags&131072)!==0}else dn=!1,at&&(s.flags&1048576)!==0&&wm(s,iu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;_u(r,s),r=s.pendingProps;var d=To(s,Yt.current);Po(s,a),d=zh(null,s,c,r,d,a);var p=Bh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,hn(c)?(p=!0,tu(s)):p=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,bh(s),d.updater=yu,s.stateNode=d,d._reactInternals=s,Kh(s,c,r,a),s=Jh(null,s,c,!0,p,a)):(s.tag=0,at&&p&&Sh(s),sn(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(_u(r,s),r=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=K0(c),r=Zn(c,r),d){case 0:s=Xh(null,s,c,r,a);break e;case 1:s=fg(null,s,c,r,a);break e;case 11:s=lg(null,s,c,r,a);break e;case 14:s=ug(null,s,c,Zn(c.type,r),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Zn(c,d),Xh(r,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Zn(c,d),fg(r,s,c,d,a);case 3:e:{if(pg(s),r===null)throw Error(t(387));c=s.pendingProps,p=s.memoizedState,d=p.element,Rm(r,s),cu(s,c,null,a);var w=s.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){d=Do(Error(t(423)),s),s=mg(r,s,c,a,d);break e}else if(c!==d){d=Do(Error(t(424)),s),s=mg(r,s,c,a,d);break e}else for(Rn=Ni(s.stateNode.containerInfo.firstChild),Pn=s,at=!0,Jn=null,a=km(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ao(),c===d){s=ii(r,s,a);break e}sn(r,s,c,a)}s=s.child}return s;case 5:return xm(s),r===null&&kh(s),c=s.type,d=s.pendingProps,p=r!==null?r.memoizedProps:null,w=d.children,vh(c,d)?w=null:p!==null&&vh(c,p)&&(s.flags|=32),dg(r,s),sn(r,s,w,a),s.child;case 6:return r===null&&kh(s),null;case 13:return gg(r,s,a);case 4:return Vh(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Co(s,null,c,a):sn(r,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Zn(c,d),lg(r,s,c,d,a);case 7:return sn(r,s,s.pendingProps,a),s.child;case 8:return sn(r,s,s.pendingProps.children,a),s.child;case 12:return sn(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,p=s.memoizedProps,w=d.value,Ze(au,c._currentValue),c._currentValue=w,p!==null)if(Xn(p.value,w)){if(p.children===d.children&&!cn.current){s=ii(r,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var A=p.dependencies;if(A!==null){w=p.child;for(var R=A.firstContext;R!==null;){if(R.context===c){if(p.tag===1){R=ri(-1,a&-a),R.tag=2;var z=p.updateQueue;if(z!==null){z=z.shared;var Y=z.pending;Y===null?R.next=R:(R.next=Y.next,Y.next=R),z.pending=R}}p.lanes|=a,R=p.alternate,R!==null&&(R.lanes|=a),xh(p.return,a,s),A.lanes|=a;break}R=R.next}}else if(p.tag===10)w=p.type===s.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),xh(w,a,s),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===s){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}sn(r,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,Po(s,a),d=zn(d),c=c(d),s.flags|=1,sn(r,s,c,a),s.child;case 14:return c=s.type,d=Zn(c,s.pendingProps),d=Zn(c.type,d),ug(r,s,c,d,a);case 15:return cg(r,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Zn(c,d),_u(r,s),s.tag=1,hn(c)?(r=!0,tu(s)):r=!1,Po(s,a),tg(s,c,d),Kh(s,c,d,a),Jh(null,s,c,!0,r,a);case 19:return vg(r,s,a);case 22:return hg(r,s,a)}throw Error(t(156,s.tag))};function Bg(r,s){return $r(r,s)}function G0(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(r,s,a,c){return new G0(r,s,a,c)}function vd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function K0(r){if(typeof r=="function")return vd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===L)return 11;if(r===He)return 14}return 2}function Bi(r,s){var a=r.alternate;return a===null?(a=Wn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Du(r,s,a,c,d,p){var w=2;if(c=r,typeof r=="function")vd(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case D:return Vs(a.children,d,p,s);case S:w=8,d|=8;break;case P:return r=Wn(12,a,s,d|2),r.elementType=P,r.lanes=p,r;case C:return r=Wn(13,a,s,d),r.elementType=C,r.lanes=p,r;case je:return r=Wn(19,a,s,d),r.elementType=je,r.lanes=p,r;case Ue:return Nu(a,d,p,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case x:w=10;break e;case N:w=9;break e;case L:w=11;break e;case He:w=14;break e;case $e:w=16,c=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Wn(w,a,s,d),s.elementType=r,s.type=c,s.lanes=p,s}function Vs(r,s,a,c){return r=Wn(7,r,c,s),r.lanes=a,r}function Nu(r,s,a,c){return r=Wn(22,r,c,s),r.elementType=Ue,r.lanes=a,r.stateNode={isHidden:!1},r}function _d(r,s,a){return r=Wn(6,r,null,s),r.lanes=a,r}function wd(r,s,a){return s=Wn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function Y0(r,s,a,c,d){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pa(0),this.expirationTimes=pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pa(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Ed(r,s,a,c,d,p,w,A,R){return r=new Y0(r,s,a,A,R),s===1?(s=1,p===!0&&(s|=8)):s=0,p=Wn(3,null,null,s),r.current=p,p.stateNode=r,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},bh(p),r}function Q0(r,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:c==null?null:""+c,children:r,containerInfo:s,implementation:a}}function $g(r){if(!r)return Oi;r=r._reactInternals;e:{if(En(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(hn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(hn(a))return ym(r,a,s)}return s}function Wg(r,s,a,c,d,p,w,A,R){return r=Ed(a,c,!0,r,d,p,w,A,R),r.context=$g(null),a=r.current,c=on(),d=Ui(a),p=ri(c,d),p.callback=s??null,Li(a,p,d),r.current.lanes=d,_s(r,d,c),pn(r,c),r}function xu(r,s,a,c){var d=s.current,p=on(),w=Ui(d);return a=$g(a),s.context===null?s.context=a:s.pendingContext=a,s=ri(p,w),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=Li(d,s,w),r!==null&&(nr(r,d,w,p),uu(r,d,w)),w}function Ou(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Hg(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Td(r,s){Hg(r,s),(r=r.alternate)&&Hg(r,s)}function X0(){return null}var qg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Id(r){this._internalRoot=r}bu.prototype.render=Id.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));xu(r,s,null,null)},bu.prototype.unmount=Id.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;xs(function(){xu(null,r,null,null)}),s[Jr]=null}};function bu(r){this._internalRoot=r}bu.prototype.unstable_scheduleHydration=function(r){if(r){var s=va();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Sn.length&&s!==0&&s<Sn[a].priority;a++);Sn.splice(a,0,r),a===0&&so(r)}};function Sd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Vu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Gg(){}function J0(r,s,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var z=Ou(w);p.call(z)}}var w=Wg(s,c,r,0,null,!1,!1,"",Gg);return r._reactRootContainer=w,r[Jr]=w.current,Da(r.nodeType===8?r.parentNode:r),xs(),w}for(;d=r.lastChild;)r.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var z=Ou(R);A.call(z)}}var R=Ed(r,0,!1,null,null,!1,!1,"",Gg);return r._reactRootContainer=R,r[Jr]=R.current,Da(r.nodeType===8?r.parentNode:r),xs(function(){xu(s,R,a,c)}),R}function Lu(r,s,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var A=d;d=function(){var R=Ou(w);A.call(R)}}xu(s,w,r,d)}else w=J0(a,s,r,d,c);return Ou(w)}ga=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=qe(s.pendingLanes);a!==0&&(ma(s,a|1),pn(s,nt()),(Be&6)===0&&(Oo=nt()+500,bi()))}break;case 13:xs(function(){var c=ni(r,1);if(c!==null){var d=on();nr(c,r,1,d)}}),Td(r,1)}},ro=function(r){if(r.tag===13){var s=ni(r,134217728);if(s!==null){var a=on();nr(s,r,134217728,a)}Td(r,134217728)}},ya=function(r){if(r.tag===13){var s=Ui(r),a=ni(r,s);if(a!==null){var c=on();nr(a,r,s,c)}Td(r,s)}},va=function(){return Fe},_a=function(r,s){var a=Fe;try{return Fe=r,s()}finally{Fe=a}},Vn=function(r,s,a){switch(s){case"input":if(On(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var d=Zl(c);if(!d)throw Error(t(90));bt(c),On(c,d)}}}break;case"textarea":Zs(r,a);break;case"select":s=a.value,s!=null&&yn(r,!!a.multiple,s,!1)}},Qe=md,rn=xs;var Z0={usingClientEntryPoint:!1,Events:[Oa,wo,Zl,ht,_n,md]},Ga={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eT={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Gt(r),r===null?null:r.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||X0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{ms=Mu.inject(eT),Tn=Mu}catch{}}return mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z0,mn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sd(s))throw Error(t(200));return Q0(r,s,null,a)},mn.createRoot=function(r,s){if(!Sd(r))throw Error(t(299));var a=!1,c="",d=qg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Ed(r,1,!1,null,null,a,!1,c,d),r[Jr]=s.current,Da(r.nodeType===8?r.parentNode:r),new Id(s)},mn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Gt(s),r=r===null?null:r.stateNode,r},mn.flushSync=function(r){return xs(r)},mn.hydrate=function(r,s,a){if(!Vu(s))throw Error(t(200));return Lu(null,r,s,!0,a)},mn.hydrateRoot=function(r,s,a){if(!Sd(r))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=qg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Wg(s,null,r,1,a??null,d,!1,p,w),r[Jr]=s.current,Da(r),c)for(r=0;r<c.length;r++)a=c[r],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new bu(s)},mn.render=function(r,s,a){if(!Vu(s))throw Error(t(200));return Lu(null,r,s,!1,a)},mn.unmountComponentAtNode=function(r){if(!Vu(r))throw Error(t(40));return r._reactRootContainer?(xs(function(){Lu(null,null,r,!1,function(){r._reactRootContainer=null,r[Jr]=null})}),!0):!1},mn.unstable_batchedUpdates=md,mn.unstable_renderSubtreeIntoContainer=function(r,s,a,c){if(!Vu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Lu(r,s,a,!1,c)},mn.version="18.3.1-next-f1338f8080-20240426",mn}var ty;function cT(){if(ty)return kd.exports;ty=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kd.exports=uT(),kd.exports}var ny;function hT(){if(ny)return Fu;ny=1;var n=cT();return Fu.createRoot=n.createRoot,Fu.hydrateRoot=n.hydrateRoot,Fu}var dT=hT();const fT=qv(dT),ry=n=>{const e=new Date(n),t=e.getDay(),o=(t===0?7:t)-1;return e.setDate(e.getDate()-o),e.setHours(0,0,0,0),e},pT=n=>{const e=new Date(n),t=e.getDay(),o=7-(t===0?7:t);return e.setDate(e.getDate()+o),e.setHours(23,59,59,999),e},mT=(n,e)=>{const t=[];let i=ry(new Date(n));const o=ry(new Date(e));for(;i<=o;)t.push(new Date(i)),i.setDate(i.getDate()+7);return t},Nn=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`},ot=n=>{const[e,t,i]=n.split("-").map(Number);if(e===void 0||t===void 0||i===void 0)throw new Error(`Invalid date string: ${n}`);return new Date(e,t-1,i)},Ku=(n,e,t)=>{const i=n.getTime(),o=e.getTime(),l=t.getTime();return i>=o&&i<=l},Kv=(n,e)=>{const t=[],i=new Date(n);for(;i<=e;)t.push(new Date(i)),i.setDate(i.getDate()+1);return t},iy=[{yearsOfService:0,hoursPerMonth:10},{yearsOfService:4,hoursPerMonth:12},{yearsOfService:9,hoursPerMonth:14}],Dd={"5/40":{hoursPerDay:8},"9/80":{hoursPerRegularDay:9,hoursPerNonRDOFriday:8}},gT=(n,e)=>{const t=e.getFullYear()-n.getFullYear(),i=e.getMonth()-n.getMonth(),o=e.getDate()-n.getDate();return i<0||i===0&&o<0?t-1:t},yT=n=>{var t;const e=iy.filter(i=>n>=i.yearsOfService).sort((i,o)=>o.yearsOfService-i.yearsOfService)[0];return(e==null?void 0:e.hoursPerMonth)??((t=iy[0])==null?void 0:t.hoursPerMonth)??10},Yv=(n,e,t)=>{const i=new Date(e);i.setHours(0,0,0,0);const o=new Date(t);o.setHours(0,0,0,0);const l=Math.round((o.getTime()-i.getTime())/(1e3*60*60*24))+1,h=gT(n,e),f=yT(h),y=365.25/12,E=f/y*7/7*l;return Math.round(E*100)/100},Qv=n=>{const e=n.getDay();return e===0||e===6},Ff=(n,e)=>{if(n.getDay()!==5)return!1;const o=(l=>{const h=new Date(l.valueOf()),f=(l.getDay()+6)%7;h.setDate(h.getDate()-f+3);const g=new Date(h.getFullYear(),0,4),y=h.getTime()-g.getTime(),_=1e3*60*60*24*7;return 1+Math.floor(y/_)})(n)%2===0;return e==="even-fridays"?o:!o},jf=(n,e)=>Qv(n)?0:e.type==="5/40"?Dd["5/40"].hoursPerDay:n.getDay()===5?e.rdoPattern&&Ff(n,e.rdoPattern)?0:Dd["9/80"].hoursPerNonRDOFriday:Dd["9/80"].hoursPerRegularDay,vT=(n,e,t)=>{const i=[],o=new Date(n);for(;o<=e;)o.getDay()===5&&Ff(o,t)&&i.push(new Date(o)),o.setDate(o.getDate()+1);return i},Uf=(n,e,t,i=[])=>{let o=0;const l=Kv(n,e),h=new Set(i.map(f=>ot(f.date).toISOString().split("T")[0]));for(const f of l){const g=f.toISOString().split("T")[0];h.has(g)||(o+=jf(f,t))}return o},_T=(n,e)=>e.type!=="9/80"||!e.rdoPattern?!1:Ff(n,e.rdoPattern),Dc=(n,e,t=[])=>{const i=ot(n.startDate),o=ot(n.endDate);return Uf(i,o,e,t)},Xv=320,wT=280,ET=(n,e,t,i,o)=>{const l=mT(e,t),h=[];let f=n.currentBalance;const g=ot(n.startDate),y=ot(n.balanceAsOfDate);for(const _ of l){const E=pT(_),I=_>=y?Yv(g,_,E):0,O=i.filter(ae=>{const Oe=ot(ae.startDate),le=ot(ae.endDate);return Ku(Oe,_,E)||Ku(le,_,E)||Oe<_&&le>E}),W=o.filter(ae=>Ku(ot(ae.date),_,E)),$=n.workSchedule.type==="9/80"&&n.workSchedule.rdoPattern?vT(_,E,n.workSchedule.rdoPattern):[],U=O.reduce((ae,Oe)=>{const le=Dc(Oe,n.workSchedule,o);return ae+le},0),X=f,re=X+I-U,me=Math.min(re,Xv);h.push({weekStartDate:Nn(_),weekEndDate:Nn(E),startingBalance:X,accrued:I,used:U,endingBalance:me,plannedVacations:O,holidays:W,rdoDays:$.map(Nn)}),f=me}return h},sy=(n,e)=>{var y,_;const t=n.filter(E=>ot(E.weekStartDate).getFullYear()===e);if(t.length===0)return{year:e,startingBalance:0,totalAccrued:0,totalUsed:0,endingBalance:0,totalPlannedVacations:0,totalHolidayHours:0};const i=((y=t[0])==null?void 0:y.startingBalance)??0,o=t.reduce((E,I)=>E+I.accrued,0),l=t.reduce((E,I)=>E+I.used,0),h=((_=t[t.length-1])==null?void 0:_.endingBalance)??0,f=new Set(t.flatMap(E=>E.plannedVacations.map(I=>I.id))),g=t.reduce((E,I)=>E+I.holidays.reduce((O,W)=>O+W.hours,0),0);return{year:e,startingBalance:i,totalAccrued:o,totalUsed:l,endingBalance:h,totalPlannedVacations:f.size,totalHolidayHours:g}},TT=(n,e,t,i=[])=>{const o=new Date,l=ot(n.startDate),h=Yv(l,o,e),f=t.filter(g=>ot(g.endDate)<=e).reduce((g,y)=>{const _=Dc(y,n.workSchedule,i);return g+_},0);return n.currentBalance+h-f},IT=()=>{};var oy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},ST=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],h=n[t++],f=n[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],h=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Zv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],h=o+1<n.length,f=h?n[o+1]:0,g=o+2<n.length,y=g?n[o+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let I=(f&15)<<2|y>>6,O=y&63;g||(O=64,h||(I=64)),i.push(t[_],t[E],t[I],t[O])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Jv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ST(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new AT;const I=l<<2|f>>4;if(i.push(I),y!==64){const O=f<<4&240|y>>2;if(i.push(O),E!==64){const W=y<<6&192|E;i.push(W)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class AT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CT=function(n){const e=Jv(n);return Zv.encodeByteArray(e,!0)},ac=function(n){return CT(n).replace(/\./g,"")},e_=function(n){try{return Zv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=()=>kT().__FIREBASE_DEFAULTS__,RT=()=>{if(typeof process>"u"||typeof oy>"u")return;const n=oy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},DT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&e_(n[1]);return e&&JSON.parse(e)},Nc=()=>{try{return IT()||PT()||RT()||DT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},t_=n=>{var e,t;return(t=(e=Nc())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},NT=n=>{const e=t_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},n_=()=>{var n;return(n=Nc())==null?void 0:n.config},r_=n=>{var e;return(e=Nc())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function i_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ac(JSON.stringify(t)),ac(JSON.stringify(h)),""].join(".")}const il={};function bT(){const n={prod:[],emulator:[]};for(const e of Object.keys(il))il[e]?n.emulator.push(e):n.prod.push(e);return n}function VT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ay=!1;function s_(n,e){if(typeof window>"u"||typeof document>"u"||!ta(window.location.host)||il[n]===e||il[n]||ay)return;il[n]=e;function t(I){return`__firebase__banner__${I}`}const i="__firebase__banner",l=bT().prod.length>0;function h(){const I=document.getElementById(i);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,O){I.setAttribute("width","24"),I.setAttribute("id",O),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{ay=!0,h()},I}function _(I,O){I.setAttribute("id",O),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function E(){const I=VT(i),O=t("text"),W=document.getElementById(O)||document.createElement("span"),$=t("learnmore"),U=document.getElementById($)||document.createElement("a"),X=t("preprendIcon"),re=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const me=I.element;f(me),_(U,$);const ae=y();g(re,X),me.append(re,W,U,ae),document.body.appendChild(me)}l?(W.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function MT(){var e;const n=(e=Nc())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function UT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zT(){const n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function BT(){return!MT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $T(){try{return typeof indexedDB=="object"}catch{return!1}}function WT(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="FirebaseError";class pi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=HT,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tl.prototype.create)}}class Tl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?qT(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new pi(o,f,i)}}function qT(n,e){return n.replace(GT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const GT=/\{\$([^}]+)}/g;function KT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bs(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],h=e[o];if(ly(l)&&ly(h)){if(!Bs(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function ly(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function YT(n,e){const t=new QT(n,e);return t.subscribe.bind(t)}class QT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");XT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Nd),o.error===void 0&&(o.error=Nd),o.complete===void 0&&(o.complete=Nd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XT(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){return n&&n._delegate?n._delegate:n}class $s{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new xT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eI(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ZT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZT(n){return n===Ls?void 0:n}function eI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new JT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ve||(Ve={}));const nI={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},rI=Ve.INFO,iI={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},sI=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=iI[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zf{constructor(e){this.name=e,this._logLevel=rI,this._logHandler=sI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const oI=(n,e)=>e.some(t=>n instanceof t);let uy,cy;function aI(){return uy||(uy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lI(){return cy||(cy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const o_=new WeakMap,Xd=new WeakMap,a_=new WeakMap,xd=new WeakMap,Bf=new WeakMap;function uI(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(Yi(n.result)),o()},h=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&o_.set(t,n)}).catch(()=>{}),Bf.set(e,n),e}function cI(n){if(Xd.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});Xd.set(n,e)}let Jd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xd.get(n);if(e==="objectStoreNames")return n.objectStoreNames||a_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hI(n){Jd=n(Jd)}function dI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Od(this),e,...t);return a_.set(i,e.sort?e.sort():[e]),Yi(i)}:lI().includes(n)?function(...e){return n.apply(Od(this),e),Yi(o_.get(this))}:function(...e){return Yi(n.apply(Od(this),e))}}function fI(n){return typeof n=="function"?dI(n):(n instanceof IDBTransaction&&cI(n),oI(n,aI())?new Proxy(n,Jd):n)}function Yi(n){if(n instanceof IDBRequest)return uI(n);if(xd.has(n))return xd.get(n);const e=fI(n);return e!==n&&(xd.set(n,e),Bf.set(e,n)),e}const Od=n=>Bf.get(n);function pI(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(n,e),f=Yi(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Yi(h.result),g.oldVersion,g.newVersion,Yi(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const mI=["get","getKey","getAll","getAllKeys","count"],gI=["put","add","delete","clear"],bd=new Map;function hy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(bd.get(e))return bd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=gI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||mI.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return bd.set(e,l),l}hI(n=>({...n,get:(e,t,i)=>hy(e,t)||n.get(e,t,i),has:(e,t)=>!!hy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function vI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zd="@firebase/app",dy="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new zf("@firebase/app"),_I="@firebase/app-compat",wI="@firebase/analytics-compat",EI="@firebase/analytics",TI="@firebase/app-check-compat",II="@firebase/app-check",SI="@firebase/auth",AI="@firebase/auth-compat",CI="@firebase/database",kI="@firebase/data-connect",PI="@firebase/database-compat",RI="@firebase/functions",DI="@firebase/functions-compat",NI="@firebase/installations",xI="@firebase/installations-compat",OI="@firebase/messaging",bI="@firebase/messaging-compat",VI="@firebase/performance",LI="@firebase/performance-compat",MI="@firebase/remote-config",FI="@firebase/remote-config-compat",jI="@firebase/storage",UI="@firebase/storage-compat",zI="@firebase/firestore",BI="@firebase/ai",$I="@firebase/firestore-compat",WI="firebase",HI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="[DEFAULT]",qI={[Zd]:"fire-core",[_I]:"fire-core-compat",[EI]:"fire-analytics",[wI]:"fire-analytics-compat",[II]:"fire-app-check",[TI]:"fire-app-check-compat",[SI]:"fire-auth",[AI]:"fire-auth-compat",[CI]:"fire-rtdb",[kI]:"fire-data-connect",[PI]:"fire-rtdb-compat",[RI]:"fire-fn",[DI]:"fire-fn-compat",[NI]:"fire-iid",[xI]:"fire-iid-compat",[OI]:"fire-fcm",[bI]:"fire-fcm-compat",[VI]:"fire-perf",[LI]:"fire-perf-compat",[MI]:"fire-rc",[FI]:"fire-rc-compat",[jI]:"fire-gcs",[UI]:"fire-gcs-compat",[zI]:"fire-fst",[$I]:"fire-fst-compat",[BI]:"fire-vertex","fire-js":"fire-js",[WI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new Map,GI=new Map,tf=new Map;function fy(n,e){try{n.container.addComponent(e)}catch(t){ci.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Go(n){const e=n.name;if(tf.has(e))return ci.debug(`There were multiple attempts to register component ${e}.`),!1;tf.set(e,n);for(const t of lc.values())fy(t,n);for(const t of GI.values())fy(t,n);return!0}function $f(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new Tl("app","Firebase",KI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new $s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=HI;function l_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:ef,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Qi.create("bad-app-name",{appName:String(o)});if(t||(t=n_()),!t)throw Qi.create("no-options");const l=lc.get(o);if(l){if(Bs(t,l.options)&&Bs(i,l.config))return l;throw Qi.create("duplicate-app",{appName:o})}const h=new tI(o);for(const g of tf.values())h.addComponent(g);const f=new YI(t,i,h);return lc.set(o,f),f}function u_(n=ef){const e=lc.get(n);if(!e&&n===ef&&n_())return l_();if(!e)throw Qi.create("no-app",{appName:n});return e}function Xi(n,e,t){let i=qI[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ci.warn(h.join(" "));return}Go(new $s(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="firebase-heartbeat-database",XI=1,cl="firebase-heartbeat-store";let Vd=null;function c_(){return Vd||(Vd=pI(QI,XI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qi.create("idb-open",{originalErrorMessage:n.message})})),Vd}async function JI(n){try{const t=(await c_()).transaction(cl),i=await t.objectStore(cl).get(h_(n));return await t.done,i}catch(e){if(e instanceof pi)ci.warn(e.message);else{const t=Qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ci.warn(t.message)}}}async function py(n,e){try{const i=(await c_()).transaction(cl,"readwrite");await i.objectStore(cl).put(e,h_(n)),await i.done}catch(t){if(t instanceof pi)ci.warn(t.message);else{const i=Qi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ci.warn(i.message)}}}function h_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=1024,eS=30;class tS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=my();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>eS){const h=iS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ci.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=my(),{heartbeatsToSend:i,unsentEntries:o}=nS(this._heartbeatsCache.heartbeats),l=ac(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ci.warn(t),""}}}function my(){return new Date().toISOString().substring(0,10)}function nS(n,e=ZI){const t=[];let i=n.slice();for(const o of n){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),gy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),gy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class rS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $T()?WT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await JI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return py(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return py(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function gy(n){return ac(JSON.stringify({version:2,heartbeats:n})).length}function iS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(n){Go(new $s("platform-logger",e=>new yI(e),"PRIVATE")),Go(new $s("heartbeat",e=>new tS(e),"PRIVATE")),Xi(Zd,dy,n),Xi(Zd,dy,"esm2020"),Xi("fire-js","")}sS("");var yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ji,d_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function P(){}P.prototype=S.prototype,D.F=S.prototype,D.prototype=new P,D.prototype.constructor=D,D.D=function(x,N,L){for(var C=Array(arguments.length-2),je=2;je<arguments.length;je++)C[je-2]=arguments[je];return S.prototype[N].apply(x,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,S,P){P||(P=0);const x=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)x[N]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(N=0;N<16;++N)x[N]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=D.g[0],P=D.g[1],N=D.g[2];let L=D.g[3],C;C=S+(L^P&(N^L))+x[0]+3614090360&4294967295,S=P+(C<<7&4294967295|C>>>25),C=L+(N^S&(P^N))+x[1]+3905402710&4294967295,L=S+(C<<12&4294967295|C>>>20),C=N+(P^L&(S^P))+x[2]+606105819&4294967295,N=L+(C<<17&4294967295|C>>>15),C=P+(S^N&(L^S))+x[3]+3250441966&4294967295,P=N+(C<<22&4294967295|C>>>10),C=S+(L^P&(N^L))+x[4]+4118548399&4294967295,S=P+(C<<7&4294967295|C>>>25),C=L+(N^S&(P^N))+x[5]+1200080426&4294967295,L=S+(C<<12&4294967295|C>>>20),C=N+(P^L&(S^P))+x[6]+2821735955&4294967295,N=L+(C<<17&4294967295|C>>>15),C=P+(S^N&(L^S))+x[7]+4249261313&4294967295,P=N+(C<<22&4294967295|C>>>10),C=S+(L^P&(N^L))+x[8]+1770035416&4294967295,S=P+(C<<7&4294967295|C>>>25),C=L+(N^S&(P^N))+x[9]+2336552879&4294967295,L=S+(C<<12&4294967295|C>>>20),C=N+(P^L&(S^P))+x[10]+4294925233&4294967295,N=L+(C<<17&4294967295|C>>>15),C=P+(S^N&(L^S))+x[11]+2304563134&4294967295,P=N+(C<<22&4294967295|C>>>10),C=S+(L^P&(N^L))+x[12]+1804603682&4294967295,S=P+(C<<7&4294967295|C>>>25),C=L+(N^S&(P^N))+x[13]+4254626195&4294967295,L=S+(C<<12&4294967295|C>>>20),C=N+(P^L&(S^P))+x[14]+2792965006&4294967295,N=L+(C<<17&4294967295|C>>>15),C=P+(S^N&(L^S))+x[15]+1236535329&4294967295,P=N+(C<<22&4294967295|C>>>10),C=S+(N^L&(P^N))+x[1]+4129170786&4294967295,S=P+(C<<5&4294967295|C>>>27),C=L+(P^N&(S^P))+x[6]+3225465664&4294967295,L=S+(C<<9&4294967295|C>>>23),C=N+(S^P&(L^S))+x[11]+643717713&4294967295,N=L+(C<<14&4294967295|C>>>18),C=P+(L^S&(N^L))+x[0]+3921069994&4294967295,P=N+(C<<20&4294967295|C>>>12),C=S+(N^L&(P^N))+x[5]+3593408605&4294967295,S=P+(C<<5&4294967295|C>>>27),C=L+(P^N&(S^P))+x[10]+38016083&4294967295,L=S+(C<<9&4294967295|C>>>23),C=N+(S^P&(L^S))+x[15]+3634488961&4294967295,N=L+(C<<14&4294967295|C>>>18),C=P+(L^S&(N^L))+x[4]+3889429448&4294967295,P=N+(C<<20&4294967295|C>>>12),C=S+(N^L&(P^N))+x[9]+568446438&4294967295,S=P+(C<<5&4294967295|C>>>27),C=L+(P^N&(S^P))+x[14]+3275163606&4294967295,L=S+(C<<9&4294967295|C>>>23),C=N+(S^P&(L^S))+x[3]+4107603335&4294967295,N=L+(C<<14&4294967295|C>>>18),C=P+(L^S&(N^L))+x[8]+1163531501&4294967295,P=N+(C<<20&4294967295|C>>>12),C=S+(N^L&(P^N))+x[13]+2850285829&4294967295,S=P+(C<<5&4294967295|C>>>27),C=L+(P^N&(S^P))+x[2]+4243563512&4294967295,L=S+(C<<9&4294967295|C>>>23),C=N+(S^P&(L^S))+x[7]+1735328473&4294967295,N=L+(C<<14&4294967295|C>>>18),C=P+(L^S&(N^L))+x[12]+2368359562&4294967295,P=N+(C<<20&4294967295|C>>>12),C=S+(P^N^L)+x[5]+4294588738&4294967295,S=P+(C<<4&4294967295|C>>>28),C=L+(S^P^N)+x[8]+2272392833&4294967295,L=S+(C<<11&4294967295|C>>>21),C=N+(L^S^P)+x[11]+1839030562&4294967295,N=L+(C<<16&4294967295|C>>>16),C=P+(N^L^S)+x[14]+4259657740&4294967295,P=N+(C<<23&4294967295|C>>>9),C=S+(P^N^L)+x[1]+2763975236&4294967295,S=P+(C<<4&4294967295|C>>>28),C=L+(S^P^N)+x[4]+1272893353&4294967295,L=S+(C<<11&4294967295|C>>>21),C=N+(L^S^P)+x[7]+4139469664&4294967295,N=L+(C<<16&4294967295|C>>>16),C=P+(N^L^S)+x[10]+3200236656&4294967295,P=N+(C<<23&4294967295|C>>>9),C=S+(P^N^L)+x[13]+681279174&4294967295,S=P+(C<<4&4294967295|C>>>28),C=L+(S^P^N)+x[0]+3936430074&4294967295,L=S+(C<<11&4294967295|C>>>21),C=N+(L^S^P)+x[3]+3572445317&4294967295,N=L+(C<<16&4294967295|C>>>16),C=P+(N^L^S)+x[6]+76029189&4294967295,P=N+(C<<23&4294967295|C>>>9),C=S+(P^N^L)+x[9]+3654602809&4294967295,S=P+(C<<4&4294967295|C>>>28),C=L+(S^P^N)+x[12]+3873151461&4294967295,L=S+(C<<11&4294967295|C>>>21),C=N+(L^S^P)+x[15]+530742520&4294967295,N=L+(C<<16&4294967295|C>>>16),C=P+(N^L^S)+x[2]+3299628645&4294967295,P=N+(C<<23&4294967295|C>>>9),C=S+(N^(P|~L))+x[0]+4096336452&4294967295,S=P+(C<<6&4294967295|C>>>26),C=L+(P^(S|~N))+x[7]+1126891415&4294967295,L=S+(C<<10&4294967295|C>>>22),C=N+(S^(L|~P))+x[14]+2878612391&4294967295,N=L+(C<<15&4294967295|C>>>17),C=P+(L^(N|~S))+x[5]+4237533241&4294967295,P=N+(C<<21&4294967295|C>>>11),C=S+(N^(P|~L))+x[12]+1700485571&4294967295,S=P+(C<<6&4294967295|C>>>26),C=L+(P^(S|~N))+x[3]+2399980690&4294967295,L=S+(C<<10&4294967295|C>>>22),C=N+(S^(L|~P))+x[10]+4293915773&4294967295,N=L+(C<<15&4294967295|C>>>17),C=P+(L^(N|~S))+x[1]+2240044497&4294967295,P=N+(C<<21&4294967295|C>>>11),C=S+(N^(P|~L))+x[8]+1873313359&4294967295,S=P+(C<<6&4294967295|C>>>26),C=L+(P^(S|~N))+x[15]+4264355552&4294967295,L=S+(C<<10&4294967295|C>>>22),C=N+(S^(L|~P))+x[6]+2734768916&4294967295,N=L+(C<<15&4294967295|C>>>17),C=P+(L^(N|~S))+x[13]+1309151649&4294967295,P=N+(C<<21&4294967295|C>>>11),C=S+(N^(P|~L))+x[4]+4149444226&4294967295,S=P+(C<<6&4294967295|C>>>26),C=L+(P^(S|~N))+x[11]+3174756917&4294967295,L=S+(C<<10&4294967295|C>>>22),C=N+(S^(L|~P))+x[2]+718787259&4294967295,N=L+(C<<15&4294967295|C>>>17),C=P+(L^(N|~S))+x[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+L&4294967295}i.prototype.v=function(D,S){S===void 0&&(S=D.length);const P=S-this.blockSize,x=this.C;let N=this.h,L=0;for(;L<S;){if(N==0)for(;L<=P;)o(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<S;)if(x[N++]=D.charCodeAt(L++),N==this.blockSize){o(this,x),N=0;break}}else for(;L<S;)if(x[N++]=D[L++],N==this.blockSize){o(this,x),N=0;break}}this.h=N,this.o+=S},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;S=this.o*8;for(var P=D.length-8;P<D.length;++P)D[P]=S&255,S/=256;for(this.v(D),D=Array(16),S=0,P=0;P<4;++P)for(let x=0;x<32;x+=8)D[S++]=this.g[P]>>>x&255;return D};function l(D,S){var P=f;return Object.prototype.hasOwnProperty.call(P,D)?P[D]:P[D]=S(D)}function h(D,S){this.h=S;const P=[];let x=!0;for(let N=D.length-1;N>=0;N--){const L=D[N]|0;x&&L==S||(P[N]=L,x=!1)}this.g=P}var f={};function g(D){return-128<=D&&D<128?l(D,function(S){return new h([S|0],S<0?-1:0)}):new h([D|0],D<0?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return E;if(D<0)return U(y(-D));const S=[];let P=1;for(let x=0;D>=P;x++)S[x]=D/P|0,P*=4294967296;return new h(S,0)}function _(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return U(_(D.substring(1),S));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=y(Math.pow(S,8));let x=E;for(let L=0;L<D.length;L+=8){var N=Math.min(8,D.length-L);const C=parseInt(D.substring(L,L+N),S);N<8?(N=y(Math.pow(S,N)),x=x.j(N).add(y(C))):(x=x.j(P),x=x.add(y(C)))}return x}var E=g(0),I=g(1),O=g(16777216);n=h.prototype,n.m=function(){if($(this))return-U(this).m();let D=0,S=1;for(let P=0;P<this.g.length;P++){const x=this.i(P);D+=(x>=0?x:4294967296+x)*S,S*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(W(this))return"0";if($(this))return"-"+U(this).toString(D);const S=y(Math.pow(D,6));var P=this;let x="";for(;;){const N=ae(P,S).g;P=X(P,N.j(S));let L=((P.g.length>0?P.g[0]:P.h)>>>0).toString(D);if(P=N,W(P))return L+x;for(;L.length<6;)L="0"+L;x=L+x}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function W(D){if(D.h!=0)return!1;for(let S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function $(D){return D.h==-1}n.l=function(D){return D=X(this,D),$(D)?-1:W(D)?0:1};function U(D){const S=D.g.length,P=[];for(let x=0;x<S;x++)P[x]=~D.g[x];return new h(P,~D.h).add(I)}n.abs=function(){return $(this)?U(this):this},n.add=function(D){const S=Math.max(this.g.length,D.g.length),P=[];let x=0;for(let N=0;N<=S;N++){let L=x+(this.i(N)&65535)+(D.i(N)&65535),C=(L>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);x=C>>>16,L&=65535,C&=65535,P[N]=C<<16|L}return new h(P,P[P.length-1]&-2147483648?-1:0)};function X(D,S){return D.add(U(S))}n.j=function(D){if(W(this)||W(D))return E;if($(this))return $(D)?U(this).j(U(D)):U(U(this).j(D));if($(D))return U(this.j(U(D)));if(this.l(O)<0&&D.l(O)<0)return y(this.m()*D.m());const S=this.g.length+D.g.length,P=[];for(var x=0;x<2*S;x++)P[x]=0;for(x=0;x<this.g.length;x++)for(let N=0;N<D.g.length;N++){const L=this.i(x)>>>16,C=this.i(x)&65535,je=D.i(N)>>>16,He=D.i(N)&65535;P[2*x+2*N]+=C*He,re(P,2*x+2*N),P[2*x+2*N+1]+=L*He,re(P,2*x+2*N+1),P[2*x+2*N+1]+=C*je,re(P,2*x+2*N+1),P[2*x+2*N+2]+=L*je,re(P,2*x+2*N+2)}for(D=0;D<S;D++)P[D]=P[2*D+1]<<16|P[2*D];for(D=S;D<2*S;D++)P[D]=0;return new h(P,0)};function re(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function me(D,S){this.g=D,this.h=S}function ae(D,S){if(W(S))throw Error("division by zero");if(W(D))return new me(E,E);if($(D))return S=ae(U(D),S),new me(U(S.g),U(S.h));if($(S))return S=ae(D,U(S)),new me(U(S.g),S.h);if(D.g.length>30){if($(D)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var P=I,x=S;x.l(D)<=0;)P=Oe(P),x=Oe(x);var N=le(P,1),L=le(x,1);for(x=le(x,2),P=le(P,2);!W(x);){var C=L.add(x);C.l(D)<=0&&(N=N.add(P),L=C),x=le(x,1),P=le(P,1)}return S=X(D,N.j(S)),new me(N,S)}for(N=E;D.l(S)>=0;){for(P=Math.max(1,Math.floor(D.m()/S.m())),x=Math.ceil(Math.log(P)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),L=y(P),C=L.j(S);$(C)||C.l(D)>0;)P-=x,L=y(P),C=L.j(S);W(L)&&(L=I),N=N.add(L),D=X(D,C)}return new me(N,D)}n.B=function(D){return ae(this,D).h},n.and=function(D){const S=Math.max(this.g.length,D.g.length),P=[];for(let x=0;x<S;x++)P[x]=this.i(x)&D.i(x);return new h(P,this.h&D.h)},n.or=function(D){const S=Math.max(this.g.length,D.g.length),P=[];for(let x=0;x<S;x++)P[x]=this.i(x)|D.i(x);return new h(P,this.h|D.h)},n.xor=function(D){const S=Math.max(this.g.length,D.g.length),P=[];for(let x=0;x<S;x++)P[x]=this.i(x)^D.i(x);return new h(P,this.h^D.h)};function Oe(D){const S=D.g.length+1,P=[];for(let x=0;x<S;x++)P[x]=D.i(x)<<1|D.i(x-1)>>>31;return new h(P,D.h)}function le(D,S){const P=S>>5;S%=32;const x=D.g.length-P,N=[];for(let L=0;L<x;L++)N[L]=S>0?D.i(L+P)>>>S|D.i(L+P+1)<<32-S:D.i(L+P);return new h(N,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,d_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=_,Ji=h}).apply(typeof yy<"u"?yy:typeof self<"u"?self:typeof window<"u"?window:{});var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var f_,Za,p_,Yu,nf,m_,g_,y_;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ju=="object"&&ju];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in v))break e;v=v[F]}u=u[u.length-1],T=v[u],m=m(T),m!=T&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var v=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&v.push([T,m[T]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){return y=g,y.apply(null,arguments)}function _(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(T,F,B){for(var ne=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)ne[Re-2]=arguments[Re];return m.prototype[F].apply(T,ne)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const m=u.length;if(m>0){const v=Array(m);for(let T=0;T<m;T++)v[T]=u[T];return v}return[]}function W(u,m){for(let T=1;T<arguments.length;T++){const F=arguments[T];var v=typeof F;if(v=v!="object"?v:F?Array.isArray(F)?"array":v:"null",v=="array"||v=="object"&&typeof F.length=="number"){v=u.length||0;const B=F.length||0;u.length=v+B;for(let ne=0;ne<B;ne++)u[v+ne]=F[ne]}else u.push(F)}}class ${constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function U(u){h.setTimeout(()=>{throw u},0)}function X(){var u=D;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class re{constructor(){this.h=this.g=null}add(m,v){const T=me.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var me=new $(()=>new ae,u=>u.reset());class ae{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Oe,le=!1,D=new re,S=()=>{const u=Promise.resolve(void 0);Oe=()=>{u.then(P)}};function P(){for(var u;u=X();){try{u.h.call(u.g)}catch(v){U(v)}var m=me;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}le=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,m),h.removeEventListener("test",v,m)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function je(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(je,N),je.prototype.init=function(u,m){const v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&je.Z.h.call(this)},je.prototype.h=function(){je.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),$e=0;function Ue(u,m,v,T,F){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=F,this.key=++$e,this.da=this.fa=!1}function te(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ue(u,m,v){for(const T in u)m.call(v,u[T],T,u)}function ee(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function V(u){const m={};for(const v in u)m[v]=u[v];return m}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(u,m){let v,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(v in T)u[v]=T[v];for(let B=0;B<H.length;B++)v=H[B],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function Ie(u){this.src=u,this.g={},this.h=0}Ie.prototype.add=function(u,m,v,T,F){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const ne=J(u,m,T,F);return ne>-1?(m=u[ne],v||(m.fa=!1)):(m=new Ue(m,this.src,B,!!T,F),m.fa=v,u.push(m)),m};function Ne(u,m){const v=m.type;if(v in u.g){var T=u.g[v],F=Array.prototype.indexOf.call(T,m,void 0),B;(B=F>=0)&&Array.prototype.splice.call(T,F,1),B&&(te(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function J(u,m,v,T){for(let F=0;F<u.length;++F){const B=u[F];if(!B.da&&B.listener==m&&B.capture==!!v&&B.ha==T)return F}return-1}var ye="closure_lm_"+(Math.random()*1e6|0),de={};function oe(u,m,v,T,F){if(Array.isArray(m)){for(let B=0;B<m.length;B++)oe(u,m[B],v,T,F);return null}return v=gi(v),u&&u[He]?u.J(m,v,f(T)?!!T.capture:!1,F):Ae(u,m,v,!1,T,F)}function Ae(u,m,v,T,F,B){if(!m)throw Error("Invalid event type");const ne=f(F)?!!F.capture:!!F;let Re=kt(u);if(Re||(u[ye]=Re=new Ie(u)),v=Re.add(m,v,T,ne,B),v.proxy)return v;if(T=gt(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)L||(F=ne),F===void 0&&(F=!1),u.addEventListener(m.toString(),T,F);else if(u.attachEvent)u.attachEvent(Ye(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function gt(){function u(v){return m.call(u.src,u.listener,v)}const m=ar;return u}function bt(u,m,v,T,F){if(Array.isArray(m))for(var B=0;B<m.length;B++)bt(u,m[B],v,T,F);else T=f(T)?!!T.capture:!!T,v=gi(v),u&&u[He]?(u=u.i,B=String(m).toString(),B in u.g&&(m=u.g[B],v=J(m,v,T,F),v>-1&&(te(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[B],u.h--)))):u&&(u=kt(u))&&(m=u.g[m.toString()],u=-1,m&&(u=J(m,v,T,F)),(v=u>-1?m[u]:null)&&Ct(v))}function Ct(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[He])Ne(m.i,u);else{var v=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(v,T,u.capture):m.detachEvent?m.detachEvent(Ye(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=kt(m))?(Ne(v,u),v.h==0&&(v.src=null,m[ye]=null)):te(u)}}}function Ye(u){return u in de?de[u]:de[u]="on"+u}function ar(u,m){if(u.da)u=!0;else{m=new je(m,this);const v=u.listener,T=u.ha||u.src;u.fa&&Ct(u),u=v.call(T,m)}return u}function kt(u){return u=u[ye],u instanceof Ie?u:null}var On="__closure_events_fn_"+(Math.random()*1e9>>>0);function gi(u){return typeof u=="function"?u:(u[On]||(u[On]=function(m){return u.handleEvent(m)}),u[On])}function ut(){x.call(this),this.i=new Ie(this),this.M=this,this.G=null}E(ut,x),ut.prototype[He]=!0,ut.prototype.removeEventListener=function(u,m,v,T){bt(this,u,m,v,T)};function ct(u,m){var v,T=u.G;if(T)for(v=[];T;T=T.G)v.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var F=m;m=new N(T,u),Te(m,F)}F=!0;let B,ne;if(v)for(ne=v.length-1;ne>=0;ne--)B=m.g=v[ne],F=yn(B,T,!0,m)&&F;if(B=m.g=u,F=yn(B,T,!0,m)&&F,F=yn(B,T,!1,m)&&F,v)for(ne=0;ne<v.length;ne++)B=m.g=v[ne],F=yn(B,T,!1,m)&&F}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let T=0;T<v.length;T++)te(v[T]);delete u.g[m],u.h--}}this.G=null},ut.prototype.J=function(u,m,v,T){return this.i.add(String(u),m,!1,v,T)},ut.prototype.K=function(u,m,v,T){return this.i.add(String(u),m,!0,v,T)};function yn(u,m,v,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let F=!0;for(let B=0;B<m.length;++B){const ne=m[B];if(ne&&!ne.da&&ne.capture==v){const Re=ne.listener,vt=ne.ha||ne.src;ne.fa&&Ne(u.i,ne),F=Re.call(vt,T)!==!1&&F}}return F&&!T.defaultPrevented}function us(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function yi(u){u.g=us(()=>{u.g=null,u.i&&(u.i=!1,yi(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Zs extends x{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:yi(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lr(u){x.call(this),this.h=u,this.g={}}E(lr,x);var cs=[];function vi(u){ue(u.g,function(m,v){this.g.hasOwnProperty(v)&&Ct(m)},u),u.g={}}lr.prototype.N=function(){lr.Z.N.call(this),vi(this)},lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ur=h.JSON.stringify,_i=h.JSON.parse,cr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Gn(){}function eo(){}var vn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ur(){N.call(this,"d")}E(Ur,N);function hs(){N.call(this,"c")}E(hs,N);var an={},zr=null;function bn(){return zr=zr||new ut}an.Ia="serverreachability";function wi(u){N.call(this,an.Ia,u)}E(wi,N);function Vn(u){const m=bn();ct(m,new wi(m))}an.STAT_EVENT="statevent";function Kn(u,m){N.call(this,an.STAT_EVENT,u),this.stat=m}E(Kn,N);function et(u){const m=bn();ct(m,new Kn(m,u))}an.Ja="timingevent";function Et(u,m){N.call(this,an.Ja,u),this.size=m}E(Et,N);function ht(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function _n(){this.g=!0}_n.prototype.ua=function(){this.g=!1};function Qe(u,m,v,T,F,B){u.info(function(){if(u.g)if(B){var ne="",Re=B.split("&");for(let Ke=0;Ke<Re.length;Ke++){var vt=Re[Ke].split("=");if(vt.length>1){const Tt=vt[0];vt=vt[1];const kn=Tt.split("_");ne=kn.length>=2&&kn[1]=="type"?ne+(Tt+"="+vt+"&"):ne+(Tt+"=redacted&")}}}else ne=null;else ne=B;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+m+`
`+v+`
`+ne})}function rn(u,m,v,T,F,B,ne){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+m+`
`+v+`
`+B+" "+ne})}function Ln(u,m,v,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+hr(u,v)+(T?" "+T:"")})}function Ei(u,m){u.info(function(){return"TIMEOUT: "+m})}_n.prototype.info=function(){};function hr(u,m){if(!u.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var v=B[u];if(!(v.length<2)){var T=v[1];if(Array.isArray(T)&&!(T.length<1)){var F=T[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ne=1;ne<T.length;ne++)T[ne]=""}}}}return ur(B)}catch{return m}}var Yn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Mn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Br;function wn(){}E(wn,Gn),wn.prototype.g=function(){return new XMLHttpRequest},Br=new wn;function ln(u){return encodeURIComponent(String(u))}function dr(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function un(u,m,v,T){this.j=u,this.i=m,this.l=v,this.S=T||1,this.V=new lr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ti}function Ti(){this.i=null,this.g="",this.h=!1}var ds={},fs={};function En(u,m,v){u.M=1,u.A=qr(Fn(m)),u.u=v,u.R=!0,xe(u,null)}function xe(u,m){u.F=Date.now(),Pt(u),u.B=Fn(u.A);var v=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),va(v.i,"t",T),u.C=0,v=u.j.L,u.h=new Ti,u.g=Bl(u.j,v?m:null,!u.u),u.P>0&&(u.O=new Zs(y(u.Y,u,u.g),u.P)),m=u.V,v=u.g,T=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(cs[0]=F.toString()),F=cs);for(let B=0;B<F.length;B++){const ne=oe(v,F[B],T||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Vn(),Qe(u.i,u.v,u.B,u.l,u.S,u.u)}un.prototype.ba=function(u){u=u.target;const m=this.O;m&&_r(u)==3?m.j():this.Y(u)},un.prototype.Y=function(u){try{if(u==this.g)e:{const Re=_r(this.g),vt=this.g.ya(),Ke=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Ul(this.g)))){this.K||Re!=4||vt==7||(vt==8||Ke<=0?Vn(3):Vn(2)),Ii(this);var m=this.g.ca();this.X=m;var v=Xe(this);if(this.o=m==200,rn(this.i,this.v,this.B,this.l,this.S,Re,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,F=this.g;if((T=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(T)){var B=T;break t}}B=null}if(u=B)Ln(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nt(this,u);else{this.o=!1,this.m=3,et(12),Hr(this),Wr(this);break e}}if(this.R){u=!0;let Tt;for(;!this.K&&this.C<v.length;)if(Tt=Gt(this,v),Tt==fs){Re==4&&(this.m=4,et(14),u=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==ds){this.m=4,et(15),Ln(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Ln(this.i,this.l,Tt,null),nt(this,Tt);if(tt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||v.length!=0||this.h.h||(this.m=1,et(16),u=!1),this.o=this.o&&u,!u)Ln(this.i,this.l,v,"[Invalid Chunked Response]"),Hr(this),Wr(this);else if(v.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ts(ne),ne.P=!0,et(11))}}else Ln(this.i,this.l,v,null),nt(this,v);Re==4&&Hr(this),this.o&&!this.K&&(Re==4?co(this.j,this):(this.o=!1,Pt(this)))}else wa(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,et(12)):(this.m=0,et(13)),Hr(this),Wr(this)}}}catch{}finally{}};function Xe(u){if(!tt(u))return u.g.la();const m=Ul(u.g);if(m==="")return"";let v="";const T=m.length,F=_r(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Hr(u),Wr(u),"";u.h.i=new h.TextDecoder}for(let B=0;B<T;B++)u.h.h=!0,v+=u.h.i.decode(m[B],{stream:!(F&&B==T-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function tt(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Gt(u,m){var v=u.C,T=m.indexOf(`
`,v);return T==-1?fs:(v=Number(m.substring(v,T)),isNaN(v)?ds:(T+=1,T+v>m.length?fs:(m=m.slice(T,T+v),u.C=T+v,m)))}un.prototype.cancel=function(){this.K=!0,Hr(this)};function Pt(u){u.T=Date.now()+u.H,$r(u,u.H)}function $r(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ht(y(u.aa,u),m)}function Ii(u){u.D&&(h.clearTimeout(u.D),u.D=null)}un.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ei(this.i,this.B),this.M!=2&&(Vn(),et(17)),Hr(this),this.m=2,Wr(this)):$r(this,this.T-u)};function Wr(u){u.j.I==0||u.K||co(u.j,u)}function Hr(u){Ii(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,vi(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function nt(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||ha(v.h,u))){if(!u.L&&ha(v.h,u)&&v.I==3){try{var T=v.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)uo(v),An(v);else break e;Tr(v),et(18)}}else v.xa=F[1],0<v.xa-v.K&&F[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ht(y(v.Va,v),6e3));ps(v.h)<=1&&v.ta&&(v.ta=void 0)}else Cn(v,11)}else if((u.L||v.g==u)&&uo(v),!C(m))for(F=v.Ba.g.parse(m),m=0;m<F.length;m++){let Ke=F[m];const Tt=Ke[0];if(!(Tt<=v.K))if(v.K=Tt,Ke=Ke[1],v.I==2)if(Ke[0]=="c"){v.M=Ke[1],v.ba=Ke[2];const kn=Ke[3];kn!=null&&(v.ka=kn,v.j.info("VER="+v.ka));const Xr=Ke[4];Xr!=null&&(v.za=Xr,v.j.info("SVER="+v.za));const Ir=Ke[5];Ir!=null&&typeof Ir=="number"&&Ir>0&&(T=1.5*Ir,v.O=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const Sr=u.g;if(Sr){const po=Sr.g?Sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(po){var B=T.h;B.g||po.indexOf("spdy")==-1&&po.indexOf("quic")==-1&&po.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(no(B,B.h),B.h=null))}if(T.G){const Ia=Sr.g?Sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(T.wa=Ia,qe(T.J,T.G,Ia))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),T=v;var ne=u;if(T.na=Ta(T,T.L?T.ba:null,T.W),ne.L){ms(T.h,ne);var Re=ne,vt=T.O;vt&&(Re.H=vt),Re.D&&(Ii(Re),Pt(Re)),T.g=ne}else Kt(T);v.i.length>0&&Qr(v)}else Ke[0]!="stop"&&Ke[0]!="close"||Cn(v,7);else v.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Cn(v,7):ao(v):Ke[0]!="noop"&&v.l&&v.l.qa(Ke),v.A=0)}}Vn(4)}catch{}}var nh=class{constructor(u,m){this.g=u,this.map=m}};function to(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ca(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ps(u){return u.h?1:u.g?u.g.size:0}function ha(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function no(u,m){u.g?u.g.add(m):u.h=m}function ms(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}to.prototype.cancel=function(){if(this.i=Tn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Tn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return O(u.i)}var Ll=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function In(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const T=u[v].indexOf("=");let F,B=null;T>=0?(F=u[v].substring(0,T),B=u[v].substring(T+1)):F=u[v],m(F,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function fr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof fr?(this.l=u.l,gs(this,u.j),this.o=u.o,this.g=u.g,pr(this,u.u),this.h=u.h,Si(this,_a(u.i)),this.m=u.m):u&&(m=String(u).match(Ll))?(this.l=!1,gs(this,m[1]||"",!0),this.o=ys(m[2]||""),this.g=ys(m[3]||"",!0),pr(this,m[4]),this.h=ys(m[5]||"",!0),Si(this,m[6]||"",!0),this.m=ys(m[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}fr.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(vs(m,fa,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(vs(m,fa,!0),"@"),u.push(ln(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(vs(v,v.charAt(0)=="/"?_s:pa,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",vs(v,ma)),u.join("")},fr.prototype.resolve=function(u){const m=Fn(this);let v=!!u.j;v?gs(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var T=u.h;if(v)pr(m,u.u);else if(v=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var F=m.h.lastIndexOf("/");F!=-1&&(T=m.h.slice(0,F+1)+T)}if(F=T,F==".."||F==".")T="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){T=F.lastIndexOf("/",0)==0,F=F.split("/");const B=[];for(let ne=0;ne<F.length;){const Re=F[ne++];Re=="."?T&&ne==F.length&&B.push(""):Re==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),T&&ne==F.length&&B.push("")):(B.push(Re),T=!0)}T=B.join("/")}else T=F}return v?m.h=T:v=u.i.toString()!=="",v?Si(m,_a(u.i)):v=!!u.m,v&&(m.m=u.m),m};function Fn(u){return new fr(u)}function gs(u,m,v){u.j=v?ys(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function pr(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Si(u,m,v){m instanceof Fe?(u.i=m,io(u.i,u.l)):(v||(m=vs(m,rh)),u.i=new Fe(m,u.l))}function qe(u,m,v){u.i.set(m,v)}function qr(u){return qe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ys(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function vs(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,da),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function da(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var fa=/[#\/\?@]/g,pa=/[#\?:]/g,_s=/[#\?]/g,rh=/[#\?@]/g,ma=/#/g;function Fe(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function mr(u){u.g||(u.g=new Map,u.h=0,u.i&&In(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Fe.prototype,n.add=function(u,m){mr(this),this.i=null,u=gr(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function ga(u,m){mr(u),m=gr(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function ro(u,m){return mr(u),m=gr(u,m),u.g.has(m)}n.forEach=function(u,m){mr(this),this.g.forEach(function(v,T){v.forEach(function(F){u.call(m,F,T,this)},this)},this)};function ya(u,m){mr(u);let v=[];if(typeof m=="string")ro(u,m)&&(v=v.concat(u.g.get(gr(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}n.set=function(u,m){return mr(this),this.i=null,u=gr(this,u),ro(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=ya(this,u),u.length>0?String(u[0]):m):m};function va(u,m,v){ga(u,m),v.length>0&&(u.i=null,u.g.set(gr(u,m),O(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var v=m[T];const F=ln(v);v=ya(this,v);for(let B=0;B<v.length;B++){let ne=F;v[B]!==""&&(ne+="="+ln(v[B])),u.push(ne)}}return this.i=u.join("&")};function _a(u){const m=new Fe;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function gr(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function io(u,m){m&&!u.j&&(mr(u),u.i=null,u.g.forEach(function(v,T){const F=T.toLowerCase();T!=F&&(ga(this,T),va(this,F,v))},u)),u.j=m}function yr(u,m){const v=new _n;if(h.Image){const T=new Image;T.onload=_(jt,v,"TestLoadImage: loaded",!0,m,T),T.onerror=_(jt,v,"TestLoadImage: error",!1,m,T),T.onabort=_(jt,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=_(jt,v,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function vr(u,m){const v=new _n,T=new AbortController,F=setTimeout(()=>{T.abort(),jt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(B=>{clearTimeout(F),B.ok?jt(v,"TestPingServer: ok",!0,m):jt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),jt(v,"TestPingServer: error",!1,m)})}function jt(u,m,v,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(v)}catch{}}function ws(){this.g=new cr}function Gr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Gr,Gn),Gr.prototype.g=function(){return new Sn(this.i,this.h)};function Sn(u,m){ut.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Sn,ut),n=Sn.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Qn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ml(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ml(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ai(this):Qn(this),this.readyState==3&&Ml(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Ai(this))},n.Na=function(u){this.g&&(this.response=u,Ai(this))},n.ga=function(){this.g&&Ai(this)};function Ai(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Qn(u)}n.setRequestHeader=function(u,m){this.A.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Qn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Fl(u){let m="";return ue(u,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function so(u,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Fl(v),typeof u=="string"?v!=null&&ln(v):qe(u,m,v))}function Je(u){ut.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Je,ut);var jl=/^https?$/i,ih=["POST","PUT"];n=Je.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Br.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){Ci(this,B);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)v.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())v.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(ih,m,void 0)>=0)||T||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ne]of v)this.g.setRequestHeader(B,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){Ci(this,B)}};function Ci(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ki(u),Yr(u)}function ki(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ct(this,"complete"),ct(this,"abort"),Yr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),Je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Kr(this):this.Xa())},n.Xa=function(){Kr(this)};function Kr(u){if(u.h&&typeof l<"u"){if(u.v&&_r(u)==4)setTimeout(u.Ca.bind(u),0);else if(ct(u,"readystatechange"),_r(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=B===0){let ne=String(u.D).match(Ll)[1]||null;!ne&&h.self&&h.self.location&&(ne=h.self.location.protocol.slice(0,-1)),T=!jl.test(ne?ne.toLowerCase():"")}v=T}if(v)ct(u,"complete"),ct(u,"success");else{u.o=6;try{var F=_r(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",ki(u)}}finally{Yr(u)}}}}function Yr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||ct(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function _r(u){return u.g?u.g.readyState:0}n.ca=function(){try{return _r(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),_i(m)}};function Ul(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function wa(u){const m={};u=(u.g&&_r(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(C(u[T]))continue;var v=dr(u[T]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=m[F]||[];m[F]=B,B.push(v)}ee(m,function(T){return T.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function oo(u){this.za=0,this.i=[],this.j=new _n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wr("baseRetryDelayMs",5e3,u),this.Za=wr("retryDelaySeedMs",1e4,u),this.Ta=wr("forwardChannelMaxRetries",2,u),this.va=wr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new to(u&&u.concurrentRequestLimit),this.Ba=new ws,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=oo.prototype,n.ka=8,n.I=1,n.connect=function(u,m,v,T){et(0),this.W=u,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.J=Ta(this,null,this.W),Qr(this)};function ao(u){if(lo(u),u.I==3){var m=u.V++,v=Fn(u.J);if(qe(v,"SID",u.M),qe(v,"RID",m),qe(v,"TYPE","terminate"),Er(u,v),m=new un(u,u.j,m),m.M=2,m.A=qr(Fn(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=m.A,v=!0),v||(m.g=Bl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Pt(m)}Is(u)}function An(u){u.g&&(Ts(u),u.g.cancel(),u.g=null)}function lo(u){An(u),u.v&&(h.clearTimeout(u.v),u.v=null),uo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Qr(u){if(!ca(u.h)&&!u.m){u.m=!0;var m=u.Ea;Oe||S(),le||(Oe(),le=!0),D.add(m,u),u.D=0}}function zl(u,m){return ps(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ht(y(u.Ea,u,m),ho(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new un(this,this.j,u);let B=this.o;if(this.U&&(B?(B=V(B),Te(B,this.U)):B=this.U),this.u!==null||this.R||(F.J=B,B=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Ea(this,F,m),v=Fn(this.J),qe(v,"RID",u),qe(v,"CVER",22),this.G&&qe(v,"X-HTTP-Session-Id",this.G),Er(this,v),B&&(this.R?m="headers="+ln(Fl(B))+"&"+m:this.u&&so(v,this.u,B)),no(this.h,F),this.Ra&&qe(v,"TYPE","init"),this.S?(qe(v,"$req",m),qe(v,"SID","null"),F.U=!0,En(F,v,null)):En(F,v,m),this.I=2}}else this.I==3&&(u?Es(this,u):this.i.length==0||ca(this.h)||Es(this))};function Es(u,m){var v;m?v=m.l:v=u.V++;const T=Fn(u.J);qe(T,"SID",u.M),qe(T,"RID",v),qe(T,"AID",u.K),Er(u,T),u.u&&u.o&&so(T,u.u,u.o),v=new un(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Ea(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),no(u.h,v),En(v,T,m)}function Er(u,m){u.H&&ue(u.H,function(v,T){qe(m,T,v)}),u.l&&ue({},function(v,T){qe(m,T,v)})}function Ea(u,m,v){v=Math.min(u.i.length,v);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var F=u.i;let Re=-1;for(;;){const vt=["count="+v];Re==-1?v>0?(Re=F[0].g,vt.push("ofs="+Re)):Re=0:vt.push("ofs="+Re);let Ke=!0;for(let Tt=0;Tt<v;Tt++){var B=F[Tt].g;const kn=F[Tt].map;if(B-=Re,B<0)Re=Math.max(0,F[Tt].g-100),Ke=!1;else try{B="req"+B+"_"||"";try{var ne=kn instanceof Map?kn:Object.entries(kn);for(const[Xr,Ir]of ne){let Sr=Ir;f(Ir)&&(Sr=ur(Ir)),vt.push(B+Xr+"="+encodeURIComponent(Sr))}}catch(Xr){throw vt.push(B+"type="+encodeURIComponent("_badmap")),Xr}}catch{T&&T(kn)}}if(Ke){ne=vt.join("&");break e}}ne=void 0}return u=u.i.splice(0,v),m.G=u,ne}function Kt(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Oe||S(),le||(Oe(),le=!0),D.add(m,u),u.A=0}}function Tr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ht(y(u.Da,u),ho(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Pi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ht(y(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,et(10),An(this),Pi(this))};function Ts(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Pi(u){u.g=new un(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Fn(u.na);qe(m,"RID","rpc"),qe(m,"SID",u.M),qe(m,"AID",u.K),qe(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&qe(m,"TO",u.ia),qe(m,"TYPE","xmlhttp"),Er(u,m),u.u&&u.o&&so(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=qr(Fn(m)),v.u=null,v.R=!0,xe(v,u)}n.Va=function(){this.C!=null&&(this.C=null,An(this),Tr(this),et(19))};function uo(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function co(u,m){var v=null;if(u.g==m){uo(u),Ts(u),u.g=null;var T=2}else if(ha(u.h,m))v=m.G,ms(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var F=u.D;T=bn(),ct(T,new Et(T,v)),Qr(u)}else Kt(u);else if(F=m.m,F==3||F==0&&m.X>0||!(T==1&&zl(u,m)||T==2&&Tr(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),F){case 1:Cn(u,5);break;case 4:Cn(u,10);break;case 3:Cn(u,6);break;default:Cn(u,2)}}}function ho(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function Cn(u,m){if(u.j.info("Error code "+m),m==2){var v=y(u.bb,u),T=u.Ua;const F=!T;T=new fr(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||gs(T,"https"),qr(T),F?yr(T.toString(),v):vr(T.toString(),v)}else et(2);u.I=0,u.l&&u.l.pa(m),Is(u),lo(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Is(u){if(u.I=0,u.ja=[],u.l){const m=Tn(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ja,m),W(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function Ta(u,m,v){var T=v instanceof fr?Fn(v):new fr(v);if(T.g!="")m&&(T.g=m+"."+T.g),pr(T,T.u);else{var F=h.location;T=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;const B=new fr(null);T&&gs(B,T),m&&(B.g=m),F&&pr(B,F),v&&(B.h=v),T=B}return v=u.G,m=u.wa,v&&m&&qe(T,v,m),qe(T,"VER",u.ka),Er(u,T),T}function Bl(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Je(new Gr({ab:v})):new Je(u.ma),m.Fa(u.L),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $l(){}n=$l.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function fo(){}fo.prototype.g=function(u,m){return new Ut(u,m)};function Ut(u,m){ut.call(this),this.g=new oo(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Ri(this)}E(Ut,ut),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){ao(this.g)},Ut.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=ur(u),u=v);m.i.push(new nh(m.Ya++,u)),m.I==3&&Qr(m)},Ut.prototype.N=function(){this.g.l=null,delete this.j,ao(this.g),delete this.g,Ut.Z.N.call(this)};function Wl(u){Ur.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(Wl,Ur);function Hl(){hs.call(this),this.status=1}E(Hl,hs);function Ri(u){this.g=u}E(Ri,$l),Ri.prototype.ra=function(){ct(this.g,"a")},Ri.prototype.qa=function(u){ct(this.g,new Wl(u))},Ri.prototype.pa=function(u){ct(this.g,new Hl)},Ri.prototype.oa=function(){ct(this.g,"b")},fo.prototype.createWebChannel=fo.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,y_=function(){return new fo},g_=function(){return bn()},m_=an,nf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yn.NO_ERROR=0,Yn.TIMEOUT=8,Yn.HTTP_ERROR=6,Yu=Yn,Mn.COMPLETE="complete",p_=Mn,eo.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",ut.prototype.listen=ut.prototype.J,Za=eo,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,f_=Je}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});const vy="@firebase/firestore",_y="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new zf("@firebase/firestore");function Vo(){return Ws.logLevel}function se(n,...e){if(Ws.logLevel<=Ve.DEBUG){const t=e.map(Wf);Ws.debug(`Firestore (${ra}): ${n}`,...t)}}function hi(n,...e){if(Ws.logLevel<=Ve.ERROR){const t=e.map(Wf);Ws.error(`Firestore (${ra}): ${n}`,...t)}}function Ko(n,...e){if(Ws.logLevel<=Ve.WARN){const t=e.map(Wf);Ws.warn(`Firestore (${ra}): ${n}`,...t)}}function Wf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,v_(n,i,t)}function v_(n,e,t){let i=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw hi(i),new Error(i)}function Ge(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||v_(e,o,i)}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(en.UNAUTHENTICATED)))}shutdown(){}}class aS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class lS{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ge(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Zi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Zi,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Zi)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ge(typeof i.accessToken=="string",31837,{l:i}),new __(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class uS{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cS{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new uS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ge(this.o===void 0,3512);const i=l=>{l.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,se("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=dS(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Le(n,e){return n<e?-1:n>e?1:0}function rf(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),l=e.charAt(i);if(o!==l)return Ld(o)===Ld(l)?Le(o,l):Ld(o)?1:-1}return Le(n.length,e.length)}const fS=55296,pS=57343;function Ld(n){const e=n.charCodeAt(0);return e>=fS&&e<=pS}function Yo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="__name__";class Nr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Nr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Nr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const i=Nr.isNumericId(e),o=Nr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Nr.extractNumericId(e).compare(Nr.extractNumericId(t)):rf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ji.fromString(e.substring(4,e.length-2))}}class pt extends Nr{construct(e,t,i){return new pt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ve(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const mS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Nr{construct(e,t,i){return new Wt(e,t,i)}static isValidIdentifier(e){return mS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ey}static keyField(){return new Wt([Ey])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ve(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ve(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ve(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ve(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(t)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(pt.fromString(e))}static fromName(e){return new Ee(pt.fromString(e).popFirst(5))}static empty(){return new Ee(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(n,e,t){if(!t)throw new ve(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yS(n,e,t,i){if(e===!0&&i===!0)throw new ve(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ty(n){if(!Ee.isDocumentKey(n))throw new ve(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function w_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function es(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qf(n);throw new ve(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n,e){const t={typeString:n};return e&&(t.value=e),t}function Sl(n,e){if(!w_(n))throw new ve(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const h=n[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ve(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=-62135596800,Sy=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Sy);return new st(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Iy)throw new ve(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sy}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sl(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Iy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:At("string",st._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new st(0,0))}static max(){return new Pe(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=-1;function vS(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(i===1e9?new st(t+1,0):new st(t,i));return new ts(o,Ee.empty(),e)}function _S(n){return new ts(n.readTime,n.key,hl)}class ts{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ts(Pe.min(),Ee.empty(),hl)}static max(){return new ts(Pe.max(),Ee.empty(),hl)}}function wS(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==ES)throw n;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):q.reject(t)}static resolve(e){return new q(((t,i)=>{t(e)}))}static reject(e){return new q(((t,i)=>{i(e)}))}static waitFor(e){return new q(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>i(g)))})),h=!0,l===o&&t()}))}static or(e){let t=q.resolve(!1);for(const i of e)t=t.next((o=>o?q.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new q(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((_=>{h[y]=_,++f,f===l&&i(h)}),(_=>o(_)))}}))}static doWhile(e,t){return new q(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function IS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=-1;function Oc(n){return n==null}function uc(n){return n===0&&1/n==-1/0}function SS(n){return typeof n=="number"&&Number.isInteger(n)&&!uc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="";function AS(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ay(e)),e=CS(n.get(t),e);return Ay(e)}function CS(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case E_:t+="";break;default:t+=l}}return t}function Ay(n){return n+E_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function T_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uu(this.root,e,this.comparator,!0)}}class Uu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??$t.RED,this.left=o??$t.EMPTY,this.right=l??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new $t(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return $t.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ky(this.data.getIterator())}getIteratorFrom(e){return new ky(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class ky{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new ir([])}unionWith(e){let t=new Ot(Wt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ir(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new I_("Invalid base64 string: "+l):l}})(e);return new qt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const kS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(n){if(Ge(!!n,39018),typeof n=="string"){let e=0;const t=kS.exec(n);if(Ge(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rs(n){return typeof n=="string"?qt.fromBase64String(n):qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="server_timestamp",A_="__type__",C_="__previous_value__",k_="__local_write_time__";function Kf(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[A_])==null?void 0:i.stringValue)===S_}function bc(n){const e=n.mapValue.fields[C_];return Kf(e)?bc(e):e}function dl(n){const e=ns(n.mapValue.fields[k_].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t,i,o,l,h,f,g,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=_}}const cc="(default)";class fl{constructor(e,t){this.projectId=e,this.database=t||cc}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database===cc}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="__type__",RS="__max__",zu={mapValue:{}},R_="__vector__",hc="value";function is(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kf(n)?4:NS(n)?9007199254740991:DS(n)?10:11:Se(28295,{value:n})}function Mr(n,e){if(n===e)return!0;const t=is(n);if(t!==is(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dl(n).isEqual(dl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=ns(o.timestampValue),f=ns(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return rs(o.bytesValue).isEqual(rs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return wt(o.geoPointValue.latitude)===wt(l.geoPointValue.latitude)&&wt(o.geoPointValue.longitude)===wt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return wt(o.integerValue)===wt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=wt(o.doubleValue),f=wt(l.doubleValue);return h===f?uc(h)===uc(f):isNaN(h)&&isNaN(f)}return!1})(n,e);case 9:return Yo(n.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Cy(h)!==Cy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!Mr(h[g],f[g])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function pl(n,e){return(n.values||[]).find((t=>Mr(t,e)))!==void 0}function Qo(n,e){if(n===e)return 0;const t=is(n),i=is(e);if(t!==i)return Le(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=wt(l.integerValue||l.doubleValue),g=wt(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return Py(n.timestampValue,e.timestampValue);case 4:return Py(dl(n),dl(e));case 5:return rf(n.stringValue,e.stringValue);case 6:return(function(l,h){const f=rs(l),g=rs(h);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const _=Le(f[y],g[y]);if(_!==0)return _}return Le(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Le(wt(l.latitude),wt(h.latitude));return f!==0?f:Le(wt(l.longitude),wt(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ry(n.arrayValue,e.arrayValue);case 10:return(function(l,h){var I,O,W,$;const f=l.fields||{},g=h.fields||{},y=(I=f[hc])==null?void 0:I.arrayValue,_=(O=g[hc])==null?void 0:O.arrayValue,E=Le(((W=y==null?void 0:y.values)==null?void 0:W.length)||0,(($=_==null?void 0:_.values)==null?void 0:$.length)||0);return E!==0?E:Ry(y,_)})(n.mapValue,e.mapValue);case 11:return(function(l,h){if(l===zu.mapValue&&h===zu.mapValue)return 0;if(l===zu.mapValue)return 1;if(h===zu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},_=Object.keys(y);g.sort(),_.sort();for(let E=0;E<g.length&&E<_.length;++E){const I=rf(g[E],_[E]);if(I!==0)return I;const O=Qo(f[g[E]],y[_[E]]);if(O!==0)return O}return Le(g.length,_.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function Py(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=ns(n),i=ns(e),o=Le(t.seconds,i.seconds);return o!==0?o:Le(t.nanos,i.nanos)}function Ry(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Qo(t[o],i[o]);if(l)return l}return Le(t.length,i.length)}function Xo(n){return sf(n)}function sf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ns(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return rs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=sf(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${sf(t.fields[h])}`;return o+"}"})(n.mapValue):Se(61005,{value:n})}function Qu(n){switch(is(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bc(n);return e?16+Qu(e):16;case 5:return 2*n.stringValue.length;case 6:return rs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Qu(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Gs(i.fields,((l,h)=>{o+=l.length+Qu(h)})),o})(n.mapValue);default:throw Se(13486,{value:n})}}function of(n){return!!n&&"integerValue"in n}function Yf(n){return!!n&&"arrayValue"in n}function Dy(n){return!!n&&"nullValue"in n}function Ny(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xu(n){return!!n&&"mapValue"in n}function DS(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[P_])==null?void 0:i.stringValue)===R_}function sl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Gs(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=sl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sl(n.arrayValue.values[t]);return e}return{...n}}function NS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===RS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Xu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sl(t)}setAll(e){let t=Wt.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=sl(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Xu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Xu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Gs(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Hn(sl(this.value))}}function D_(n){const e=[];return Gs(n.fields,((t,i)=>{const o=new Wt([t]);if(Xu(i)){const l=D_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new tn(e,0,Pe.min(),Pe.min(),Pe.min(),Hn.empty(),0)}static newFoundDocument(e,t,i,o){return new tn(e,1,t,Pe.min(),i,o,0)}static newNoDocument(e,t){return new tn(e,2,t,Pe.min(),Pe.min(),Hn.empty(),0)}static newUnknownDocument(e,t){return new tn(e,3,t,Pe.min(),Pe.min(),Hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t){this.position=e,this.inclusive=t}}function xy(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(l.field.isKeyField()?i=Ee.comparator(Ee.fromName(h.referenceValue),t.key):i=Qo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Oy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function xS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{}class Nt extends N_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new bS(e,t,i):t==="array-contains"?new MS(e,i):t==="in"?new FS(e,i):t==="not-in"?new jS(e,i):t==="array-contains-any"?new US(e,i):new Nt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new VS(e,i):new LS(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Qo(t,this.value)):t!==null&&is(this.value)===is(t)&&this.matchesComparison(Qo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fr extends N_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fr(e,t)}matches(e){return x_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function x_(n){return n.op==="and"}function O_(n){return OS(n)&&x_(n)}function OS(n){for(const e of n.filters)if(e instanceof Fr)return!1;return!0}function af(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+Xo(n.value);if(O_(n))return n.filters.map((e=>af(e))).join(",");{const e=n.filters.map((t=>af(t))).join(",");return`${n.op}(${e})`}}function b_(n,e){return n instanceof Nt?(function(i,o){return o instanceof Nt&&i.op===o.op&&i.field.isEqual(o.field)&&Mr(i.value,o.value)})(n,e):n instanceof Fr?(function(i,o){return o instanceof Fr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&b_(h,o.filters[f])),!0):!1})(n,e):void Se(19439)}function V_(n){return n instanceof Nt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xo(t.value)}`})(n):n instanceof Fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(V_).join(" ,")+"}"})(n):"Filter"}class bS extends Nt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class VS extends Nt{constructor(e,t){super(e,"in",t),this.keys=L_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class LS extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=L_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function L_(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class MS extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yf(t)&&pl(t.arrayValue,this.value)}}class FS extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pl(this.value.arrayValue,t)}}class jS extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pl(this.value.arrayValue,t)}}class US extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>pl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function by(n,e=null,t=[],i=[],o=null,l=null,h=null){return new zS(n,e,t,i,o,l,h)}function Qf(n){const e=De(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>af(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Oc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Xo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Xo(i))).join(",")),e.Te=t}return e.Te}function Xf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!b_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Oy(n.startAt,e.startAt)&&Oy(n.endAt,e.endAt)}function lf(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function BS(n,e,t,i,o,l,h,f){return new Vc(n,e,t,i,o,l,h,f)}function Lc(n){return new Vc(n)}function Vy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $S(n){return n.collectionGroup!==null}function ol(n){const e=De(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Ot(Wt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new fc(l,i))})),t.has(Wt.keyField().canonicalString())||e.Ie.push(new fc(Wt.keyField(),i))}return e.Ie}function xr(n){const e=De(n);return e.Ee||(e.Ee=WS(e,ol(n))),e.Ee}function WS(n,e){if(n.limitType==="F")return by(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new fc(o.field,l)}));const t=n.endAt?new dc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new dc(n.startAt.position,n.startAt.inclusive):null;return by(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function uf(n,e,t){return new Vc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mc(n,e){return Xf(xr(n),xr(e))&&n.limitType===e.limitType}function M_(n){return`${Qf(xr(n))}|lt:${n.limitType}`}function Lo(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>V_(o))).join(", ")}]`),Oc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Xo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Xo(o))).join(",")),`Target(${i})`})(xr(n))}; limitType=${n.limitType})`}function Fc(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ee.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of ol(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,g){const y=xy(h,f,g);return h.inclusive?y<=0:y<0})(i.startAt,ol(i),o)||i.endAt&&!(function(h,f,g){const y=xy(h,f,g);return h.inclusive?y>=0:y>0})(i.endAt,ol(i),o))})(n,e)}function HS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function F_(n){return(e,t)=>{let i=!1;for(const o of ol(n)){const l=qS(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function qS(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?Qo(g,y):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return T_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new mt(Ee.comparator);function di(){return GS}const j_=new mt(Ee.comparator);function el(...n){let e=j_;for(const t of n)e=e.insert(t.key,t);return e}function U_(n){let e=j_;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ms(){return al()}function z_(){return al()}function al(){return new Ks((n=>n.toString()),((n,e)=>n.isEqual(e)))}const KS=new mt(Ee.comparator),YS=new Ot(Ee.comparator);function Me(...n){let e=YS;for(const t of n)e=e.add(t);return e}const QS=new Ot(Le);function XS(){return QS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uc(e)?"-0":e}}function B_(n){return{integerValue:""+n}}function JS(n,e){return SS(e)?B_(e):Jf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(){this._=void 0}}function ZS(n,e,t){return n instanceof pc?(function(o,l){const h={fields:{[A_]:{stringValue:S_},[k_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Kf(l)&&(l=bc(l)),l&&(h.fields[C_]=l),{mapValue:h}})(t,e):n instanceof ml?W_(n,e):n instanceof gl?H_(n,e):(function(o,l){const h=$_(o,l),f=Ly(h)+Ly(o.Ae);return of(h)&&of(o.Ae)?B_(f):Jf(o.serializer,f)})(n,e)}function e1(n,e,t){return n instanceof ml?W_(n,e):n instanceof gl?H_(n,e):t}function $_(n,e){return n instanceof mc?(function(i){return of(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class pc extends jc{}class ml extends jc{constructor(e){super(),this.elements=e}}function W_(n,e){const t=q_(e);for(const i of n.elements)t.some((o=>Mr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class gl extends jc{constructor(e){super(),this.elements=e}}function H_(n,e){let t=q_(e);for(const i of n.elements)t=t.filter((o=>!Mr(o,i)));return{arrayValue:{values:t}}}class mc extends jc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ly(n){return wt(n.integerValue||n.doubleValue)}function q_(n){return Yf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function t1(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof ml&&o instanceof ml||i instanceof gl&&o instanceof gl?Yo(i.elements,o.elements,Mr):i instanceof mc&&o instanceof mc?Mr(i.Ae,o.Ae):i instanceof pc&&o instanceof pc})(n.transform,e.transform)}class n1{constructor(e,t){this.version=e,this.transformResults=t}}class ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Uc{}function G_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Y_(n.key,ui.none()):new Al(n.key,n.data,ui.none());{const t=n.data,i=Hn.empty();let o=new Ot(Wt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Ys(n.key,i,new ir(o.toArray()),ui.none())}}function r1(n,e,t){n instanceof Al?(function(o,l,h){const f=o.value.clone(),g=Fy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Ys?(function(o,l,h){if(!Ju(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Fy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(K_(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(n,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function ll(n,e,t,i){return n instanceof Al?(function(l,h,f,g){if(!Ju(l.precondition,h))return f;const y=l.value.clone(),_=jy(l.fieldTransforms,g,h);return y.setAll(_),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ys?(function(l,h,f,g){if(!Ju(l.precondition,h))return f;const y=jy(l.fieldTransforms,g,h),_=h.data;return _.setAll(K_(l)),_.setAll(y),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,h,f){return Ju(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(n,e,t)}function i1(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=$_(i.transform,o||null);l!=null&&(t===null&&(t=Hn.empty()),t.set(i.field,l))}return t||null}function My(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Yo(i,o,((l,h)=>t1(l,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Al extends Uc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ys extends Uc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function K_(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Fy(n,e,t){const i=new Map;Ge(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,e1(h,f,t[o]))}return i}function jy(n,e,t){const i=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);i.set(o.field,ZS(l,h,e))}return i}class Y_ extends Uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s1 extends Uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&r1(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ll(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ll(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=z_();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=G_(h,f);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Pe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Me())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,((t,i)=>My(t,i)))&&Yo(this.baseMutations,e.baseMutations,((t,i)=>My(t,i)))}}class Zf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ge(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return KS})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Zf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,ze;function u1(n){switch(n){case K.OK:return Se(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function Q_(n){if(n===void 0)return hi("GRPC error has no .code"),K.UNKNOWN;switch(n){case St.OK:return K.OK;case St.CANCELLED:return K.CANCELLED;case St.UNKNOWN:return K.UNKNOWN;case St.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case St.INTERNAL:return K.INTERNAL;case St.UNAVAILABLE:return K.UNAVAILABLE;case St.UNAUTHENTICATED:return K.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case St.NOT_FOUND:return K.NOT_FOUND;case St.ALREADY_EXISTS:return K.ALREADY_EXISTS;case St.PERMISSION_DENIED:return K.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case St.ABORTED:return K.ABORTED;case St.OUT_OF_RANGE:return K.OUT_OF_RANGE;case St.UNIMPLEMENTED:return K.UNIMPLEMENTED;case St.DATA_LOSS:return K.DATA_LOSS;default:return Se(39323,{code:n})}}(ze=St||(St={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=new Ji([4294967295,4294967295],0);function Uy(n){const e=c1().encode(n),t=new d_;return t.update(e),new Uint8Array(t.digest())}function zy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ji([t,i],0),new Ji([o,l],0)]}class ep{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new tl(`Invalid padding: ${t}`);if(i<0)throw new tl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new tl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ji.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ji.fromNumber(i)));return o.compare(h1)===1&&(o=new Ji([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Uy(e),[i,o]=zy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new ep(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=Uy(e),[i,o]=zy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Cl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new zc(Pe.min(),o,new mt(Le),di(),Me())}}class Cl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Cl(i,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class X_{constructor(e,t){this.targetId=e,this.Ce=t}}class J_{constructor(e,t,i=qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class By{constructor(){this.ve=0,this.Fe=$y(),this.Me=qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),t=Me(),i=Me();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Se(38017,{changeType:l})}})),new Cl(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=$y()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class d1{constructor(e){this.Ge=e,this.ze=new Map,this.je=di(),this.Je=Bu(),this.He=Bu(),this.Ye=new mt(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(lf(l))if(i===0){const h=new Ee(l.path);this.et(t,h,tn.newNoDocument(h,Pe.min()))}else Ge(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=rs(i).toUint8Array()}catch(g){if(g instanceof I_)return Ko("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new ep(h,o,l)}catch(g){return Ko(g instanceof tl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&lf(f.target)){const g=new Ee(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,tn.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=Me();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new zc(e,t,this.Ye,this.je,i);return this.je=di(),this.Je=Bu(),this.He=Bu(),this.Ye=new mt(Le),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new By,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ot(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ot(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new By),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Bu(){return new mt(Ee.comparator)}function $y(){return new mt(Ee.comparator)}const f1={asc:"ASCENDING",desc:"DESCENDING"},p1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m1={and:"AND",or:"OR"};class g1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cf(n,e){return n.useProto3Json||Oc(e)?e:{value:e}}function gc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Z_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function y1(n,e){return gc(n,e.toTimestamp())}function Or(n){return Ge(!!n,49232),Pe.fromTimestamp((function(t){const i=ns(t);return new st(i.seconds,i.nanos)})(n))}function tp(n,e){return hf(n,e).canonicalString()}function hf(n,e){const t=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ew(n){const e=pt.fromString(n);return Ge(sw(e),10190,{key:e.toString()}),e}function df(n,e){return tp(n.databaseId,e.path)}function Md(n,e){const t=ew(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(nw(t))}function tw(n,e){return tp(n.databaseId,e)}function v1(n){const e=ew(n);return e.length===4?pt.emptyPath():nw(e)}function ff(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nw(n){return Ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Wy(n,e,t){return{name:df(n,e),fields:t.value.mapValue.fields}}function _1(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Se(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(Ge(_===void 0||typeof _=="string",58123),qt.fromBase64String(_||"")):(Ge(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),qt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const _=y.code===void 0?K.UNKNOWN:Q_(y.code);return new ve(_,y.message||"")})(h);t=new J_(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Md(n,i.document.name),l=Or(i.document.updateTime),h=i.document.createTime?Or(i.document.createTime):Pe.min(),f=new Hn({mapValue:{fields:i.document.fields}}),g=tn.newFoundDocument(o,l,h,f),y=i.targetIds||[],_=i.removedTargetIds||[];t=new Zu(y,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Md(n,i.document),l=i.readTime?Or(i.readTime):Pe.min(),h=tn.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Zu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Md(n,i.document),l=i.removedTargetIds||[];t=new Zu([],l,o,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new l1(o,l),f=i.targetId;t=new X_(f,h)}}return t}function w1(n,e){let t;if(e instanceof Al)t={update:Wy(n,e.key,e.value)};else if(e instanceof Y_)t={delete:df(n,e.key)};else if(e instanceof Ys)t={update:Wy(n,e.key,e.data),updateMask:R1(e.fieldMask)};else{if(!(e instanceof s1))return Se(16599,{Vt:e.type});t={verify:df(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof pc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ml)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof gl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof mc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw Se(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:y1(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(n,e.precondition)),t}function E1(n,e){return n&&n.length>0?(Ge(e!==void 0,14353),n.map((t=>(function(o,l){let h=o.updateTime?Or(o.updateTime):Or(l);return h.isEqual(Pe.min())&&(h=Or(l)),new n1(h,o.transformResults||[])})(t,e)))):[]}function T1(n,e){return{documents:[tw(n,e.path)]}}function I1(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=tw(n,o);const l=(function(y){if(y.length!==0)return iw(Fr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((_=>(function(I){return{field:Mo(I.field),direction:C1(I.dir)}})(_)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=cf(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function S1(n){let e=v1(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ge(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const I=rw(E);return I instanceof Fr&&O_(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((I=>(function(W){return new fc(Fo(W.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let I;return I=typeof E=="object"?E.value:E,Oc(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(E){const I=!!E.before,O=E.values||[];return new dc(O,I)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const I=!E.before,O=E.values||[];return new dc(O,I)})(t.endAt)),BS(e,o,h,l,f,"F",g,y)}function A1(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Fo(t.unaryFilter.field);return Nt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Fo(t.unaryFilter.field);return Nt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Fo(t.unaryFilter.field);return Nt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Fo(t.unaryFilter.field);return Nt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Nt.create(Fo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Fr.create(t.compositeFilter.filters.map((i=>rw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function C1(n){return f1[n]}function k1(n){return p1[n]}function P1(n){return m1[n]}function Mo(n){return{fieldPath:n.canonicalString()}}function Fo(n){return Wt.fromServerFormat(n.fieldPath)}function iw(n){return n instanceof Nt?(function(t){if(t.op==="=="){if(Ny(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NAN"}};if(Dy(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ny(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NAN"}};if(Dy(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(t.field),op:k1(t.op),value:t.value}}})(n):n instanceof Fr?(function(t){const i=t.getFilters().map((o=>iw(o)));return i.length===1?i[0]:{compositeFilter:{op:P1(t.op),filters:i}}})(n):Se(54877,{filter:n})}function R1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t,i,o,l=Pe.min(),h=Pe.min(),f=qt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.yt=e}}function N1(n){const e=S1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?uf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(){this.Cn=new O1}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(ts.min())}updateCollectionGroup(e,t,i){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class O1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ot(pt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ot(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ow=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(ow,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Jo(0)}static cr(){return new Jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="LruGarbageCollector",b1=1048576;function Gy([n,e],[t,i]){const o=Le(n,t);return o===0?Le(e,i):o}class V1{constructor(e){this.Ir=e,this.buffer=new Ot(Gy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Gy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class L1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(qy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){sa(t)?se(qy,"Ignoring IndexedDB error during garbage collection: ",t):await ia(t)}await this.Vr(3e5)}))}}class M1{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return q.resolve(xc.ce);const i=new V1(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Hy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,f,g,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,f=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),Vo()<=Ve.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-_}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function F1(n,e){return new M1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(){this.changes=new Ks((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ll(i.mutation,o,ir.empty(),st.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Me()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Me()){const o=Ms();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=el();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Ms();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Me())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=di();const h=al(),f=(function(){return al()})();return t.forEach(((g,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Ys)?l=l.insert(y.key,y):_!==void 0?(h.set(y.key,_.mutation.getFieldMask()),ll(_.mutation,y,_.mutation.getFieldMask(),st.now())):h.set(y.key,ir.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,_)=>h.set(y,_))),t.forEach(((y,_)=>f.set(y,new U1(_,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=al();let o=new mt(((h,f)=>h-f)),l=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let _=i.get(g)||ir.empty();_=f.applyToLocalView(y,_),i.set(g,_);const E=(o.get(f.batchId)||Me()).add(g);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,_=g.value,E=z_();_.forEach((I=>{if(!l.has(I)){const O=G_(t.get(I),i.get(I));O!==null&&E.set(I,O),l=l.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return q.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$S(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):q.resolve(Ms());let f=hl,g=l;return h.next((y=>q.forEach(y,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?q.resolve():this.remoteDocumentCache.getEntry(e,_).next((I=>{g=g.insert(_,I)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Me()))).next((_=>({batchId:f,changes:U_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=el();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=el();return this.indexManager.getCollectionParents(e,l).next((f=>q.forEach(f,(g=>{const y=(function(E,I){return new Vc(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,I)=>{h=h.insert(E,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((g,y)=>{const _=y.getKey();h.get(_)===null&&(h=h.insert(_,tn.newInvalidDocument(_)))}));let f=el();return h.forEach(((g,y)=>{const _=l.get(g);_!==void 0&&ll(_.mutation,y,ir.empty(),st.now()),Fc(t,y)&&(f=f.insert(g,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Or(o.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:N1(o.bundledQuery),readTime:Or(o.readTime)}})(t)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.overlays=new mt(Ee.comparator),this.qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ms();return q.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),q.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),q.resolve()}getOverlaysForCollection(e,t,i){const o=Ms(),l=t.length+1,h=new Ee(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return q.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new mt(((y,_)=>y-_));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=Ms(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const f=Ms(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,_)=>f.set(y,_))),!(f.size()>=o)););return q.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new a1(t,i));let l=this.qr.get(t);l===void 0&&(l=Me(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.Qr=new Ot(Ft.$r),this.Ur=new Ot(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ft(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ee(new pt([])),i=new Ft(t,e),o=new Ft(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new pt([])),i=new Ft(t,e),o=new Ft(t,e+1);let l=Me();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Ft(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ot(Ft.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new o1(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new Ft(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return q.resolve(h)}lookupMutationBatch(e,t){return q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Gf:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ft(t,0),o=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ot(Le);return t.forEach((o=>{const l=new Ft(o,0),h=new Ft(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{i=i.add(f.Yr)}))})),q.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Ee.isDocumentKey(l)||(l=l.child(""));const h=new Ft(new Ee(l),0);let f=new Ot(Le);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),q.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ge(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return q.forEach(t.mutations,(o=>{const l=new Ft(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ft(t,0),o=this.Zr.firstAfterOrEqual(i);return q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.ri=e,this.docs=(function(){return new mt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return q.resolve(i?i.document.mutableCopy():tn.newInvalidDocument(t))}getEntries(e,t){let i=di();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():tn.newInvalidDocument(o))})),q.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=di();const h=t.path,f=new Ee(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:_}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||wS(_S(_),i)<=0||(o.has(_.key)||Fc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return q.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Se(9500)}ii(e,t){return q.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new G1(this)}getSize(e){return q.resolve(this.size)}}class G1 extends j1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.persistence=e,this.si=new Ks((t=>Qf(t)),Xf),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new np,this.targetCount=0,this.ai=Jo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Jo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Pr(t),q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),q.waitFor(l).next((()=>o))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return q.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),q.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return q.resolve(i)}containsKey(e,t){return q.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t){this.ui={},this.overlays={},this.ci=new xc(0),this.li=!1,this.li=!0,this.hi=new W1,this.referenceDelegate=e(this),this.Pi=new K1(this),this.indexManager=new x1,this.remoteDocumentCache=(function(o){return new q1(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new D1(t),this.Ii=new B1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new H1(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){se("MemoryPersistence","Starting transaction:",e);const o=new Y1(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return q.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Y1 extends TS{constructor(e){super(),this.currentSequenceNumber=e}}class rp{constructor(e){this.persistence=e,this.Ri=new np,this.Vi=null}static mi(e){return new rp(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),q.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,(i=>{const o=Ee.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return q.or([()=>q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class yc{constructor(e,t){this.persistence=e,this.pi=new Ks((i=>AS(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=F1(this,t)}static mi(e,t){return new yc(e,t)}Ei(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return q.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?q.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(i++,l.removeEntry(h,Pe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),q.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qu(e.data.value)),t}br(e,t,i){return q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return q.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Me(),o=Me();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ip(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return BT()?8:IS(nn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new Q1;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Vo()<=Ve.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Vo()<=Ve.DEBUG&&se("QueryEngine","Query:",Lo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Vo()<=Ve.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(t))):q.resolve())}ys(e,t){if(Vy(t))return q.resolve(null);let i=xr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=uf(t,null,"F"),i=xr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Me(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,uf(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,i,o){return Vy(t)||o.isEqual(Pe.min())?q.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?q.resolve(null):(Vo()<=Ve.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Lo(t)),this.vs(e,h,t,vS(o,hl)).next((f=>f)))}))}Ds(e,t){let i=new Ot(F_(e));return t.forEach(((o,l)=>{Fc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return Vo()<=Ve.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Lo(t)),this.ps.getDocumentsMatchingQuery(e,t,ts.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="LocalStore",J1=3e8;class Z1{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new mt(Le),this.xs=new Ks((l=>Qf(l)),Xf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new z1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function eA(n,e,t,i){return new Z1(n,e,t,i)}async function lw(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let g=Me();for(const y of o){h.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}for(const y of l){f.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function tA(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,_){const E=y.batch,I=E.keys();let O=q.resolve();return I.forEach((W=>{O=O.next((()=>_.getEntry(g,W))).next(($=>{const U=y.docVersions.get(W);Ge(U!==null,48541),$.version.compareTo(U)<0&&(E.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),_.addEntry($)))}))})),O.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=Me();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function uw(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function nA(n,e){const t=De(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((_,E)=>{const I=o.get(E);if(!I)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,E))));let O=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(qt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):_.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(_.resumeToken,i)),o=o.insert(E,O),(function($,U,X){return $.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=J1?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(I,O,_)&&f.push(t.Pi.updateTargetData(l,O))}));let g=di(),y=Me();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(rA(l,h,e.documentUpdates).next((_=>{g=_.ks,y=_.qs}))),!i.isEqual(Pe.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return q.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function rA(n,e,t){let i=Me(),o=Me();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let h=di();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Pe.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):se(sp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function iA(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Gf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function sA(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,q.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new Ki(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function pf(n,e,t){const i=De(n),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!sa(h))throw h;se(sp,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Ky(n,e,t){const i=De(n);let o=Pe.min(),l=Me();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,_){const E=De(g),I=E.xs.get(_);return I!==void 0?q.resolve(E.Ms.get(I)):E.Pi.getTargetData(y,_)})(i,h,xr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:Pe.min(),t?l:Me()))).next((f=>(oA(i,HS(e),f),{documents:f,Qs:l})))))}function oA(n,e,t){let i=n.Os.get(e)||Pe.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class Yy{constructor(){this.activeTargetIds=XS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aA{constructor(){this.Mo=new Yy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="ConnectivityMonitor";class Xy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(Qy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(Qy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u=null;function mf(){return $u===null?$u=(function(){return 268435456+Math.round(2147483648*Math.random())})():$u++,"0x"+$u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="RestConnection",uA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===cc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=mf(),f=this.zo(e,t.toUriEncodedString());se(Fd,`Sending RPC '${e}' ${h}:`,f,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),_=ta(y);return this.Jo(e,f,g,i,_).then((E=>(se(Fd,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Ko(Fd,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",i),E}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ra})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=uA[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class dA extends cA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=mf();return new Promise(((f,g)=>{const y=new f_;y.setWithCredentials(!0),y.listenOnce(p_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Yu.NO_ERROR:const E=y.getResponseJson();se(Zt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case Yu.TIMEOUT:se(Zt,`RPC '${e}' ${h} timed out`),g(new ve(K.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:const I=y.getStatus();if(se(Zt,`RPC '${e}' ${h} failed with status:`,I,"response text:",y.getResponseText()),I>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const W=O==null?void 0:O.error;if(W&&W.status&&W.message){const $=(function(X){const re=X.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(re)>=0?re:K.UNKNOWN})(W.status);g(new ve($,W.message))}else g(new ve(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ve(K.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{se(Zt,`RPC '${e}' ${h} completed.`)}}));const _=JSON.stringify(o);se(Zt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=mf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=y_(),f=g_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const _=l.join("");se(Zt,`Creating RPC '${e}' stream ${o}: ${_}`,g);const E=h.createWebChannel(_,g);this.I_(E);let I=!1,O=!1;const W=new hA({Yo:U=>{O?se(Zt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(I||(se(Zt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),se(Zt,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),$=(U,X,re)=>{U.listen(X,(me=>{try{re(me)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return $(E,Za.EventType.OPEN,(()=>{O||(se(Zt,`RPC '${e}' stream ${o} transport opened.`),W.o_())})),$(E,Za.EventType.CLOSE,(()=>{O||(O=!0,se(Zt,`RPC '${e}' stream ${o} transport closed`),W.a_(),this.E_(E))})),$(E,Za.EventType.ERROR,(U=>{O||(O=!0,Ko(Zt,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),W.a_(new ve(K.UNAVAILABLE,"The operation could not be completed")))})),$(E,Za.EventType.MESSAGE,(U=>{var X;if(!O){const re=U.data[0];Ge(!!re,16349);const me=re,ae=(me==null?void 0:me.error)||((X=me[0])==null?void 0:X.error);if(ae){se(Zt,`RPC '${e}' stream ${o} received error:`,ae);const Oe=ae.status;let le=(function(P){const x=St[P];if(x!==void 0)return Q_(x)})(Oe),D=ae.message;le===void 0&&(le=K.INTERNAL,D="Unknown error status: "+Oe+" with message "+ae.message),O=!0,W.a_(new ve(le,D)),E.close()}else se(Zt,`RPC '${e}' stream ${o} received:`,re),W.u_(re)}})),$(f,m_.STAT_EVENT,(U=>{U.stat===nf.PROXY?se(Zt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===nf.NOPROXY&&se(Zt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(n){return new g1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&se("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="PersistentStream";class hw{constructor(e,t,i,o,l,h,f,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(hi(t.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ve(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return se(Jy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(se(Jy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fA extends hw{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=_1(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Pe.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Pe.min():h.readTime?Or(h.readTime):Pe.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=ff(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=lf(g)?{documents:T1(l,g)}:{query:I1(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=Z_(l,h.resumeToken);const y=cf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Pe.min())>0){f.readTime=gc(l,h.snapshotVersion.toTimestamp());const y=cf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=A1(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=ff(this.serializer),t.removeTarget=e,this.q_(t)}}class pA extends hw{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=E1(e.writeResults,e.commitTime),i=Or(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=ff(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>w1(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{}class gA extends mA{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ve(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,hf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(K.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,hf(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ve(K.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class yA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hi(t),this.aa=!1):se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="RemoteStore";class vA{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Qs(this)&&(se(Hs,"Restarting streams for network reachability change."),await(async function(g){const y=De(g);y.Ea.add(4),await kl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await $c(y)})(this))}))})),this.Ra=new yA(i,o)}}async function $c(n){if(Qs(n))for(const e of n.da)await e(!0)}async function kl(n){for(const e of n.da)await e(!1)}function dw(n,e){const t=De(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),up(t)?lp(t):oa(t).O_()&&ap(t,e))}function op(n,e){const t=De(n),i=oa(t);t.Ia.delete(e),i.O_()&&fw(t,e),t.Ia.size===0&&(i.O_()?i.L_():Qs(t)&&t.Ra.set("Unknown"))}function ap(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oa(n).Y_(e)}function fw(n,e){n.Va.Ue(e),oa(n).Z_(e)}function lp(n){n.Va=new d1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),oa(n).start(),n.Ra.ua()}function up(n){return Qs(n)&&!oa(n).x_()&&n.Ia.size>0}function Qs(n){return De(n).Ea.size===0}function pw(n){n.Va=void 0}async function _A(n){n.Ra.set("Online")}async function wA(n){n.Ia.forEach(((e,t)=>{ap(n,e)}))}async function EA(n,e){pw(n),up(n)?(n.Ra.ha(e),lp(n)):n.Ra.set("Unknown")}async function TA(n,e,t){if(n.Ra.set("Online"),e instanceof J_&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(n,e)}catch(i){se(Hs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vc(n,i)}else if(e instanceof Zu?n.Va.Ze(e):e instanceof X_?n.Va.st(e):n.Va.tt(e),!t.isEqual(Pe.min()))try{const i=await uw(n.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(y);_&&l.Ia.set(y,_.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(qt.EMPTY_BYTE_STRING,_.snapshotVersion)),fw(l,g);const E=new Ki(_.target,g,y,_.sequenceNumber);ap(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){se(Hs,"Failed to raise snapshot:",i),await vc(n,i)}}async function vc(n,e,t){if(!sa(e))throw e;n.Ea.add(1),await kl(n),n.Ra.set("Offline"),t||(t=()=>uw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{se(Hs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await $c(n)}))}function mw(n,e){return e().catch((t=>vc(n,t,e)))}async function Wc(n){const e=De(n),t=ss(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Gf;for(;IA(e);)try{const o=await iA(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,SA(e,o)}catch(o){await vc(e,o)}gw(e)&&yw(e)}function IA(n){return Qs(n)&&n.Ta.length<10}function SA(n,e){n.Ta.push(e);const t=ss(n);t.O_()&&t.X_&&t.ea(e.mutations)}function gw(n){return Qs(n)&&!ss(n).x_()&&n.Ta.length>0}function yw(n){ss(n).start()}async function AA(n){ss(n).ra()}async function CA(n){const e=ss(n);for(const t of n.Ta)e.ea(t.mutations)}async function kA(n,e,t){const i=n.Ta.shift(),o=Zf.from(i,e,t);await mw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Wc(n)}async function PA(n,e){e&&ss(n).X_&&await(async function(i,o){if((function(h){return u1(h)&&h!==K.ABORTED})(o.code)){const l=i.Ta.shift();ss(i).B_(),await mw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Wc(i)}})(n,e),gw(n)&&yw(n)}async function Zy(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),se(Hs,"RemoteStore received new credentials");const i=Qs(t);t.Ea.add(3),await kl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $c(t)}async function RA(n,e){const t=De(n);e?(t.Ea.delete(2),await $c(t)):e||(t.Ea.add(2),await kl(t),t.Ra.set("Unknown"))}function oa(n){return n.ma||(n.ma=(function(t,i,o){const l=De(t);return l.sa(),new fA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:_A.bind(null,n),t_:wA.bind(null,n),r_:EA.bind(null,n),H_:TA.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),up(n)?lp(n):n.Ra.set("Unknown")):(await n.ma.stop(),pw(n))}))),n.ma}function ss(n){return n.fa||(n.fa=(function(t,i,o){const l=De(t);return l.sa(),new pA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:AA.bind(null,n),r_:PA.bind(null,n),ta:CA.bind(null,n),na:kA.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Wc(n)):(await n.fa.stop(),n.Ta.length>0&&(se(Hs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new cp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(n,e){if(hi("AsyncQueue",`${e}: ${n}`),sa(n))return new ve(K.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{static emptySet(e){return new Bo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=el(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Bo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.ga=new mt(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Zo{constructor(e,t,i,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Zo(e,t,Bo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class NA{constructor(){this.queries=tv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=De(t),l=o.queries;o.queries=tv(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(i)}))})(this,new ve(K.ABORTED,"Firestore shutting down"))}}function tv(){return new Ks((n=>M_(n)),Mc)}async function vw(n,e){const t=De(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new DA,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=hp(h,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&dp(t)}async function _w(n,e){const t=De(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function xA(n,e){const t=De(n);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(i=!0);h.wa=o}}i&&dp(t)}function OA(n,e,t){const i=De(n),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function dp(n){n.Ca.forEach((e=>{e.next()}))}var gf,nv;(nv=gf||(gf={})).Ma="default",nv.Cache="cache";class ww{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Zo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.key=e}}class Tw{constructor(e){this.key=e}}class bA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=F_(e),this.tu=new Bo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new ev,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const I=o.get(_),O=Fc(this.query,E)?E:null,W=!!I&&this.mutatedKeys.has(I.key),$=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let U=!1;I&&O?I.data.isEqual(O.data)?W!==$&&(i.track({type:3,doc:O}),U=!0):this.su(I,O)||(i.track({type:2,doc:O}),U=!0,(g&&this.eu(O,g)>0||y&&this.eu(O,y)<0)&&(f=!0)):!I&&O?(i.track({type:0,doc:O}),U=!0):I&&!O&&(i.track({type:1,doc:I}),U=!0,(g||y)&&(f=!0)),U&&(O?(h=h.add(O),l=$?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:h,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((_,E)=>(function(O,W){const $=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:U})}};return $(O)-$(W)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Zo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ev,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Me(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new Tw(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new Ew(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Me();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const fp="SyncEngine";class VA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class LA{constructor(e){this.key=e,this.hu=!1}}class MA{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ks((f=>M_(f)),Mc),this.Iu=new Map,this.Eu=new Set,this.du=new mt(Ee.comparator),this.Au=new Map,this.Ru=new np,this.Vu={},this.mu=new Map,this.fu=Jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FA(n,e,t=!0){const i=Pw(n);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Iw(i,e,t,!0),o}async function jA(n,e){const t=Pw(n);await Iw(t,e,!0,!1)}async function Iw(n,e,t,i){const o=await sA(n.localStore,xr(e)),l=o.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await UA(n,e,l,h==="current",o.resumeToken)),n.isPrimaryClient&&t&&dw(n.remoteStore,o),f}async function UA(n,e,t,i,o){n.pu=(E,I,O)=>(async function($,U,X,re){let me=U.view.ru(X);me.Cs&&(me=await Ky($.localStore,U.query,!1).then((({documents:D})=>U.view.ru(D,me))));const ae=re&&re.targetChanges.get(U.targetId),Oe=re&&re.targetMismatches.get(U.targetId)!=null,le=U.view.applyChanges(me,$.isPrimaryClient,ae,Oe);return iv($,U.targetId,le.au),le.snapshot})(n,E,I,O);const l=await Ky(n.localStore,e,!0),h=new bA(e,l.Qs),f=h.ru(l.documents),g=Cl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=h.applyChanges(f,n.isPrimaryClient,g);iv(n,t,y.au);const _=new VA(e,t,h);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function zA(n,e,t){const i=De(n),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Mc(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await pf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&op(i.remoteStore,o.targetId),yf(i,o.targetId)})).catch(ia)):(yf(i,o.targetId),await pf(i.localStore,o.targetId,!0))}async function BA(n,e){const t=De(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),op(t.remoteStore,i.targetId))}async function $A(n,e,t){const i=QA(n);try{const o=await(function(h,f){const g=De(h),y=st.now(),_=f.reduce(((O,W)=>O.add(W.key)),Me());let E,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let W=di(),$=Me();return g.Ns.getEntries(O,_).next((U=>{W=U,W.forEach(((X,re)=>{re.isValidDocument()||($=$.add(X))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,W))).next((U=>{E=U;const X=[];for(const re of f){const me=i1(re,E.get(re.key).overlayedDocument);me!=null&&X.push(new Ys(re.key,me,D_(me.value.mapValue),ui.exists(!0)))}return g.mutationQueue.addMutationBatch(O,y,X,f)})).next((U=>{I=U;const X=U.applyToLocalDocumentSet(E,$);return g.documentOverlayCache.saveOverlays(O,U.batchId,X)}))})).then((()=>({batchId:I.batchId,changes:U_(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new mt(Le)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(i,o.batchId,t),await Pl(i,o.changes),await Wc(i.remoteStore)}catch(o){const l=hp(o,"Failed to persist write");t.reject(l)}}async function Sw(n,e){const t=De(n);try{const i=await nA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ge(h.hu,14607):o.removedDocuments.size>0&&(Ge(h.hu,42227),h.hu=!1))})),await Pl(t,i,e)}catch(i){await ia(i)}}function rv(n,e,t){const i=De(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=De(h);g.onlineState=f;let y=!1;g.queries.forEach(((_,E)=>{for(const I of E.Sa)I.va(f)&&(y=!0)})),y&&dp(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function WA(n,e,t){const i=De(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new mt(Ee.comparator);h=h.insert(l,tn.newNoDocument(l,Pe.min()));const f=Me().add(l),g=new zc(Pe.min(),new Map,new mt(Le),h,f);await Sw(i,g),i.du=i.du.remove(l),i.Au.delete(e),pp(i)}else await pf(i.localStore,e,!1).then((()=>yf(i,e,t))).catch(ia)}async function HA(n,e){const t=De(n),i=e.batch.batchId;try{const o=await tA(t.localStore,e);Cw(t,i,null),Aw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Pl(t,o)}catch(o){await ia(o)}}async function qA(n,e,t){const i=De(n);try{const o=await(function(h,f){const g=De(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return g.mutationQueue.lookupMutationBatch(y,f).next((E=>(Ge(E!==null,37113),_=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,_,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>g.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);Cw(i,e,t),Aw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Pl(i,o)}catch(o){await ia(o)}}function Aw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Cw(n,e,t){const i=De(n);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function yf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||kw(n,i)}))}function kw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(op(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),pp(n))}function iv(n,e,t){for(const i of t)i instanceof Ew?(n.Ru.addReference(i.key,e),GA(n,i)):i instanceof Tw?(se(fp,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||kw(n,i.key)):Se(19791,{wu:i})}function GA(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(se(fp,"New document in limbo: "+t),n.Eu.add(i),pp(n))}function pp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(pt.fromString(e)),i=n.fu.next();n.Au.set(i,new LA(t)),n.du=n.du.insert(t,i),dw(n.remoteStore,new Ki(xr(Lc(t.path)),i,"TargetPurposeLimboResolution",xc.ce))}}async function Pl(n,e,t){const i=De(n),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,g)=>{h.push(i.pu(g,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=ip.As(g.targetId,y);l.push(E)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(g,y){const _=De(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>q.forEach(y,(I=>q.forEach(I.Es,(O=>_.persistence.referenceDelegate.addReference(E,I.targetId,O))).next((()=>q.forEach(I.ds,(O=>_.persistence.referenceDelegate.removeReference(E,I.targetId,O)))))))))}catch(E){if(!sa(E))throw E;se(sp,"Failed to update sequence numbers: "+E)}for(const E of y){const I=E.targetId;if(!E.fromCache){const O=_.Ms.get(I),W=O.snapshotVersion,$=O.withLastLimboFreeSnapshotVersion(W);_.Ms=_.Ms.insert(I,$)}}})(i.localStore,l))}async function KA(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){se(fp,"User change. New user:",e.toKey());const i=await lw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new ve(K.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pl(t,i.Ls)}}function YA(n,e){const t=De(n),i=t.Au.get(e);if(i&&i.hu)return Me().add(i.key);{let o=Me();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function Pw(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WA.bind(null,e),e.Pu.H_=xA.bind(null,e.eventManager),e.Pu.yu=OA.bind(null,e.eventManager),e}function QA(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qA.bind(null,e),e}class _c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return eA(this.persistence,new X1,e.initialUser,this.serializer)}Cu(e){return new aw(rp.mi,this.serializer)}Du(e){return new aA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_c.provider={build:()=>new _c};class XA extends _c{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ge(this.persistence.referenceDelegate instanceof yc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new L1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new aw((i=>yc.mi(i,t)),this.serializer)}}class vf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=KA.bind(null,this.syncEngine),await RA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new NA})()}createDatastore(e){const t=Bc(e.databaseInfo.databaseId),i=(function(l){return new dA(l)})(e.databaseInfo);return(function(l,h,f,g){return new gA(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new vA(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>rv(this.syncEngine,t,0)),(function(){return Xy.v()?new Xy:new lA})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,_){const E=new MA(o,l,h,f,g,y);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=De(o);se(Hs,"RemoteStore shutting down."),l.Ea.add(5),await kl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}vf.provider={build:()=>new vf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="FirestoreClient";class JA{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=en.UNAUTHENTICATED,this.clientId=Hf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{se(os,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(se(os,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=hp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ud(n,e){n.asyncQueue.verifyOperationInProgress(),se(os,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await lw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function sv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ZA(n);se(os,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Zy(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>Zy(e.remoteStore,o))),n._onlineComponents=e}async function ZA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se(os,"Using user provided OfflineComponentProvider");try{await Ud(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ko("Error using user provided cache. Falling back to memory cache: "+t),await Ud(n,new _c)}}else se(os,"Using default OfflineComponentProvider"),await Ud(n,new XA(void 0));return n._offlineComponents}async function Dw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se(os,"Using user provided OnlineComponentProvider"),await sv(n,n._uninitializedComponentsProvider._online)):(se(os,"Using default OnlineComponentProvider"),await sv(n,new vf))),n._onlineComponents}function eC(n){return Dw(n).then((e=>e.syncEngine))}async function _f(n){const e=await Dw(n),t=e.eventManager;return t.onListen=FA.bind(null,e.syncEngine),t.onUnlisten=zA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=BA.bind(null,e.syncEngine),t}function tC(n,e,t={}){const i=new Zi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const _=new Rw({next:I=>{_.Nu(),h.enqueueAndForget((()=>_w(l,E)));const O=I.docs.has(f);!O&&I.fromCache?y.reject(new ve(K.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&I.fromCache&&g&&g.source==="server"?y.reject(new ve(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),E=new ww(Lc(f.path),_,{includeMetadataChanges:!0,qa:!0});return vw(l,E)})(await _f(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="firestore.googleapis.com",av=!0;class lv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xw,this.ssl=av}else this.host=e.host,this.ssl=e.ssl??av;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ow;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<b1)throw new ve(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ve(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ve(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ve(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mp{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new oS;switch(i.type){case"firstParty":return new cS(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ve(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=ov.get(t);i&&(se("ComponentProvider","Removing Datastore"),ov.delete(t),i.terminate())})(this),Promise.resolve()}}function nC(n,e,t,i={}){var y;n=es(n,mp);const o=ta(e),l=n._getSettings(),h={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(i_(`https://${f}`),s_("Firestore",!0)),l.host!==xw&&l.host!==f&&Ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:i};if(!Bs(g,h)&&(n._setSettings(g),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=en.MOCK_USER;else{_=OT(i.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new ve(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new en(I)}n._authCredentials=new aS(new __(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Hc(this.firestore,e,this._query)}}class xt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Sl(t,xt._jsonSchema))return new xt(e,i||null,new Ee(pt.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:At("string",xt._jsonSchemaVersion),referencePath:At("string")};class yl extends Hc{constructor(e,t,i){super(e,t,Lc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new Ee(e))}withConverter(e){return new yl(this.firestore,e,this._path)}}function Qa(n,e,...t){if(n=xn(n),arguments.length===1&&(e=Hf.newId()),gS("doc","path",e),n instanceof mp){const i=pt.fromString(e,...t);return Ty(i),new xt(n,null,new Ee(i))}{if(!(n instanceof xt||n instanceof yl))throw new ve(K.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pt.fromString(e,...t));return Ty(i),new xt(n.firestore,n instanceof yl?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="AsyncQueue";class cv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cw(this,"async_queue_retry"),this._c=()=>{const i=jd();i&&se(uv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=jd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=jd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Zi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sa(e))throw e;se(uv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,hi("INTERNAL UNHANDLED ERROR: ",hv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=cp.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:hv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function hv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class vl extends mp{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new cv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cv(e),this._firestoreClient=void 0,await e}}}function rC(n,e){const t=typeof n=="object"?n:u_(),i=typeof n=="string"?n:cc,o=$f(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=NT("firestore");l&&nC(o,...l)}return o}function gp(n){if(n._terminated)throw new ve(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iC(n),n._firestoreClient}function iC(n){var i,o,l;const e=n._freezeSettings(),t=(function(f,g,y,_){return new PS(f,g,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Nw(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new JA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(qt.fromBase64String(e))}catch(t){throw new ve(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qn(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sl(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:At("string",qn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(Sl(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:At("string",br._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sl(e,Vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vr(e.vectorValues);throw new ve(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vr._jsonSchemaVersion="firestore/vectorValue/1.0",Vr._jsonSchema={type:At("string",Vr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=/^__.*__$/;class oC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ys(e,this.data,this.fieldMask,t,this.fieldTransforms):new Al(e,this.data,t,this.fieldTransforms)}}function bw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:n})}}class vp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bw(this.Ac)&&sC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Bc(e)}Cc(e,t,i,o=!1){return new vp({Ac:e,methodName:t,Dc:i,path:Wt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lC(n){const e=n._freezeSettings(),t=Bc(n._databaseId);return new aC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uC(n,e,t,i,o,l={}){const h=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);Fw("Data must be an object, but it was:",h,i);const f=Lw(i,h);let g,y;if(l.merge)g=new ir(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const I=cC(e,E,t);if(!h.contains(I))throw new ve(K.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);dC(_,I)||_.push(I)}g=new ir(_),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new oC(new Hn(f),g,y)}function Vw(n,e){if(Mw(n=xn(n)))return Fw("Unsupported field value:",e,n),Lw(n,e);if(n instanceof Ow)return(function(i,o){if(!bw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let g=Vw(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=xn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return JS(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=st.fromDate(i);return{timestampValue:gc(o.serializer,l)}}if(i instanceof st){const l=new st(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gc(o.serializer,l)}}if(i instanceof br)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof qn)return{bytesValue:Z_(o.serializer,i._byteString)};if(i instanceof xt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:tp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Vr)return(function(h,f){return{mapValue:{fields:{[P_]:{stringValue:R_},[hc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return Jf(f.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${qf(i)}`)})(n,e)}function Lw(n,e){const t={};return T_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(n,((i,o)=>{const l=Vw(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Mw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof st||n instanceof br||n instanceof qn||n instanceof xt||n instanceof Ow||n instanceof Vr)}function Fw(n,e,t){if(!Mw(t)||!w_(t)){const i=qf(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function cC(n,e,t){if((e=xn(e))instanceof yp)return e._internalPath;if(typeof e=="string")return jw(n,e);throw wc("Field path arguments must be of type string or ",n,!1,void 0,t)}const hC=new RegExp("[~\\*/\\[\\]]");function jw(n,e,t){if(e.search(hC)>=0)throw wc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yp(...e.split("."))._internalPath}catch{throw wc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wc(n,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new ve(K.INVALID_ARGUMENT,f+n+g)}function dC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class fC extends Uw{data(){return super.data()}}function zw(n,e){return typeof e=="string"?jw(n,e):e instanceof yp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mC{convertValue(e,t="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Gs(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[hc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>wt(h.doubleValue)));return new Vr(t)}convertGeoPoint(e){return new br(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=bc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(dl(e));default:return null}}convertTimestamp(e){const t=ns(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=pt.fromString(e);Ge(sw(i),9688,{name:e});const o=new fl(i.get(1),i.get(3)),l=new Ee(i.popFirst(5));return o.isEqual(t)||hi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class nl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class js extends Uw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(zw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=js._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}js._jsonSchemaVersion="firestore/documentSnapshot/1.0",js._jsonSchema={type:At("string",js._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class ec extends js{data(e={}){return super.data(e)}}class $o{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new nl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new ec(this._firestore,this._userDataWriter,i.key,i,new nl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new ec(o._firestore,o._userDataWriter,f.doc.key,f.doc,new nl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new ec(o._firestore,o._userDataWriter,f.doc.key,f.doc,new nl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),_=h.indexOf(f.doc.key)),{type:yC(f.type),doc:g,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(n){n=es(n,xt);const e=es(n.firestore,vl);return tC(gp(e),n._key).then((t=>$w(e,n,t)))}$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:At("string",$o._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class Bw extends mC{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}function pv(n,e,t){n=es(n,xt);const i=es(n.firestore,vl),o=gC(n.converter,e);return _C(i,[uC(lC(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ui.none())])}function vC(n,...e){var g,y,_;n=xn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||dv(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(dv(e[i])){const E=e[i];e[i]=(g=E.next)==null?void 0:g.bind(E),e[i+1]=(y=E.error)==null?void 0:y.bind(E),e[i+2]=(_=E.complete)==null?void 0:_.bind(E)}let l,h,f;if(n instanceof xt)h=es(n.firestore,vl),f=Lc(n._key.path),l={next:E=>{e[i]&&e[i]($w(h,n,E))},error:e[i+1],complete:e[i+2]};else{const E=es(n,Hc);h=es(E.firestore,vl),f=E._query;const I=new Bw(h);l={next:O=>{e[i]&&e[i](new $o(h,I,E,O))},error:e[i+1],complete:e[i+2]},pC(n._query)}return(function(I,O,W,$){const U=new Rw($),X=new ww(O,U,W);return I.asyncQueue.enqueueAndForget((async()=>vw(await _f(I),X))),()=>{U.Nu(),I.asyncQueue.enqueueAndForget((async()=>_w(await _f(I),X)))}})(gp(h),f,o,l)}function _C(n,e){return(function(i,o){const l=new Zi;return i.asyncQueue.enqueueAndForget((async()=>$A(await eC(i),o,l))),l.promise})(gp(n),e)}function $w(n,e,t){const i=t.docs.get(e._key),o=new Bw(n);return new js(n,o,e._key,i,new nl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ra=o})(na),Go(new $s("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new vl(new lS(i.getProvider("auth-internal")),new hS(h,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ve(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(y.options.projectId,_)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Xi(vy,_y,e),Xi(vy,_y,"esm2020")})();var wC="firebase",EC="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(wC,EC,"app");function Ww(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TC=Ww,Hw=new Tl("auth","Firebase",Ww());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new zf("@firebase/auth");function IC(n,...e){Ec.logLevel<=Ve.WARN&&Ec.warn(`Auth (${na}): ${n}`,...e)}function tc(n,...e){Ec.logLevel<=Ve.ERROR&&Ec.error(`Auth (${na}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(n,...e){throw wp(n,...e)}function or(n,...e){return wp(n,...e)}function _p(n,e,t){const i={...TC(),[e]:t};return new Tl("auth","Firebase",i).create(e,{appName:n.name})}function Us(n){return _p(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SC(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&jr(n,"argument-error"),_p(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Hw.create(n,...e)}function ke(n,e,...t){if(!n)throw wp(e,...t)}function ai(n){const e="INTERNAL ASSERTION FAILED: "+n;throw tc(e),new Error(e)}function fi(n,e){n||ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function AC(){return mv()==="http:"||mv()==="https:"}function mv(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AC()||jT()||"connection"in navigator)?navigator.onLine:!0}function kC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t){this.shortDelay=e,this.longDelay=t,fi(t>e,"Short delay should be less than long delay!"),this.isMobile=LT()||UT()}get(){return CC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(n,e){fi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DC=new Rl(3e4,6e4);function Tp(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function aa(n,e,t,i,o={}){return Gw(n,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=Il({key:n.config.apiKey,...h}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:g,...l};return FT()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&ta(n.emulatorConfig.host)&&(y.credentials="include"),qw.fetch()(await Kw(n,n.config.apiHost,t,f),y)})}async function Gw(n,e,t){n._canInitEmulator=!1;const i={...PC,...e};try{const o=new xC(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Wu(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(n,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Wu(n,"email-already-in-use",h);if(g==="USER_DISABLED")throw Wu(n,"user-disabled",h);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw _p(n,_,y);jr(n,_)}}catch(o){if(o instanceof pi)throw o;jr(n,"network-request-failed",{message:String(o)})}}async function NC(n,e,t,i,o={}){const l=await aa(n,e,t,i,o);return"mfaPendingCredential"in l&&jr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Kw(n,e,t,i){const o=`${e}${t}?${i}`,l=n,h=l.config.emulator?Ep(n.config,o):`${n.config.apiScheme}://${o}`;return RC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class xC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(or(this.auth,"network-request-failed")),DC.get())})}}function Wu(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=or(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(n,e){return aa(n,"POST","/v1/accounts:delete",e)}async function Tc(n,e){return aa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bC(n,e=!1){const t=xn(n),i=await t.getIdToken(e),o=Ip(i);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:ul(zd(o.auth_time)),issuedAtTime:ul(zd(o.iat)),expirationTime:ul(zd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function zd(n){return Number(n)*1e3}function Ip(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return tc("JWT malformed, contained fewer than 3 sections"),null;try{const o=e_(t);return o?JSON.parse(o):(tc("Failed to decode base64 JWT payload"),null)}catch(o){return tc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function gv(n){const e=Ip(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof pi&&VC(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function VC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ul(this.lastLoginAt),this.creationTime=ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(n){var E;const e=n.auth,t=await n.getIdToken(),i=await _l(n,Tc(e,{idToken:t}));ke(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?Yw(o.providerUserInfo):[],h=FC(n.providerData,l),f=n.isAnonymous,g=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),y=f?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Ef(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,_)}async function MC(n){const e=xn(n);await Ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FC(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Yw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(n,e){const t=await Gw(n,{},async()=>{const i=Il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,h=await Kw(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return n.emulatorConfig&&ta(n.emulatorConfig.host)&&(g.credentials="include"),qw.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UC(n,e){return aa(n,"POST","/v2/accounts:revokeToken",Tp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=gv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await jC(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Wo;return i&&(ke(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(ke(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(ke(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wo,this.toJSON())}_performRefresh(){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class sr{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new LC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ef(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await _l(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bC(this,e)}reload(){return MC(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ic(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rr(this.auth.app))return Promise.reject(Us(this.auth));const e=await this.getIdToken();return await _l(this,OC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:I,isAnonymous:O,providerData:W,stsTokenManager:$}=t;ke(E&&$,e,"internal-error");const U=Wo.fromJSON(this.name,$);ke(typeof E=="string",e,"internal-error"),Wi(i,e.name),Wi(o,e.name),ke(typeof I=="boolean",e,"internal-error"),ke(typeof O=="boolean",e,"internal-error"),Wi(l,e.name),Wi(h,e.name),Wi(f,e.name),Wi(g,e.name),Wi(y,e.name),Wi(_,e.name);const X=new sr({uid:E,auth:e,email:o,emailVerified:I,displayName:i,isAnonymous:O,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:U,createdAt:y,lastLoginAt:_});return W&&Array.isArray(W)&&(X.providerData=W.map(re=>({...re}))),g&&(X._redirectEventId=g),X}static async _fromIdTokenResponse(e,t,i=!1){const o=new Wo;o.updateFromServerResponse(t);const l=new sr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Ic(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Yw(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Wo;f.updateFromIdToken(i);const g=new sr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Ef(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=new Map;function li(n){fi(n instanceof Function,"Expected a class definition");let e=yv.get(n);return e?(fi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qw.type="NONE";const vv=Qw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(n,e,t){return`firebase:${n}:${e}:${t}`}class Ho{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=nc(this.userKey,o.apiKey,l),this.fullPersistenceKey=nc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Tc(this.auth,{idToken:e}).catch(()=>{});return t?sr._fromGetAccountInfoResponse(this.auth,t,e):null}return sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ho(li(vv),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||li(vv);const h=nc(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const _=await y._get(h);if(_){let E;if(typeof _=="string"){const I=await Tc(e,{idToken:_}).catch(()=>{});if(!I)break;E=await sr._fromGetAccountInfoResponse(e,I,_)}else E=sr._fromJSON(e,_);y!==l&&(f=E),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ho(l,e,i):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Ho(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nE(e))return"Blackberry";if(rE(e))return"Webos";if(Jw(e))return"Safari";if((e.includes("chrome/")||Zw(e))&&!e.includes("edge/"))return"Chrome";if(tE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Xw(n=nn()){return/firefox\//i.test(n)}function Jw(n=nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zw(n=nn()){return/crios\//i.test(n)}function eE(n=nn()){return/iemobile/i.test(n)}function tE(n=nn()){return/android/i.test(n)}function nE(n=nn()){return/blackberry/i.test(n)}function rE(n=nn()){return/webos/i.test(n)}function Sp(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zC(n=nn()){var e;return Sp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function BC(){return zT()&&document.documentMode===10}function iE(n=nn()){return Sp(n)||tE(n)||rE(n)||nE(n)||/windows phone/i.test(n)||eE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(n,e=[]){let t;switch(n){case"Browser":t=_v(nn());break;case"Worker":t=`${_v(nn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${na}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(n,e={}){return aa(n,"GET","/v2/passwordPolicy",Tp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=6;class qC{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??HC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wv(this),this.idTokenSubscription=new wv(this),this.beforeStateQueue=new $C(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=li(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Tc(this,{idToken:e}),i=await sr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(rr(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ic(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rr(this.app))return Promise.reject(Us(this));const t=e?xn(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rr(this.app)?Promise.reject(Us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rr(this.app)?Promise.reject(Us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WC(this),t=new qC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await UC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&li(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[li(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&IC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function qc(n){return xn(n)}class wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=YT(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ap={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KC(n){Ap=n}function YC(n){return Ap.loadJS(n)}function QC(){return Ap.gapiScript}function XC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(n,e){const t=$f(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Bs(l,e??{}))return o;jr(o,"already-initialized")}return t.initialize({options:e})}function ZC(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(li);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ek(n,e,t){const i=qc(n);ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=oE(e),{host:h,port:f}=tk(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},_=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ke(Bs(y,i.config.emulator)&&Bs(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,ta(h)?(i_(`${l}//${h}${g}`),s_("Auth",!0)):nk()}function oE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function tk(n){const e=oE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Ev(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Ev(h)}}}function Ev(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function nk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ai("not implemented")}_getIdTokenResponse(e){return ai("not implemented")}_linkToIdToken(e,t){return ai("not implemented")}_getReauthenticationResolver(e){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(n,e){return NC(n,"POST","/v1/accounts:signInWithIdp",Tp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="http://localhost";class qs extends aE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new qs(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return qo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,qo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qo(e,t)}buildRequest(){const e={requestUri:rk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Il(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends Cp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Dl{constructor(){super("facebook.com")}static credential(e){return qs._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Dl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qs._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return oi.credential(t,i)}catch{return null}}}oi.GOOGLE_SIGN_IN_METHOD="google.com";oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Dl{constructor(){super("github.com")}static credential(e){return qs._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Dl{constructor(){super("twitter.com")}static credential(e,t){return qs._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Gi.credential(t,i)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await sr._fromIdTokenResponse(e,i,o),h=Tv(i);return new ea({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Tv(i);return new ea({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Tv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends pi{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Sc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Sc(e,t,i,o)}}function lE(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Sc._fromErrorAndOperation(n,l,e,i):l})}async function ik(n,e,t=!1){const i=await _l(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ea._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(n,e,t=!1){const{auth:i}=n;if(rr(i.app))return Promise.reject(Us(i));const o="reauthenticate";try{const l=await _l(n,lE(i,o,e,n),t);ke(l.idToken,i,"internal-error");const h=Ip(l.idToken);ke(h,i,"internal-error");const{sub:f}=h;return ke(n.uid===f,i,"user-mismatch"),ea._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&jr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(n,e,t=!1){if(rr(n.app))return Promise.reject(Us(n));const i="signIn",o=await lE(n,i,e),l=await ea._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}function ak(n,e,t,i){return xn(n).onIdTokenChanged(e,t,i)}function lk(n,e,t){return xn(n).beforeAuthStateChanged(e,t)}function uk(n,e,t,i){return xn(n).onAuthStateChanged(e,t,i)}function ck(n){return xn(n).signOut()}const Ac="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ac,"1"),this.storage.removeItem(Ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=1e3,dk=10;class cE extends uE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);BC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,dk):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cE.type="LOCAL";const fk=cE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE extends uE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}hE.type="SESSION";const dE=hE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Gc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await pk(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=kp("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(E){const I=E;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(_),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function gk(n){Lr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function yk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vk(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function _k(){return fE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firebaseLocalStorageDb",wk=1,Cc="firebaseLocalStorage",mE="fbase_key";class Nl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kc(n,e){return n.transaction([Cc],e?"readwrite":"readonly").objectStore(Cc)}function Ek(){const n=indexedDB.deleteDatabase(pE);return new Nl(n).toPromise()}function Tf(){const n=indexedDB.open(pE,wk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Cc,{keyPath:mE})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Cc)?e(i):(i.close(),await Ek(),e(await Tf()))})})}async function Iv(n,e,t){const i=Kc(n,!0).put({[mE]:e,value:t});return new Nl(i).toPromise()}async function Tk(n,e){const t=Kc(n,!1).get(e),i=await new Nl(t).toPromise();return i===void 0?null:i.value}function Sv(n,e){const t=Kc(n,!0).delete(e);return new Nl(t).toPromise()}const Ik=800,Sk=3;class gE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Sk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gc._getInstance(_k()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await yk(),!this.activeServiceWorker)return;this.sender=new mk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tf();return await Iv(e,Ac,"1"),await Sv(e,Ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Iv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Tk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Sv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Kc(o,!1).getAll();return new Nl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ik)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gE.type="LOCAL";const Ak=gE;new Rl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(n,e){return e?li(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends aE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ck(n){return ok(n.auth,new Pp(n),n.bypassAuthState)}function kk(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),sk(t,new Pp(n),n.bypassAuthState)}async function Pk(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),ik(t,new Pp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ck;case"linkViaPopup":case"linkViaRedirect":return Pk;case"reauthViaPopup":case"reauthViaRedirect":return kk;default:jr(this.auth,"internal-error")}}resolve(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=new Rl(2e3,1e4);async function Dk(n,e,t){if(rr(n.app))return Promise.reject(or(n,"operation-not-supported-in-this-environment"));const i=qc(n);SC(n,e,Cp);const o=yE(i,t);return new Fs(i,"signInViaPopup",e,o).executeNotNull()}class Fs extends vE{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");const e=kp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Rk.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="pendingRedirect",rc=new Map;class xk extends vE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=rc.get(this.auth._key());if(!e){try{const i=await Ok(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}rc.set(this.auth._key(),e)}return this.bypassAuthState||rc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ok(n,e){const t=Lk(e),i=Vk(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function bk(n,e){rc.set(n._key(),e)}function Vk(n){return li(n._redirectPersistence)}function Lk(n){return nc(Nk,n.config.apiKey,n.name)}async function Mk(n,e,t=!1){if(rr(n.app))return Promise.reject(Us(n));const i=qc(n),o=yE(i,e),h=await new xk(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=600*1e3;class jk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Uk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!_E(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(or(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Fk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Av(e))}saveEventToCache(e){this.cachedEventUids.add(Av(e)),this.lastProcessedEventTime=Date.now()}}function Av(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _E({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Uk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _E(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(n,e={}){return aa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$k=/^https?/;async function Wk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await zk(n);for(const t of e)try{if(Hk(t))return}catch{}jr(n,"unauthorized-domain")}function Hk(n){const e=wf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!$k.test(t))return!1;if(Bk.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=new Rl(3e4,6e4);function Cv(){const n=Lr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Gk(n){return new Promise((e,t)=>{var o,l,h;function i(){Cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cv(),t(or(n,"network-request-failed"))},timeout:qk.get()})}if((l=(o=Lr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=Lr().gapi)!=null&&h.load)i();else{const f=XC("iframefcb");return Lr()[f]=()=>{gapi.load?i():t(or(n,"network-request-failed"))},YC(`${QC()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw ic=null,e})}let ic=null;function Kk(n){return ic=ic||Gk(n),ic}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new Rl(5e3,15e3),Qk="__/auth/iframe",Xk="emulator/auth/iframe",Jk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eP(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ep(e,Xk):`https://${n.config.authDomain}/${Qk}`,i={apiKey:e.apiKey,appName:n.name,v:na},o=Zk.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Il(i).slice(1)}`}async function tP(n){const e=await Kk(n),t=Lr().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:eP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jk,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=or(n,"network-request-failed"),f=Lr().setTimeout(()=>{l(h)},Yk.get());function g(){Lr().clearTimeout(f),o(i)}i.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rP=500,iP=600,sP="_blank",oP="http://localhost";class kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aP(n,e,t,i=rP,o=iP){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g={...nP,width:i.toString(),height:o.toString(),top:l,left:h},y=nn().toLowerCase();t&&(f=Zw(y)?sP:t),Xw(y)&&(e=e||oP,g.scrollbars="yes");const _=Object.entries(g).reduce((I,[O,W])=>`${I}${O}=${W},`,"");if(zC(y)&&f!=="_self")return lP(e||"",f),new kv(null);const E=window.open(e||"",f,_);ke(E,n,"popup-blocked");try{E.focus()}catch{}return new kv(E)}function lP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="__/auth/handler",cP="emulator/auth/handler",hP=encodeURIComponent("fac");async function Pv(n,e,t,i,o,l){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:na,eventId:o};if(e instanceof Cp){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",KT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))h[_]=E}if(e instanceof Dl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(h.scopes=_.join(","))}n.tenantId&&(h.tid=n.tenantId);const f=h;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const g=await n._getAppCheckToken(),y=g?`#${hP}=${encodeURIComponent(g)}`:"";return`${dP(n)}?${Il(f).slice(1)}${y}`}function dP({config:n}){return n.emulator?Ep(n,cP):`https://${n.authDomain}/${uP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="webStorageSupport";class fP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dE,this._completeRedirectFn=Mk,this._overrideRedirectResult=bk}async _openPopup(e,t,i,o){var h;fi((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await Pv(e,t,i,wf(),o);return aP(e,l,kp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Pv(e,t,i,wf(),o);return gk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(fi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await tP(e),i=new jk(e);return t.register("authEvent",o=>(ke(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bd,{type:Bd},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Bd];l!==void 0&&t(!!l),jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Wk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iE()||Jw()||Sp()}}const pP=fP;var Rv="@firebase/auth",Dv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yP(n){Go(new $s("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;ke(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sE(n)},y=new GC(i,o,l,g);return ZC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Go(new $s("auth-internal",e=>{const t=qc(e.getProvider("auth").getImmediate());return(i=>new mP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi(Rv,Dv,gP(n)),Xi(Rv,Dv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=300,_P=r_("authIdTokenMaxAge")||vP;let Nv=null;const wP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>_P)return;const o=t==null?void 0:t.token;Nv!==o&&(Nv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function EP(n=u_()){const e=$f(n,"auth");if(e.isInitialized())return e.getImmediate();const t=JC(n,{popupRedirectResolver:pP,persistence:[Ak,fk,dE]}),i=r_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=wP(l.toString());lk(t,h,()=>h(t.currentUser)),ak(t,f=>h(f))}}const o=t_("auth");return o&&ek(t,`http://${o}`),t}function TP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}KC({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=or("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",TP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yP("Browser");const sc={apiKey:"AIzaSyCXxatUkVDpVnR0BKkZTNlB_G_3agOfoY0",authDomain:"jpl-vacation-forecast.firebaseapp.com",projectId:"jpl-vacation-forecast",storageBucket:"jpl-vacation-forecast.firebasestorage.app",messagingSenderId:"732269508238",appId:"1:732269508238:web:464689fab6d9d91aeefbdf"};let Xa=null,kc=null,Pc=null;const wE=()=>!!(sc.apiKey&&sc.authDomain&&sc.projectId),EE=()=>{if(!wE())return console.log("Firebase not configured - cloud sync disabled"),{app:null,auth:null,db:null};try{return Xa||(Xa=l_(sc),kc=EP(Xa),Pc=rC(Xa),console.log("Firebase initialized successfully")),{app:Xa,auth:kc,db:Pc}}catch(n){return console.error("Failed to initialize Firebase:",n),{app:null,auth:null,db:null}}},$d=()=>{if(!kc){const{auth:n}=EE();return n}return kc},Ja=()=>{if(!Pc){const{db:n}=EE();return n}return Pc};class IP{constructor(){Ka(this,"mode","localStorage");Ka(this,"userId",null);Ka(this,"listeners",new Map);Ka(this,"unsubscribers",new Map)}getMode(){return this.mode}setMode(e,t){const i=this.mode==="cloud-sync";this.mode=e,this.userId=t||null,i&&e==="localStorage"&&this.cleanupFirebaseListeners(),console.log(`Storage mode set to: ${e}`,t?`User: ${t}`:"")}async get(e,t){try{const i=window.localStorage.getItem(e);if(i)return JSON.parse(i)}catch(i){console.error(`Error reading ${e} from localStorage:`,i)}if(this.mode==="cloud-sync"&&this.userId)try{const i=Ja();if(i){const o=Qa(i,"users",this.userId,"data",e),l=await fv(o);if(l.exists())return l.data().value}}catch(i){console.error(`Error reading ${e} from Firebase:`,i)}return t}async set(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(i){console.error(`Error writing ${e} to localStorage:`,i)}if(this.mode==="cloud-sync"&&this.userId)try{const i=Ja();if(i){const o=Qa(i,"users",this.userId,"data",e);await pv(o,{value:t,updatedAt:new Date().toISOString()}),console.log(`Synced ${e} to Firebase`)}}catch(i){console.error(`Error writing ${e} to Firebase:`,i)}this.notifyListeners(e,t)}subscribe(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),this.mode==="cloud-sync"&&this.userId&&!this.unsubscribers.has(e)&&this.setupFirebaseListener(e),()=>{const i=this.listeners.get(e);if(i&&(i.delete(t),i.size===0)){this.listeners.delete(e);const o=this.unsubscribers.get(e);o&&(o(),this.unsubscribers.delete(e))}}}async syncToCloud(e){if(this.mode!=="cloud-sync"||!this.userId)throw new Error("Cloud sync not enabled");const t=Ja();if(!t)throw new Error("Firebase not configured");for(const i of e)try{const o=window.localStorage.getItem(i);if(o){const l=JSON.parse(o),h=Qa(t,"users",this.userId,"data",i);await pv(h,{value:l,updatedAt:new Date().toISOString()}),console.log(`Initial sync of ${i} to Firebase`)}}catch(o){console.error(`Error syncing ${i} to Firebase:`,o)}}async syncFromCloud(e){if(this.mode!=="cloud-sync"||!this.userId)throw new Error("Cloud sync not enabled");const t=Ja();if(!t)throw new Error("Firebase not configured");for(const i of e)try{const o=Qa(t,"users",this.userId,"data",i),l=await fv(o);if(l.exists()){const h=l.data();window.localStorage.setItem(i,JSON.stringify(h.value)),console.log(`Loaded ${i} from Firebase to localStorage`),this.notifyListeners(i,h.value)}}catch(o){console.error(`Error loading ${i} from Firebase:`,o)}}setupFirebaseListener(e){if(!this.userId)return;const t=Ja();if(t)try{const i=Qa(t,"users",this.userId,"data",e),o=vC(i,l=>{if(l.exists()){const f=l.data().value;window.localStorage.setItem(e,JSON.stringify(f)),this.notifyListeners(e,f),console.log(`Real-time update for ${e} from Firebase`)}},l=>{console.error(`Firebase listener error for ${e}:`,l)});this.unsubscribers.set(e,o)}catch(i){console.error(`Error setting up Firebase listener for ${e}:`,i)}}notifyListeners(e,t){const i=this.listeners.get(e);i&&i.forEach(o=>{try{o(t)}catch(l){console.error("Error in storage listener:",l)}})}cleanupFirebaseListeners(){this.unsubscribers.forEach(e=>e()),this.unsubscribers.clear()}}const Dr=new IP;function Wd(n,e){const[t,i]=he.useState(()=>{try{const l=window.localStorage.getItem(n);return l?JSON.parse(l):e}catch(l){return console.error(`Error loading ${n} from localStorage:`,l),e}});return he.useEffect(()=>Dr.subscribe(n,h=>{i(h)}),[n]),[t,l=>{try{const h=l instanceof Function?l(t):l;i(h),Dr.set(n,h).catch(f=>{console.error(`Error saving ${n}:`,f)})}catch(h){console.error(`Error saving ${n}:`,h)}}]}const SP=()=>{const[n,e]=Wd("jpl-vacation-user-profile",null),[t,i]=Wd("jpl-vacation-planned-vacations",[]),[o,l]=Wd("jpl-vacation-holidays",[]),h=he.useMemo(()=>{if(!n){const $=new Date;return{startDate:new Date($.getFullYear(),0,1),endDate:new Date($.getFullYear()+1,11,31)}}const O=ot(n.balanceAsOfDate),W=new Date(O.getFullYear()+10,11,31);return{startDate:O,endDate:W}},[n]),f=he.useMemo(()=>n?ET(n,h.startDate,h.endDate,t,o):[],[n,h,t,o]),g=he.useMemo(()=>{if(f.length===0)return[];const O=new Date().getFullYear();return[sy(f,O),sy(f,O+1)]},[f]);return{userProfile:n,setUserProfile:e,plannedVacations:t,addPlannedVacation:O=>{const W={...O,id:crypto.randomUUID()};i([...t,W])},updatePlannedVacation:(O,W)=>{i(t.map($=>$.id===O?{...$,...W}:$))},deletePlannedVacation:O=>{i(t.filter(W=>W.id!==O))},holidays:o,setHolidays:l,weeklyBalances:f,annualSummaries:g,forecastPeriod:h,canAffordVacation:O=>{if(!n)return{canAfford:!1,projectedBalance:0};const W=ot(O.endDate),$=TT(n,W,[...t,{...O,id:"temp"}],o);return{canAfford:$>=0,projectedBalance:$}}}},AP={2026:[{name:"New Year's Day",date:"2026-01-01",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2026-01-19",type:"federal"},{name:"Presidents' Day",date:"2026-02-16",type:"federal"},{name:"Memorial Day",date:"2026-05-25",type:"federal"},{name:"Juneteenth",date:"2026-06-19",type:"federal"},{name:"Independence Day",date:"2026-07-03",type:"federal",notes:"Observed"},{name:"Labor Day",date:"2026-09-07",type:"federal"},{name:"Thanksgiving",date:"2026-11-25",type:"federal"},{name:"Day After Thanksgiving",date:"2026-11-26",type:"federal"},{name:"Christmas",date:"2026-12-24",type:"federal"},{name:"JPL Floating",date:"2026-01-02",type:"jpl"},{name:"JPL Floating",date:"2026-12-28",type:"jpl"}],2027:[{name:"New Year's Day",date:"2027-01-01",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2027-01-18",type:"federal"},{name:"Presidents' Day",date:"2027-02-15",type:"federal"},{name:"Memorial Day",date:"2027-05-31",type:"federal"},{name:"Juneteenth",date:"2027-06-18",type:"federal",notes:"Observed"},{name:"Independence Day",date:"2027-07-05",type:"federal",notes:"Observed"},{name:"Labor Day",date:"2027-09-06",type:"federal"},{name:"Indigenous Peoples' Day",date:"2027-10-11",type:"federal"},{name:"Veterans Day",date:"2027-11-11",type:"federal"},{name:"Thanksgiving",date:"2027-11-25",type:"federal"},{name:"Day After Thanksgiving",date:"2027-11-26",type:"jpl"},{name:"Christmas Eve",date:"2027-12-24",type:"jpl"},{name:"Christmas Day",date:"2027-12-27",type:"federal",notes:"Observed"}],2028:[{name:"New Year's Day",date:"2028-01-01",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2028-01-17",type:"federal"},{name:"Presidents' Day",date:"2028-02-21",type:"federal"},{name:"Memorial Day",date:"2028-05-29",type:"federal"},{name:"Juneteenth",date:"2028-06-19",type:"federal"},{name:"Independence Day",date:"2028-07-04",type:"federal"},{name:"Labor Day",date:"2028-09-04",type:"federal"},{name:"Indigenous Peoples' Day",date:"2028-10-09",type:"federal"},{name:"Veterans Day",date:"2028-11-10",type:"federal",notes:"Observed"},{name:"Thanksgiving",date:"2028-11-23",type:"federal"},{name:"Day After Thanksgiving",date:"2028-11-24",type:"jpl"},{name:"Christmas Eve",date:"2028-12-22",type:"jpl",notes:"Observed"},{name:"Christmas Day",date:"2028-12-25",type:"federal"}],2029:[{name:"New Year's Day",date:"2029-01-01",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2029-01-15",type:"federal"},{name:"Presidents' Day",date:"2029-02-19",type:"federal"},{name:"Memorial Day",date:"2029-05-28",type:"federal"},{name:"Juneteenth",date:"2029-06-19",type:"federal"},{name:"Independence Day",date:"2029-07-04",type:"federal"},{name:"Labor Day",date:"2029-09-03",type:"federal"},{name:"Indigenous Peoples' Day",date:"2029-10-08",type:"federal"},{name:"Veterans Day",date:"2029-11-12",type:"federal",notes:"Observed"},{name:"Thanksgiving",date:"2029-11-22",type:"federal"},{name:"Day After Thanksgiving",date:"2029-11-23",type:"jpl"},{name:"Christmas Eve",date:"2029-12-24",type:"jpl"},{name:"Christmas Day",date:"2029-12-25",type:"federal"}],2030:[{name:"New Year's Day",date:"2030-01-01",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2030-01-21",type:"federal"},{name:"Presidents' Day",date:"2030-02-18",type:"federal"},{name:"Memorial Day",date:"2030-05-27",type:"federal"},{name:"Juneteenth",date:"2030-06-19",type:"federal"},{name:"Independence Day",date:"2030-07-04",type:"federal"},{name:"Labor Day",date:"2030-09-02",type:"federal"},{name:"Indigenous Peoples' Day",date:"2030-10-14",type:"federal"},{name:"Veterans Day",date:"2030-11-11",type:"federal"},{name:"Thanksgiving",date:"2030-11-28",type:"federal"},{name:"Day After Thanksgiving",date:"2030-11-29",type:"jpl"},{name:"Christmas Eve",date:"2030-12-24",type:"jpl"},{name:"Christmas Day",date:"2030-12-25",type:"federal"}]},CP={holidays:AP},kP=(n,e)=>{const t=[];for(let i=n;i<=e;i++){const o=i.toString(),l=CP.holidays[o];l&&t.push(...l.map(h=>({name:h.name,date:h.date})))}return t},PP=(n,e,t)=>({defaultHolidays:he.useMemo(()=>{if(!n)return[];const o=new Date,l=e||o,h=t||new Date(o.getFullYear()+10,11,31),f=l.getFullYear(),g=h.getFullYear();return kP(f,g).map(_=>({..._,hours:jf(ot(_.date),n)}))},[n,e,t])}),RP=({onSubmit:n})=>{const[e,t]=he.useState(""),[i,o]=he.useState(""),[l,h]=he.useState(""),[f,g]=he.useState("5/40"),[y,_]=he.useState("even-fridays"),E=I=>{I.preventDefault();const O={startDate:e,currentBalance:parseFloat(i),balanceAsOfDate:l,workSchedule:{type:f,rdoPattern:f==="9/80"?y:void 0}};n(O)};return k.jsxs("div",{className:"user-input-form-container",children:[k.jsx("h2",{children:"Welcome to JPL Vacation Forecast"}),k.jsx("p",{children:"Let's set up your vacation tracking profile"}),k.jsxs("form",{onSubmit:E,className:"user-input-form",children:[k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"startDate",children:"JPL Start Date"}),k.jsx("input",{type:"date",id:"startDate",value:e,onChange:I=>t(I.target.value),required:!0}),k.jsx("small",{children:"This determines your vacation accrual rate"})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"currentBalance",children:"Current Vacation Balance (hours)"}),k.jsx("input",{type:"number",id:"currentBalance",value:i,onChange:I=>o(I.target.value),min:"0",step:"0.01",required:!0}),k.jsx("small",{children:"Include any carryover from previous year"})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"balanceAsOfDate",children:"Balance As Of Date"}),k.jsx("input",{type:"date",id:"balanceAsOfDate",value:l,onChange:I=>h(I.target.value),required:!0}),k.jsx("small",{children:"When was this balance taken? Should be the start of a week (Sunday)"})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{children:"Work Schedule"}),k.jsxs("div",{className:"radio-group",children:[k.jsxs("label",{className:"radio-label",children:[k.jsx("input",{type:"radio",name:"scheduleType",value:"5/40",checked:f==="5/40",onChange:()=>g("5/40")}),k.jsx("span",{children:"5/40 (Five 8-hour days per week)"})]}),k.jsxs("label",{className:"radio-label",children:[k.jsx("input",{type:"radio",name:"scheduleType",value:"9/80",checked:f==="9/80",onChange:()=>g("9/80")}),k.jsx("span",{children:"9/80 (Nine 9-hour days + one 8-hour day over 2 weeks, alternating Friday off)"})]})]})]}),f==="9/80"&&k.jsxs("div",{className:"form-group",children:[k.jsx("label",{children:"RDO Pattern (Regular Day Off)"}),k.jsxs("div",{className:"radio-group",children:[k.jsxs("label",{className:"radio-label",children:[k.jsx("input",{type:"radio",name:"rdoPattern",value:"even-fridays",checked:y==="even-fridays",onChange:()=>_("even-fridays")}),k.jsx("span",{children:"Even Week Fridays Off"})]}),k.jsxs("label",{className:"radio-label",children:[k.jsx("input",{type:"radio",name:"rdoPattern",value:"odd-fridays",checked:y==="odd-fridays",onChange:()=>_("odd-fridays")}),k.jsx("span",{children:"Odd Week Fridays Off"})]})]}),k.jsx("small",{children:"ISO week numbering: Week 1 contains the first Thursday of the year"})]}),k.jsx("button",{type:"submit",className:"submit-button",children:"Start Forecasting"})]})]})};function TE(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=TE(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Yc(){for(var n,e,t=0,i="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=TE(n))&&(i&&(i+=" "),i+=e);return i}const DP=(n,e,t,i)=>{if(t==="length"||t==="prototype"||t==="arguments"||t==="caller")return;const o=Object.getOwnPropertyDescriptor(n,t),l=Object.getOwnPropertyDescriptor(e,t);!NP(o,l)&&i||Object.defineProperty(n,t,l)},NP=function(n,e){return n===void 0||n.configurable||n.writable===e.writable&&n.enumerable===e.enumerable&&n.configurable===e.configurable&&(n.writable||n.value===e.value)},xP=(n,e)=>{const t=Object.getPrototypeOf(e);t!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,t)},OP=(n,e)=>`/* Wrapped ${n}*/
${e}`,bP=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),VP=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),LP=(n,e,t)=>{const i=t===""?"":`with ${t.trim()}() `,o=OP.bind(null,i,e.toString());Object.defineProperty(o,"name",VP);const{writable:l,enumerable:h,configurable:f}=bP;Object.defineProperty(n,"toString",{value:o,writable:l,enumerable:h,configurable:f})};function MP(n,e,{ignoreNonConfigurable:t=!1}={}){const{name:i}=n;for(const o of Reflect.ownKeys(e))DP(n,e,o,t);return xP(n,e),LP(n,e,i),n}const Hu=2147483647,FP=new WeakMap,Hd=new WeakMap,jP=new WeakMap;function UP(n,e){const t=n.get(e);if(t){if(t.maxAge<=Date.now()){n.delete(e);return}return t}}function IE(n,{cacheKey:e,cache:t=new Map,maxAge:i}={}){if(i===0)return n;if(typeof i=="number"&&Number.isFinite(i)){if(i>Hu)throw new TypeError(`The \`maxAge\` option cannot exceed ${Hu}.`);if(i<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const o=function(...l){var _;const h=e?e(l):l[0],f=UP(t,h);if(f)return f.data;const g=n.apply(this,l),y=typeof i=="function"?i(...l):i;if(y!==void 0&&y!==Number.POSITIVE_INFINITY){if(!Number.isFinite(y))throw new TypeError("The `maxAge` function must return a finite number, `0`, or `Infinity`.");if(y<=0)return g;if(y>Hu)throw new TypeError(`The \`maxAge\` function result cannot exceed ${Hu}.`)}if(t.set(h,{data:g,maxAge:y===void 0||y===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:Date.now()+y}),y!==void 0&&y!==Number.POSITIVE_INFINITY){const E=setTimeout(()=>{var O;t.delete(h),(O=Hd.get(o))==null||O.delete(E)},y);(_=E.unref)==null||_.call(E);const I=Hd.get(o)??new Set;I.add(E),Hd.set(o,I)}return g};return MP(o,n,{ignoreNonConfigurable:!0}),FP.set(o,t),jP.set(o,e??(l=>l[0])),o}function zP(n){return typeof n=="string"}function BP(n,e,t){return t.indexOf(n)===e}function $P(n){return n.toLowerCase()===n}function xv(n){return n.indexOf(",")===-1?n:n.split(",")}function If(n){if(!n)return n;if(n==="C"||n==="posix"||n==="POSIX")return"en-US";if(n.indexOf(".")!==-1){var e=n.split(".")[0],t=e===void 0?"":e;return If(t)}if(n.indexOf("@")!==-1){var i=n.split("@")[0],t=i===void 0?"":i;return If(t)}if(n.indexOf("-")===-1||!$P(n))return n;var o=n.split("-"),l=o[0],h=o[1],f=h===void 0?"":h;return"".concat(l,"-").concat(f.toUpperCase())}function WP(n){var e=n===void 0?{}:n,t=e.useFallbackLocale,i=t===void 0?!0:t,o=e.fallbackLocale,l=o===void 0?"en-US":o,h=[];if(typeof navigator<"u"){for(var f=navigator.languages||[],g=[],y=0,_=f;y<_.length;y++){var E=_[y];g=g.concat(xv(E))}var I=navigator.language,O=I&&xv(I);h=h.concat(g,O)}return i&&h.push(l),h.filter(zP).map(If).filter(BP)}var HP=IE(WP,{cacheKey:JSON.stringify});function qP(n){return HP(n)[0]||null}var SE=IE(qP,{cacheKey:JSON.stringify});function mi(n,e,t){return function(o,l=t){const h=n(o)+l;return e(h)}}function xl(n){return function(t){return new Date(n(t).getTime()-1)}}function Ol(n,e){return function(i){return[n(i),e(i)]}}function lt(n){if(n instanceof Date)return n.getFullYear();if(typeof n=="number")return n;const e=Number.parseInt(n,10);if(typeof n=="string"&&!Number.isNaN(e))return e;throw new Error(`Failed to get year from date: ${n}.`)}function as(n){if(n instanceof Date)return n.getMonth();throw new Error(`Failed to get month from date: ${n}.`)}function Qc(n){if(n instanceof Date)return n.getDate();throw new Error(`Failed to get year from date: ${n}.`)}function la(n){const e=lt(n),t=e+(-e+1)%100,i=new Date;return i.setFullYear(t,0,1),i.setHours(0,0,0,0),i}const GP=mi(lt,la,-100),AE=mi(lt,la,100),Rp=xl(AE),KP=mi(lt,Rp,-100),CE=Ol(la,Rp);function ls(n){const e=lt(n),t=e+(-e+1)%10,i=new Date;return i.setFullYear(t,0,1),i.setHours(0,0,0,0),i}const kE=mi(lt,ls,-10),Dp=mi(lt,ls,10),Xc=xl(Dp),PE=mi(lt,Xc,-10),RE=Ol(ls,Xc);function ua(n){const e=lt(n),t=new Date;return t.setFullYear(e,0,1),t.setHours(0,0,0,0),t}const DE=mi(lt,ua,-1),Np=mi(lt,ua,1),Jc=xl(Np),NE=mi(lt,Jc,-1),YP=Ol(ua,Jc);function xp(n,e){return function(i,o=e){const l=lt(i),h=as(i)+o,f=new Date;return f.setFullYear(l,h,1),f.setHours(0,0,0,0),n(f)}}function Xs(n){const e=lt(n),t=as(n),i=new Date;return i.setFullYear(e,t,1),i.setHours(0,0,0,0),i}const xE=xp(Xs,-1),Op=xp(Xs,1),bl=xl(Op),OE=xp(bl,-1),QP=Ol(Xs,bl);function XP(n,e){return function(i,o=e){const l=lt(i),h=as(i),f=Qc(i)+o,g=new Date;return g.setFullYear(l,h,f),g.setHours(0,0,0,0),n(g)}}function Vl(n){const e=lt(n),t=as(n),i=Qc(n),o=new Date;return o.setFullYear(e,t,i),o.setHours(0,0,0,0),o}const JP=XP(Vl,1),bp=xl(JP),ZP=Ol(Vl,bp);function bE(n){return Qc(bl(n))}var Ht={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},eR={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Vp=[0,1,2,3,4,5,6],qd=new Map;function tR(n){return function(t,i){var o=t||SE();qd.has(o)||qd.set(o,new Map);var l=qd.get(o);return l.has(n)||l.set(n,new Intl.DateTimeFormat(o||void 0,n).format),l.get(n)(i)}}function nR(n){var e=new Date(n);return new Date(e.setHours(12))}function Js(n){return function(e,t){return tR(n)(e,nR(t))}}var rR={day:"numeric"},iR={day:"numeric",month:"long",year:"numeric"},sR={month:"long"},oR={month:"long",year:"numeric"},aR={weekday:"short"},lR={weekday:"long"},uR={year:"numeric"},cR=Js(rR),hR=Js(iR),dR=Js(sR),VE=Js(oR),fR=Js(aR),pR=Js(lR),Zc=Js(uR),mR=Vp[0],gR=Vp[5],Ov=Vp[6];function wl(n,e){e===void 0&&(e=Ht.ISO_8601);var t=n.getDay();switch(e){case Ht.ISO_8601:return(t+6)%7;case Ht.ISLAMIC:return(t+1)%7;case Ht.HEBREW:case Ht.GREGORY:return t;default:throw new Error("Unsupported calendar type.")}}function yR(n){var e=la(n);return lt(e)}function vR(n){var e=ls(n);return lt(e)}function Sf(n,e){e===void 0&&(e=Ht.ISO_8601);var t=lt(n),i=as(n),o=n.getDate()-wl(n,e);return new Date(t,i,o)}function _R(n,e){e===void 0&&(e=Ht.ISO_8601);var t=e===Ht.GREGORY?Ht.GREGORY:Ht.ISO_8601,i=Sf(n,e),o=lt(n)+1,l,h;do l=new Date(o,0,t===Ht.ISO_8601?4:1),h=Sf(l,e),o-=1;while(n<h);return Math.round((i.getTime()-h.getTime())/(864e5*7))+1}function zs(n,e){switch(n){case"century":return la(e);case"decade":return ls(e);case"year":return ua(e);case"month":return Xs(e);case"day":return Vl(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function wR(n,e){switch(n){case"century":return GP(e);case"decade":return kE(e);case"year":return DE(e);case"month":return xE(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function LE(n,e){switch(n){case"century":return AE(e);case"decade":return Dp(e);case"year":return Np(e);case"month":return Op(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function ER(n,e){switch(n){case"decade":return kE(e,-100);case"year":return DE(e,-10);case"month":return xE(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function TR(n,e){switch(n){case"decade":return Dp(e,100);case"year":return Np(e,10);case"month":return Op(e,12);default:throw new Error("Invalid rangeType: ".concat(n))}}function ME(n,e){switch(n){case"century":return Rp(e);case"decade":return Xc(e);case"year":return Jc(e);case"month":return bl(e);case"day":return bp(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function IR(n,e){switch(n){case"century":return KP(e);case"decade":return PE(e);case"year":return NE(e);case"month":return OE(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function SR(n,e){switch(n){case"decade":return PE(e,-100);case"year":return NE(e,-10);case"month":return OE(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function bv(n,e){switch(n){case"century":return CE(e);case"decade":return RE(e);case"year":return YP(e);case"month":return QP(e);case"day":return ZP(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function AR(n,e,t){var i=[e,t].sort(function(o,l){return o.getTime()-l.getTime()});return[zs(n,i[0]),ME(n,i[1])]}function FE(n,e,t){return t.map(function(i){return(e||Zc)(n,i)}).join("  ")}function CR(n,e,t){return FE(n,e,CE(t))}function jE(n,e,t){return FE(n,e,RE(t))}function kR(n){return n.getDay()===new Date().getDay()}function UE(n,e){e===void 0&&(e=Ht.ISO_8601);var t=n.getDay();switch(e){case Ht.ISLAMIC:case Ht.HEBREW:return t===gR||t===Ov;case Ht.ISO_8601:case Ht.GREGORY:return t===Ov||t===mR;default:throw new Error("Unsupported calendar type.")}}var Rr="react-calendar__navigation";function PR(n){var e=n.activeStartDate,t=n.drillUp,i=n.formatMonthYear,o=i===void 0?VE:i,l=n.formatYear,h=l===void 0?Zc:l,f=n.locale,g=n.maxDate,y=n.minDate,_=n.navigationAriaLabel,E=_===void 0?"":_,I=n.navigationAriaLive,O=n.navigationLabel,W=n.next2AriaLabel,$=W===void 0?"":W,U=n.next2Label,X=U===void 0?"":U,re=n.nextAriaLabel,me=re===void 0?"":re,ae=n.nextLabel,Oe=ae===void 0?"":ae,le=n.prev2AriaLabel,D=le===void 0?"":le,S=n.prev2Label,P=S===void 0?"":S,x=n.prevAriaLabel,N=x===void 0?"":x,L=n.prevLabel,C=L===void 0?"":L,je=n.setActiveStartDate,He=n.showDoubleView,$e=n.view,Ue=n.views,te=Ue.indexOf($e)>0,ue=$e!=="century",ee=wR($e,e),V=ue?ER($e,e):void 0,H=LE($e,e),Te=ue?TR($e,e):void 0,Ie=(function(){if(ee.getFullYear()<0)return!0;var Ye=IR($e,e);return y&&y>=Ye})(),Ne=ue&&(function(){if(V.getFullYear()<0)return!0;var Ye=SR($e,e);return y&&y>=Ye})(),J=g&&g<H,ye=ue&&g&&g<Te;function de(){je(ee,"prev")}function oe(){je(V,"prev2")}function Ae(){je(H,"next")}function gt(){je(Te,"next2")}function bt(Ye){var ar=(function(){switch($e){case"century":return CR(f,h,Ye);case"decade":return jE(f,h,Ye);case"year":return h(f,Ye);case"month":return o(f,Ye);default:throw new Error("Invalid view: ".concat($e,"."))}})();return O?O({date:Ye,label:ar,locale:f||SE()||void 0,view:$e}):ar}function Ct(){var Ye="".concat(Rr,"__label");return k.jsxs("button",{"aria-label":E,"aria-live":I,className:Ye,disabled:!te,onClick:t,style:{flexGrow:1},type:"button",children:[k.jsx("span",{className:"".concat(Ye,"__labelText ").concat(Ye,"__labelText--from"),children:bt(e)}),He?k.jsxs(k.Fragment,{children:[k.jsx("span",{className:"".concat(Ye,"__divider"),children:"  "}),k.jsx("span",{className:"".concat(Ye,"__labelText ").concat(Ye,"__labelText--to"),children:bt(H)})]}):null]})}return k.jsxs("div",{className:Rr,children:[P!==null&&ue?k.jsx("button",{"aria-label":D,className:"".concat(Rr,"__arrow ").concat(Rr,"__prev2-button"),disabled:Ne,onClick:oe,type:"button",children:P}):null,C!==null&&k.jsx("button",{"aria-label":N,className:"".concat(Rr,"__arrow ").concat(Rr,"__prev-button"),disabled:Ie,onClick:de,type:"button",children:C}),Ct(),Oe!==null&&k.jsx("button",{"aria-label":me,className:"".concat(Rr,"__arrow ").concat(Rr,"__next-button"),disabled:J,onClick:Ae,type:"button",children:Oe}),X!==null&&ue?k.jsx("button",{"aria-label":$,className:"".concat(Rr,"__arrow ").concat(Rr,"__next2-button"),disabled:ye,onClick:gt,type:"button",children:X}):null]})}var jo=function(){return jo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},jo.apply(this,arguments)},RR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function Vv(n){return"".concat(n,"%")}function Lp(n){var e=n.children,t=n.className,i=n.count,o=n.direction,l=n.offset,h=n.style,f=n.wrap,g=RR(n,["children","className","count","direction","offset","style","wrap"]);return k.jsx("div",jo({className:t,style:jo({display:"flex",flexDirection:o,flexWrap:f?"wrap":"nowrap"},h)},g,{children:he.Children.map(e,function(y,_){var E=l&&_===0?Vv(100*l/i):null;return he.cloneElement(y,jo(jo({},y.props),{style:{flexBasis:Vv(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:E,marginInlineStart:E,marginInlineEnd:0}}))})}))}function DR(n,e,t){return e&&e>n?e:t&&t<n?t:n}function El(n,e){return e[0]<=n&&e[1]>=n}function NR(n,e){return n[0]<=e[0]&&n[1]>=e[1]}function zE(n,e){return El(n[0],e)||El(n[1],e)}function Lv(n,e,t){var i=zE(e,n),o=[];if(i){o.push(t);var l=El(n[0],e),h=El(n[1],e);l&&o.push("".concat(t,"Start")),h&&o.push("".concat(t,"End")),l&&h&&o.push("".concat(t,"BothEnds"))}return o}function xR(n){return Array.isArray(n)?n[0]!==null&&n[1]!==null:n!==null}function OR(n){if(!n)throw new Error("args is required");var e=n.value,t=n.date,i=n.hover,o="react-calendar__tile",l=[o];if(!t)return l;var h=new Date,f=(function(){if(Array.isArray(t))return t;var O=n.dateType;if(!O)throw new Error("dateType is required when date is not an array of two dates");return bv(O,t)})();if(El(h,f)&&l.push("".concat(o,"--now")),!e||!xR(e))return l;var g=(function(){if(Array.isArray(e))return e;var O=n.valueType;if(!O)throw new Error("valueType is required when value is not an array of two dates");return bv(O,e)})();NR(g,f)?l.push("".concat(o,"--active")):zE(g,f)&&l.push("".concat(o,"--hasActive"));var y=Lv(g,f,"".concat(o,"--range"));l.push.apply(l,y);var _=Array.isArray(e)?e:[e];if(i&&_.length===1){var E=i>g[0]?[g[0],i]:[i,g[0]],I=Lv(E,f,"".concat(o,"--hover"));l.push.apply(l,I)}return l}function eh(n){for(var e=n.className,t=n.count,i=t===void 0?3:t,o=n.dateTransform,l=n.dateType,h=n.end,f=n.hover,g=n.offset,y=n.renderTile,_=n.start,E=n.step,I=E===void 0?1:E,O=n.value,W=n.valueType,$=[],U=_;U<=h;U+=I){var X=o(U);$.push(y({classes:OR({date:X,dateType:l,hover:f,value:O,valueType:W}),date:X}))}return k.jsx(Lp,{className:e,count:i,offset:g,wrap:!0,children:$})}function th(n){var e=n.activeStartDate,t=n.children,i=n.classes,o=n.date,l=n.formatAbbr,h=n.locale,f=n.maxDate,g=n.maxDateTransform,y=n.minDate,_=n.minDateTransform,E=n.onClick,I=n.onMouseOver,O=n.style,W=n.tileClassName,$=n.tileContent,U=n.tileDisabled,X=n.view,re=he.useMemo(function(){var ae={activeStartDate:e,date:o,view:X};return typeof W=="function"?W(ae):W},[e,o,W,X]),me=he.useMemo(function(){var ae={activeStartDate:e,date:o,view:X};return typeof $=="function"?$(ae):$},[e,o,$,X]);return k.jsxs("button",{className:Yc(i,re),disabled:y&&_(y)>o||f&&g(f)<o||(U==null?void 0:U({activeStartDate:e,date:o,view:X})),onClick:E?function(ae){return E(o,ae)}:void 0,onFocus:I?function(){return I(o)}:void 0,onMouseOver:I?function(){return I(o)}:void 0,style:O,type:"button",children:[l?k.jsx("abbr",{"aria-label":l(h,o),children:t}):t,me]})}var Af=function(){return Af=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Af.apply(this,arguments)},bR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Mv="react-calendar__century-view__decades__decade";function VR(n){var e=n.classes,t=e===void 0?[]:e,i=n.currentCentury,o=n.formatYear,l=o===void 0?Zc:o,h=bR(n,["classes","currentCentury","formatYear"]),f=h.date,g=h.locale,y=[];return t&&y.push.apply(y,t),y.push(Mv),la(f).getFullYear()!==i&&y.push("".concat(Mv,"--neighboringCentury")),k.jsx(th,Af({},h,{classes:y,maxDateTransform:Xc,minDateTransform:ls,view:"century",children:jE(g,l,f)}))}var Cf=function(){return Cf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Cf.apply(this,arguments)},Fv=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function LR(n){var e=n.activeStartDate,t=n.hover,i=n.showNeighboringCentury,o=n.value,l=n.valueType,h=Fv(n,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),f=yR(e),g=f+(i?119:99);return k.jsx(eh,{className:"react-calendar__century-view__decades",dateTransform:ls,dateType:"decade",end:g,hover:t,renderTile:function(y){var _=y.date,E=Fv(y,["date"]);return k.jsx(VR,Cf({},h,E,{activeStartDate:e,currentCentury:f,date:_}),_.getTime())},start:f,step:10,value:o,valueType:l})}var kf=function(){return kf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},kf.apply(this,arguments)};function MR(n){function e(){return k.jsx(LR,kf({},n))}return k.jsx("div",{className:"react-calendar__century-view",children:e()})}var Pf=function(){return Pf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Pf.apply(this,arguments)},FR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},jv="react-calendar__decade-view__years__year";function jR(n){var e=n.classes,t=e===void 0?[]:e,i=n.currentDecade,o=n.formatYear,l=o===void 0?Zc:o,h=FR(n,["classes","currentDecade","formatYear"]),f=h.date,g=h.locale,y=[];return t&&y.push.apply(y,t),y.push(jv),ls(f).getFullYear()!==i&&y.push("".concat(jv,"--neighboringDecade")),k.jsx(th,Pf({},h,{classes:y,maxDateTransform:Jc,minDateTransform:ua,view:"decade",children:l(g,f)}))}var Rf=function(){return Rf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Rf.apply(this,arguments)},Uv=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function UR(n){var e=n.activeStartDate,t=n.hover,i=n.showNeighboringDecade,o=n.value,l=n.valueType,h=Uv(n,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),f=vR(e),g=f+(i?11:9);return k.jsx(eh,{className:"react-calendar__decade-view__years",dateTransform:ua,dateType:"year",end:g,hover:t,renderTile:function(y){var _=y.date,E=Uv(y,["date"]);return k.jsx(jR,Rf({},h,E,{activeStartDate:e,currentDecade:f,date:_}),_.getTime())},start:f,value:o,valueType:l})}var Df=function(){return Df=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Df.apply(this,arguments)};function zR(n){function e(){return k.jsx(UR,Df({},n))}return k.jsx("div",{className:"react-calendar__decade-view",children:e()})}var Nf=function(){return Nf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Nf.apply(this,arguments)},BR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},zv=function(n,e,t){if(t||arguments.length===2)for(var i=0,o=e.length,l;i<o;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return n.concat(l||Array.prototype.slice.call(e))},$R="react-calendar__year-view__months__month";function WR(n){var e=n.classes,t=e===void 0?[]:e,i=n.formatMonth,o=i===void 0?dR:i,l=n.formatMonthYear,h=l===void 0?VE:l,f=BR(n,["classes","formatMonth","formatMonthYear"]),g=f.date,y=f.locale;return k.jsx(th,Nf({},f,{classes:zv(zv([],t,!0),[$R],!1),formatAbbr:h,maxDateTransform:bl,minDateTransform:Xs,view:"year",children:o(y,g)}))}var xf=function(){return xf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},xf.apply(this,arguments)},Bv=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function HR(n){var e=n.activeStartDate,t=n.hover,i=n.value,o=n.valueType,l=Bv(n,["activeStartDate","hover","value","valueType"]),h=0,f=11,g=lt(e);return k.jsx(eh,{className:"react-calendar__year-view__months",dateTransform:function(y){var _=new Date;return _.setFullYear(g,y,1),Xs(_)},dateType:"month",end:f,hover:t,renderTile:function(y){var _=y.date,E=Bv(y,["date"]);return k.jsx(WR,xf({},l,E,{activeStartDate:e,date:_}),_.getTime())},start:h,value:i,valueType:o})}var Of=function(){return Of=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Of.apply(this,arguments)};function qR(n){function e(){return k.jsx(HR,Of({},n))}return k.jsx("div",{className:"react-calendar__year-view",children:e()})}var bf=function(){return bf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},bf.apply(this,arguments)},GR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Gd="react-calendar__month-view__days__day";function KR(n){var e=n.calendarType,t=n.classes,i=t===void 0?[]:t,o=n.currentMonthIndex,l=n.formatDay,h=l===void 0?cR:l,f=n.formatLongDate,g=f===void 0?hR:f,y=GR(n,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),_=y.date,E=y.locale,I=[];return i&&I.push.apply(I,i),I.push(Gd),UE(_,e)&&I.push("".concat(Gd,"--weekend")),_.getMonth()!==o&&I.push("".concat(Gd,"--neighboringMonth")),k.jsx(th,bf({},y,{classes:I,formatAbbr:g,maxDateTransform:bp,minDateTransform:Vl,view:"month",children:h(E,_)}))}var Vf=function(){return Vf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Vf.apply(this,arguments)},$v=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function YR(n){var e=n.activeStartDate,t=n.calendarType,i=n.hover,o=n.showFixedNumberOfWeeks,l=n.showNeighboringMonth,h=n.value,f=n.valueType,g=$v(n,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),y=lt(e),_=as(e),E=o||l,I=wl(e,t),O=E?0:I,W=(E?-I:0)+1,$=(function(){if(o)return W+42-1;var U=bE(e);if(l){var X=new Date;X.setFullYear(y,_,U),X.setHours(0,0,0,0);var re=7-wl(X,t)-1;return U+re}return U})();return k.jsx(eh,{className:"react-calendar__month-view__days",count:7,dateTransform:function(U){var X=new Date;return X.setFullYear(y,_,U),Vl(X)},dateType:"day",hover:i,end:$,renderTile:function(U){var X=U.date,re=$v(U,["date"]);return k.jsx(KR,Vf({},g,re,{activeStartDate:e,calendarType:t,currentMonthIndex:_,date:X}),X.getTime())},offset:O,start:W,value:h,valueType:f})}var BE="react-calendar__month-view__weekdays",Kd="".concat(BE,"__weekday");function QR(n){for(var e=n.calendarType,t=n.formatShortWeekday,i=t===void 0?fR:t,o=n.formatWeekday,l=o===void 0?pR:o,h=n.locale,f=n.onMouseLeave,g=new Date,y=Xs(g),_=lt(y),E=as(y),I=[],O=1;O<=7;O+=1){var W=new Date(_,E,O-wl(y,e)),$=l(h,W);I.push(k.jsx("div",{className:Yc(Kd,kR(W)&&"".concat(Kd,"--current"),UE(W,e)&&"".concat(Kd,"--weekend")),children:k.jsx("abbr",{"aria-label":$,title:$,children:i(h,W).replace(".","")})},O))}return k.jsx(Lp,{className:BE,count:7,onFocus:f,onMouseOver:f,children:I})}var Rc=function(){return Rc=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Rc.apply(this,arguments)},Wv=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Hv="react-calendar__tile";function XR(n){var e=n.onClickWeekNumber,t=n.weekNumber,i=k.jsx("span",{children:t});if(e){var o=n.date,l=n.onClickWeekNumber,h=n.weekNumber,f=Wv(n,["date","onClickWeekNumber","weekNumber"]);return k.jsx("button",Rc({},f,{className:Hv,onClick:function(g){return l(h,o,g)},type:"button",children:i}))}else{n.date,n.onClickWeekNumber,n.weekNumber;var f=Wv(n,["date","onClickWeekNumber","weekNumber"]);return k.jsx("div",Rc({},f,{className:Hv,children:i}))}}function JR(n){var e=n.activeStartDate,t=n.calendarType,i=n.onClickWeekNumber,o=n.onMouseLeave,l=n.showFixedNumberOfWeeks,h=(function(){if(l)return 6;var y=bE(e),_=wl(e,t),E=y-(7-_);return 1+Math.ceil(E/7)})(),f=(function(){for(var y=lt(e),_=as(e),E=Qc(e),I=[],O=0;O<h;O+=1)I.push(Sf(new Date(y,_,E+O*7),t));return I})(),g=f.map(function(y){return _R(y,t)});return k.jsx(Lp,{className:"react-calendar__month-view__weekNumbers",count:h,direction:"column",onFocus:o,onMouseOver:o,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:g.map(function(y,_){var E=f[_];if(!E)throw new Error("date is not defined");return k.jsx(XR,{date:E,onClickWeekNumber:i,weekNumber:y},y)})})}var Lf=function(){return Lf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Lf.apply(this,arguments)},ZR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function eD(n){if(n)for(var e=0,t=Object.entries(eR);e<t.length;e++){var i=t[e],o=i[0],l=i[1];if(l.includes(n))return o}return Ht.ISO_8601}function tD(n){var e=n.activeStartDate,t=n.locale,i=n.onMouseLeave,o=n.showFixedNumberOfWeeks,l=n.calendarType,h=l===void 0?eD(t):l,f=n.formatShortWeekday,g=n.formatWeekday,y=n.onClickWeekNumber,_=n.showWeekNumbers,E=ZR(n,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function I(){return k.jsx(QR,{calendarType:h,formatShortWeekday:f,formatWeekday:g,locale:t,onMouseLeave:i})}function O(){return _?k.jsx(JR,{activeStartDate:e,calendarType:h,onClickWeekNumber:y,onMouseLeave:i,showFixedNumberOfWeeks:o}):null}function W(){return k.jsx(YR,Lf({calendarType:h},E))}var $="react-calendar__month-view";return k.jsx("div",{className:Yc($,_?"".concat($,"--weekNumbers"):""),children:k.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[O(),k.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[I(),W()]})]})})}var Uo=function(){return Uo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Uo.apply(this,arguments)},qu="react-calendar",oc=["century","decade","year","month"],nD=["decade","year","month","day"],Mp=new Date;Mp.setFullYear(1,0,1);Mp.setHours(0,0,0,0);var rD=new Date(864e13);function rl(n){return n instanceof Date?n:new Date(n)}function $E(n,e){return oc.slice(oc.indexOf(n),oc.indexOf(e)+1)}function iD(n,e,t){var i=$E(e,t);return i.indexOf(n)!==-1}function Fp(n,e,t){return n&&iD(n,e,t)?n:t}function WE(n){var e=oc.indexOf(n);return nD[e]}function sD(n,e){var t=Array.isArray(n)?n[e]:n;if(!t)return null;var i=rl(t);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(n));return i}function HE(n,e){var t=n.value,i=n.minDate,o=n.maxDate,l=n.maxDetail,h=sD(t,e);if(!h)return null;var f=WE(l),g=(function(){switch(e){case 0:return zs(f,h);case 1:return ME(f,h);default:throw new Error("Invalid index value: ".concat(e))}})();return DR(g,i,o)}var jp=function(n){return HE(n,0)},qE=function(n){return HE(n,1)},oD=function(n){return[jp,qE].map(function(e){return e(n)})};function GE(n){var e=n.maxDate,t=n.maxDetail,i=n.minDate,o=n.minDetail,l=n.value,h=n.view,f=Fp(h,o,t),g=jp({value:l,minDate:i,maxDate:e,maxDetail:t})||new Date;return zs(f,g)}function aD(n){var e=n.activeStartDate,t=n.defaultActiveStartDate,i=n.defaultValue,o=n.defaultView,l=n.maxDate,h=n.maxDetail,f=n.minDate,g=n.minDetail,y=n.value,_=n.view,E=Fp(_,g,h),I=e||t;return I?zs(E,I):GE({maxDate:l,maxDetail:h,minDate:f,minDetail:g,value:y||i,view:_||o})}function Yd(n){return n&&(!Array.isArray(n)||n.length===1)}function Gu(n,e){return n instanceof Date&&e instanceof Date&&n.getTime()===e.getTime()}var lD=he.forwardRef(function(e,t){var i=e.activeStartDate,o=e.allowPartialRange,l=e.calendarType,h=e.className,f=e.defaultActiveStartDate,g=e.defaultValue,y=e.defaultView,_=e.formatDay,E=e.formatLongDate,I=e.formatMonth,O=e.formatMonthYear,W=e.formatShortWeekday,$=e.formatWeekday,U=e.formatYear,X=e.goToRangeStartOnSelect,re=X===void 0?!0:X,me=e.inputRef,ae=e.locale,Oe=e.maxDate,le=Oe===void 0?rD:Oe,D=e.maxDetail,S=D===void 0?"month":D,P=e.minDate,x=P===void 0?Mp:P,N=e.minDetail,L=N===void 0?"century":N,C=e.navigationAriaLabel,je=e.navigationAriaLive,He=e.navigationLabel,$e=e.next2AriaLabel,Ue=e.next2Label,te=e.nextAriaLabel,ue=e.nextLabel,ee=e.onActiveStartDateChange,V=e.onChange,H=e.onClickDay,Te=e.onClickDecade,Ie=e.onClickMonth,Ne=e.onClickWeekNumber,J=e.onClickYear,ye=e.onDrillDown,de=e.onDrillUp,oe=e.onViewChange,Ae=e.prev2AriaLabel,gt=e.prev2Label,bt=e.prevAriaLabel,Ct=e.prevLabel,Ye=e.returnValue,ar=Ye===void 0?"start":Ye,kt=e.selectRange,On=e.showDoubleView,gi=e.showFixedNumberOfWeeks,ut=e.showNavigation,ct=ut===void 0?!0:ut,yn=e.showNeighboringCentury,us=e.showNeighboringDecade,yi=e.showNeighboringMonth,Zs=yi===void 0?!0:yi,lr=e.showWeekNumbers,cs=e.tileClassName,vi=e.tileContent,ur=e.tileDisabled,_i=e.value,cr=e.view,Gn=he.useState(f),eo=Gn[0],vn=Gn[1],Ur=he.useState(null),hs=Ur[0],an=Ur[1],zr=he.useState(Array.isArray(g)?g.map(function(xe){return xe!==null?rl(xe):null}):g!=null?rl(g):null),bn=zr[0],wi=zr[1],Vn=he.useState(y),Kn=Vn[0],et=Vn[1],Et=i||eo||aD({activeStartDate:i,defaultActiveStartDate:f,defaultValue:g,defaultView:y,maxDate:le,maxDetail:S,minDate:x,minDetail:L,value:_i,view:cr}),ht=(function(){var xe=(function(){return kt&&Yd(bn)?bn:_i!==void 0?_i:bn})();return xe?Array.isArray(xe)?xe.map(function(Xe){return Xe!==null?rl(Xe):null}):xe!==null?rl(xe):null:null})(),_n=WE(S),Qe=Fp(cr||Kn,L,S),rn=$E(L,S),Ln=kt?hs:null,Ei=rn.indexOf(Qe)<rn.length-1,hr=rn.indexOf(Qe)>0,Yn=he.useCallback(function(xe){var Xe=(function(){switch(ar){case"start":return jp;case"end":return qE;case"range":return oD;default:throw new Error("Invalid returnValue.")}})();return Xe({maxDate:le,maxDetail:S,minDate:x,value:xe})},[le,S,x,ar]),Mn=he.useCallback(function(xe,Xe){vn(xe);var tt={action:Xe,activeStartDate:xe,value:ht,view:Qe};ee&&!Gu(Et,xe)&&ee(tt)},[Et,ee,ht,Qe]),Br=he.useCallback(function(xe,Xe){var tt=(function(){switch(Qe){case"century":return Te;case"decade":return J;case"year":return Ie;case"month":return H;default:throw new Error("Invalid view: ".concat(Qe,"."))}})();tt&&tt(xe,Xe)},[H,Te,Ie,J,Qe]),wn=he.useCallback(function(xe,Xe){if(Ei){Br(xe,Xe);var tt=rn[rn.indexOf(Qe)+1];if(!tt)throw new Error("Attempted to drill down from the lowest view.");vn(xe),et(tt);var Gt={action:"drillDown",activeStartDate:xe,value:ht,view:tt};ee&&!Gu(Et,xe)&&ee(Gt),oe&&Qe!==tt&&oe(Gt),ye&&ye(Gt)}},[Et,Ei,ee,Br,ye,oe,ht,Qe,rn]),ln=he.useCallback(function(){if(hr){var xe=rn[rn.indexOf(Qe)-1];if(!xe)throw new Error("Attempted to drill up from the highest view.");var Xe=zs(xe,Et);vn(Xe),et(xe);var tt={action:"drillUp",activeStartDate:Xe,value:ht,view:xe};ee&&!Gu(Et,Xe)&&ee(tt),oe&&Qe!==xe&&oe(tt),de&&de(tt)}},[Et,hr,ee,de,oe,ht,Qe,rn]),dr=he.useCallback(function(xe,Xe){var tt=ht;Br(xe,Xe);var Gt=kt&&!Yd(tt),Pt;if(kt)if(Gt)Pt=zs(_n,xe);else{if(!tt)throw new Error("previousValue is required");if(Array.isArray(tt))throw new Error("previousValue must not be an array");Pt=AR(_n,tt,xe)}else Pt=Yn(xe);var $r=!kt||Gt||re?GE({maxDate:le,maxDetail:S,minDate:x,minDetail:L,value:Pt,view:Qe}):null;Xe.persist(),vn($r),wi(Pt);var Ii={action:"onChange",activeStartDate:$r,value:Pt,view:Qe};if(ee&&!Gu(Et,$r)&&ee(Ii),V)if(kt){var Wr=Yd(Pt);if(!Wr)V(Pt||null,Xe);else if(o){if(Array.isArray(Pt))throw new Error("value must not be an array");V([Pt||null,null],Xe)}}else V(Pt||null,Xe)},[Et,o,Yn,re,le,S,x,L,ee,V,Br,kt,ht,_n,Qe]);function un(xe){an(xe)}function Ti(){an(null)}he.useImperativeHandle(t,function(){return{activeStartDate:Et,drillDown:wn,drillUp:ln,onChange:dr,setActiveStartDate:Mn,value:ht,view:Qe}},[Et,wn,ln,dr,Mn,ht,Qe]);function ds(xe){var Xe=xe?LE(Qe,Et):zs(Qe,Et),tt=Ei?wn:dr,Gt={activeStartDate:Xe,hover:Ln,locale:ae,maxDate:le,minDate:x,onClick:tt,onMouseOver:kt?un:void 0,tileClassName:cs,tileContent:vi,tileDisabled:ur,value:ht,valueType:_n};switch(Qe){case"century":return k.jsx(MR,Uo({formatYear:U,showNeighboringCentury:yn},Gt));case"decade":return k.jsx(zR,Uo({formatYear:U,showNeighboringDecade:us},Gt));case"year":return k.jsx(qR,Uo({formatMonth:I,formatMonthYear:O},Gt));case"month":return k.jsx(tD,Uo({calendarType:l,formatDay:_,formatLongDate:E,formatShortWeekday:W,formatWeekday:$,onClickWeekNumber:Ne,onMouseLeave:kt?Ti:void 0,showFixedNumberOfWeeks:typeof gi<"u"?gi:On,showNeighboringMonth:Zs,showWeekNumbers:lr},Gt));default:throw new Error("Invalid view: ".concat(Qe,"."))}}function fs(){return ct?k.jsx(PR,{activeStartDate:Et,drillUp:ln,formatMonthYear:O,formatYear:U,locale:ae,maxDate:le,minDate:x,navigationAriaLabel:C,navigationAriaLive:je,navigationLabel:He,next2AriaLabel:$e,next2Label:Ue,nextAriaLabel:te,nextLabel:ue,prev2AriaLabel:Ae,prev2Label:gt,prevAriaLabel:bt,prevLabel:Ct,setActiveStartDate:Mn,showDoubleView:On,view:Qe,views:rn}):null}var En=Array.isArray(ht)?ht:[ht];return k.jsxs("div",{className:Yc(qu,kt&&En.length===1&&"".concat(qu,"--selectRange"),On&&"".concat(qu,"--doubleView"),h),ref:me,children:[fs(),k.jsxs("div",{className:"".concat(qu,"__viewContainer"),onBlur:kt?Ti:void 0,onMouseLeave:kt?Ti:void 0,children:[ds(),On?ds(!0):null]})]})}),zo=(n=>(n.REGULAR="regular",n.RDO="rdo",n.HOLIDAY="holiday",n.PLANNED_VACATION="planned_vacation",n.WEEKEND="weekend",n))(zo||{});const uD=(n,e,t,i,o,l)=>{const h=new Map;console.log("mapWeeklyBalancesToDays - Total weekly balances:",n.length),n.length>0&&console.log("First 3 weekly balances:",n.slice(0,3).map(g=>({weekEndDate:g.weekEndDate,endingBalance:g.endingBalance})));const f=Kv(o,l);for(const g of f){const y=Nn(g),_=[];Qv(g)&&_.push(zo.WEEKEND);const E=_T(g,i);E&&_.push(zo.RDO);const I=t.find(U=>U.date===y);I&&_.push(zo.HOLIDAY);const O=e.find(U=>{const X=ot(U.startDate),re=ot(U.endDate);return Ku(g,X,re)});O&&_.push(zo.PLANNED_VACATION);let W,$;if(g.getDay()===0){const U=n.find(X=>{const re=ot(X.weekEndDate),me=Nn(re)===y;return y==="2026-01-04"&&console.log("Debug for 2026-01-04:",{weekEndDate:X.weekEndDate,parsedWeekEndDate:re,formattedWeekEndDate:Nn(re),dateKey:y,match:me}),me});W=U==null?void 0:U.endingBalance,$=U==null?void 0:U.accrued,y==="2026-01-04"&&console.log("Found balance for 2026-01-04:",W,"weekBalance:",U)}h.set(y,{date:g,types:_,hours:jf(g,i),vacationHours:O?Dc(O,i,t):void 0,balance:W,accrualRate:$,isInVacation:!!O,vacationId:O==null?void 0:O.id,isHoliday:!!I,holidayName:I==null?void 0:I.name,isRDO:E})}return h},cD=({dayInfo:n,isInSelectionRange:e,isSelectionStart:t,isSelectionEnd:i})=>n?(n.date.getDay()===0&&console.log("Sunday:",n.date.toISOString().split("T")[0],"balance:",n.balance),k.jsxs("div",{className:"calendar-tile-content",children:[k.jsxs("div",{className:"day-indicators",children:[n.isInVacation&&k.jsx("span",{className:"indicator vacation",title:"Planned Vacation",children:"V"}),n.isHoliday&&k.jsx("span",{className:"indicator holiday",title:n.holidayName,children:"H"}),n.isRDO&&k.jsx("span",{className:"indicator rdo",title:"Regular Day Off",children:"R"})]}),n.balance!==void 0&&k.jsxs("div",{className:`balance-display ${n.balance<0?"negative":n.balance>=Xv?"at-max":n.balance>wT?"warning":"positive"}`,title:n.accrualRate!==void 0?`Accrual rate: +${n.accrualRate.toFixed(2)} hours`:void 0,children:[n.balance.toFixed(1),"h"]}),e&&k.jsx("div",{className:"selection-overlay"}),t&&k.jsx("div",{className:"selection-start-marker"}),i&&k.jsx("div",{className:"selection-end-marker"})]})):null,hD=Gv.memo(cD),dD=({vacation:n,isOpen:e,workSchedule:t,holidays:i,onSave:o,onDelete:l,onClose:h,canAffordVacation:f})=>{const[g,y]=he.useState(""),[_,E]=he.useState(""),[I,O]=he.useState(""),[W,$]=he.useState(""),[U,X]=he.useState(!1);he.useEffect(()=>{n&&(y(n.startDate),E(n.endDate),O(n.description||""),$(""),X(!1))},[n]);const re=he.useMemo(()=>{if(!g||!_)return 0;try{return Uf(ot(g),ot(_),t,i)}catch{return 0}},[g,_,t,i]),me=()=>{if(!n)return;if(!g||!_){$("Both start and end dates are required");return}if(ot(_)<ot(g)){$("End date must be after start date");return}const{canAfford:le,projectedBalance:D}=f({startDate:g,endDate:_});if(!le){$(`Cannot afford this change. Need ${re}h, will have ${D.toFixed(2)}h`);return}o(n.id,{startDate:g,endDate:_,description:I.trim()||void 0}),h()},ae=()=>{if(n){if(!U){X(!0);return}l(n.id),h()}},Oe=()=>{X(!1),h()};return!e||!n?null:k.jsx("div",{className:"modal-overlay",onClick:Oe,children:k.jsxs("div",{className:"modal-content",onClick:le=>le.stopPropagation(),children:[k.jsx("h2",{children:"Edit Vacation"}),k.jsxs("form",{onSubmit:le=>{le.preventDefault(),me()},children:[k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"edit-start-date",children:"Start Date"}),k.jsx("input",{type:"date",id:"edit-start-date",value:g,onChange:le=>y(le.target.value),required:!0})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"edit-end-date",children:"End Date"}),k.jsx("input",{type:"date",id:"edit-end-date",value:_,onChange:le=>E(le.target.value),required:!0})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"edit-description",children:"Description (optional)"}),k.jsx("input",{type:"text",id:"edit-description",value:I,onChange:le=>O(le.target.value),placeholder:"e.g., Summer vacation"})]}),k.jsxs("div",{className:"hours-estimate",children:[k.jsx("strong",{children:"Hours needed:"})," ",re.toFixed(2)]}),W&&k.jsx("div",{className:"error-message",children:W}),k.jsxs("div",{className:"modal-actions",children:[k.jsx("button",{type:"button",onClick:ae,className:"delete-button",children:U?"Confirm Delete":"Delete"}),k.jsxs("div",{className:"right-actions",children:[k.jsx("button",{type:"button",onClick:Oe,className:"cancel-button",children:"Cancel"}),k.jsx("button",{type:"submit",className:"save-button",children:"Save Changes"})]})]})]})]})})},fD=({vacations:n,workSchedule:e,holidays:t,onEdit:i,onDelete:o})=>{const l=he.useMemo(()=>{if(n.length===0)return[];const g={};return n.forEach(_=>{const E=ot(_.startDate).getFullYear();g[E]||(g[E]=[]),g[E].push(_)}),Object.keys(g).map(_=>{const E=parseInt(_,10),I=g[E];return{year:E,vacations:I?I.sort((O,W)=>O.startDate.localeCompare(W.startDate)):[]}}).sort((_,E)=>_.year-E.year)},[n]),h=g=>ot(g).toLocaleDateString("en-US",{month:"short",day:"numeric"}),f=g=>{const y=ot(g.startDate),_=ot(g.endDate),E=Math.ceil((_.getTime()-y.getTime())/(1e3*60*60*24))+1;return E===1?"1 day":`${E} days`};return n.length===0?null:k.jsxs("div",{className:"vacation-list-by-year",children:[k.jsx("h3",{children:"Planned Vacations"}),l.map(g=>k.jsxs("div",{className:"vacation-year-group",children:[k.jsx("h4",{className:"vacation-year-header",children:g.year}),k.jsx("div",{className:"vacation-table-wrapper",children:k.jsxs("table",{className:"vacation-table",children:[k.jsx("thead",{children:k.jsxs("tr",{children:[k.jsx("th",{children:"Dates"}),k.jsx("th",{children:"Description"}),k.jsx("th",{children:"Duration"}),k.jsx("th",{children:"Vacation Hours"}),k.jsx("th",{children:"Actions"})]})}),k.jsx("tbody",{children:g.vacations.map(y=>k.jsxs("tr",{children:[k.jsxs("td",{className:"vacation-dates",children:[h(y.startDate)," - ",h(y.endDate)]}),k.jsx("td",{className:"vacation-description",children:y.description||k.jsx("span",{className:"no-description",children:""})}),k.jsx("td",{className:"vacation-duration",children:f(y)}),k.jsxs("td",{className:"vacation-hours",children:[Dc(y,e,t).toFixed(1),"h"]}),k.jsxs("td",{className:"vacation-actions",children:[k.jsx("button",{onClick:()=>i(y),className:"action-button edit-button",title:"Edit vacation",children:"Edit"}),k.jsx("button",{onClick:()=>o(y.id),className:"action-button delete-button",title:"Delete vacation",children:"Delete"})]})]},y.id))})]})})]},g.year))]})},pD=({weeklyBalances:n,plannedVacations:e,holidays:t,userProfile:i,onAddVacation:o,onUpdateVacation:l,onDeleteVacation:h,canAffordVacation:f})=>{const[g,y]=he.useState("idle"),[_,E]=he.useState(null),[I,O]=he.useState(null),[W,$]=he.useState(null),[U,X]=he.useState(!1),[re,me]=he.useState(""),[ae,Oe]=he.useState("2-month"),[le,D]=he.useState(window.innerWidth>=768),[S,P]=he.useState(new Date),[x,N]=he.useState(null);he.useEffect(()=>{const J=()=>{ae==="2-month"&&D(window.innerWidth>=768)};return window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)},[ae]);const L=he.useMemo(()=>{if(n.length===0){const de=new Date;return{start:new Date(de.getFullYear(),de.getMonth()-1,1),end:new Date(de.getFullYear(),de.getMonth()+3,0)}}const J=n[0],ye=n[n.length-1];return{start:new Date(J.weekStartDate),end:new Date(ye.weekEndDate)}},[n]),C=he.useMemo(()=>uD(n,e,t,i.workSchedule,L.start,L.end),[n,e,t,i.workSchedule,L]),He=he.useCallback(()=>g==="selecting"&&_&&I?{start:_<I?_:I,end:_<I?I:_}:null,[g,_,I])(),$e=J=>{const ye=Nn(J),de=C.get(ye);if(de!=null&&de.isInVacation&&de.vacationId){const oe=e.find(Ae=>Ae.id===de.vacationId);if(oe){$(oe),X(!0),Ue();return}}if(g==="idle"){y("selecting"),E(J),me("");return}if(g==="selecting"&&_){const[oe,Ae]=J<_?[J,_]:[_,J],{canAfford:gt,projectedBalance:bt}=f({startDate:Nn(oe),endDate:Nn(Ae)});if(!gt){const Ct=Uf(oe,Ae,i.workSchedule,t);me(`Insufficient balance. Need ${Ct}h, will have ${bt.toFixed(2)}h`),Ue();return}o({startDate:Nn(oe),endDate:Nn(Ae)}),Ue()}},Ue=()=>{y("idle"),E(null),O(null),me("")};he.useEffect(()=>{const J=ye=>{ye.key==="Escape"&&Ue()};return window.addEventListener("keydown",J),()=>window.removeEventListener("keydown",J)},[]);const te=he.useCallback(({date:J,view:ye,activeStartDate:de})=>{if(ye!=="month")return!1;const oe=de.getMonth(),Ae=de.getFullYear(),gt=new Date(Ae,oe+1,0);if(J<new Date(Ae,oe,1))return!0;const bt=gt.getDay(),Ct=bt===6?0:(6-bt+7)%7,Ye=new Date(Ae,oe,gt.getDate()+Ct);return J>Ye},[]),ue=he.useCallback(({date:J,activeStartDate:ye})=>{const de=ye.getMonth(),oe=ye.getFullYear(),Ae=new Date(oe,de+1,0);return J>Ae},[]),ee=he.useCallback(({date:J,view:ye,activeStartDate:de})=>{if(ye!=="month")return"";const oe=[];if(te({date:J,view:ye,activeStartDate:de}))return oe.push("react-calendar__tile--hidden"),oe.join(" ");ue({date:J,activeStartDate:de})&&oe.push("react-calendar__tile--next-month");const Ae=C.get(Nn(J));if(Ae!=null&&Ae.isInVacation&&oe.push("react-calendar__tile--vacation"),Ae!=null&&Ae.isHoliday&&oe.push("react-calendar__tile--holiday"),Ae!=null&&Ae.isRDO&&oe.push("react-calendar__tile--rdo"),Ae!=null&&Ae.types.includes(zo.WEEKEND)&&oe.push("react-calendar__tile--weekend"),He){const gt=J.getTime(),bt=He.start.getTime(),Ct=He.end.getTime();gt>=bt&&gt<=Ct&&oe.push("react-calendar__tile--in-selection"),gt===bt&&oe.push("react-calendar__tile--selection-start"),gt===Ct&&oe.push("react-calendar__tile--selection-end")}return oe.join(" ")},[C,He,te,ue]),V=he.useCallback(({date:J,view:ye})=>{if(ye!=="month")return null;const de=C.get(Nn(J)),oe=He&&J>=He.start&&J<=He.end,Ae=_&&J.getTime()===_.getTime(),gt=I&&J.getTime()===I.getTime();return k.jsx("div",{className:"calendar-tile-wrapper",onMouseEnter:()=>{g==="selecting"&&_&&O(J)},children:k.jsx(hD,{dayInfo:de,isInSelectionRange:!!oe,isSelectionStart:!!Ae,isSelectionEnd:!!gt&&g==="selecting"})})},[C,He,_,I,g]),H=()=>{P(new Date)},Te=he.useMemo(()=>{const J=new Date,ye=S.getMonth(),de=S.getFullYear();return ye===J.getMonth()&&de===J.getFullYear()},[S]),Ie=J=>{Oe(J),J==="2-month"&&D(window.innerWidth>=768)},Ne=he.useMemo(()=>{const J=ae==="6-month"?6:le?2:1,ye=[],de=new Date(S);for(let oe=0;oe<J;oe++){const Ae=new Date(de.getFullYear(),de.getMonth()+oe,1);ye.push(Ae)}return ye},[S,ae,le]);return k.jsxs("div",{className:"calendar-view",children:[k.jsxs("div",{className:"banner-container",children:[g==="selecting"&&k.jsx("div",{className:"selection-banner",children:k.jsxs("span",{children:["Selecting vacation: Click the end date or"," ",k.jsx("button",{onClick:Ue,className:"cancel-link",children:"Cancel"})]})}),re&&k.jsxs("div",{className:"error-banner",children:[re,k.jsx("button",{onClick:()=>me(""),className:"close-error",children:""})]})]}),k.jsxs("div",{className:"calendar-header-controls",children:[k.jsxs("div",{className:"view-toggle-buttons",children:[k.jsx("button",{onClick:()=>Ie("2-month"),className:`view-toggle-button ${ae==="2-month"?"active":""}`,children:"2-Month View"}),k.jsx("button",{onClick:()=>Ie("6-month"),className:`view-toggle-button ${ae==="6-month"?"active":""}`,children:"6-Month View"})]}),k.jsx("button",{onClick:H,className:"jump-to-today-button",disabled:Te,children:"Jump to Today"})]}),k.jsxs("div",{className:"calendar-navigation-controls",children:[k.jsx("button",{onClick:()=>{const J=new Date(S.getFullYear(),S.getMonth()-1,1);N("backward"),P(J),setTimeout(()=>N(null),600)},className:"calendar-nav-button",children:" Previous"}),k.jsx("button",{onClick:()=>{const J=new Date(S.getFullYear(),S.getMonth()+1,1);N("forward"),P(J),setTimeout(()=>N(null),600)},className:"calendar-nav-button",children:"Next "})]}),k.jsx("div",{className:`${ae==="6-month"?"six-month-grid":"two-month-grid"} ${x?`slide-${x}`:""}`,children:Ne.map((J,ye)=>k.jsxs("div",{className:`${ae==="6-month"?"six-month-calendar":"two-month-calendar"}`,children:[k.jsx("div",{className:`${ae==="6-month"?"six-month-calendar-header":"two-month-calendar-header"}`,children:J.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),k.jsx(lD,{showDoubleView:!1,showNeighboringMonth:!0,selectRange:!1,tileContent:V,tileClassName:ee,onClickDay:$e,minDetail:"month",maxDetail:"month",locale:"en-US",activeStartDate:J,showNavigation:!1})]},ye))}),k.jsx(dD,{vacation:W,isOpen:U,workSchedule:i.workSchedule,holidays:t,onSave:l,onDelete:h,onClose:()=>{X(!1),$(null)},canAffordVacation:f}),k.jsx(fD,{vacations:e,workSchedule:i.workSchedule,holidays:t,onEdit:J=>{$(J),X(!0)},onDelete:h})]})},mD=()=>k.jsxs("div",{className:"calendar-legend",children:[k.jsx("h3",{children:"Legend"}),k.jsxs("div",{className:"legend-items",children:[k.jsxs("div",{className:"legend-item",children:[k.jsx("span",{className:"legend-indicator vacation",children:"V"}),k.jsx("span",{className:"legend-label",children:"Planned Vacation"})]}),k.jsxs("div",{className:"legend-item",children:[k.jsx("span",{className:"legend-indicator holiday",children:"H"}),k.jsx("span",{className:"legend-label",children:"Holiday"})]}),k.jsxs("div",{className:"legend-item",children:[k.jsx("span",{className:"legend-indicator rdo",children:"R"}),k.jsx("span",{className:"legend-label",children:"RDO (9/80)"})]}),k.jsxs("div",{className:"legend-item",children:[k.jsx("span",{className:"legend-box weekend"}),k.jsx("span",{className:"legend-label",children:"Weekend"})]}),k.jsxs("div",{className:"legend-item",children:[k.jsx("span",{className:"legend-box balance-positive"}),k.jsx("span",{className:"legend-label",children:"Balance (on Sundays)"})]})]})]}),Qd=["jpl-vacation-user-profile","jpl-vacation-planned-vacations"];function KE(){const[n,e]=he.useState(null),[t,i]=he.useState(!0),[o,l]=he.useState(null),[h]=he.useState(wE());return he.useEffect(()=>{if(!h){i(!1);return}const y=$d();if(!y){i(!1);return}const _=uk(y,async E=>{if(e(E),i(!1),E){Dr.setMode("cloud-sync",E.uid);try{await Dr.syncFromCloud(Qd)}catch{console.log("No cloud data found, will sync local data to cloud");try{await Dr.syncToCloud(Qd)}catch(O){console.error("Error syncing to cloud:",O)}}}else Dr.setMode("localStorage")});return()=>_()},[h]),{user:n,loading:t,error:o,isFirebaseAvailable:h,signInWithGoogle:async()=>{if(!h){l("Firebase is not configured. Cloud sync is not available.");return}l(null),i(!0);try{const y=$d();if(!y)throw new Error("Firebase auth not initialized");const _=new oi,E=await Dk(y,_);console.log("Signed in as:",E.user.email),Dr.setMode("cloud-sync",E.user.uid),await Dr.syncToCloud(Qd),e(E.user)}catch(y){console.error("Sign in error:",y),l(y.message||"Failed to sign in"),Dr.setMode("localStorage")}finally{i(!1)}},signOut:async()=>{if(h){l(null),i(!0);try{const y=$d();if(!y)throw new Error("Firebase auth not initialized");await ck(y),Dr.setMode("localStorage"),e(null),console.log("Signed out successfully")}catch(y){console.error("Sign out error:",y),l(y.message||"Failed to sign out")}finally{i(!1)}}}}}function gD({isOpen:n=!0,onClose:e}){const{user:t,loading:i,error:o,isFirebaseAvailable:l,signInWithGoogle:h,signOut:f}=KE();return!l||!n?null:i?k.jsxs("div",{className:"cloud-sync-settings loading",children:[e&&k.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),k.jsx("p",{children:"Loading..."})]}):t?k.jsxs("div",{className:"cloud-sync-settings signed-in",children:[e&&k.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),k.jsxs("div",{className:"sync-status",children:[k.jsx("div",{className:"sync-icon",children:""}),k.jsxs("div",{className:"sync-info",children:[k.jsx("div",{className:"sync-title",children:"Cloud Sync Enabled"}),k.jsx("div",{className:"sync-email",children:t.email}),k.jsx("div",{className:"sync-description",children:"Your vacation data is automatically synced across all your devices"})]})]}),k.jsx("button",{onClick:f,className:"sign-out-button",children:"Disable Cloud Sync"}),o&&k.jsx("div",{className:"error-message",children:o})]}):k.jsxs("div",{className:"cloud-sync-settings signed-out",children:[e&&k.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),k.jsxs("div",{className:"sync-promo",children:[k.jsx("div",{className:"sync-icon",children:""}),k.jsxs("div",{className:"sync-info",children:[k.jsx("div",{className:"sync-title",children:"Enable Cloud Sync"}),k.jsx("div",{className:"sync-description",children:"Sign in with Google to sync your vacation data across multiple devices and browsers"}),k.jsxs("ul",{className:"sync-benefits",children:[k.jsx("li",{children:"Access your data from any device"}),k.jsx("li",{children:"Automatic real-time sync"}),k.jsx("li",{children:"Your data remains private"}),k.jsx("li",{children:"Works offline - syncs when online"})]})]})]}),k.jsx("button",{onClick:h,className:"sign-in-button",children:"Sign in with Google"}),o&&k.jsx("div",{className:"error-message",children:o})]})}function yD({onClick:n}){const{user:e,isFirebaseAvailable:t}=KE();return!t||!e?null:k.jsxs("button",{className:"sync-status-indicator",title:"Cloud sync enabled - Click to manage",onClick:n,children:[k.jsx("span",{className:"sync-icon",children:""}),k.jsx("span",{className:"sync-text",children:"Synced"})]})}const vD=()=>{const{userProfile:n,setUserProfile:e,plannedVacations:t,addPlannedVacation:i,updatePlannedVacation:o,deletePlannedVacation:l,holidays:h,setHolidays:f,weeklyBalances:g,forecastPeriod:y,canAffordVacation:_}=SP(),{defaultHolidays:E}=PP((n==null?void 0:n.workSchedule)??null,y.startDate,y.endDate),[I,O]=he.useState(()=>localStorage.getItem("theme")==="dark"),[W,$]=he.useState(!0);he.useEffect(()=>{const X=document.documentElement;I?(X.classList.add("dark"),localStorage.setItem("theme","dark")):(X.classList.remove("dark"),localStorage.setItem("theme","light"))},[I]);const U=()=>{O(!I)};return he.useEffect(()=>{if(!n||E.length===0)return;if(h.length===0){f(E);return}h.some(re=>re.date&&re.date.startsWith("2027"))||f(E)},[n,h,E,f]),k.jsxs("div",{className:"app",children:[k.jsx("header",{className:"app-header",children:k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[k.jsx("h1",{children:"JPL Vacation Forecast "}),k.jsxs("div",{style:{display:"flex",gap:"12px",marginLeft:"auto",alignItems:"center"},children:[k.jsx(yD,{onClick:()=>$(!W)}),k.jsx("button",{onClick:U,className:"reset-button","aria-label":I?"Switch to light mode":"Switch to dark mode",children:I?" Light Mode":" Dark Mode"})]})]})}),k.jsx("main",{className:"app-main",children:n?k.jsxs("div",{className:"dashboard",children:[k.jsx("div",{className:"dashboard-header",children:k.jsx("button",{onClick:()=>e(null),className:"reset-button",children:"Reset Profile"})}),k.jsx(gD,{isOpen:W,onClose:()=>$(!1)}),k.jsx(mD,{}),k.jsx(pD,{weeklyBalances:g,plannedVacations:t,holidays:h,userProfile:n,onAddVacation:i,onUpdateVacation:o,onDeleteVacation:l,canAffordVacation:_})]}):k.jsx(RP,{onSubmit:e})})]})},YE=document.getElementById("root");if(!YE)throw new Error("Failed to find the root element");fT.createRoot(YE).render(k.jsx(Gv.StrictMode,{children:k.jsx(vD,{})}));

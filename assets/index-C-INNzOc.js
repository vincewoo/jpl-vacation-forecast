var gT=Object.defineProperty;var yT=(n,e,t)=>e in n?gT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Qa=(n,e,t)=>yT(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function a_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Rd={exports:{}},Ja={},Nd={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy;function vT(){if(oy)return Le;oy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function I(L){return L===null||typeof L!="object"?null:(L=w&&L[w]||L["@@iterator"],typeof L=="function"?L:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,O={};function j(L,H,Te){this.props=L,this.context=H,this.refs=O,this.updater=Te||R}j.prototype.isReactComponent={},j.prototype.setState=function(L,H){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,H,"setState")},j.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function G(){}G.prototype=j.prototype;function ee(L,H,Te){this.props=L,this.context=H,this.refs=O,this.updater=Te||R}var oe=ee.prototype=new G;oe.constructor=ee,F(oe,j.prototype),oe.isPureReactComponent=!0;var ne=Array.isArray,be=Object.prototype.hasOwnProperty,ye={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(L,H,Te){var Ee,Ne={},Re=null,X=null;if(H!=null)for(Ee in H.ref!==void 0&&(X=H.ref),H.key!==void 0&&(Re=""+H.key),H)be.call(H,Ee)&&!P.hasOwnProperty(Ee)&&(Ne[Ee]=H[Ee]);var he=arguments.length-2;if(he===1)Ne.children=Te;else if(1<he){for(var de=Array(he),Se=0;Se<he;Se++)de[Se]=arguments[Se+2];Ne.children=de}if(L&&L.defaultProps)for(Ee in he=L.defaultProps,he)Ne[Ee]===void 0&&(Ne[Ee]=he[Ee]);return{$$typeof:n,type:L,key:Re,ref:X,props:Ne,_owner:ye.current}}function D(L,H){return{$$typeof:n,type:L.type,key:H,ref:L.ref,props:L.props,_owner:L._owner}}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function x(L){var H={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Te){return H[Te]})}var M=/\/+/g;function C(L,H){return typeof L=="object"&&L!==null&&L.key!=null?x(""+L.key):H.toString(36)}function Ve(L,H,Te,Ee,Ne){var Re=typeof L;(Re==="undefined"||Re==="boolean")&&(L=null);var X=!1;if(L===null)X=!0;else switch(Re){case"string":case"number":X=!0;break;case"object":switch(L.$$typeof){case n:case e:X=!0}}if(X)return X=L,Ne=Ne(X),L=Ee===""?"."+C(X,0):Ee,ne(Ne)?(Te="",L!=null&&(Te=L.replace(M,"$&/")+"/"),Ve(Ne,H,Te,"",function(Se){return Se})):Ne!=null&&(N(Ne)&&(Ne=D(Ne,Te+(!Ne.key||X&&X.key===Ne.key?"":(""+Ne.key).replace(M,"$&/")+"/")+L)),H.push(Ne)),1;if(X=0,Ee=Ee===""?".":Ee+":",ne(L))for(var he=0;he<L.length;he++){Re=L[he];var de=Ee+C(Re,he);X+=Ve(Re,H,Te,de,Ne)}else if(de=I(L),typeof de=="function")for(L=de.call(L),he=0;!(Re=L.next()).done;)Re=Re.value,de=Ee+C(Re,he++),X+=Ve(Re,H,Te,de,Ne);else if(Re==="object")throw H=String(L),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return X}function je(L,H,Te){if(L==null)return L;var Ee=[],Ne=0;return Ve(L,Ee,"","",function(Re){return H.call(Te,Re,Ne++)}),Ee}function Ge(L){if(L._status===-1){var H=L._result;H=H(),H.then(function(Te){(L._status===0||L._status===-1)&&(L._status=1,L._result=Te)},function(Te){(L._status===0||L._status===-1)&&(L._status=2,L._result=Te)}),L._status===-1&&(L._status=0,L._result=H)}if(L._status===1)return L._result.default;throw L._result}var $e={current:null},re={transition:null},ue={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:re,ReactCurrentOwner:ye};function te(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:je,forEach:function(L,H,Te){je(L,function(){H.apply(this,arguments)},Te)},count:function(L){var H=0;return je(L,function(){H++}),H},toArray:function(L){return je(L,function(H){return H})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Le.Component=j,Le.Fragment=t,Le.Profiler=o,Le.PureComponent=ee,Le.StrictMode=i,Le.Suspense=g,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Le.act=te,Le.cloneElement=function(L,H,Te){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ee=F({},L.props),Ne=L.key,Re=L.ref,X=L._owner;if(H!=null){if(H.ref!==void 0&&(Re=H.ref,X=ye.current),H.key!==void 0&&(Ne=""+H.key),L.type&&L.type.defaultProps)var he=L.type.defaultProps;for(de in H)be.call(H,de)&&!P.hasOwnProperty(de)&&(Ee[de]=H[de]===void 0&&he!==void 0?he[de]:H[de])}var de=arguments.length-2;if(de===1)Ee.children=Te;else if(1<de){he=Array(de);for(var Se=0;Se<de;Se++)he[Se]=arguments[Se+2];Ee.children=he}return{$$typeof:n,type:L.type,key:Ne,ref:Re,props:Ee,_owner:X}},Le.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Le.createElement=A,Le.createFactory=function(L){var H=A.bind(null,L);return H.type=L,H},Le.createRef=function(){return{current:null}},Le.forwardRef=function(L){return{$$typeof:f,render:L}},Le.isValidElement=N,Le.lazy=function(L){return{$$typeof:_,_payload:{_status:-1,_result:L},_init:Ge}},Le.memo=function(L,H){return{$$typeof:y,type:L,compare:H===void 0?null:H}},Le.startTransition=function(L){var H=re.transition;re.transition={};try{L()}finally{re.transition=H}},Le.unstable_act=te,Le.useCallback=function(L,H){return $e.current.useCallback(L,H)},Le.useContext=function(L){return $e.current.useContext(L)},Le.useDebugValue=function(){},Le.useDeferredValue=function(L){return $e.current.useDeferredValue(L)},Le.useEffect=function(L,H){return $e.current.useEffect(L,H)},Le.useId=function(){return $e.current.useId()},Le.useImperativeHandle=function(L,H,Te){return $e.current.useImperativeHandle(L,H,Te)},Le.useInsertionEffect=function(L,H){return $e.current.useInsertionEffect(L,H)},Le.useLayoutEffect=function(L,H){return $e.current.useLayoutEffect(L,H)},Le.useMemo=function(L,H){return $e.current.useMemo(L,H)},Le.useReducer=function(L,H,Te){return $e.current.useReducer(L,H,Te)},Le.useRef=function(L){return $e.current.useRef(L)},Le.useState=function(L){return $e.current.useState(L)},Le.useSyncExternalStore=function(L,H,Te){return $e.current.useSyncExternalStore(L,H,Te)},Le.useTransition=function(){return $e.current.useTransition()},Le.version="18.3.1",Le}var ay;function Kf(){return ay||(ay=1,Nd.exports=vT()),Nd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function _T(){if(ly)return Ja;ly=1;var n=Kf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var _,w={},I=null,R=null;y!==void 0&&(I=""+y),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(R=g.ref);for(_ in g)i.call(g,_)&&!l.hasOwnProperty(_)&&(w[_]=g[_]);if(f&&f.defaultProps)for(_ in g=f.defaultProps,g)w[_]===void 0&&(w[_]=g[_]);return{$$typeof:e,type:f,key:I,ref:R,props:w,_owner:o.current}}return Ja.Fragment=t,Ja.jsx=h,Ja.jsxs=h,Ja}var uy;function wT(){return uy||(uy=1,Rd.exports=_T()),Rd.exports}var T=wT(),se=Kf();const l_=a_(se);var Uu={},xd={exports:{}},yn={},bd={exports:{}},Od={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function ET(){return cy||(cy=1,(function(n){function e(re,ue){var te=re.length;re.push(ue);e:for(;0<te;){var L=te-1>>>1,H=re[L];if(0<o(H,ue))re[L]=ue,re[te]=H,te=L;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var ue=re[0],te=re.pop();if(te!==ue){re[0]=te;e:for(var L=0,H=re.length,Te=H>>>1;L<Te;){var Ee=2*(L+1)-1,Ne=re[Ee],Re=Ee+1,X=re[Re];if(0>o(Ne,te))Re<H&&0>o(X,Ne)?(re[L]=X,re[Re]=te,L=Re):(re[L]=Ne,re[Ee]=te,L=Ee);else if(Re<H&&0>o(X,te))re[L]=X,re[Re]=te,L=Re;else break e}}return ue}function o(re,ue){var te=re.sortIndex-ue.sortIndex;return te!==0?te:re.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var g=[],y=[],_=1,w=null,I=3,R=!1,F=!1,O=!1,j=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(re){for(var ue=t(y);ue!==null;){if(ue.callback===null)i(y);else if(ue.startTime<=re)i(y),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=t(y)}}function ne(re){if(O=!1,oe(re),!F)if(t(g)!==null)F=!0,Ge(be);else{var ue=t(y);ue!==null&&$e(ne,ue.startTime-re)}}function be(re,ue){F=!1,O&&(O=!1,G(A),A=-1),R=!0;var te=I;try{for(oe(ue),w=t(g);w!==null&&(!(w.expirationTime>ue)||re&&!x());){var L=w.callback;if(typeof L=="function"){w.callback=null,I=w.priorityLevel;var H=L(w.expirationTime<=ue);ue=n.unstable_now(),typeof H=="function"?w.callback=H:w===t(g)&&i(g),oe(ue)}else i(g);w=t(g)}if(w!==null)var Te=!0;else{var Ee=t(y);Ee!==null&&$e(ne,Ee.startTime-ue),Te=!1}return Te}finally{w=null,I=te,R=!1}}var ye=!1,P=null,A=-1,D=5,N=-1;function x(){return!(n.unstable_now()-N<D)}function M(){if(P!==null){var re=n.unstable_now();N=re;var ue=!0;try{ue=P(!0,re)}finally{ue?C():(ye=!1,P=null)}}else ye=!1}var C;if(typeof ee=="function")C=function(){ee(M)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,je=Ve.port2;Ve.port1.onmessage=M,C=function(){je.postMessage(null)}}else C=function(){j(M,0)};function Ge(re){P=re,ye||(ye=!0,C())}function $e(re,ue){A=j(function(){re(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){F||R||(F=!0,Ge(be))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(g)},n.unstable_next=function(re){switch(I){case 1:case 2:case 3:var ue=3;break;default:ue=I}var te=I;I=ue;try{return re()}finally{I=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,ue){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var te=I;I=re;try{return ue()}finally{I=te}},n.unstable_scheduleCallback=function(re,ue,te){var L=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?L+te:L):te=L,re){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=te+H,re={id:_++,callback:ue,priorityLevel:re,startTime:te,expirationTime:H,sortIndex:-1},te>L?(re.sortIndex=te,e(y,re),t(g)===null&&re===t(y)&&(O?(G(A),A=-1):O=!0,$e(ne,te-L))):(re.sortIndex=H,e(g,re),F||R||(F=!0,Ge(be))),re},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(re){var ue=I;return function(){var te=I;I=ue;try{return re.apply(this,arguments)}finally{I=te}}}})(Od)),Od}var hy;function TT(){return hy||(hy=1,bd.exports=ET()),bd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function ST(){if(dy)return yn;dy=1;var n=Kf(),e=TT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function I(r){return g.call(w,r)?!0:g.call(_,r)?!1:y.test(r)?w[r]=!0:(_[r]=!0,!1)}function R(r,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function F(r,s,a,c){if(s===null||typeof s>"u"||R(r,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function O(r,s,a,c,d,p,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=p,this.removeEmptyString=E}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){j[r]=new O(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];j[s]=new O(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){j[r]=new O(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){j[r]=new O(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){j[r]=new O(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){j[r]=new O(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){j[r]=new O(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){j[r]=new O(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){j[r]=new O(r,5,!1,r.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function ee(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(G,ee);j[s]=new O(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(G,ee);j[s]=new O(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(G,ee);j[s]=new O(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){j[r]=new O(r,1,!1,r.toLowerCase(),null,!1,!1)}),j.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){j[r]=new O(r,1,!1,r.toLowerCase(),null,!0,!0)});function oe(r,s,a,c){var d=j.hasOwnProperty(s)?j[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(F(s,a,d,c)&&(a=null),c||d===null?I(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?r.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?r.setAttributeNS(c,s,a):r.setAttribute(s,a))))}var ne=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,be=Symbol.for("react.element"),ye=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),x=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),je=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),re=Symbol.iterator;function ue(r){return r===null||typeof r!="object"?null:(r=re&&r[re]||r["@@iterator"],typeof r=="function"?r:null)}var te=Object.assign,L;function H(r){if(L===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+r}var Te=!1;function Ee(r,s){if(!r||Te)return"";Te=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){c=$}r.call(s.prototype)}else{try{throw Error()}catch($){c=$}r()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),p=c.stack.split(`
`),E=d.length-1,k=p.length-1;1<=E&&0<=k&&d[E]!==p[k];)k--;for(;1<=E&&0<=k;E--,k--)if(d[E]!==p[k]){if(E!==1||k!==1)do if(E--,k--,0>k||d[E]!==p[k]){var b=`
`+d[E].replace(" at new "," at ");return r.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",r.displayName)),b}while(1<=E&&0<=k);break}}}finally{Te=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?H(r):""}function Ne(r){switch(r.tag){case 5:return H(r.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return r=Ee(r.type,!1),r;case 11:return r=Ee(r.type.render,!1),r;case 1:return r=Ee(r.type,!0),r;default:return""}}function Re(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case ye:return"Portal";case D:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case Ve:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case x:return(r.displayName||"Context")+".Consumer";case N:return(r._context.displayName||"Context")+".Provider";case M:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case je:return s=r.displayName||null,s!==null?s:Re(r.type)||"Memo";case Ge:s=r._payload,r=r._init;try{return Re(r(s))}catch{}}return null}function X(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function he(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function de(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Se(r){var s=de(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){c=""+E,p.call(this,E)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Me(r){r._valueTracker||(r._valueTracker=Se(r))}function vt(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=de(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function St(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function He(r,s){var a=s.checked;return te({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function On(r,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=he(s.value!=null?s.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Pt(r,s){s=s.checked,s!=null&&oe(r,"checked",s,!1)}function Vn(r,s){Pt(r,s);var a=he(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?ht(r,s.type,a):s.hasOwnProperty("defaultValue")&&ht(r,s.type,he(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function yi(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function ht(r,s,a){(s!=="number"||St(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var dt=Array.isArray;function _n(r,s,a,c){if(r=r.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=s.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&c&&(r[a].defaultSelected=!0)}else{for(a=""+he(a),s=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,c&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function cs(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function vi(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(dt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:he(a)}}function to(r,s){var a=he(s.value),c=he(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function ur(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function hs(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _i(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?hs(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var cr,wi=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return r(s,a,c,d)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(cr=cr||document.createElement("div"),cr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=cr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function hr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Yn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},no=["Webkit","ms","Moz","O"];Object.keys(Yn).forEach(function(r){no.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Yn[s]=Yn[r]})});function wn(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Yn.hasOwnProperty(r)&&Yn[r]?(""+s).trim():s+"px"}function Br(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=wn(a,s[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,d):r[a]=d}}var ds=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function un(r,s){if(s){if(ds[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function zr(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mn=null;function Ei(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ln=null,Qn=null,rt=null;function It(r){if(r=Va(r)){if(typeof Ln!="function")throw Error(t(280));var s=r.stateNode;s&&(s=tu(s),Ln(r.stateNode,r.type,s))}}function ft(r){Qn?rt?rt.push(r):rt=[r]:Qn=r}function En(){if(Qn){var r=Qn,s=rt;if(rt=Qn=null,It(r),s)for(r=0;r<s.length;r++)It(s[r])}}function Xe(r,s){return r(s)}function sn(){}var jn=!1;function Ti(r,s,a){if(jn)return r(s,a);jn=!0;try{return Xe(r,s,a)}finally{jn=!1,(Qn!==null||rt!==null)&&(sn(),En())}}function dr(r,s){var a=r.stateNode;if(a===null)return null;var c=tu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Jn=!1;if(f)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){Jn=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{Jn=!1}function $r(r,s,a,c,d,p,E,k,b){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(Q){this.onError(Q)}}var Tn=!1,cn=null,fr=!1,hn=null,Si={onError:function(r){Tn=!0,cn=r}};function fs(r,s,a,c,d,p,E,k,b){Tn=!1,cn=null,$r.apply(Si,arguments)}function ps(r,s,a,c,d,p,E,k,b){if(fs.apply(this,arguments),Tn){if(Tn){var $=cn;Tn=!1,cn=null}else throw Error(t(198));fr||(fr=!0,hn=$)}}function Sn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function xe(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Ze(r){if(Sn(r)!==r)throw Error(t(188))}function it(r){var s=r.alternate;if(!s){if(s=Sn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,c=s;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Ze(d),r;if(p===c)return Ze(d),s;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var E=!1,k=d.child;k;){if(k===a){E=!0,a=d,c=p;break}if(k===c){E=!0,c=d,a=p;break}k=k.sibling}if(!E){for(k=p.child;k;){if(k===a){E=!0,a=p,c=d;break}if(k===c){E=!0,c=p,a=d;break}k=k.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function Kt(r){return r=it(r),r!==null?Rt(r):null}function Rt(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Rt(r);if(s!==null)return s;r=r.sibling}return null}var Wr=e.unstable_scheduleCallback,Ii=e.unstable_cancelCallback,Hr=e.unstable_shouldYield,qr=e.unstable_requestPaint,st=e.unstable_now,ah=e.unstable_getCurrentPriorityLevel,ro=e.unstable_ImmediatePriority,da=e.unstable_UserBlockingPriority,ms=e.unstable_NormalPriority,fa=e.unstable_LowPriority,io=e.unstable_IdlePriority,gs=null,In=null;function jl(r){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(gs,r,void 0,(r.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:ys,pr=Math.log,Un=Math.LN2;function ys(r){return r>>>=0,r===0?32:31-(pr(r)/Un|0)|0}var mr=64,Ai=4194304;function Ye(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Gr(r,s){var a=r.pendingLanes;if(a===0)return 0;var c=0,d=r.suspendedLanes,p=r.pingedLanes,E=a&268435455;if(E!==0){var k=E&~d;k!==0?c=Ye(k):(p&=E,p!==0&&(c=Ye(p)))}else E=a&~d,E!==0?c=Ye(E):p!==0&&(c=Ye(p));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,p=s&-s,d>=p||d===16&&(p&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)a=31-An(s),d=1<<a,c|=r[a],s&=~d;return c}function vs(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _s(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,p=r.pendingLanes;0<p;){var E=31-An(p),k=1<<E,b=d[E];b===-1?((k&a)===0||(k&c)!==0)&&(d[E]=vs(k,s)):b<=s&&(r.expiredLanes|=k),p&=~k}}function pa(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ma(){var r=mr;return mr<<=1,(mr&4194240)===0&&(mr=64),r}function ga(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function ws(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-An(s),r[s]=a}function lh(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-An(a),p=1<<d;s[d]=0,c[d]=-1,r[d]=-1,a&=~p}}function ya(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-An(a),d=1<<c;d&s|r[c]&s&&(r[c]|=s),a&=~d}}var ze=0;function gr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var va,so,_a,wa,Ea,yr=!1,oo=[],vr=null,_r=null,Ut=null,Es=new Map,Kr=new Map,Cn=[],Fl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ci(r,s){switch(r){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Es.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kr.delete(s.pointerId)}}function Xn(r,s,a,c,d,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},s!==null&&(s=Va(s),s!==null&&so(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function Ul(r,s,a,c,d){switch(s){case"focusin":return vr=Xn(vr,r,s,a,c,d),!0;case"dragenter":return _r=Xn(_r,r,s,a,c,d),!0;case"mouseover":return Ut=Xn(Ut,r,s,a,c,d),!0;case"pointerover":var p=d.pointerId;return Es.set(p,Xn(Es.get(p)||null,r,s,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Kr.set(p,Xn(Kr.get(p)||null,r,s,a,c,d)),!0}return!1}function ao(r){var s=As(r.target);if(s!==null){var a=Sn(s);if(a!==null){if(s=a.tag,s===13){if(s=xe(a),s!==null){r.blockedOn=s,Ea(r.priority,function(){_a(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function et(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=lo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);Mn=c,a.target.dispatchEvent(c),Mn=null}else return s=Va(a),s!==null&&so(s),r.blockedOn=a,!1;s.shift()}return!0}function Bl(r,s,a){et(r)&&a.delete(s)}function uh(){yr=!1,vr!==null&&et(vr)&&(vr=null),_r!==null&&et(_r)&&(_r=null),Ut!==null&&et(Ut)&&(Ut=null),Es.forEach(Bl),Kr.forEach(Bl)}function ki(r,s){r.blockedOn===s&&(r.blockedOn=null,yr||(yr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uh)))}function Di(r){function s(d){return ki(d,r)}if(0<oo.length){ki(oo[0],r);for(var a=1;a<oo.length;a++){var c=oo[a];c.blockedOn===r&&(c.blockedOn=null)}}for(vr!==null&&ki(vr,r),_r!==null&&ki(_r,r),Ut!==null&&ki(Ut,r),Es.forEach(s),Kr.forEach(s),a=0;a<Cn.length;a++)c=Cn[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<Cn.length&&(a=Cn[0],a.blockedOn===null);)ao(a),a.blockedOn===null&&Cn.shift()}var Yr=ne.ReactCurrentBatchConfig,Qr=!0;function wr(r,s,a,c){var d=ze,p=Yr.transition;Yr.transition=null;try{ze=1,Ta(r,s,a,c)}finally{ze=d,Yr.transition=p}}function zl(r,s,a,c){var d=ze,p=Yr.transition;Yr.transition=null;try{ze=4,Ta(r,s,a,c)}finally{ze=d,Yr.transition=p}}function Ta(r,s,a,c){if(Qr){var d=lo(r,s,a,c);if(d===null)wh(r,s,c,Er,a),Ci(r,c);else if(Ul(d,r,s,a,c))c.stopPropagation();else if(Ci(r,c),s&4&&-1<Fl.indexOf(r)){for(;d!==null;){var p=Va(d);if(p!==null&&va(p),p=lo(r,s,a,c),p===null&&wh(r,s,c,Er,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else wh(r,s,c,null,a)}}var Er=null;function lo(r,s,a,c){if(Er=null,r=Ei(c),r=As(r),r!==null)if(s=Sn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=xe(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Er=r,null}function uo(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ah()){case ro:return 1;case da:return 4;case ms:case fa:return 16;case io:return 536870912;default:return 16}default:return 16}}var kn=null,co=null,Jr=null;function $l(){if(Jr)return Jr;var r,s=co,a=s.length,c,d="value"in kn?kn.value:kn.textContent,p=d.length;for(r=0;r<a&&s[r]===d[r];r++);var E=a-r;for(c=1;c<=E&&s[a-c]===d[p-c];c++);return Jr=d.slice(r,1<c?1-c:void 0)}function Ts(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Tr(){return!0}function Sa(){return!1}function Yt(r){function s(a,c,d,p,E){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(a=r[k],this[k]=a?a(p):p[k]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Tr:Sa,this.isPropagationStopped=Sa,this}return te(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),s}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ss=Yt(Sr),Pi=te({},Sr,{view:0,detail:0}),ho=Yt(Pi),fo,po,Dn,Is=te({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:De,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Dn&&(Dn&&r.type==="mousemove"?(fo=r.screenX-Dn.screenX,po=r.screenY-Dn.screenY):po=fo=0,Dn=r),fo)},movementY:function(r){return"movementY"in r?r.movementY:po}}),Ia=Yt(Is),Wl=te({},Is,{dataTransfer:0}),Hl=Yt(Wl),mo=te({},Pi,{relatedTarget:0}),Bt=Yt(mo),ql=te({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gl=Yt(ql),Ri=te({},Sr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=Yt(Ri),m=te({},Sr,{data:0}),v=Yt(m),S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ie(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=W[r])?!!s[r]:!1}function De(){return ie}var wt=te({},Pi,{key:function(r){if(r.key){var s=S[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ts(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?B[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:De,charCode:function(r){return r.type==="keypress"?Ts(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ts(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Je=Yt(wt),At=te({},Is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pn=Yt(At),Xr=te({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:De}),Ir=Yt(Xr),Ar=te({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),go=Yt(Ar),Aa=te({},Is,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),c0=Yt(Aa),h0=[9,13,27,32],ch=f&&"CompositionEvent"in window,Ca=null;f&&"documentMode"in document&&(Ca=document.documentMode);var d0=f&&"TextEvent"in window&&!Ca,Xp=f&&(!ch||Ca&&8<Ca&&11>=Ca),Zp=" ",em=!1;function tm(r,s){switch(r){case"keyup":return h0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var yo=!1;function f0(r,s){switch(r){case"compositionend":return nm(s);case"keypress":return s.which!==32?null:(em=!0,Zp);case"textInput":return r=s.data,r===Zp&&em?null:r;default:return null}}function p0(r,s){if(yo)return r==="compositionend"||!ch&&tm(r,s)?(r=$l(),Jr=co=kn=null,yo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Xp&&s.locale!=="ko"?null:s.data;default:return null}}var m0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!m0[r.type]:s==="textarea"}function im(r,s,a,c){ft(c),s=Xl(s,"onChange"),0<s.length&&(a=new Ss("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var ka=null,Da=null;function g0(r){Tm(r,0)}function Kl(r){var s=To(r);if(vt(s))return r}function y0(r,s){if(r==="change")return s}var sm=!1;if(f){var hh;if(f){var dh="oninput"in document;if(!dh){var om=document.createElement("div");om.setAttribute("oninput","return;"),dh=typeof om.oninput=="function"}hh=dh}else hh=!1;sm=hh&&(!document.documentMode||9<document.documentMode)}function am(){ka&&(ka.detachEvent("onpropertychange",lm),Da=ka=null)}function lm(r){if(r.propertyName==="value"&&Kl(Da)){var s=[];im(s,Da,r,Ei(r)),Ti(g0,s)}}function v0(r,s,a){r==="focusin"?(am(),ka=s,Da=a,ka.attachEvent("onpropertychange",lm)):r==="focusout"&&am()}function _0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Kl(Da)}function w0(r,s){if(r==="click")return Kl(s)}function E0(r,s){if(r==="input"||r==="change")return Kl(s)}function T0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Zn=typeof Object.is=="function"?Object.is:T0;function Pa(r,s){if(Zn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(s,d)||!Zn(r[d],s[d]))return!1}return!0}function um(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function cm(r,s){var a=um(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=um(a)}}function hm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?hm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function dm(){for(var r=window,s=St();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=St(r.document)}return s}function fh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function S0(r){var s=dm(),a=r.focusedElem,c=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&hm(a.ownerDocument.documentElement,a)){if(c!==null&&fh(a)){if(s=c.start,r=c.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!r.extend&&p>c&&(d=c,c=p,p=d),d=cm(a,p);var E=cm(a,c);d&&E&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),r.removeAllRanges(),p>c?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var I0=f&&"documentMode"in document&&11>=document.documentMode,vo=null,ph=null,Ra=null,mh=!1;function fm(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;mh||vo==null||vo!==St(c)||(c=vo,"selectionStart"in c&&fh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ra&&Pa(Ra,c)||(Ra=c,c=Xl(ph,"onSelect"),0<c.length&&(s=new Ss("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=vo)))}function Yl(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var _o={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionend:Yl("Transition","TransitionEnd")},gh={},pm={};f&&(pm=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function Ql(r){if(gh[r])return gh[r];if(!_o[r])return r;var s=_o[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in pm)return gh[r]=s[a];return r}var mm=Ql("animationend"),gm=Ql("animationiteration"),ym=Ql("animationstart"),vm=Ql("transitionend"),_m=new Map,wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(r,s){_m.set(r,s),l(s,[r])}for(var yh=0;yh<wm.length;yh++){var vh=wm[yh],A0=vh.toLowerCase(),C0=vh[0].toUpperCase()+vh.slice(1);Ni(A0,"on"+C0)}Ni(mm,"onAnimationEnd"),Ni(gm,"onAnimationIteration"),Ni(ym,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(vm,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Na));function Em(r,s,a){var c=r.type||"unknown-event";r.currentTarget=a,ps(c,s,void 0,r),r.currentTarget=null}function Tm(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],d=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var E=c.length-1;0<=E;E--){var k=c[E],b=k.instance,$=k.currentTarget;if(k=k.listener,b!==p&&d.isPropagationStopped())break e;Em(d,k,$),p=b}else for(E=0;E<c.length;E++){if(k=c[E],b=k.instance,$=k.currentTarget,k=k.listener,b!==p&&d.isPropagationStopped())break e;Em(d,k,$),p=b}}}if(fr)throw r=hn,fr=!1,hn=null,r}function ot(r,s){var a=s[Ch];a===void 0&&(a=s[Ch]=new Set);var c=r+"__bubble";a.has(c)||(Sm(s,r,2,!1),a.add(c))}function _h(r,s,a){var c=0;s&&(c|=4),Sm(a,r,c,s)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function xa(r){if(!r[Jl]){r[Jl]=!0,i.forEach(function(a){a!=="selectionchange"&&(k0.has(a)||_h(a,!1,r),_h(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Jl]||(s[Jl]=!0,_h("selectionchange",!1,s))}}function Sm(r,s,a,c){switch(uo(s)){case 1:var d=wr;break;case 4:d=zl;break;default:d=Ta}a=d.bind(null,s,a,r),d=void 0,!Jn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?r.addEventListener(s,a,{capture:!0,passive:d}):r.addEventListener(s,a,!0):d!==void 0?r.addEventListener(s,a,{passive:d}):r.addEventListener(s,a,!1)}function wh(r,s,a,c,d){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var k=c.stateNode.containerInfo;if(k===d||k.nodeType===8&&k.parentNode===d)break;if(E===4)for(E=c.return;E!==null;){var b=E.tag;if((b===3||b===4)&&(b=E.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;E=E.return}for(;k!==null;){if(E=As(k),E===null)return;if(b=E.tag,b===5||b===6){c=p=E;continue e}k=k.parentNode}}c=c.return}Ti(function(){var $=p,Q=Ei(a),J=[];e:{var K=_m.get(r);if(K!==void 0){var ae=Ss,fe=r;switch(r){case"keypress":if(Ts(a)===0)break e;case"keydown":case"keyup":ae=Je;break;case"focusin":fe="focus",ae=Bt;break;case"focusout":fe="blur",ae=Bt;break;case"beforeblur":case"afterblur":ae=Bt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Ia;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Hl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Ir;break;case mm:case gm:case ym:ae=Gl;break;case vm:ae=go;break;case"scroll":ae=ho;break;case"wheel":ae=c0;break;case"copy":case"cut":case"paste":ae=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Pn}var pe=(s&4)!==0,Et=!pe&&r==="scroll",U=pe?K!==null?K+"Capture":null:K;pe=[];for(var V=$,z;V!==null;){z=V;var Z=z.stateNode;if(z.tag===5&&Z!==null&&(z=Z,U!==null&&(Z=dr(V,U),Z!=null&&pe.push(ba(V,Z,z)))),Et)break;V=V.return}0<pe.length&&(K=new ae(K,fe,null,a,Q),J.push({event:K,listeners:pe}))}}if((s&7)===0){e:{if(K=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",K&&a!==Mn&&(fe=a.relatedTarget||a.fromElement)&&(As(fe)||fe[Zr]))break e;if((ae||K)&&(K=Q.window===Q?Q:(K=Q.ownerDocument)?K.defaultView||K.parentWindow:window,ae?(fe=a.relatedTarget||a.toElement,ae=$,fe=fe?As(fe):null,fe!==null&&(Et=Sn(fe),fe!==Et||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ae=null,fe=$),ae!==fe)){if(pe=Ia,Z="onMouseLeave",U="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(pe=Pn,Z="onPointerLeave",U="onPointerEnter",V="pointer"),Et=ae==null?K:To(ae),z=fe==null?K:To(fe),K=new pe(Z,V+"leave",ae,a,Q),K.target=Et,K.relatedTarget=z,Z=null,As(Q)===$&&(pe=new pe(U,V+"enter",fe,a,Q),pe.target=z,pe.relatedTarget=Et,Z=pe),Et=Z,ae&&fe)t:{for(pe=ae,U=fe,V=0,z=pe;z;z=wo(z))V++;for(z=0,Z=U;Z;Z=wo(Z))z++;for(;0<V-z;)pe=wo(pe),V--;for(;0<z-V;)U=wo(U),z--;for(;V--;){if(pe===U||U!==null&&pe===U.alternate)break t;pe=wo(pe),U=wo(U)}pe=null}else pe=null;ae!==null&&Im(J,K,ae,pe,!1),fe!==null&&Et!==null&&Im(J,Et,fe,pe,!0)}}e:{if(K=$?To($):window,ae=K.nodeName&&K.nodeName.toLowerCase(),ae==="select"||ae==="input"&&K.type==="file")var me=y0;else if(rm(K))if(sm)me=E0;else{me=_0;var ve=v0}else(ae=K.nodeName)&&ae.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(me=w0);if(me&&(me=me(r,$))){im(J,me,a,Q);break e}ve&&ve(r,K,$),r==="focusout"&&(ve=K._wrapperState)&&ve.controlled&&K.type==="number"&&ht(K,"number",K.value)}switch(ve=$?To($):window,r){case"focusin":(rm(ve)||ve.contentEditable==="true")&&(vo=ve,ph=$,Ra=null);break;case"focusout":Ra=ph=vo=null;break;case"mousedown":mh=!0;break;case"contextmenu":case"mouseup":case"dragend":mh=!1,fm(J,a,Q);break;case"selectionchange":if(I0)break;case"keydown":case"keyup":fm(J,a,Q)}var _e;if(ch)e:{switch(r){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else yo?tm(r,a)&&(Ae="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(Xp&&a.locale!=="ko"&&(yo||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&yo&&(_e=$l()):(kn=Q,co="value"in kn?kn.value:kn.textContent,yo=!0)),ve=Xl($,Ae),0<ve.length&&(Ae=new v(Ae,r,null,a,Q),J.push({event:Ae,listeners:ve}),_e?Ae.data=_e:(_e=nm(a),_e!==null&&(Ae.data=_e)))),(_e=d0?f0(r,a):p0(r,a))&&($=Xl($,"onBeforeInput"),0<$.length&&(Q=new v("onBeforeInput","beforeinput",null,a,Q),J.push({event:Q,listeners:$}),Q.data=_e))}Tm(J,s)})}function ba(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Xl(r,s){for(var a=s+"Capture",c=[];r!==null;){var d=r,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=dr(r,a),p!=null&&c.unshift(ba(r,p,d)),p=dr(r,s),p!=null&&c.push(ba(r,p,d))),r=r.return}return c}function wo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Im(r,s,a,c,d){for(var p=s._reactName,E=[];a!==null&&a!==c;){var k=a,b=k.alternate,$=k.stateNode;if(b!==null&&b===c)break;k.tag===5&&$!==null&&(k=$,d?(b=dr(a,p),b!=null&&E.unshift(ba(a,b,k))):d||(b=dr(a,p),b!=null&&E.push(ba(a,b,k)))),a=a.return}E.length!==0&&r.push({event:s,listeners:E})}var D0=/\r\n?/g,P0=/\u0000|\uFFFD/g;function Am(r){return(typeof r=="string"?r:""+r).replace(D0,`
`).replace(P0,"")}function Zl(r,s,a){if(s=Am(s),Am(r)!==s&&a)throw Error(t(425))}function eu(){}var Eh=null,Th=null;function Sh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ih=typeof setTimeout=="function"?setTimeout:void 0,R0=typeof clearTimeout=="function"?clearTimeout:void 0,Cm=typeof Promise=="function"?Promise:void 0,N0=typeof queueMicrotask=="function"?queueMicrotask:typeof Cm<"u"?function(r){return Cm.resolve(null).then(r).catch(x0)}:Ih;function x0(r){setTimeout(function(){throw r})}function Ah(r,s){var a=s,c=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){r.removeChild(d),Di(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Di(s)}function xi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function km(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var Eo=Math.random().toString(36).slice(2),Cr="__reactFiber$"+Eo,Oa="__reactProps$"+Eo,Zr="__reactContainer$"+Eo,Ch="__reactEvents$"+Eo,b0="__reactListeners$"+Eo,O0="__reactHandles$"+Eo;function As(r){var s=r[Cr];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Zr]||a[Cr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=km(r);r!==null;){if(a=r[Cr])return a;r=km(r)}return s}r=a,a=r.parentNode}return null}function Va(r){return r=r[Cr]||r[Zr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function To(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function tu(r){return r[Oa]||null}var kh=[],So=-1;function bi(r){return{current:r}}function at(r){0>So||(r.current=kh[So],kh[So]=null,So--)}function tt(r,s){So++,kh[So]=r.current,r.current=s}var Oi={},Qt=bi(Oi),dn=bi(!1),Cs=Oi;function Io(r,s){var a=r.type.contextTypes;if(!a)return Oi;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=s[p];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=d),d}function fn(r){return r=r.childContextTypes,r!=null}function nu(){at(dn),at(Qt)}function Dm(r,s,a){if(Qt.current!==Oi)throw Error(t(168));tt(Qt,s),tt(dn,a)}function Pm(r,s,a){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,X(r)||"Unknown",d));return te({},a,c)}function ru(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Oi,Cs=Qt.current,tt(Qt,r),tt(dn,dn.current),!0}function Rm(r,s,a){var c=r.stateNode;if(!c)throw Error(t(169));a?(r=Pm(r,s,Cs),c.__reactInternalMemoizedMergedChildContext=r,at(dn),at(Qt),tt(Qt,r)):at(dn),tt(dn,a)}var ei=null,iu=!1,Dh=!1;function Nm(r){ei===null?ei=[r]:ei.push(r)}function V0(r){iu=!0,Nm(r)}function Vi(){if(!Dh&&ei!==null){Dh=!0;var r=0,s=ze;try{var a=ei;for(ze=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}ei=null,iu=!1}catch(d){throw ei!==null&&(ei=ei.slice(r+1)),Wr(ro,Vi),d}finally{ze=s,Dh=!1}}return null}var Ao=[],Co=0,su=null,ou=0,Bn=[],zn=0,ks=null,ti=1,ni="";function Ds(r,s){Ao[Co++]=ou,Ao[Co++]=su,su=r,ou=s}function xm(r,s,a){Bn[zn++]=ti,Bn[zn++]=ni,Bn[zn++]=ks,ks=r;var c=ti;r=ni;var d=32-An(c)-1;c&=~(1<<d),a+=1;var p=32-An(s)+d;if(30<p){var E=d-d%5;p=(c&(1<<E)-1).toString(32),c>>=E,d-=E,ti=1<<32-An(s)+d|a<<d|c,ni=p+r}else ti=1<<p|a<<d|c,ni=r}function Ph(r){r.return!==null&&(Ds(r,1),xm(r,1,0))}function Rh(r){for(;r===su;)su=Ao[--Co],Ao[Co]=null,ou=Ao[--Co],Ao[Co]=null;for(;r===ks;)ks=Bn[--zn],Bn[zn]=null,ni=Bn[--zn],Bn[zn]=null,ti=Bn[--zn],Bn[zn]=null}var Rn=null,Nn=null,ut=!1,er=null;function bm(r,s){var a=qn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Om(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Rn=r,Nn=xi(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Rn=r,Nn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ks!==null?{id:ti,overflow:ni}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=qn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,Rn=r,Nn=null,!0):!1;default:return!1}}function Nh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function xh(r){if(ut){var s=Nn;if(s){var a=s;if(!Om(r,s)){if(Nh(r))throw Error(t(418));s=xi(a.nextSibling);var c=Rn;s&&Om(r,s)?bm(c,a):(r.flags=r.flags&-4097|2,ut=!1,Rn=r)}}else{if(Nh(r))throw Error(t(418));r.flags=r.flags&-4097|2,ut=!1,Rn=r}}}function Vm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Rn=r}function au(r){if(r!==Rn)return!1;if(!ut)return Vm(r),ut=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Sh(r.type,r.memoizedProps)),s&&(s=Nn)){if(Nh(r))throw Mm(),Error(t(418));for(;s;)bm(r,s),s=xi(s.nextSibling)}if(Vm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){Nn=xi(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}Nn=null}}else Nn=Rn?xi(r.stateNode.nextSibling):null;return!0}function Mm(){for(var r=Nn;r;)r=xi(r.nextSibling)}function ko(){Nn=Rn=null,ut=!1}function bh(r){er===null?er=[r]:er.push(r)}var M0=ne.ReactCurrentBatchConfig;function Ma(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,r));var d=c,p=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(E){var k=d.refs;E===null?delete k[p]:k[p]=E},s._stringRef=p,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function lu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Lm(r){var s=r._init;return s(r._payload)}function jm(r){function s(U,V){if(r){var z=U.deletions;z===null?(U.deletions=[V],U.flags|=16):z.push(V)}}function a(U,V){if(!r)return null;for(;V!==null;)s(U,V),V=V.sibling;return null}function c(U,V){for(U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function d(U,V){return U=$i(U,V),U.index=0,U.sibling=null,U}function p(U,V,z){return U.index=z,r?(z=U.alternate,z!==null?(z=z.index,z<V?(U.flags|=2,V):z):(U.flags|=2,V)):(U.flags|=1048576,V)}function E(U){return r&&U.alternate===null&&(U.flags|=2),U}function k(U,V,z,Z){return V===null||V.tag!==6?(V=Id(z,U.mode,Z),V.return=U,V):(V=d(V,z),V.return=U,V)}function b(U,V,z,Z){var me=z.type;return me===P?Q(U,V,z.props.children,Z,z.key):V!==null&&(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ge&&Lm(me)===V.type)?(Z=d(V,z.props),Z.ref=Ma(U,V,z),Z.return=U,Z):(Z=xu(z.type,z.key,z.props,null,U.mode,Z),Z.ref=Ma(U,V,z),Z.return=U,Z)}function $(U,V,z,Z){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Ad(z,U.mode,Z),V.return=U,V):(V=d(V,z.children||[]),V.return=U,V)}function Q(U,V,z,Z,me){return V===null||V.tag!==7?(V=Ms(z,U.mode,Z,me),V.return=U,V):(V=d(V,z),V.return=U,V)}function J(U,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Id(""+V,U.mode,z),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case be:return z=xu(V.type,V.key,V.props,null,U.mode,z),z.ref=Ma(U,null,V),z.return=U,z;case ye:return V=Ad(V,U.mode,z),V.return=U,V;case Ge:var Z=V._init;return J(U,Z(V._payload),z)}if(dt(V)||ue(V))return V=Ms(V,U.mode,z,null),V.return=U,V;lu(U,V)}return null}function K(U,V,z,Z){var me=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return me!==null?null:k(U,V,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case be:return z.key===me?b(U,V,z,Z):null;case ye:return z.key===me?$(U,V,z,Z):null;case Ge:return me=z._init,K(U,V,me(z._payload),Z)}if(dt(z)||ue(z))return me!==null?null:Q(U,V,z,Z,null);lu(U,z)}return null}function ae(U,V,z,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return U=U.get(z)||null,k(V,U,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case be:return U=U.get(Z.key===null?z:Z.key)||null,b(V,U,Z,me);case ye:return U=U.get(Z.key===null?z:Z.key)||null,$(V,U,Z,me);case Ge:var ve=Z._init;return ae(U,V,z,ve(Z._payload),me)}if(dt(Z)||ue(Z))return U=U.get(z)||null,Q(V,U,Z,me,null);lu(V,Z)}return null}function fe(U,V,z,Z){for(var me=null,ve=null,_e=V,Ae=V=0,jt=null;_e!==null&&Ae<z.length;Ae++){_e.index>Ae?(jt=_e,_e=null):jt=_e.sibling;var Ke=K(U,_e,z[Ae],Z);if(Ke===null){_e===null&&(_e=jt);break}r&&_e&&Ke.alternate===null&&s(U,_e),V=p(Ke,V,Ae),ve===null?me=Ke:ve.sibling=Ke,ve=Ke,_e=jt}if(Ae===z.length)return a(U,_e),ut&&Ds(U,Ae),me;if(_e===null){for(;Ae<z.length;Ae++)_e=J(U,z[Ae],Z),_e!==null&&(V=p(_e,V,Ae),ve===null?me=_e:ve.sibling=_e,ve=_e);return ut&&Ds(U,Ae),me}for(_e=c(U,_e);Ae<z.length;Ae++)jt=ae(_e,U,Ae,z[Ae],Z),jt!==null&&(r&&jt.alternate!==null&&_e.delete(jt.key===null?Ae:jt.key),V=p(jt,V,Ae),ve===null?me=jt:ve.sibling=jt,ve=jt);return r&&_e.forEach(function(Wi){return s(U,Wi)}),ut&&Ds(U,Ae),me}function pe(U,V,z,Z){var me=ue(z);if(typeof me!="function")throw Error(t(150));if(z=me.call(z),z==null)throw Error(t(151));for(var ve=me=null,_e=V,Ae=V=0,jt=null,Ke=z.next();_e!==null&&!Ke.done;Ae++,Ke=z.next()){_e.index>Ae?(jt=_e,_e=null):jt=_e.sibling;var Wi=K(U,_e,Ke.value,Z);if(Wi===null){_e===null&&(_e=jt);break}r&&_e&&Wi.alternate===null&&s(U,_e),V=p(Wi,V,Ae),ve===null?me=Wi:ve.sibling=Wi,ve=Wi,_e=jt}if(Ke.done)return a(U,_e),ut&&Ds(U,Ae),me;if(_e===null){for(;!Ke.done;Ae++,Ke=z.next())Ke=J(U,Ke.value,Z),Ke!==null&&(V=p(Ke,V,Ae),ve===null?me=Ke:ve.sibling=Ke,ve=Ke);return ut&&Ds(U,Ae),me}for(_e=c(U,_e);!Ke.done;Ae++,Ke=z.next())Ke=ae(_e,U,Ae,Ke.value,Z),Ke!==null&&(r&&Ke.alternate!==null&&_e.delete(Ke.key===null?Ae:Ke.key),V=p(Ke,V,Ae),ve===null?me=Ke:ve.sibling=Ke,ve=Ke);return r&&_e.forEach(function(mT){return s(U,mT)}),ut&&Ds(U,Ae),me}function Et(U,V,z,Z){if(typeof z=="object"&&z!==null&&z.type===P&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case be:e:{for(var me=z.key,ve=V;ve!==null;){if(ve.key===me){if(me=z.type,me===P){if(ve.tag===7){a(U,ve.sibling),V=d(ve,z.props.children),V.return=U,U=V;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ge&&Lm(me)===ve.type){a(U,ve.sibling),V=d(ve,z.props),V.ref=Ma(U,ve,z),V.return=U,U=V;break e}a(U,ve);break}else s(U,ve);ve=ve.sibling}z.type===P?(V=Ms(z.props.children,U.mode,Z,z.key),V.return=U,U=V):(Z=xu(z.type,z.key,z.props,null,U.mode,Z),Z.ref=Ma(U,V,z),Z.return=U,U=Z)}return E(U);case ye:e:{for(ve=z.key;V!==null;){if(V.key===ve)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(U,V.sibling),V=d(V,z.children||[]),V.return=U,U=V;break e}else{a(U,V);break}else s(U,V);V=V.sibling}V=Ad(z,U.mode,Z),V.return=U,U=V}return E(U);case Ge:return ve=z._init,Et(U,V,ve(z._payload),Z)}if(dt(z))return fe(U,V,z,Z);if(ue(z))return pe(U,V,z,Z);lu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(a(U,V.sibling),V=d(V,z),V.return=U,U=V):(a(U,V),V=Id(z,U.mode,Z),V.return=U,U=V),E(U)):a(U,V)}return Et}var Do=jm(!0),Fm=jm(!1),uu=bi(null),cu=null,Po=null,Oh=null;function Vh(){Oh=Po=cu=null}function Mh(r){var s=uu.current;at(uu),r._currentValue=s}function Lh(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function Ro(r,s){cu=r,Oh=Po=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(pn=!0),r.firstContext=null)}function $n(r){var s=r._currentValue;if(Oh!==r)if(r={context:r,memoizedValue:s,next:null},Po===null){if(cu===null)throw Error(t(308));Po=r,cu.dependencies={lanes:0,firstContext:r}}else Po=Po.next=r;return s}var Ps=null;function jh(r){Ps===null?Ps=[r]:Ps.push(r)}function Um(r,s,a,c){var d=s.interleaved;return d===null?(a.next=a,jh(s)):(a.next=d.next,d.next=a),s.interleaved=a,ri(r,c)}function ri(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Mi=!1;function Fh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ii(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Li(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(qe&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,ri(r,a)}return d=c.interleaved,d===null?(s.next=s,jh(c)):(s.next=d.next,d.next=s),c.interleaved=s,ri(r,a)}function hu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ya(r,a)}}function zm(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=E:p=p.next=E,a=a.next}while(a!==null);p===null?d=p=s:p=p.next=s}else d=p=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function du(r,s,a,c){var d=r.updateQueue;Mi=!1;var p=d.firstBaseUpdate,E=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var b=k,$=b.next;b.next=null,E===null?p=$:E.next=$,E=b;var Q=r.alternate;Q!==null&&(Q=Q.updateQueue,k=Q.lastBaseUpdate,k!==E&&(k===null?Q.firstBaseUpdate=$:k.next=$,Q.lastBaseUpdate=b))}if(p!==null){var J=d.baseState;E=0,Q=$=b=null,k=p;do{var K=k.lane,ae=k.eventTime;if((c&K)===K){Q!==null&&(Q=Q.next={eventTime:ae,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var fe=r,pe=k;switch(K=s,ae=a,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){J=fe.call(ae,J,K);break e}J=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,K=typeof fe=="function"?fe.call(ae,J,K):fe,K==null)break e;J=te({},J,K);break e;case 2:Mi=!0}}k.callback!==null&&k.lane!==0&&(r.flags|=64,K=d.effects,K===null?d.effects=[k]:K.push(k))}else ae={eventTime:ae,lane:K,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Q===null?($=Q=ae,b=J):Q=Q.next=ae,E|=K;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;K=k,k=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);if(Q===null&&(b=J),d.baseState=b,d.firstBaseUpdate=$,d.lastBaseUpdate=Q,s=d.shared.interleaved,s!==null){d=s;do E|=d.lane,d=d.next;while(d!==s)}else p===null&&(d.shared.lanes=0);xs|=E,r.lanes=E,r.memoizedState=J}}function $m(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var La={},kr=bi(La),ja=bi(La),Fa=bi(La);function Rs(r){if(r===La)throw Error(t(174));return r}function Uh(r,s){switch(tt(Fa,s),tt(ja,r),tt(kr,La),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:_i(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=_i(s,r)}at(kr),tt(kr,s)}function No(){at(kr),at(ja),at(Fa)}function Wm(r){Rs(Fa.current);var s=Rs(kr.current),a=_i(s,r.type);s!==a&&(tt(ja,r),tt(kr,a))}function Bh(r){ja.current===r&&(at(kr),at(ja))}var pt=bi(0);function fu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var zh=[];function $h(){for(var r=0;r<zh.length;r++)zh[r]._workInProgressVersionPrimary=null;zh.length=0}var pu=ne.ReactCurrentDispatcher,Wh=ne.ReactCurrentBatchConfig,Ns=0,mt=null,Nt=null,Mt=null,mu=!1,Ua=!1,Ba=0,L0=0;function Jt(){throw Error(t(321))}function Hh(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Zn(r[a],s[a]))return!1;return!0}function qh(r,s,a,c,d,p){if(Ns=p,mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,pu.current=r===null||r.memoizedState===null?B0:z0,r=a(c,d),Ua){p=0;do{if(Ua=!1,Ba=0,25<=p)throw Error(t(301));p+=1,Mt=Nt=null,s.updateQueue=null,pu.current=$0,r=a(c,d)}while(Ua)}if(pu.current=vu,s=Nt!==null&&Nt.next!==null,Ns=0,Mt=Nt=mt=null,mu=!1,s)throw Error(t(300));return r}function Gh(){var r=Ba!==0;return Ba=0,r}function Dr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?mt.memoizedState=Mt=r:Mt=Mt.next=r,Mt}function Wn(){if(Nt===null){var r=mt.alternate;r=r!==null?r.memoizedState:null}else r=Nt.next;var s=Mt===null?mt.memoizedState:Mt.next;if(s!==null)Mt=s,Nt=r;else{if(r===null)throw Error(t(310));Nt=r,r={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Mt===null?mt.memoizedState=Mt=r:Mt=Mt.next=r}return Mt}function za(r,s){return typeof s=="function"?s(r):s}function Kh(r){var s=Wn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=Nt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var E=d.next;d.next=p.next,p.next=E}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var k=E=null,b=null,$=p;do{var Q=$.lane;if((Ns&Q)===Q)b!==null&&(b=b.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:r(c,$.action);else{var J={lane:Q,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};b===null?(k=b=J,E=c):b=b.next=J,mt.lanes|=Q,xs|=Q}$=$.next}while($!==null&&$!==p);b===null?E=c:b.next=k,Zn(c,s.memoizedState)||(pn=!0),s.memoizedState=c,s.baseState=E,s.baseQueue=b,a.lastRenderedState=c}if(r=a.interleaved,r!==null){d=r;do p=d.lane,mt.lanes|=p,xs|=p,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Yh(r){var s=Wn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=a.dispatch,d=a.pending,p=s.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do p=r(p,E.action),E=E.next;while(E!==d);Zn(p,s.memoizedState)||(pn=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,c]}function Hm(){}function qm(r,s){var a=mt,c=Wn(),d=s(),p=!Zn(c.memoizedState,d);if(p&&(c.memoizedState=d,pn=!0),c=c.queue,Qh(Ym.bind(null,a,c,r),[r]),c.getSnapshot!==s||p||Mt!==null&&Mt.memoizedState.tag&1){if(a.flags|=2048,$a(9,Km.bind(null,a,c,d,s),void 0,null),Lt===null)throw Error(t(349));(Ns&30)!==0||Gm(a,s,d)}return d}function Gm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=mt.updateQueue,s===null?(s={lastEffect:null,stores:null},mt.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Km(r,s,a,c){s.value=a,s.getSnapshot=c,Qm(s)&&Jm(r)}function Ym(r,s,a){return a(function(){Qm(s)&&Jm(r)})}function Qm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Zn(r,a)}catch{return!0}}function Jm(r){var s=ri(r,1);s!==null&&ir(s,r,1,-1)}function Xm(r){var s=Dr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:r},s.queue=r,r=r.dispatch=U0.bind(null,mt,r),[s.memoizedState,r]}function $a(r,s,a,c){return r={tag:r,create:s,destroy:a,deps:c,next:null},s=mt.updateQueue,s===null?(s={lastEffect:null,stores:null},mt.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r)),r}function Zm(){return Wn().memoizedState}function gu(r,s,a,c){var d=Dr();mt.flags|=r,d.memoizedState=$a(1|s,a,void 0,c===void 0?null:c)}function yu(r,s,a,c){var d=Wn();c=c===void 0?null:c;var p=void 0;if(Nt!==null){var E=Nt.memoizedState;if(p=E.destroy,c!==null&&Hh(c,E.deps)){d.memoizedState=$a(s,a,p,c);return}}mt.flags|=r,d.memoizedState=$a(1|s,a,p,c)}function eg(r,s){return gu(8390656,8,r,s)}function Qh(r,s){return yu(2048,8,r,s)}function tg(r,s){return yu(4,2,r,s)}function ng(r,s){return yu(4,4,r,s)}function rg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function ig(r,s,a){return a=a!=null?a.concat([r]):null,yu(4,4,rg.bind(null,s,r),a)}function Jh(){}function sg(r,s){var a=Wn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Hh(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function og(r,s){var a=Wn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Hh(s,c[1])?c[0]:(r=r(),a.memoizedState=[r,s],r)}function ag(r,s,a){return(Ns&21)===0?(r.baseState&&(r.baseState=!1,pn=!0),r.memoizedState=a):(Zn(a,s)||(a=ma(),mt.lanes|=a,xs|=a,r.baseState=!0),s)}function j0(r,s){var a=ze;ze=a!==0&&4>a?a:4,r(!0);var c=Wh.transition;Wh.transition={};try{r(!1),s()}finally{ze=a,Wh.transition=c}}function lg(){return Wn().memoizedState}function F0(r,s,a){var c=Bi(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},ug(r))cg(s,a);else if(a=Um(r,s,a,c),a!==null){var d=an();ir(a,r,c,d),hg(a,s,c)}}function U0(r,s,a){var c=Bi(r),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(ug(r))cg(s,d);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var E=s.lastRenderedState,k=p(E,a);if(d.hasEagerState=!0,d.eagerState=k,Zn(k,E)){var b=s.interleaved;b===null?(d.next=d,jh(s)):(d.next=b.next,b.next=d),s.interleaved=d;return}}catch{}finally{}a=Um(r,s,d,c),a!==null&&(d=an(),ir(a,r,c,d),hg(a,s,c))}}function ug(r){var s=r.alternate;return r===mt||s!==null&&s===mt}function cg(r,s){Ua=mu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function hg(r,s,a){if((a&4194240)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ya(r,a)}}var vu={readContext:$n,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},B0={readContext:$n,useCallback:function(r,s){return Dr().memoizedState=[r,s===void 0?null:s],r},useContext:$n,useEffect:eg,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,gu(4194308,4,rg.bind(null,s,r),a)},useLayoutEffect:function(r,s){return gu(4194308,4,r,s)},useInsertionEffect:function(r,s){return gu(4,2,r,s)},useMemo:function(r,s){var a=Dr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var c=Dr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=F0.bind(null,mt,r),[c.memoizedState,r]},useRef:function(r){var s=Dr();return r={current:r},s.memoizedState=r},useState:Xm,useDebugValue:Jh,useDeferredValue:function(r){return Dr().memoizedState=r},useTransition:function(){var r=Xm(!1),s=r[0];return r=j0.bind(null,r[1]),Dr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var c=mt,d=Dr();if(ut){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Lt===null)throw Error(t(349));(Ns&30)!==0||Gm(c,s,a)}d.memoizedState=a;var p={value:a,getSnapshot:s};return d.queue=p,eg(Ym.bind(null,c,p,r),[r]),c.flags|=2048,$a(9,Km.bind(null,c,p,a,s),void 0,null),a},useId:function(){var r=Dr(),s=Lt.identifierPrefix;if(ut){var a=ni,c=ti;a=(c&~(1<<32-An(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ba++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=L0++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},z0={readContext:$n,useCallback:sg,useContext:$n,useEffect:Qh,useImperativeHandle:ig,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:og,useReducer:Kh,useRef:Zm,useState:function(){return Kh(za)},useDebugValue:Jh,useDeferredValue:function(r){var s=Wn();return ag(s,Nt.memoizedState,r)},useTransition:function(){var r=Kh(za)[0],s=Wn().memoizedState;return[r,s]},useMutableSource:Hm,useSyncExternalStore:qm,useId:lg,unstable_isNewReconciler:!1},$0={readContext:$n,useCallback:sg,useContext:$n,useEffect:Qh,useImperativeHandle:ig,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:og,useReducer:Yh,useRef:Zm,useState:function(){return Yh(za)},useDebugValue:Jh,useDeferredValue:function(r){var s=Wn();return Nt===null?s.memoizedState=r:ag(s,Nt.memoizedState,r)},useTransition:function(){var r=Yh(za)[0],s=Wn().memoizedState;return[r,s]},useMutableSource:Hm,useSyncExternalStore:qm,useId:lg,unstable_isNewReconciler:!1};function tr(r,s){if(r&&r.defaultProps){s=te({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Xh(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:te({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var _u={isMounted:function(r){return(r=r._reactInternals)?Sn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var c=an(),d=Bi(r),p=ii(c,d);p.payload=s,a!=null&&(p.callback=a),s=Li(r,p,d),s!==null&&(ir(s,r,d,c),hu(s,r,d))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=an(),d=Bi(r),p=ii(c,d);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=Li(r,p,d),s!==null&&(ir(s,r,d,c),hu(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=an(),c=Bi(r),d=ii(a,c);d.tag=2,s!=null&&(d.callback=s),s=Li(r,d,c),s!==null&&(ir(s,r,c,a),hu(s,r,c))}};function dg(r,s,a,c,d,p,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,p,E):s.prototype&&s.prototype.isPureReactComponent?!Pa(a,c)||!Pa(d,p):!0}function fg(r,s,a){var c=!1,d=Oi,p=s.contextType;return typeof p=="object"&&p!==null?p=$n(p):(d=fn(s)?Cs:Qt.current,c=s.contextTypes,p=(c=c!=null)?Io(r,d):Oi),s=new s(a,p),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=_u,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=p),s}function pg(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&_u.enqueueReplaceState(s,s.state,null)}function Zh(r,s,a,c){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Fh(r);var p=s.contextType;typeof p=="object"&&p!==null?d.context=$n(p):(p=fn(s)?Cs:Qt.current,d.context=Io(r,p)),d.state=r.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Xh(r,s,p,a),d.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&_u.enqueueReplaceState(d,d.state,null),du(r,a,d,c),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function xo(r,s){try{var a="",c=s;do a+=Ne(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:r,source:s,stack:d,digest:null}}function ed(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function td(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var W0=typeof WeakMap=="function"?WeakMap:Map;function mg(r,s,a){a=ii(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Cu||(Cu=!0,gd=c),td(r,s)},a}function gg(r,s,a){a=ii(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){td(r,s)}}var p=r.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){td(r,s),typeof c!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function yg(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new W0;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),r=iT.bind(null,r,s,a),s.then(r,r))}function vg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function _g(r,s,a,c,d){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=ii(-1,1),s.tag=2,Li(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var H0=ne.ReactCurrentOwner,pn=!1;function on(r,s,a,c){s.child=r===null?Fm(s,null,a,c):Do(s,r.child,a,c)}function wg(r,s,a,c,d){a=a.render;var p=s.ref;return Ro(s,d),c=qh(r,s,a,c,p,d),a=Gh(),r!==null&&!pn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,si(r,s,d)):(ut&&a&&Ph(s),s.flags|=1,on(r,s,c,d),s.child)}function Eg(r,s,a,c,d){if(r===null){var p=a.type;return typeof p=="function"&&!Sd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,Tg(r,s,p,c,d)):(r=xu(a.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,(r.lanes&d)===0){var E=p.memoizedProps;if(a=a.compare,a=a!==null?a:Pa,a(E,c)&&r.ref===s.ref)return si(r,s,d)}return s.flags|=1,r=$i(p,c),r.ref=s.ref,r.return=s,s.child=r}function Tg(r,s,a,c,d){if(r!==null){var p=r.memoizedProps;if(Pa(p,c)&&r.ref===s.ref)if(pn=!1,s.pendingProps=c=p,(r.lanes&d)!==0)(r.flags&131072)!==0&&(pn=!0);else return s.lanes=r.lanes,si(r,s,d)}return nd(r,s,a,c,d)}function Sg(r,s,a){var c=s.pendingProps,d=c.children,p=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Oo,xn),xn|=a;else{if((a&1073741824)===0)return r=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,tt(Oo,xn),xn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,tt(Oo,xn),xn|=c}else p!==null?(c=p.baseLanes|a,s.memoizedState=null):c=a,tt(Oo,xn),xn|=c;return on(r,s,d,a),s.child}function Ig(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function nd(r,s,a,c,d){var p=fn(a)?Cs:Qt.current;return p=Io(s,p),Ro(s,d),a=qh(r,s,a,c,p,d),c=Gh(),r!==null&&!pn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,si(r,s,d)):(ut&&c&&Ph(s),s.flags|=1,on(r,s,a,d),s.child)}function Ag(r,s,a,c,d){if(fn(a)){var p=!0;ru(s)}else p=!1;if(Ro(s,d),s.stateNode===null)Eu(r,s),fg(s,a,c),Zh(s,a,c,d),c=!0;else if(r===null){var E=s.stateNode,k=s.memoizedProps;E.props=k;var b=E.context,$=a.contextType;typeof $=="object"&&$!==null?$=$n($):($=fn(a)?Cs:Qt.current,$=Io(s,$));var Q=a.getDerivedStateFromProps,J=typeof Q=="function"||typeof E.getSnapshotBeforeUpdate=="function";J||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(k!==c||b!==$)&&pg(s,E,c,$),Mi=!1;var K=s.memoizedState;E.state=K,du(s,c,E,d),b=s.memoizedState,k!==c||K!==b||dn.current||Mi?(typeof Q=="function"&&(Xh(s,a,Q,c),b=s.memoizedState),(k=Mi||dg(s,a,k,c,K,b,$))?(J||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=b),E.props=c,E.state=b,E.context=$,c=k):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{E=s.stateNode,Bm(r,s),k=s.memoizedProps,$=s.type===s.elementType?k:tr(s.type,k),E.props=$,J=s.pendingProps,K=E.context,b=a.contextType,typeof b=="object"&&b!==null?b=$n(b):(b=fn(a)?Cs:Qt.current,b=Io(s,b));var ae=a.getDerivedStateFromProps;(Q=typeof ae=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(k!==J||K!==b)&&pg(s,E,c,b),Mi=!1,K=s.memoizedState,E.state=K,du(s,c,E,d);var fe=s.memoizedState;k!==J||K!==fe||dn.current||Mi?(typeof ae=="function"&&(Xh(s,a,ae,c),fe=s.memoizedState),($=Mi||dg(s,a,$,c,K,fe,b)||!1)?(Q||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,fe,b),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,fe,b)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||k===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=fe),E.props=c,E.state=fe,E.context=b,c=$):(typeof E.componentDidUpdate!="function"||k===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),c=!1)}return rd(r,s,a,c,p,d)}function rd(r,s,a,c,d,p){Ig(r,s);var E=(s.flags&128)!==0;if(!c&&!E)return d&&Rm(s,a,!1),si(r,s,p);c=s.stateNode,H0.current=s;var k=E&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&E?(s.child=Do(s,r.child,null,p),s.child=Do(s,null,k,p)):on(r,s,k,p),s.memoizedState=c.state,d&&Rm(s,a,!0),s.child}function Cg(r){var s=r.stateNode;s.pendingContext?Dm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Dm(r,s.context,!1),Uh(r,s.containerInfo)}function kg(r,s,a,c,d){return ko(),bh(d),s.flags|=256,on(r,s,a,c),s.child}var id={dehydrated:null,treeContext:null,retryLane:0};function sd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Dg(r,s,a){var c=s.pendingProps,d=pt.current,p=!1,E=(s.flags&128)!==0,k;if((k=E)||(k=r!==null&&r.memoizedState===null?!1:(d&2)!==0),k?(p=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),tt(pt,d&1),r===null)return xh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=c.children,r=c.fallback,p?(c=s.mode,p=s.child,E={mode:"hidden",children:E},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=E):p=bu(E,c,0,null),r=Ms(r,c,a,null),p.return=s,r.return=s,p.sibling=r,s.child=p,s.child.memoizedState=sd(a),s.memoizedState=id,r):od(s,E));if(d=r.memoizedState,d!==null&&(k=d.dehydrated,k!==null))return q0(r,s,E,c,k,d,a);if(p){p=c.fallback,E=s.mode,d=r.child,k=d.sibling;var b={mode:"hidden",children:c.children};return(E&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=b,s.deletions=null):(c=$i(d,b),c.subtreeFlags=d.subtreeFlags&14680064),k!==null?p=$i(k,p):(p=Ms(p,E,a,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,E=r.child.memoizedState,E=E===null?sd(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},p.memoizedState=E,p.childLanes=r.childLanes&~a,s.memoizedState=id,c}return p=r.child,r=p.sibling,c=$i(p,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=c,s.memoizedState=null,c}function od(r,s){return s=bu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function wu(r,s,a,c){return c!==null&&bh(c),Do(s,r.child,null,a),r=od(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function q0(r,s,a,c,d,p,E){if(a)return s.flags&256?(s.flags&=-257,c=ed(Error(t(422))),wu(r,s,E,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(p=c.fallback,d=s.mode,c=bu({mode:"visible",children:c.children},d,0,null),p=Ms(p,d,E,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,(s.mode&1)!==0&&Do(s,r.child,null,E),s.child.memoizedState=sd(E),s.memoizedState=id,p);if((s.mode&1)===0)return wu(r,s,E,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var k=c.dgst;return c=k,p=Error(t(419)),c=ed(p,c,void 0),wu(r,s,E,c)}if(k=(E&r.childLanes)!==0,pn||k){if(c=Lt,c!==null){switch(E&-E){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|E))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,ri(r,d),ir(c,r,d,-1))}return Td(),c=ed(Error(t(421))),wu(r,s,E,c)}return d.data==="$?"?(s.flags|=128,s.child=r.child,s=sT.bind(null,r),d._reactRetry=s,null):(r=p.treeContext,Nn=xi(d.nextSibling),Rn=s,ut=!0,er=null,r!==null&&(Bn[zn++]=ti,Bn[zn++]=ni,Bn[zn++]=ks,ti=r.id,ni=r.overflow,ks=s),s=od(s,c.children),s.flags|=4096,s)}function Pg(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Lh(r.return,s,a)}function ad(r,s,a,c,d){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Rg(r,s,a){var c=s.pendingProps,d=c.revealOrder,p=c.tail;if(on(r,s,c.children,a),c=pt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Pg(r,a,s);else if(r.tag===19)Pg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(tt(pt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)r=a.alternate,r!==null&&fu(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),ad(s,!1,d,a,p);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&fu(r)===null){s.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}ad(s,!0,a,null,p);break;case"together":ad(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Eu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function si(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),xs|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=$i(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=$i(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function G0(r,s,a){switch(s.tag){case 3:Cg(s),ko();break;case 5:Wm(s);break;case 1:fn(s.type)&&ru(s);break;case 4:Uh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;tt(uu,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(tt(pt,pt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Dg(r,s,a):(tt(pt,pt.current&1),r=si(r,s,a),r!==null?r.sibling:null);tt(pt,pt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(r.flags&128)!==0){if(c)return Rg(r,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),tt(pt,pt.current),c)break;return null;case 22:case 23:return s.lanes=0,Sg(r,s,a)}return si(r,s,a)}var Ng,ld,xg,bg;Ng=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ld=function(){},xg=function(r,s,a,c){var d=r.memoizedProps;if(d!==c){r=s.stateNode,Rs(kr.current);var p=null;switch(a){case"input":d=He(r,d),c=He(r,c),p=[];break;case"select":d=te({},d,{value:void 0}),c=te({},c,{value:void 0}),p=[];break;case"textarea":d=cs(r,d),c=cs(r,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=eu)}un(a,c);var E;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var k=d[$];for(E in k)k.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?p||(p=[]):(p=p||[]).push($,null));for($ in c){var b=c[$];if(k=d!=null?d[$]:void 0,c.hasOwnProperty($)&&b!==k&&(b!=null||k!=null))if($==="style")if(k){for(E in k)!k.hasOwnProperty(E)||b&&b.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in b)b.hasOwnProperty(E)&&k[E]!==b[E]&&(a||(a={}),a[E]=b[E])}else a||(p||(p=[]),p.push($,a)),a=b;else $==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,k=k?k.__html:void 0,b!=null&&k!==b&&(p=p||[]).push($,b)):$==="children"?typeof b!="string"&&typeof b!="number"||(p=p||[]).push($,""+b):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(b!=null&&$==="onScroll"&&ot("scroll",r),p||k===b||(p=[])):(p=p||[]).push($,b))}a&&(p=p||[]).push("style",a);var $=p;(s.updateQueue=$)&&(s.flags|=4)}},bg=function(r,s,a,c){a!==c&&(s.flags|=4)};function Wa(r,s){if(!ut)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Xt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function K0(r,s,a){var c=s.pendingProps;switch(Rh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(s),null;case 1:return fn(s.type)&&nu(),Xt(s),null;case 3:return c=s.stateNode,No(),at(dn),at(Qt),$h(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(au(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,er!==null&&(_d(er),er=null))),ld(r,s),Xt(s),null;case 5:Bh(s);var d=Rs(Fa.current);if(a=s.type,r!==null&&s.stateNode!=null)xg(r,s,a,c,d),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Xt(s),null}if(r=Rs(kr.current),au(s)){c=s.stateNode,a=s.type;var p=s.memoizedProps;switch(c[Cr]=s,c[Oa]=p,r=(s.mode&1)!==0,a){case"dialog":ot("cancel",c),ot("close",c);break;case"iframe":case"object":case"embed":ot("load",c);break;case"video":case"audio":for(d=0;d<Na.length;d++)ot(Na[d],c);break;case"source":ot("error",c);break;case"img":case"image":case"link":ot("error",c),ot("load",c);break;case"details":ot("toggle",c);break;case"input":On(c,p),ot("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},ot("invalid",c);break;case"textarea":vi(c,p),ot("invalid",c)}un(a,p),d=null;for(var E in p)if(p.hasOwnProperty(E)){var k=p[E];E==="children"?typeof k=="string"?c.textContent!==k&&(p.suppressHydrationWarning!==!0&&Zl(c.textContent,k,r),d=["children",k]):typeof k=="number"&&c.textContent!==""+k&&(p.suppressHydrationWarning!==!0&&Zl(c.textContent,k,r),d=["children",""+k]):o.hasOwnProperty(E)&&k!=null&&E==="onScroll"&&ot("scroll",c)}switch(a){case"input":Me(c),yi(c,p,!0);break;case"textarea":Me(c),ur(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=eu)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{E=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=hs(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=E.createElement(a,{is:c.is}):(r=E.createElement(a),a==="select"&&(E=r,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):r=E.createElementNS(r,a),r[Cr]=s,r[Oa]=c,Ng(r,s,!1,!1),s.stateNode=r;e:{switch(E=zr(a,c),a){case"dialog":ot("cancel",r),ot("close",r),d=c;break;case"iframe":case"object":case"embed":ot("load",r),d=c;break;case"video":case"audio":for(d=0;d<Na.length;d++)ot(Na[d],r);d=c;break;case"source":ot("error",r),d=c;break;case"img":case"image":case"link":ot("error",r),ot("load",r),d=c;break;case"details":ot("toggle",r),d=c;break;case"input":On(r,c),d=He(r,c),ot("invalid",r);break;case"option":d=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},d=te({},c,{value:void 0}),ot("invalid",r);break;case"textarea":vi(r,c),d=cs(r,c),ot("invalid",r);break;default:d=c}un(a,d),k=d;for(p in k)if(k.hasOwnProperty(p)){var b=k[p];p==="style"?Br(r,b):p==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&wi(r,b)):p==="children"?typeof b=="string"?(a!=="textarea"||b!=="")&&hr(r,b):typeof b=="number"&&hr(r,""+b):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?b!=null&&p==="onScroll"&&ot("scroll",r):b!=null&&oe(r,p,b,E))}switch(a){case"input":Me(r),yi(r,c,!1);break;case"textarea":Me(r),ur(r);break;case"option":c.value!=null&&r.setAttribute("value",""+he(c.value));break;case"select":r.multiple=!!c.multiple,p=c.value,p!=null?_n(r,!!c.multiple,p,!1):c.defaultValue!=null&&_n(r,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=eu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Xt(s),null;case 6:if(r&&s.stateNode!=null)bg(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Rs(Fa.current),Rs(kr.current),au(s)){if(c=s.stateNode,a=s.memoizedProps,c[Cr]=s,(p=c.nodeValue!==a)&&(r=Rn,r!==null))switch(r.tag){case 3:Zl(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Zl(c.nodeValue,a,(r.mode&1)!==0)}p&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Cr]=s,s.stateNode=c}return Xt(s),null;case 13:if(at(pt),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ut&&Nn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Mm(),ko(),s.flags|=98560,p=!1;else if(p=au(s),c!==null&&c.dehydrated!==null){if(r===null){if(!p)throw Error(t(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[Cr]=s}else ko(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Xt(s),p=!1}else er!==null&&(_d(er),er=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(pt.current&1)!==0?xt===0&&(xt=3):Td())),s.updateQueue!==null&&(s.flags|=4),Xt(s),null);case 4:return No(),ld(r,s),r===null&&xa(s.stateNode.containerInfo),Xt(s),null;case 10:return Mh(s.type._context),Xt(s),null;case 17:return fn(s.type)&&nu(),Xt(s),null;case 19:if(at(pt),p=s.memoizedState,p===null)return Xt(s),null;if(c=(s.flags&128)!==0,E=p.rendering,E===null)if(c)Wa(p,!1);else{if(xt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(E=fu(r),E!==null){for(s.flags|=128,Wa(p,!1),c=E.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)p=a,r=c,p.flags&=14680066,E=p.alternate,E===null?(p.childLanes=0,p.lanes=r,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=E.childLanes,p.lanes=E.lanes,p.child=E.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=E.memoizedProps,p.memoizedState=E.memoizedState,p.updateQueue=E.updateQueue,p.type=E.type,r=E.dependencies,p.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return tt(pt,pt.current&1|2),s.child}r=r.sibling}p.tail!==null&&st()>Vo&&(s.flags|=128,c=!0,Wa(p,!1),s.lanes=4194304)}else{if(!c)if(r=fu(E),r!==null){if(s.flags|=128,c=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Wa(p,!0),p.tail===null&&p.tailMode==="hidden"&&!E.alternate&&!ut)return Xt(s),null}else 2*st()-p.renderingStartTime>Vo&&a!==1073741824&&(s.flags|=128,c=!0,Wa(p,!1),s.lanes=4194304);p.isBackwards?(E.sibling=s.child,s.child=E):(a=p.last,a!==null?a.sibling=E:s.child=E,p.last=E)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=st(),s.sibling=null,a=pt.current,tt(pt,c?a&1|2:a&1),s):(Xt(s),null);case 22:case 23:return Ed(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(xn&1073741824)!==0&&(Xt(s),s.subtreeFlags&6&&(s.flags|=8192)):Xt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Y0(r,s){switch(Rh(s),s.tag){case 1:return fn(s.type)&&nu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return No(),at(dn),at(Qt),$h(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(at(pt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ko()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return at(pt),null;case 4:return No(),null;case 10:return Mh(s.type._context),null;case 22:case 23:return Ed(),null;case 24:return null;default:return null}}var Tu=!1,Zt=!1,Q0=typeof WeakSet=="function"?WeakSet:Set,ce=null;function bo(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){_t(r,s,c)}else a.current=null}function ud(r,s,a){try{a()}catch(c){_t(r,s,c)}}var Og=!1;function J0(r,s){if(Eh=Qr,r=dm(),fh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var E=0,k=-1,b=-1,$=0,Q=0,J=r,K=null;t:for(;;){for(var ae;J!==a||d!==0&&J.nodeType!==3||(k=E+d),J!==p||c!==0&&J.nodeType!==3||(b=E+c),J.nodeType===3&&(E+=J.nodeValue.length),(ae=J.firstChild)!==null;)K=J,J=ae;for(;;){if(J===r)break t;if(K===a&&++$===d&&(k=E),K===p&&++Q===c&&(b=E),(ae=J.nextSibling)!==null)break;J=K,K=J.parentNode}J=ae}a=k===-1||b===-1?null:{start:k,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Th={focusedElem:r,selectionRange:a},Qr=!1,ce=s;ce!==null;)if(s=ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ce=r;else for(;ce!==null;){s=ce;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,Et=fe.memoizedState,U=s.stateNode,V=U.getSnapshotBeforeUpdate(s.elementType===s.type?pe:tr(s.type,pe),Et);U.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){_t(s,s.return,Z)}if(r=s.sibling,r!==null){r.return=s.return,ce=r;break}ce=s.return}return fe=Og,Og=!1,fe}function Ha(r,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&r)===r){var p=d.destroy;d.destroy=void 0,p!==void 0&&ud(s,a,p)}d=d.next}while(d!==c)}}function Su(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function cd(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Vg(r){var s=r.alternate;s!==null&&(r.alternate=null,Vg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Cr],delete s[Oa],delete s[Ch],delete s[b0],delete s[O0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Mg(r){return r.tag===5||r.tag===3||r.tag===4}function Lg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Mg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function hd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=eu));else if(c!==4&&(r=r.child,r!==null))for(hd(r,s,a),r=r.sibling;r!==null;)hd(r,s,a),r=r.sibling}function dd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(dd(r,s,a),r=r.sibling;r!==null;)dd(r,s,a),r=r.sibling}var zt=null,nr=!1;function ji(r,s,a){for(a=a.child;a!==null;)jg(r,s,a),a=a.sibling}function jg(r,s,a){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(gs,a)}catch{}switch(a.tag){case 5:Zt||bo(a,s);case 6:var c=zt,d=nr;zt=null,ji(r,s,a),zt=c,nr=d,zt!==null&&(nr?(r=zt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):zt.removeChild(a.stateNode));break;case 18:zt!==null&&(nr?(r=zt,a=a.stateNode,r.nodeType===8?Ah(r.parentNode,a):r.nodeType===1&&Ah(r,a),Di(r)):Ah(zt,a.stateNode));break;case 4:c=zt,d=nr,zt=a.stateNode.containerInfo,nr=!0,ji(r,s,a),zt=c,nr=d;break;case 0:case 11:case 14:case 15:if(!Zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,E=p.destroy;p=p.tag,E!==void 0&&((p&2)!==0||(p&4)!==0)&&ud(a,s,E),d=d.next}while(d!==c)}ji(r,s,a);break;case 1:if(!Zt&&(bo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(k){_t(a,s,k)}ji(r,s,a);break;case 21:ji(r,s,a);break;case 22:a.mode&1?(Zt=(c=Zt)||a.memoizedState!==null,ji(r,s,a),Zt=c):ji(r,s,a);break;default:ji(r,s,a)}}function Fg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new Q0),s.forEach(function(c){var d=oT.bind(null,r,c);a.has(c)||(a.add(c),c.then(d,d))})}}function rr(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=r,E=s,k=E;e:for(;k!==null;){switch(k.tag){case 5:zt=k.stateNode,nr=!1;break e;case 3:zt=k.stateNode.containerInfo,nr=!0;break e;case 4:zt=k.stateNode.containerInfo,nr=!0;break e}k=k.return}if(zt===null)throw Error(t(160));jg(p,E,d),zt=null,nr=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch($){_t(d,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Ug(s,r),s=s.sibling}function Ug(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(rr(s,r),Pr(r),c&4){try{Ha(3,r,r.return),Su(3,r)}catch(pe){_t(r,r.return,pe)}try{Ha(5,r,r.return)}catch(pe){_t(r,r.return,pe)}}break;case 1:rr(s,r),Pr(r),c&512&&a!==null&&bo(a,a.return);break;case 5:if(rr(s,r),Pr(r),c&512&&a!==null&&bo(a,a.return),r.flags&32){var d=r.stateNode;try{hr(d,"")}catch(pe){_t(r,r.return,pe)}}if(c&4&&(d=r.stateNode,d!=null)){var p=r.memoizedProps,E=a!==null?a.memoizedProps:p,k=r.type,b=r.updateQueue;if(r.updateQueue=null,b!==null)try{k==="input"&&p.type==="radio"&&p.name!=null&&Pt(d,p),zr(k,E);var $=zr(k,p);for(E=0;E<b.length;E+=2){var Q=b[E],J=b[E+1];Q==="style"?Br(d,J):Q==="dangerouslySetInnerHTML"?wi(d,J):Q==="children"?hr(d,J):oe(d,Q,J,$)}switch(k){case"input":Vn(d,p);break;case"textarea":to(d,p);break;case"select":var K=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ae=p.value;ae!=null?_n(d,!!p.multiple,ae,!1):K!==!!p.multiple&&(p.defaultValue!=null?_n(d,!!p.multiple,p.defaultValue,!0):_n(d,!!p.multiple,p.multiple?[]:"",!1))}d[Oa]=p}catch(pe){_t(r,r.return,pe)}}break;case 6:if(rr(s,r),Pr(r),c&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,p=r.memoizedProps;try{d.nodeValue=p}catch(pe){_t(r,r.return,pe)}}break;case 3:if(rr(s,r),Pr(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Di(s.containerInfo)}catch(pe){_t(r,r.return,pe)}break;case 4:rr(s,r),Pr(r);break;case 13:rr(s,r),Pr(r),d=r.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(md=st())),c&4&&Fg(r);break;case 22:if(Q=a!==null&&a.memoizedState!==null,r.mode&1?(Zt=($=Zt)||Q,rr(s,r),Zt=$):rr(s,r),Pr(r),c&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!Q&&(r.mode&1)!==0)for(ce=r,Q=r.child;Q!==null;){for(J=ce=Q;ce!==null;){switch(K=ce,ae=K.child,K.tag){case 0:case 11:case 14:case 15:Ha(4,K,K.return);break;case 1:bo(K,K.return);var fe=K.stateNode;if(typeof fe.componentWillUnmount=="function"){c=K,a=K.return;try{s=c,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(pe){_t(c,a,pe)}}break;case 5:bo(K,K.return);break;case 22:if(K.memoizedState!==null){$g(J);continue}}ae!==null?(ae.return=K,ce=ae):$g(J)}Q=Q.sibling}e:for(Q=null,J=r;;){if(J.tag===5){if(Q===null){Q=J;try{d=J.stateNode,$?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(k=J.stateNode,b=J.memoizedProps.style,E=b!=null&&b.hasOwnProperty("display")?b.display:null,k.style.display=wn("display",E))}catch(pe){_t(r,r.return,pe)}}}else if(J.tag===6){if(Q===null)try{J.stateNode.nodeValue=$?"":J.memoizedProps}catch(pe){_t(r,r.return,pe)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===r)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===r)break e;for(;J.sibling===null;){if(J.return===null||J.return===r)break e;Q===J&&(Q=null),J=J.return}Q===J&&(Q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:rr(s,r),Pr(r),c&4&&Fg(r);break;case 21:break;default:rr(s,r),Pr(r)}}function Pr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Mg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(hr(d,""),c.flags&=-33);var p=Lg(r);dd(r,p,d);break;case 3:case 4:var E=c.stateNode.containerInfo,k=Lg(r);hd(r,k,E);break;default:throw Error(t(161))}}catch(b){_t(r,r.return,b)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function X0(r,s,a){ce=r,Bg(r)}function Bg(r,s,a){for(var c=(r.mode&1)!==0;ce!==null;){var d=ce,p=d.child;if(d.tag===22&&c){var E=d.memoizedState!==null||Tu;if(!E){var k=d.alternate,b=k!==null&&k.memoizedState!==null||Zt;k=Tu;var $=Zt;if(Tu=E,(Zt=b)&&!$)for(ce=d;ce!==null;)E=ce,b=E.child,E.tag===22&&E.memoizedState!==null?Wg(d):b!==null?(b.return=E,ce=b):Wg(d);for(;p!==null;)ce=p,Bg(p),p=p.sibling;ce=d,Tu=k,Zt=$}zg(r)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ce=p):zg(r)}}function zg(r){for(;ce!==null;){var s=ce;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Zt||Su(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Zt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:tr(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&$m(s,p,c);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}$m(s,E,a)}break;case 5:var k=s.stateNode;if(a===null&&s.flags&4){a=k;var b=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&a.focus();break;case"img":b.src&&(a.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var Q=$.memoizedState;if(Q!==null){var J=Q.dehydrated;J!==null&&Di(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zt||s.flags&512&&cd(s)}catch(K){_t(s,s.return,K)}}if(s===r){ce=null;break}if(a=s.sibling,a!==null){a.return=s.return,ce=a;break}ce=s.return}}function $g(r){for(;ce!==null;){var s=ce;if(s===r){ce=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ce=a;break}ce=s.return}}function Wg(r){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Su(4,s)}catch(b){_t(s,a,b)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(b){_t(s,d,b)}}var p=s.return;try{cd(s)}catch(b){_t(s,p,b)}break;case 5:var E=s.return;try{cd(s)}catch(b){_t(s,E,b)}}}catch(b){_t(s,s.return,b)}if(s===r){ce=null;break}var k=s.sibling;if(k!==null){k.return=s.return,ce=k;break}ce=s.return}}var Z0=Math.ceil,Iu=ne.ReactCurrentDispatcher,fd=ne.ReactCurrentOwner,Hn=ne.ReactCurrentBatchConfig,qe=0,Lt=null,Ct=null,$t=0,xn=0,Oo=bi(0),xt=0,qa=null,xs=0,Au=0,pd=0,Ga=null,mn=null,md=0,Vo=1/0,oi=null,Cu=!1,gd=null,Fi=null,ku=!1,Ui=null,Du=0,Ka=0,yd=null,Pu=-1,Ru=0;function an(){return(qe&6)!==0?st():Pu!==-1?Pu:Pu=st()}function Bi(r){return(r.mode&1)===0?1:(qe&2)!==0&&$t!==0?$t&-$t:M0.transition!==null?(Ru===0&&(Ru=ma()),Ru):(r=ze,r!==0||(r=window.event,r=r===void 0?16:uo(r.type)),r)}function ir(r,s,a,c){if(50<Ka)throw Ka=0,yd=null,Error(t(185));ws(r,a,c),((qe&2)===0||r!==Lt)&&(r===Lt&&((qe&2)===0&&(Au|=a),xt===4&&zi(r,$t)),gn(r,c),a===1&&qe===0&&(s.mode&1)===0&&(Vo=st()+500,iu&&Vi()))}function gn(r,s){var a=r.callbackNode;_s(r,s);var c=Gr(r,r===Lt?$t:0);if(c===0)a!==null&&Ii(a),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(a!=null&&Ii(a),s===1)r.tag===0?V0(qg.bind(null,r)):Nm(qg.bind(null,r)),N0(function(){(qe&6)===0&&Vi()}),a=null;else{switch(gr(c)){case 1:a=ro;break;case 4:a=da;break;case 16:a=ms;break;case 536870912:a=io;break;default:a=ms}a=ey(a,Hg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Hg(r,s){if(Pu=-1,Ru=0,(qe&6)!==0)throw Error(t(327));var a=r.callbackNode;if(Mo()&&r.callbackNode!==a)return null;var c=Gr(r,r===Lt?$t:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||s)s=Nu(r,c);else{s=c;var d=qe;qe|=2;var p=Kg();(Lt!==r||$t!==s)&&(oi=null,Vo=st()+500,Os(r,s));do try{nT();break}catch(k){Gg(r,k)}while(!0);Vh(),Iu.current=p,qe=d,Ct!==null?s=0:(Lt=null,$t=0,s=xt)}if(s!==0){if(s===2&&(d=pa(r),d!==0&&(c=d,s=vd(r,d))),s===1)throw a=qa,Os(r,0),zi(r,c),gn(r,st()),a;if(s===6)zi(r,c);else{if(d=r.current.alternate,(c&30)===0&&!eT(d)&&(s=Nu(r,c),s===2&&(p=pa(r),p!==0&&(c=p,s=vd(r,p))),s===1))throw a=qa,Os(r,0),zi(r,c),gn(r,st()),a;switch(r.finishedWork=d,r.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:Vs(r,mn,oi);break;case 3:if(zi(r,c),(c&130023424)===c&&(s=md+500-st(),10<s)){if(Gr(r,0)!==0)break;if(d=r.suspendedLanes,(d&c)!==c){an(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=Ih(Vs.bind(null,r,mn,oi),s);break}Vs(r,mn,oi);break;case 4:if(zi(r,c),(c&4194240)===c)break;for(s=r.eventTimes,d=-1;0<c;){var E=31-An(c);p=1<<E,E=s[E],E>d&&(d=E),c&=~p}if(c=d,c=st()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Z0(c/1960))-c,10<c){r.timeoutHandle=Ih(Vs.bind(null,r,mn,oi),c);break}Vs(r,mn,oi);break;case 5:Vs(r,mn,oi);break;default:throw Error(t(329))}}}return gn(r,st()),r.callbackNode===a?Hg.bind(null,r):null}function vd(r,s){var a=Ga;return r.current.memoizedState.isDehydrated&&(Os(r,s).flags|=256),r=Nu(r,s),r!==2&&(s=mn,mn=a,s!==null&&_d(s)),r}function _d(r){mn===null?mn=r:mn.push.apply(mn,r)}function eT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Zn(p(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zi(r,s){for(s&=~pd,s&=~Au,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-An(s),c=1<<a;r[a]=-1,s&=~c}}function qg(r){if((qe&6)!==0)throw Error(t(327));Mo();var s=Gr(r,0);if((s&1)===0)return gn(r,st()),null;var a=Nu(r,s);if(r.tag!==0&&a===2){var c=pa(r);c!==0&&(s=c,a=vd(r,c))}if(a===1)throw a=qa,Os(r,0),zi(r,s),gn(r,st()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,Vs(r,mn,oi),gn(r,st()),null}function wd(r,s){var a=qe;qe|=1;try{return r(s)}finally{qe=a,qe===0&&(Vo=st()+500,iu&&Vi())}}function bs(r){Ui!==null&&Ui.tag===0&&(qe&6)===0&&Mo();var s=qe;qe|=1;var a=Hn.transition,c=ze;try{if(Hn.transition=null,ze=1,r)return r()}finally{ze=c,Hn.transition=a,qe=s,(qe&6)===0&&Vi()}}function Ed(){xn=Oo.current,at(Oo)}function Os(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,R0(a)),Ct!==null)for(a=Ct.return;a!==null;){var c=a;switch(Rh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&nu();break;case 3:No(),at(dn),at(Qt),$h();break;case 5:Bh(c);break;case 4:No();break;case 13:at(pt);break;case 19:at(pt);break;case 10:Mh(c.type._context);break;case 22:case 23:Ed()}a=a.return}if(Lt=r,Ct=r=$i(r.current,null),$t=xn=s,xt=0,qa=null,pd=Au=xs=0,mn=Ga=null,Ps!==null){for(s=0;s<Ps.length;s++)if(a=Ps[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var E=p.next;p.next=d,c.next=E}a.pending=c}Ps=null}return r}function Gg(r,s){do{var a=Ct;try{if(Vh(),pu.current=vu,mu){for(var c=mt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}mu=!1}if(Ns=0,Mt=Nt=mt=null,Ua=!1,Ba=0,fd.current=null,a===null||a.return===null){xt=1,qa=s,Ct=null;break}e:{var p=r,E=a.return,k=a,b=s;if(s=$t,k.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var $=b,Q=k,J=Q.tag;if((Q.mode&1)===0&&(J===0||J===11||J===15)){var K=Q.alternate;K?(Q.updateQueue=K.updateQueue,Q.memoizedState=K.memoizedState,Q.lanes=K.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ae=vg(E);if(ae!==null){ae.flags&=-257,_g(ae,E,k,p,s),ae.mode&1&&yg(p,$,s),s=ae,b=$;var fe=s.updateQueue;if(fe===null){var pe=new Set;pe.add(b),s.updateQueue=pe}else fe.add(b);break e}else{if((s&1)===0){yg(p,$,s),Td();break e}b=Error(t(426))}}else if(ut&&k.mode&1){var Et=vg(E);if(Et!==null){(Et.flags&65536)===0&&(Et.flags|=256),_g(Et,E,k,p,s),bh(xo(b,k));break e}}p=b=xo(b,k),xt!==4&&(xt=2),Ga===null?Ga=[p]:Ga.push(p),p=E;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var U=mg(p,b,s);zm(p,U);break e;case 1:k=b;var V=p.type,z=p.stateNode;if((p.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Fi===null||!Fi.has(z)))){p.flags|=65536,s&=-s,p.lanes|=s;var Z=gg(p,k,s);zm(p,Z);break e}}p=p.return}while(p!==null)}Qg(a)}catch(me){s=me,Ct===a&&a!==null&&(Ct=a=a.return);continue}break}while(!0)}function Kg(){var r=Iu.current;return Iu.current=vu,r===null?vu:r}function Td(){(xt===0||xt===3||xt===2)&&(xt=4),Lt===null||(xs&268435455)===0&&(Au&268435455)===0||zi(Lt,$t)}function Nu(r,s){var a=qe;qe|=2;var c=Kg();(Lt!==r||$t!==s)&&(oi=null,Os(r,s));do try{tT();break}catch(d){Gg(r,d)}while(!0);if(Vh(),qe=a,Iu.current=c,Ct!==null)throw Error(t(261));return Lt=null,$t=0,xt}function tT(){for(;Ct!==null;)Yg(Ct)}function nT(){for(;Ct!==null&&!Hr();)Yg(Ct)}function Yg(r){var s=Zg(r.alternate,r,xn);r.memoizedProps=r.pendingProps,s===null?Qg(r):Ct=s,fd.current=null}function Qg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=K0(a,s,xn),a!==null){Ct=a;return}}else{if(a=Y0(a,s),a!==null){a.flags&=32767,Ct=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{xt=6,Ct=null;return}}if(s=s.sibling,s!==null){Ct=s;return}Ct=s=r}while(s!==null);xt===0&&(xt=5)}function Vs(r,s,a){var c=ze,d=Hn.transition;try{Hn.transition=null,ze=1,rT(r,s,a,c)}finally{Hn.transition=d,ze=c}return null}function rT(r,s,a,c){do Mo();while(Ui!==null);if((qe&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var p=a.lanes|a.childLanes;if(lh(r,p),r===Lt&&(Ct=Lt=null,$t=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ku||(ku=!0,ey(ms,function(){return Mo(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Hn.transition,Hn.transition=null;var E=ze;ze=1;var k=qe;qe|=4,fd.current=null,J0(r,a),Ug(a,r),S0(Th),Qr=!!Eh,Th=Eh=null,r.current=a,X0(a),qr(),qe=k,ze=E,Hn.transition=p}else r.current=a;if(ku&&(ku=!1,Ui=r,Du=d),p=r.pendingLanes,p===0&&(Fi=null),jl(a.stateNode),gn(r,st()),s!==null)for(c=r.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Cu)throw Cu=!1,r=gd,gd=null,r;return(Du&1)!==0&&r.tag!==0&&Mo(),p=r.pendingLanes,(p&1)!==0?r===yd?Ka++:(Ka=0,yd=r):Ka=0,Vi(),null}function Mo(){if(Ui!==null){var r=gr(Du),s=Hn.transition,a=ze;try{if(Hn.transition=null,ze=16>r?16:r,Ui===null)var c=!1;else{if(r=Ui,Ui=null,Du=0,(qe&6)!==0)throw Error(t(331));var d=qe;for(qe|=4,ce=r.current;ce!==null;){var p=ce,E=p.child;if((ce.flags&16)!==0){var k=p.deletions;if(k!==null){for(var b=0;b<k.length;b++){var $=k[b];for(ce=$;ce!==null;){var Q=ce;switch(Q.tag){case 0:case 11:case 15:Ha(8,Q,p)}var J=Q.child;if(J!==null)J.return=Q,ce=J;else for(;ce!==null;){Q=ce;var K=Q.sibling,ae=Q.return;if(Vg(Q),Q===$){ce=null;break}if(K!==null){K.return=ae,ce=K;break}ce=ae}}}var fe=p.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var Et=pe.sibling;pe.sibling=null,pe=Et}while(pe!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&E!==null)E.return=p,ce=E;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Ha(9,p,p.return)}var U=p.sibling;if(U!==null){U.return=p.return,ce=U;break e}ce=p.return}}var V=r.current;for(ce=V;ce!==null;){E=ce;var z=E.child;if((E.subtreeFlags&2064)!==0&&z!==null)z.return=E,ce=z;else e:for(E=V;ce!==null;){if(k=ce,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Su(9,k)}}catch(me){_t(k,k.return,me)}if(k===E){ce=null;break e}var Z=k.sibling;if(Z!==null){Z.return=k.return,ce=Z;break e}ce=k.return}}if(qe=d,Vi(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(gs,r)}catch{}c=!0}return c}finally{ze=a,Hn.transition=s}}return!1}function Jg(r,s,a){s=xo(a,s),s=mg(r,s,1),r=Li(r,s,1),s=an(),r!==null&&(ws(r,1,s),gn(r,s))}function _t(r,s,a){if(r.tag===3)Jg(r,r,a);else for(;s!==null;){if(s.tag===3){Jg(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Fi===null||!Fi.has(c))){r=xo(a,r),r=gg(s,r,1),s=Li(s,r,1),r=an(),s!==null&&(ws(s,1,r),gn(s,r));break}}s=s.return}}function iT(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),s=an(),r.pingedLanes|=r.suspendedLanes&a,Lt===r&&($t&a)===a&&(xt===4||xt===3&&($t&130023424)===$t&&500>st()-md?Os(r,0):pd|=a),gn(r,s)}function Xg(r,s){s===0&&((r.mode&1)===0?s=1:(s=Ai,Ai<<=1,(Ai&130023424)===0&&(Ai=4194304)));var a=an();r=ri(r,s),r!==null&&(ws(r,s,a),gn(r,a))}function sT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Xg(r,a)}function oT(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Xg(r,a)}var Zg;Zg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||dn.current)pn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return pn=!1,G0(r,s,a);pn=(r.flags&131072)!==0}else pn=!1,ut&&(s.flags&1048576)!==0&&xm(s,ou,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Eu(r,s),r=s.pendingProps;var d=Io(s,Qt.current);Ro(s,a),d=qh(null,s,c,r,d,a);var p=Gh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,fn(c)?(p=!0,ru(s)):p=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Fh(s),d.updater=_u,s.stateNode=d,d._reactInternals=s,Zh(s,c,r,a),s=rd(null,s,c,!0,p,a)):(s.tag=0,ut&&p&&Ph(s),on(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Eu(r,s),r=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=lT(c),r=tr(c,r),d){case 0:s=nd(null,s,c,r,a);break e;case 1:s=Ag(null,s,c,r,a);break e;case 11:s=wg(null,s,c,r,a);break e;case 14:s=Eg(null,s,c,tr(c.type,r),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:tr(c,d),nd(r,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:tr(c,d),Ag(r,s,c,d,a);case 3:e:{if(Cg(s),r===null)throw Error(t(387));c=s.pendingProps,p=s.memoizedState,d=p.element,Bm(r,s),du(s,c,null,a);var E=s.memoizedState;if(c=E.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){d=xo(Error(t(423)),s),s=kg(r,s,c,a,d);break e}else if(c!==d){d=xo(Error(t(424)),s),s=kg(r,s,c,a,d);break e}else for(Nn=xi(s.stateNode.containerInfo.firstChild),Rn=s,ut=!0,er=null,a=Fm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ko(),c===d){s=si(r,s,a);break e}on(r,s,c,a)}s=s.child}return s;case 5:return Wm(s),r===null&&xh(s),c=s.type,d=s.pendingProps,p=r!==null?r.memoizedProps:null,E=d.children,Sh(c,d)?E=null:p!==null&&Sh(c,p)&&(s.flags|=32),Ig(r,s),on(r,s,E,a),s.child;case 6:return r===null&&xh(s),null;case 13:return Dg(r,s,a);case 4:return Uh(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Do(s,null,c,a):on(r,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:tr(c,d),wg(r,s,c,d,a);case 7:return on(r,s,s.pendingProps,a),s.child;case 8:return on(r,s,s.pendingProps.children,a),s.child;case 12:return on(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,p=s.memoizedProps,E=d.value,tt(uu,c._currentValue),c._currentValue=E,p!==null)if(Zn(p.value,E)){if(p.children===d.children&&!dn.current){s=si(r,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var k=p.dependencies;if(k!==null){E=p.child;for(var b=k.firstContext;b!==null;){if(b.context===c){if(p.tag===1){b=ii(-1,a&-a),b.tag=2;var $=p.updateQueue;if($!==null){$=$.shared;var Q=$.pending;Q===null?b.next=b:(b.next=Q.next,Q.next=b),$.pending=b}}p.lanes|=a,b=p.alternate,b!==null&&(b.lanes|=a),Lh(p.return,a,s),k.lanes|=a;break}b=b.next}}else if(p.tag===10)E=p.type===s.type?null:p.child;else if(p.tag===18){if(E=p.return,E===null)throw Error(t(341));E.lanes|=a,k=E.alternate,k!==null&&(k.lanes|=a),Lh(E,a,s),E=p.sibling}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===s){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}on(r,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,Ro(s,a),d=$n(d),c=c(d),s.flags|=1,on(r,s,c,a),s.child;case 14:return c=s.type,d=tr(c,s.pendingProps),d=tr(c.type,d),Eg(r,s,c,d,a);case 15:return Tg(r,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:tr(c,d),Eu(r,s),s.tag=1,fn(c)?(r=!0,ru(s)):r=!1,Ro(s,a),fg(s,c,d),Zh(s,c,d,a),rd(null,s,c,!0,r,a);case 19:return Rg(r,s,a);case 22:return Sg(r,s,a)}throw Error(t(156,s.tag))};function ey(r,s){return Wr(r,s)}function aT(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(r,s,a,c){return new aT(r,s,a,c)}function Sd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function lT(r){if(typeof r=="function")return Sd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===M)return 11;if(r===je)return 14}return 2}function $i(r,s){var a=r.alternate;return a===null?(a=qn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function xu(r,s,a,c,d,p){var E=2;if(c=r,typeof r=="function")Sd(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case P:return Ms(a.children,d,p,s);case A:E=8,d|=8;break;case D:return r=qn(12,a,s,d|2),r.elementType=D,r.lanes=p,r;case C:return r=qn(13,a,s,d),r.elementType=C,r.lanes=p,r;case Ve:return r=qn(19,a,s,d),r.elementType=Ve,r.lanes=p,r;case $e:return bu(a,d,p,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:E=10;break e;case x:E=9;break e;case M:E=11;break e;case je:E=14;break e;case Ge:E=16,c=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=qn(E,a,s,d),s.elementType=r,s.type=c,s.lanes=p,s}function Ms(r,s,a,c){return r=qn(7,r,c,s),r.lanes=a,r}function bu(r,s,a,c){return r=qn(22,r,c,s),r.elementType=$e,r.lanes=a,r.stateNode={isHidden:!1},r}function Id(r,s,a){return r=qn(6,r,null,s),r.lanes=a,r}function Ad(r,s,a){return s=qn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function uT(r,s,a,c,d){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ga(0),this.expirationTimes=ga(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ga(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Cd(r,s,a,c,d,p,E,k,b){return r=new uT(r,s,a,k,b),s===1?(s=1,p===!0&&(s|=8)):s=0,p=qn(3,null,null,s),r.current=p,p.stateNode=r,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fh(p),r}function cT(r,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:c==null?null:""+c,children:r,containerInfo:s,implementation:a}}function ty(r){if(!r)return Oi;r=r._reactInternals;e:{if(Sn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(fn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(fn(a))return Pm(r,a,s)}return s}function ny(r,s,a,c,d,p,E,k,b){return r=Cd(a,c,!0,r,d,p,E,k,b),r.context=ty(null),a=r.current,c=an(),d=Bi(a),p=ii(c,d),p.callback=s??null,Li(a,p,d),r.current.lanes=d,ws(r,d,c),gn(r,c),r}function Ou(r,s,a,c){var d=s.current,p=an(),E=Bi(d);return a=ty(a),s.context===null?s.context=a:s.pendingContext=a,s=ii(p,E),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=Li(d,s,E),r!==null&&(ir(r,d,E,p),hu(r,d,E)),E}function Vu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ry(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function kd(r,s){ry(r,s),(r=r.alternate)&&ry(r,s)}function hT(){return null}var iy=typeof reportError=="function"?reportError:function(r){console.error(r)};function Dd(r){this._internalRoot=r}Mu.prototype.render=Dd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Ou(r,s,null,null)},Mu.prototype.unmount=Dd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;bs(function(){Ou(null,r,null,null)}),s[Zr]=null}};function Mu(r){this._internalRoot=r}Mu.prototype.unstable_scheduleHydration=function(r){if(r){var s=wa();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Cn.length&&s!==0&&s<Cn[a].priority;a++);Cn.splice(a,0,r),a===0&&ao(r)}};function Pd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Lu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function sy(){}function dT(r,s,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var $=Vu(E);p.call($)}}var E=ny(s,c,r,0,null,!1,!1,"",sy);return r._reactRootContainer=E,r[Zr]=E.current,xa(r.nodeType===8?r.parentNode:r),bs(),E}for(;d=r.lastChild;)r.removeChild(d);if(typeof c=="function"){var k=c;c=function(){var $=Vu(b);k.call($)}}var b=Cd(r,0,!1,null,null,!1,!1,"",sy);return r._reactRootContainer=b,r[Zr]=b.current,xa(r.nodeType===8?r.parentNode:r),bs(function(){Ou(s,b,a,c)}),b}function ju(r,s,a,c,d){var p=a._reactRootContainer;if(p){var E=p;if(typeof d=="function"){var k=d;d=function(){var b=Vu(E);k.call(b)}}Ou(s,E,r,d)}else E=dT(a,s,r,d,c);return Vu(E)}va=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ye(s.pendingLanes);a!==0&&(ya(s,a|1),gn(s,st()),(qe&6)===0&&(Vo=st()+500,Vi()))}break;case 13:bs(function(){var c=ri(r,1);if(c!==null){var d=an();ir(c,r,1,d)}}),kd(r,1)}},so=function(r){if(r.tag===13){var s=ri(r,134217728);if(s!==null){var a=an();ir(s,r,134217728,a)}kd(r,134217728)}},_a=function(r){if(r.tag===13){var s=Bi(r),a=ri(r,s);if(a!==null){var c=an();ir(a,r,s,c)}kd(r,s)}},wa=function(){return ze},Ea=function(r,s){var a=ze;try{return ze=r,s()}finally{ze=a}},Ln=function(r,s,a){switch(s){case"input":if(Vn(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var d=tu(c);if(!d)throw Error(t(90));vt(c),Vn(c,d)}}}break;case"textarea":to(r,a);break;case"select":s=a.value,s!=null&&_n(r,!!a.multiple,s,!1)}},Xe=wd,sn=bs;var fT={usingClientEntryPoint:!1,Events:[Va,To,tu,ft,En,wd]},Ya={findFiberByHostInstance:As,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pT={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Kt(r),r===null?null:r.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||hT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fu.isDisabled&&Fu.supportsFiber)try{gs=Fu.inject(pT),In=Fu}catch{}}return yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fT,yn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pd(s))throw Error(t(200));return cT(r,s,null,a)},yn.createRoot=function(r,s){if(!Pd(r))throw Error(t(299));var a=!1,c="",d=iy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Cd(r,1,!1,null,null,a,!1,c,d),r[Zr]=s.current,xa(r.nodeType===8?r.parentNode:r),new Dd(s)},yn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Kt(s),r=r===null?null:r.stateNode,r},yn.flushSync=function(r){return bs(r)},yn.hydrate=function(r,s,a){if(!Lu(s))throw Error(t(200));return ju(null,r,s,!0,a)},yn.hydrateRoot=function(r,s,a){if(!Pd(r))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",E=iy;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=ny(s,null,r,1,a??null,d,!1,p,E),r[Zr]=s.current,xa(r),c)for(r=0;r<c.length;r++)a=c[r],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Mu(s)},yn.render=function(r,s,a){if(!Lu(s))throw Error(t(200));return ju(null,r,s,!1,a)},yn.unmountComponentAtNode=function(r){if(!Lu(r))throw Error(t(40));return r._reactRootContainer?(bs(function(){ju(null,null,r,!1,function(){r._reactRootContainer=null,r[Zr]=null})}),!0):!1},yn.unstable_batchedUpdates=wd,yn.unstable_renderSubtreeIntoContainer=function(r,s,a,c){if(!Lu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return ju(r,s,a,!1,c)},yn.version="18.3.1-next-f1338f8080-20240426",yn}var fy;function IT(){if(fy)return xd.exports;fy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xd.exports=ST(),xd.exports}var py;function AT(){if(py)return Uu;py=1;var n=IT();return Uu.createRoot=n.createRoot,Uu.hydrateRoot=n.hydrateRoot,Uu}var CT=AT();const kT=a_(CT),my=n=>{const e=new Date(n),t=e.getDay(),o=(t===0?7:t)-1;return e.setDate(e.getDate()-o),e.setHours(0,0,0,0),e},DT=n=>{const e=new Date(n),t=e.getDay(),o=7-(t===0?7:t);return e.setDate(e.getDate()+o),e.setHours(23,59,59,999),e},PT=(n,e)=>{const t=[];let i=my(new Date(n));const o=my(new Date(e));for(;i<=o;)t.push(new Date(i)),i.setDate(i.getDate()+7);return t},nt=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`},Oe=n=>{const[e,t,i]=n.split("-").map(Number);if(e===void 0||t===void 0||i===void 0)throw new Error(`Invalid date string: ${n}`);return new Date(e,t-1,i)},Vd=(n,e,t)=>{const i=n.getTime(),o=e.getTime(),l=t.getTime();return i>=o&&i<=l},Yf=(n,e)=>{const t=[],i=new Date(n);for(;i<=e;)t.push(new Date(i)),i.setDate(i.getDate()+1);return t},gy=[{yearsOfService:0,hoursPerMonth:10},{yearsOfService:4,hoursPerMonth:12},{yearsOfService:9,hoursPerMonth:14}],Md={"5/40":{hoursPerDay:8},"9/80":{hoursPerRegularDay:9,hoursPerNonRDOFriday:8}},yy=(n,e)=>{const t=e.getFullYear()-n.getFullYear(),i=e.getMonth()-n.getMonth(),o=e.getDate()-n.getDate();return i<0||i===0&&o<0?t-1:t},RT=n=>{var t;const e=gy.filter(i=>n>=i.yearsOfService).sort((i,o)=>o.yearsOfService-i.yearsOfService)[0];return(e==null?void 0:e.hoursPerMonth)??((t=gy[0])==null?void 0:t.hoursPerMonth)??10},u_=(n,e,t)=>{const i=new Date(e);i.setHours(0,0,0,0);const o=new Date(t);o.setHours(0,0,0,0);const l=Math.round((o.getTime()-i.getTime())/(1e3*60*60*24))+1,h=yy(n,e),f=yy(n,t),g=Math.max(h,f),y=RT(g),w=365.25/12,R=y/w*7/7*l;return Math.round(R*100)/100},bc=n=>{const e=n.getDay();return e===0||e===6},Qf=(n,e)=>{if(n.getDay()!==5)return!1;const o=(l=>{const h=new Date(l.valueOf()),f=(l.getDay()+6)%7;h.setDate(h.getDate()-f+3);const g=new Date(h.getFullYear(),0,4),y=h.getTime()-g.getTime(),_=1e3*60*60*24*7;return 1+Math.floor(y/_)})(n)%2===0;return e==="even-fridays"?o:!o},Jf=(n,e)=>bc(n)?0:e.type==="5/40"?Md["5/40"].hoursPerDay:n.getDay()===5?e.rdoPattern&&Qf(n,e.rdoPattern)?0:Md["9/80"].hoursPerNonRDOFriday:Md["9/80"].hoursPerRegularDay,NT=(n,e,t)=>{const i=[],o=new Date(n);for(;o<=e;)o.getDay()===5&&Qf(o,t)&&i.push(new Date(o)),o.setDate(o.getDate()+1);return i},Us=(n,e,t,i=[])=>{let o=0;const l=Yf(n,e),h=new Set(i.map(f=>Oe(f.date).toISOString().split("T")[0]));for(const f of l){const g=f.toISOString().split("T")[0];h.has(g)||(o+=Jf(f,t))}return o},Oc=(n,e)=>e.type!=="9/80"||!e.rdoPattern?!1:Qf(n,e.rdoPattern),Xf=(n,e,t=[])=>{const i=Oe(n.startDate),o=Oe(n.endDate);return Us(i,o,e,t)},c_=320,xT=280,bT=40,OT=(n,e,t,i,o)=>{const l=PT(e,t),h=[];let f=n.currentBalance;const g=Oe(n.startDate),y=Oe(n.balanceAsOfDate),_=new Set(i.filter(w=>w.personalDayUsed).map(w=>Oe(w.startDate).getFullYear()));if(n.personalDayUsedInStartYear){const w=Oe(n.balanceAsOfDate).getFullYear();_.add(w)}for(const w of l){const I=DT(w);let R=w>=y?u_(g,w,I):0;const F=w.getFullYear();(I.getFullYear()>F||I.getMonth()===11&&I.getDate()===31)&&(_.has(F)||(R+=8));const j=i.filter(P=>{const A=Oe(P.startDate),D=Oe(P.endDate);return Vd(A,w,I)||Vd(D,w,I)||A<w&&D>I}),G=o.filter(P=>Vd(Oe(P.date),w,I)),ee=n.workSchedule.type==="9/80"&&n.workSchedule.rdoPattern?NT(w,I,n.workSchedule.rdoPattern):[],oe=j.reduce((P,A)=>{const D=Oe(A.startDate),N=Oe(A.endDate),x=D>w?D:w,M=N<I?N:I,C=Us(x,M,n.workSchedule,o);let Ve=0;A.personalDayUsed&&D>=w&&D<=I&&(Ve=8);const je=Math.max(0,C-Ve);return P+je},0),ne=f,be=ne+R-oe,ye=Math.min(be,c_);h.push({weekStartDate:nt(w),weekEndDate:nt(I),startingBalance:ne,accrued:R,used:oe,endingBalance:ye,plannedVacations:j,holidays:G,rdoDays:ee.map(nt)}),f=ye}return h},vy=(n,e)=>{var y,_;const t=n.filter(w=>Oe(w.weekStartDate).getFullYear()===e);if(t.length===0)return{year:e,startingBalance:0,totalAccrued:0,totalUsed:0,endingBalance:0,totalPlannedVacations:0,totalHolidayHours:0};const i=((y=t[0])==null?void 0:y.startingBalance)??0,o=t.reduce((w,I)=>w+I.accrued,0),l=t.reduce((w,I)=>w+I.used,0),h=((_=t[t.length-1])==null?void 0:_.endingBalance)??0,f=new Set(t.flatMap(w=>w.plannedVacations.map(I=>I.id))),g=t.reduce((w,I)=>w+I.holidays.reduce((R,F)=>R+F.hours,0),0);return{year:e,startingBalance:i,totalAccrued:o,totalUsed:l,endingBalance:h,totalPlannedVacations:f.size,totalHolidayHours:g}},VT=(n,e,t,i=[])=>{const o=new Date,l=Oe(n.startDate),h=u_(l,o,e),f=t.filter(g=>Oe(g.endDate)<=e).reduce((g,y)=>{const _=Xf(y,n.workSchedule,i),w=y.personalDayUsed?8:0;return g+Math.max(0,_-w)},0);return n.currentBalance+h-f},MT=()=>{};var _y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},LT=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],h=n[t++],f=n[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],h=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},d_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],h=o+1<n.length,f=h?n[o+1]:0,g=o+2<n.length,y=g?n[o+2]:0,_=l>>2,w=(l&3)<<4|f>>4;let I=(f&15)<<2|y>>6,R=y&63;g||(R=64,h||(I=64)),i.push(t[_],t[w],t[I],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(h_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):LT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||w==null)throw new jT;const I=l<<2|f>>4;if(i.push(I),y!==64){const R=f<<4&240|y>>2;if(i.push(R),w!==64){const F=y<<6&192|w;i.push(F)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class jT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FT=function(n){const e=h_(n);return d_.encodeByteArray(e,!0)},cc=function(n){return FT(n).replace(/\./g,"")},f_=function(n){try{return d_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=()=>UT().__FIREBASE_DEFAULTS__,zT=()=>{if(typeof process>"u"||typeof _y>"u")return;const n=_y.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$T=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&f_(n[1]);return e&&JSON.parse(e)},Vc=()=>{try{return MT()||BT()||zT()||$T()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},p_=n=>{var e,t;return(t=(e=Vc())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},WT=n=>{const e=p_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},m_=()=>{var n;return(n=Vc())==null?void 0:n.config},g_=n=>{var e;return(e=Vc())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function y_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[cc(JSON.stringify(t)),cc(JSON.stringify(h)),""].join(".")}const ol={};function GT(){const n={prod:[],emulator:[]};for(const e of Object.keys(ol))ol[e]?n.emulator.push(e):n.prod.push(e);return n}function KT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let wy=!1;function v_(n,e){if(typeof window>"u"||typeof document>"u"||!ra(window.location.host)||ol[n]===e||ol[n]||wy)return;ol[n]=e;function t(I){return`__firebase__banner__${I}`}const i="__firebase__banner",l=GT().prod.length>0;function h(){const I=document.getElementById(i);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,R){I.setAttribute("width","24"),I.setAttribute("id",R),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{wy=!0,h()},I}function _(I,R){I.setAttribute("id",R),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function w(){const I=KT(i),R=t("text"),F=document.getElementById(R)||document.createElement("span"),O=t("learnmore"),j=document.getElementById(O)||document.createElement("a"),G=t("preprendIcon"),ee=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const oe=I.element;f(oe),_(j,O);const ne=y();g(ee,G),oe.append(ee,F,j,ne),document.body.appendChild(oe)}l?(F.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function QT(){var e;const n=(e=Vc())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ZT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eS(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function tS(){return!QT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nS(){try{return typeof indexedDB=="object"}catch{return!1}}function rS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="FirebaseError";class mi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=iS,Object.setPrototypeOf(this,mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?sS(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new mi(o,f,i)}}function sS(n,e){return n.replace(oS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const oS=/\{\$([^}]+)}/g;function aS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ws(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],h=e[o];if(Ey(l)&&Ey(h)){if(!Ws(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Ey(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function lS(n,e){const t=new uS(n,e);return t.subscribe.bind(t)}class uS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");cS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Ld),o.error===void 0&&(o.error=Ld),o.complete===void 0&&(o.complete=Ld);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ld(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(n){return n&&n._delegate?n._delegate:n}class Hs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new HT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fS(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dS(n){return n===Ls?void 0:n}function fS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const mS={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},gS=Fe.INFO,yS={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},vS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=yS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zf{constructor(e){this.name=e,this._logLevel=gS,this._logHandler=vS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const _S=(n,e)=>e.some(t=>n instanceof t);let Ty,Sy;function wS(){return Ty||(Ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ES(){return Sy||(Sy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const __=new WeakMap,lf=new WeakMap,w_=new WeakMap,jd=new WeakMap,ep=new WeakMap;function TS(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(Qi(n.result)),o()},h=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&__.set(t,n)}).catch(()=>{}),ep.set(e,n),e}function SS(n){if(lf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});lf.set(n,e)}let uf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return lf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||w_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function IS(n){uf=n(uf)}function AS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Fd(this),e,...t);return w_.set(i,e.sort?e.sort():[e]),Qi(i)}:ES().includes(n)?function(...e){return n.apply(Fd(this),e),Qi(__.get(this))}:function(...e){return Qi(n.apply(Fd(this),e))}}function CS(n){return typeof n=="function"?AS(n):(n instanceof IDBTransaction&&SS(n),_S(n,wS())?new Proxy(n,uf):n)}function Qi(n){if(n instanceof IDBRequest)return TS(n);if(jd.has(n))return jd.get(n);const e=CS(n);return e!==n&&(jd.set(n,e),ep.set(e,n)),e}const Fd=n=>ep.get(n);function kS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(n,e),f=Qi(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Qi(h.result),g.oldVersion,g.newVersion,Qi(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const DS=["get","getKey","getAll","getAllKeys","count"],PS=["put","add","delete","clear"],Ud=new Map;function Iy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ud.get(e))return Ud.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=PS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||DS.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Ud.set(e,l),l}IS(n=>({...n,get:(e,t,i)=>Iy(e,t)||n.get(e,t,i),has:(e,t)=>!!Iy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(NS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function NS(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cf="@firebase/app",Ay="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new Zf("@firebase/app"),xS="@firebase/app-compat",bS="@firebase/analytics-compat",OS="@firebase/analytics",VS="@firebase/app-check-compat",MS="@firebase/app-check",LS="@firebase/auth",jS="@firebase/auth-compat",FS="@firebase/database",US="@firebase/data-connect",BS="@firebase/database-compat",zS="@firebase/functions",$S="@firebase/functions-compat",WS="@firebase/installations",HS="@firebase/installations-compat",qS="@firebase/messaging",GS="@firebase/messaging-compat",KS="@firebase/performance",YS="@firebase/performance-compat",QS="@firebase/remote-config",JS="@firebase/remote-config-compat",XS="@firebase/storage",ZS="@firebase/storage-compat",eI="@firebase/firestore",tI="@firebase/ai",nI="@firebase/firestore-compat",rI="firebase",iI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf="[DEFAULT]",sI={[cf]:"fire-core",[xS]:"fire-core-compat",[OS]:"fire-analytics",[bS]:"fire-analytics-compat",[MS]:"fire-app-check",[VS]:"fire-app-check-compat",[LS]:"fire-auth",[jS]:"fire-auth-compat",[FS]:"fire-rtdb",[US]:"fire-data-connect",[BS]:"fire-rtdb-compat",[zS]:"fire-fn",[$S]:"fire-fn-compat",[WS]:"fire-iid",[HS]:"fire-iid-compat",[qS]:"fire-fcm",[GS]:"fire-fcm-compat",[KS]:"fire-perf",[YS]:"fire-perf-compat",[QS]:"fire-rc",[JS]:"fire-rc-compat",[XS]:"fire-gcs",[ZS]:"fire-gcs-compat",[eI]:"fire-fst",[nI]:"fire-fst-compat",[tI]:"fire-vertex","fire-js":"fire-js",[rI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,oI=new Map,df=new Map;function Cy(n,e){try{n.container.addComponent(e)}catch(t){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Yo(n){const e=n.name;if(df.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;df.set(e,n);for(const t of hc.values())Cy(t,n);for(const t of oI.values())Cy(t,n);return!0}function tp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function sr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new Il("app","Firebase",aI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=iI;function E_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:hf,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ji.create("bad-app-name",{appName:String(o)});if(t||(t=m_()),!t)throw Ji.create("no-options");const l=hc.get(o);if(l){if(Ws(t,l.options)&&Ws(i,l.config))return l;throw Ji.create("duplicate-app",{appName:o})}const h=new pS(o);for(const g of df.values())h.addComponent(g);const f=new lI(t,i,h);return hc.set(o,f),f}function T_(n=hf){const e=hc.get(n);if(!e&&n===hf&&m_())return E_();if(!e)throw Ji.create("no-app",{appName:n});return e}function Xi(n,e,t){let i=sI[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(h.join(" "));return}Yo(new Hs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="firebase-heartbeat-database",cI=1,dl="firebase-heartbeat-store";let Bd=null;function S_(){return Bd||(Bd=kS(uI,cI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(dl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ji.create("idb-open",{originalErrorMessage:n.message})})),Bd}async function hI(n){try{const t=(await S_()).transaction(dl),i=await t.objectStore(dl).get(I_(n));return await t.done,i}catch(e){if(e instanceof mi)hi.warn(e.message);else{const t=Ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(t.message)}}}async function ky(n,e){try{const i=(await S_()).transaction(dl,"readwrite");await i.objectStore(dl).put(e,I_(n)),await i.done}catch(t){if(t instanceof mi)hi.warn(t.message);else{const i=Ji.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});hi.warn(i.message)}}}function I_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=1024,fI=30;class pI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Dy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>fI){const h=yI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){hi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Dy(),{heartbeatsToSend:i,unsentEntries:o}=mI(this._heartbeatsCache.heartbeats),l=cc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return hi.warn(t),""}}}function Dy(){return new Date().toISOString().substring(0,10)}function mI(n,e=dI){const t=[];let i=n.slice();for(const o of n){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Py(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Py(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class gI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nS()?rS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ky(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ky(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Py(n){return cc(JSON.stringify({version:2,heartbeats:n})).length}function yI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(n){Yo(new Hs("platform-logger",e=>new RS(e),"PRIVATE")),Yo(new Hs("heartbeat",e=>new pI(e),"PRIVATE")),Xi(cf,Ay,n),Xi(cf,Ay,"esm2020"),Xi("fire-js","")}vI("");var Ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zi,A_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,A){function D(){}D.prototype=A.prototype,P.F=A.prototype,P.prototype=new D,P.prototype.constructor=P,P.D=function(N,x,M){for(var C=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)C[Ve-2]=arguments[Ve];return A.prototype[x].apply(N,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,A,D){D||(D=0);const N=Array(16);if(typeof A=="string")for(var x=0;x<16;++x)N[x]=A.charCodeAt(D++)|A.charCodeAt(D++)<<8|A.charCodeAt(D++)<<16|A.charCodeAt(D++)<<24;else for(x=0;x<16;++x)N[x]=A[D++]|A[D++]<<8|A[D++]<<16|A[D++]<<24;A=P.g[0],D=P.g[1],x=P.g[2];let M=P.g[3],C;C=A+(M^D&(x^M))+N[0]+3614090360&4294967295,A=D+(C<<7&4294967295|C>>>25),C=M+(x^A&(D^x))+N[1]+3905402710&4294967295,M=A+(C<<12&4294967295|C>>>20),C=x+(D^M&(A^D))+N[2]+606105819&4294967295,x=M+(C<<17&4294967295|C>>>15),C=D+(A^x&(M^A))+N[3]+3250441966&4294967295,D=x+(C<<22&4294967295|C>>>10),C=A+(M^D&(x^M))+N[4]+4118548399&4294967295,A=D+(C<<7&4294967295|C>>>25),C=M+(x^A&(D^x))+N[5]+1200080426&4294967295,M=A+(C<<12&4294967295|C>>>20),C=x+(D^M&(A^D))+N[6]+2821735955&4294967295,x=M+(C<<17&4294967295|C>>>15),C=D+(A^x&(M^A))+N[7]+4249261313&4294967295,D=x+(C<<22&4294967295|C>>>10),C=A+(M^D&(x^M))+N[8]+1770035416&4294967295,A=D+(C<<7&4294967295|C>>>25),C=M+(x^A&(D^x))+N[9]+2336552879&4294967295,M=A+(C<<12&4294967295|C>>>20),C=x+(D^M&(A^D))+N[10]+4294925233&4294967295,x=M+(C<<17&4294967295|C>>>15),C=D+(A^x&(M^A))+N[11]+2304563134&4294967295,D=x+(C<<22&4294967295|C>>>10),C=A+(M^D&(x^M))+N[12]+1804603682&4294967295,A=D+(C<<7&4294967295|C>>>25),C=M+(x^A&(D^x))+N[13]+4254626195&4294967295,M=A+(C<<12&4294967295|C>>>20),C=x+(D^M&(A^D))+N[14]+2792965006&4294967295,x=M+(C<<17&4294967295|C>>>15),C=D+(A^x&(M^A))+N[15]+1236535329&4294967295,D=x+(C<<22&4294967295|C>>>10),C=A+(x^M&(D^x))+N[1]+4129170786&4294967295,A=D+(C<<5&4294967295|C>>>27),C=M+(D^x&(A^D))+N[6]+3225465664&4294967295,M=A+(C<<9&4294967295|C>>>23),C=x+(A^D&(M^A))+N[11]+643717713&4294967295,x=M+(C<<14&4294967295|C>>>18),C=D+(M^A&(x^M))+N[0]+3921069994&4294967295,D=x+(C<<20&4294967295|C>>>12),C=A+(x^M&(D^x))+N[5]+3593408605&4294967295,A=D+(C<<5&4294967295|C>>>27),C=M+(D^x&(A^D))+N[10]+38016083&4294967295,M=A+(C<<9&4294967295|C>>>23),C=x+(A^D&(M^A))+N[15]+3634488961&4294967295,x=M+(C<<14&4294967295|C>>>18),C=D+(M^A&(x^M))+N[4]+3889429448&4294967295,D=x+(C<<20&4294967295|C>>>12),C=A+(x^M&(D^x))+N[9]+568446438&4294967295,A=D+(C<<5&4294967295|C>>>27),C=M+(D^x&(A^D))+N[14]+3275163606&4294967295,M=A+(C<<9&4294967295|C>>>23),C=x+(A^D&(M^A))+N[3]+4107603335&4294967295,x=M+(C<<14&4294967295|C>>>18),C=D+(M^A&(x^M))+N[8]+1163531501&4294967295,D=x+(C<<20&4294967295|C>>>12),C=A+(x^M&(D^x))+N[13]+2850285829&4294967295,A=D+(C<<5&4294967295|C>>>27),C=M+(D^x&(A^D))+N[2]+4243563512&4294967295,M=A+(C<<9&4294967295|C>>>23),C=x+(A^D&(M^A))+N[7]+1735328473&4294967295,x=M+(C<<14&4294967295|C>>>18),C=D+(M^A&(x^M))+N[12]+2368359562&4294967295,D=x+(C<<20&4294967295|C>>>12),C=A+(D^x^M)+N[5]+4294588738&4294967295,A=D+(C<<4&4294967295|C>>>28),C=M+(A^D^x)+N[8]+2272392833&4294967295,M=A+(C<<11&4294967295|C>>>21),C=x+(M^A^D)+N[11]+1839030562&4294967295,x=M+(C<<16&4294967295|C>>>16),C=D+(x^M^A)+N[14]+4259657740&4294967295,D=x+(C<<23&4294967295|C>>>9),C=A+(D^x^M)+N[1]+2763975236&4294967295,A=D+(C<<4&4294967295|C>>>28),C=M+(A^D^x)+N[4]+1272893353&4294967295,M=A+(C<<11&4294967295|C>>>21),C=x+(M^A^D)+N[7]+4139469664&4294967295,x=M+(C<<16&4294967295|C>>>16),C=D+(x^M^A)+N[10]+3200236656&4294967295,D=x+(C<<23&4294967295|C>>>9),C=A+(D^x^M)+N[13]+681279174&4294967295,A=D+(C<<4&4294967295|C>>>28),C=M+(A^D^x)+N[0]+3936430074&4294967295,M=A+(C<<11&4294967295|C>>>21),C=x+(M^A^D)+N[3]+3572445317&4294967295,x=M+(C<<16&4294967295|C>>>16),C=D+(x^M^A)+N[6]+76029189&4294967295,D=x+(C<<23&4294967295|C>>>9),C=A+(D^x^M)+N[9]+3654602809&4294967295,A=D+(C<<4&4294967295|C>>>28),C=M+(A^D^x)+N[12]+3873151461&4294967295,M=A+(C<<11&4294967295|C>>>21),C=x+(M^A^D)+N[15]+530742520&4294967295,x=M+(C<<16&4294967295|C>>>16),C=D+(x^M^A)+N[2]+3299628645&4294967295,D=x+(C<<23&4294967295|C>>>9),C=A+(x^(D|~M))+N[0]+4096336452&4294967295,A=D+(C<<6&4294967295|C>>>26),C=M+(D^(A|~x))+N[7]+1126891415&4294967295,M=A+(C<<10&4294967295|C>>>22),C=x+(A^(M|~D))+N[14]+2878612391&4294967295,x=M+(C<<15&4294967295|C>>>17),C=D+(M^(x|~A))+N[5]+4237533241&4294967295,D=x+(C<<21&4294967295|C>>>11),C=A+(x^(D|~M))+N[12]+1700485571&4294967295,A=D+(C<<6&4294967295|C>>>26),C=M+(D^(A|~x))+N[3]+2399980690&4294967295,M=A+(C<<10&4294967295|C>>>22),C=x+(A^(M|~D))+N[10]+4293915773&4294967295,x=M+(C<<15&4294967295|C>>>17),C=D+(M^(x|~A))+N[1]+2240044497&4294967295,D=x+(C<<21&4294967295|C>>>11),C=A+(x^(D|~M))+N[8]+1873313359&4294967295,A=D+(C<<6&4294967295|C>>>26),C=M+(D^(A|~x))+N[15]+4264355552&4294967295,M=A+(C<<10&4294967295|C>>>22),C=x+(A^(M|~D))+N[6]+2734768916&4294967295,x=M+(C<<15&4294967295|C>>>17),C=D+(M^(x|~A))+N[13]+1309151649&4294967295,D=x+(C<<21&4294967295|C>>>11),C=A+(x^(D|~M))+N[4]+4149444226&4294967295,A=D+(C<<6&4294967295|C>>>26),C=M+(D^(A|~x))+N[11]+3174756917&4294967295,M=A+(C<<10&4294967295|C>>>22),C=x+(A^(M|~D))+N[2]+718787259&4294967295,x=M+(C<<15&4294967295|C>>>17),C=D+(M^(x|~A))+N[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+x&4294967295,P.g[3]=P.g[3]+M&4294967295}i.prototype.v=function(P,A){A===void 0&&(A=P.length);const D=A-this.blockSize,N=this.C;let x=this.h,M=0;for(;M<A;){if(x==0)for(;M<=D;)o(this,P,M),M+=this.blockSize;if(typeof P=="string"){for(;M<A;)if(N[x++]=P.charCodeAt(M++),x==this.blockSize){o(this,N),x=0;break}}else for(;M<A;)if(N[x++]=P[M++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=A},i.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;A=this.o*8;for(var D=P.length-8;D<P.length;++D)P[D]=A&255,A/=256;for(this.v(P),P=Array(16),A=0,D=0;D<4;++D)for(let N=0;N<32;N+=8)P[A++]=this.g[D]>>>N&255;return P};function l(P,A){var D=f;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=A(P)}function h(P,A){this.h=A;const D=[];let N=!0;for(let x=P.length-1;x>=0;x--){const M=P[x]|0;N&&M==A||(D[x]=M,N=!1)}this.g=D}var f={};function g(P){return-128<=P&&P<128?l(P,function(A){return new h([A|0],A<0?-1:0)}):new h([P|0],P<0?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return w;if(P<0)return j(y(-P));const A=[];let D=1;for(let N=0;P>=D;N++)A[N]=P/D|0,D*=4294967296;return new h(A,0)}function _(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return j(_(P.substring(1),A));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=y(Math.pow(A,8));let N=w;for(let M=0;M<P.length;M+=8){var x=Math.min(8,P.length-M);const C=parseInt(P.substring(M,M+x),A);x<8?(x=y(Math.pow(A,x)),N=N.j(x).add(y(C))):(N=N.j(D),N=N.add(y(C)))}return N}var w=g(0),I=g(1),R=g(16777216);n=h.prototype,n.m=function(){if(O(this))return-j(this).m();let P=0,A=1;for(let D=0;D<this.g.length;D++){const N=this.i(D);P+=(N>=0?N:4294967296+N)*A,A*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(F(this))return"0";if(O(this))return"-"+j(this).toString(P);const A=y(Math.pow(P,6));var D=this;let N="";for(;;){const x=ne(D,A).g;D=G(D,x.j(A));let M=((D.g.length>0?D.g[0]:D.h)>>>0).toString(P);if(D=x,F(D))return M+N;for(;M.length<6;)M="0"+M;N=M+N}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function F(P){if(P.h!=0)return!1;for(let A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function O(P){return P.h==-1}n.l=function(P){return P=G(this,P),O(P)?-1:F(P)?0:1};function j(P){const A=P.g.length,D=[];for(let N=0;N<A;N++)D[N]=~P.g[N];return new h(D,~P.h).add(I)}n.abs=function(){return O(this)?j(this):this},n.add=function(P){const A=Math.max(this.g.length,P.g.length),D=[];let N=0;for(let x=0;x<=A;x++){let M=N+(this.i(x)&65535)+(P.i(x)&65535),C=(M>>>16)+(this.i(x)>>>16)+(P.i(x)>>>16);N=C>>>16,M&=65535,C&=65535,D[x]=C<<16|M}return new h(D,D[D.length-1]&-2147483648?-1:0)};function G(P,A){return P.add(j(A))}n.j=function(P){if(F(this)||F(P))return w;if(O(this))return O(P)?j(this).j(j(P)):j(j(this).j(P));if(O(P))return j(this.j(j(P)));if(this.l(R)<0&&P.l(R)<0)return y(this.m()*P.m());const A=this.g.length+P.g.length,D=[];for(var N=0;N<2*A;N++)D[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<P.g.length;x++){const M=this.i(N)>>>16,C=this.i(N)&65535,Ve=P.i(x)>>>16,je=P.i(x)&65535;D[2*N+2*x]+=C*je,ee(D,2*N+2*x),D[2*N+2*x+1]+=M*je,ee(D,2*N+2*x+1),D[2*N+2*x+1]+=C*Ve,ee(D,2*N+2*x+1),D[2*N+2*x+2]+=M*Ve,ee(D,2*N+2*x+2)}for(P=0;P<A;P++)D[P]=D[2*P+1]<<16|D[2*P];for(P=A;P<2*A;P++)D[P]=0;return new h(D,0)};function ee(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function oe(P,A){this.g=P,this.h=A}function ne(P,A){if(F(A))throw Error("division by zero");if(F(P))return new oe(w,w);if(O(P))return A=ne(j(P),A),new oe(j(A.g),j(A.h));if(O(A))return A=ne(P,j(A)),new oe(j(A.g),A.h);if(P.g.length>30){if(O(P)||O(A))throw Error("slowDivide_ only works with positive integers.");for(var D=I,N=A;N.l(P)<=0;)D=be(D),N=be(N);var x=ye(D,1),M=ye(N,1);for(N=ye(N,2),D=ye(D,2);!F(N);){var C=M.add(N);C.l(P)<=0&&(x=x.add(D),M=C),N=ye(N,1),D=ye(D,1)}return A=G(P,x.j(A)),new oe(x,A)}for(x=w;P.l(A)>=0;){for(D=Math.max(1,Math.floor(P.m()/A.m())),N=Math.ceil(Math.log(D)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),M=y(D),C=M.j(A);O(C)||C.l(P)>0;)D-=N,M=y(D),C=M.j(A);F(M)&&(M=I),x=x.add(M),P=G(P,C)}return new oe(x,P)}n.B=function(P){return ne(this,P).h},n.and=function(P){const A=Math.max(this.g.length,P.g.length),D=[];for(let N=0;N<A;N++)D[N]=this.i(N)&P.i(N);return new h(D,this.h&P.h)},n.or=function(P){const A=Math.max(this.g.length,P.g.length),D=[];for(let N=0;N<A;N++)D[N]=this.i(N)|P.i(N);return new h(D,this.h|P.h)},n.xor=function(P){const A=Math.max(this.g.length,P.g.length),D=[];for(let N=0;N<A;N++)D[N]=this.i(N)^P.i(N);return new h(D,this.h^P.h)};function be(P){const A=P.g.length+1,D=[];for(let N=0;N<A;N++)D[N]=P.i(N)<<1|P.i(N-1)>>>31;return new h(D,P.h)}function ye(P,A){const D=A>>5;A%=32;const N=P.g.length-D,x=[];for(let M=0;M<N;M++)x[M]=A>0?P.i(M+D)>>>A|P.i(M+D+1)<<32-A:P.i(M+D);return new h(x,P.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,A_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=_,Zi=h}).apply(typeof Ry<"u"?Ry:typeof self<"u"?self:typeof window<"u"?window:{});var Bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var C_,tl,k_,Xu,ff,D_,P_,R_;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bu=="object"&&Bu];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var B=u[S];if(!(B in v))break e;v=v[B]}u=u[u.length-1],S=v[u],m=m(S),m!=S&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var v=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&v.push([S,m[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){return y=g,y.apply(null,arguments)}function _(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function w(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(S,B,W){for(var ie=Array(arguments.length-2),De=2;De<arguments.length;De++)ie[De-2]=arguments[De];return m.prototype[B].apply(S,ie)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function R(u){const m=u.length;if(m>0){const v=Array(m);for(let S=0;S<m;S++)v[S]=u[S];return v}return[]}function F(u,m){for(let S=1;S<arguments.length;S++){const B=arguments[S];var v=typeof B;if(v=v!="object"?v:B?Array.isArray(B)?"array":v:"null",v=="array"||v=="object"&&typeof B.length=="number"){v=u.length||0;const W=B.length||0;u.length=v+W;for(let ie=0;ie<W;ie++)u[v+ie]=B[ie]}else u.push(B)}}class O{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function j(u){h.setTimeout(()=>{throw u},0)}function G(){var u=P;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ee{constructor(){this.h=this.g=null}add(m,v){const S=oe.get();S.set(m,v),this.h?this.h.next=S:this.g=S,this.h=S}}var oe=new O(()=>new ne,u=>u.reset());class ne{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ye=!1,P=new ee,A=()=>{const u=Promise.resolve(void 0);be=()=>{u.then(D)}};function D(){for(var u;u=G();){try{u.h.call(u.g)}catch(v){j(v)}var m=oe;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}ye=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,m),h.removeEventListener("test",v,m)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function Ve(u,m){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}w(Ve,x),Ve.prototype.init=function(u,m){const v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),Ge=0;function $e(u,m,v,S,B){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!S,this.ha=B,this.key=++Ge,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ue(u,m,v){for(const S in u)m.call(v,u[S],S,u)}function te(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function L(u){const m={};for(const v in u)m[v]=u[v];return m}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(u,m){let v,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(v in S)u[v]=S[v];for(let W=0;W<H.length;W++)v=H[W],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function Ee(u){this.src=u,this.g={},this.h=0}Ee.prototype.add=function(u,m,v,S,B){const W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);const ie=Re(u,m,S,B);return ie>-1?(m=u[ie],v||(m.fa=!1)):(m=new $e(m,this.src,W,!!S,B),m.fa=v,u.push(m)),m};function Ne(u,m){const v=m.type;if(v in u.g){var S=u.g[v],B=Array.prototype.indexOf.call(S,m,void 0),W;(W=B>=0)&&Array.prototype.splice.call(S,B,1),W&&(re(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Re(u,m,v,S){for(let B=0;B<u.length;++B){const W=u[B];if(!W.da&&W.listener==m&&W.capture==!!v&&W.ha==S)return B}return-1}var X="closure_lm_"+(Math.random()*1e6|0),he={};function de(u,m,v,S,B){if(Array.isArray(m)){for(let W=0;W<m.length;W++)de(u,m[W],v,S,B);return null}return v=yi(v),u&&u[je]?u.J(m,v,f(S)?!!S.capture:!1,B):Se(u,m,v,!1,S,B)}function Se(u,m,v,S,B,W){if(!m)throw Error("Invalid event type");const ie=f(B)?!!B.capture:!!B;let De=Pt(u);if(De||(u[X]=De=new Ee(u)),v=De.add(m,v,S,ie,W),v.proxy)return v;if(S=Me(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)M||(B=ie),B===void 0&&(B=!1),u.addEventListener(m.toString(),S,B);else if(u.attachEvent)u.attachEvent(He(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Me(){function u(v){return m.call(u.src,u.listener,v)}const m=On;return u}function vt(u,m,v,S,B){if(Array.isArray(m))for(var W=0;W<m.length;W++)vt(u,m[W],v,S,B);else S=f(S)?!!S.capture:!!S,v=yi(v),u&&u[je]?(u=u.i,W=String(m).toString(),W in u.g&&(m=u.g[W],v=Re(m,v,S,B),v>-1&&(re(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[W],u.h--)))):u&&(u=Pt(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Re(m,v,S,B)),(v=u>-1?m[u]:null)&&St(v))}function St(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[je])Ne(m.i,u);else{var v=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(v,S,u.capture):m.detachEvent?m.detachEvent(He(v),S):m.addListener&&m.removeListener&&m.removeListener(S),(v=Pt(m))?(Ne(v,u),v.h==0&&(v.src=null,m[X]=null)):re(u)}}}function He(u){return u in he?he[u]:he[u]="on"+u}function On(u,m){if(u.da)u=!0;else{m=new Ve(m,this);const v=u.listener,S=u.ha||u.src;u.fa&&St(u),u=v.call(S,m)}return u}function Pt(u){return u=u[X],u instanceof Ee?u:null}var Vn="__closure_events_fn_"+(Math.random()*1e9>>>0);function yi(u){return typeof u=="function"?u:(u[Vn]||(u[Vn]=function(m){return u.handleEvent(m)}),u[Vn])}function ht(){N.call(this),this.i=new Ee(this),this.M=this,this.G=null}w(ht,N),ht.prototype[je]=!0,ht.prototype.removeEventListener=function(u,m,v,S){vt(this,u,m,v,S)};function dt(u,m){var v,S=u.G;if(S)for(v=[];S;S=S.G)v.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new x(m,u);else if(m instanceof x)m.target=m.target||u;else{var B=m;m=new x(S,u),Te(m,B)}B=!0;let W,ie;if(v)for(ie=v.length-1;ie>=0;ie--)W=m.g=v[ie],B=_n(W,S,!0,m)&&B;if(W=m.g=u,B=_n(W,S,!0,m)&&B,B=_n(W,S,!1,m)&&B,v)for(ie=0;ie<v.length;ie++)W=m.g=v[ie],B=_n(W,S,!1,m)&&B}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let S=0;S<v.length;S++)re(v[S]);delete u.g[m],u.h--}}this.G=null},ht.prototype.J=function(u,m,v,S){return this.i.add(String(u),m,!1,v,S)},ht.prototype.K=function(u,m,v,S){return this.i.add(String(u),m,!0,v,S)};function _n(u,m,v,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let B=!0;for(let W=0;W<m.length;++W){const ie=m[W];if(ie&&!ie.da&&ie.capture==v){const De=ie.listener,wt=ie.ha||ie.src;ie.fa&&Ne(u.i,ie),B=De.call(wt,S)!==!1&&B}}return B&&!S.defaultPrevented}function cs(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function vi(u){u.g=cs(()=>{u.g=null,u.i&&(u.i=!1,vi(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class to extends N{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:vi(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ur(u){N.call(this),this.h=u,this.g={}}w(ur,N);var hs=[];function _i(u){ue(u.g,function(m,v){this.g.hasOwnProperty(v)&&St(m)},u),u.g={}}ur.prototype.N=function(){ur.Z.N.call(this),_i(this)},ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cr=h.JSON.stringify,wi=h.JSON.parse,hr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Yn(){}function no(){}var wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Br(){x.call(this,"d")}w(Br,x);function ds(){x.call(this,"c")}w(ds,x);var un={},zr=null;function Mn(){return zr=zr||new ht}un.Ia="serverreachability";function Ei(u){x.call(this,un.Ia,u)}w(Ei,x);function Ln(u){const m=Mn();dt(m,new Ei(m))}un.STAT_EVENT="statevent";function Qn(u,m){x.call(this,un.STAT_EVENT,u),this.stat=m}w(Qn,x);function rt(u){const m=Mn();dt(m,new Qn(m,u))}un.Ja="timingevent";function It(u,m){x.call(this,un.Ja,u),this.size=m}w(It,x);function ft(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function En(){this.g=!0}En.prototype.ua=function(){this.g=!1};function Xe(u,m,v,S,B,W){u.info(function(){if(u.g)if(W){var ie="",De=W.split("&");for(let Je=0;Je<De.length;Je++){var wt=De[Je].split("=");if(wt.length>1){const At=wt[0];wt=wt[1];const Pn=At.split("_");ie=Pn.length>=2&&Pn[1]=="type"?ie+(At+"="+wt+"&"):ie+(At+"=redacted&")}}}else ie=null;else ie=W;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+m+`
`+v+`
`+ie})}function sn(u,m,v,S,B,W,ie){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+m+`
`+v+`
`+W+" "+ie})}function jn(u,m,v,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+dr(u,v)+(S?" "+S:"")})}function Ti(u,m){u.info(function(){return"TIMEOUT: "+m})}En.prototype.info=function(){};function dr(u,m){if(!u.g)return m;if(!m)return null;try{const W=JSON.parse(m);if(W){for(u=0;u<W.length;u++)if(Array.isArray(W[u])){var v=W[u];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ie=1;ie<S.length;ie++)S[ie]=""}}}}return cr(W)}catch{return m}}var Jn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$r;function Tn(){}w(Tn,Yn),Tn.prototype.g=function(){return new XMLHttpRequest},$r=new Tn;function cn(u){return encodeURIComponent(String(u))}function fr(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function hn(u,m,v,S){this.j=u,this.i=m,this.l=v,this.S=S||1,this.V=new ur(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Si}function Si(){this.i=null,this.g="",this.h=!1}var fs={},ps={};function Sn(u,m,v){u.M=1,u.A=Gr(Un(m)),u.u=v,u.R=!0,xe(u,null)}function xe(u,m){u.F=Date.now(),Rt(u),u.B=Un(u.A);var v=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),wa(v.i,"t",S),u.C=0,v=u.j.L,u.h=new Si,u.g=Wl(u.j,v?m:null,!u.u),u.P>0&&(u.O=new to(y(u.Y,u,u.g),u.P)),m=u.V,v=u.g,S=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(hs[0]=B.toString()),B=hs);for(let W=0;W<B.length;W++){const ie=de(v,B[W],S||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Ln(),Xe(u.i,u.v,u.B,u.l,u.S,u.u)}hn.prototype.ba=function(u){u=u.target;const m=this.O;m&&wr(u)==3?m.j():this.Y(u)},hn.prototype.Y=function(u){try{if(u==this.g)e:{const De=wr(this.g),wt=this.g.ya(),Je=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||zl(this.g)))){this.K||De!=4||wt==7||(wt==8||Je<=0?Ln(3):Ln(2)),Ii(this);var m=this.g.ca();this.X=m;var v=Ze(this);if(this.o=m==200,sn(this.i,this.v,this.B,this.l,this.S,De,m),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var W=S;break t}}W=null}if(u=W)jn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,st(this,u);else{this.o=!1,this.m=3,rt(12),qr(this),Hr(this);break e}}if(this.R){u=!0;let At;for(;!this.K&&this.C<v.length;)if(At=Kt(this,v),At==ps){De==4&&(this.m=4,rt(14),u=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(At==fs){this.m=4,rt(15),jn(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else jn(this.i,this.l,At,null),st(this,At);if(it(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||v.length!=0||this.h.h||(this.m=1,rt(16),u=!1),this.o=this.o&&u,!u)jn(this.i,this.l,v,"[Invalid Chunked Response]"),qr(this),Hr(this);else if(v.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ss(ie),ie.P=!0,rt(11))}}else jn(this.i,this.l,v,null),st(this,v);De==4&&qr(this),this.o&&!this.K&&(De==4?fo(this.j,this):(this.o=!1,Rt(this)))}else Ta(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,rt(12)):(this.m=0,rt(13)),qr(this),Hr(this)}}}catch{}finally{}};function Ze(u){if(!it(u))return u.g.la();const m=zl(u.g);if(m==="")return"";let v="";const S=m.length,B=wr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return qr(u),Hr(u),"";u.h.i=new h.TextDecoder}for(let W=0;W<S;W++)u.h.h=!0,v+=u.h.i.decode(m[W],{stream:!(B&&W==S-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function it(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Kt(u,m){var v=u.C,S=m.indexOf(`
`,v);return S==-1?ps:(v=Number(m.substring(v,S)),isNaN(v)?fs:(S+=1,S+v>m.length?ps:(m=m.slice(S,S+v),u.C=S+v,m)))}hn.prototype.cancel=function(){this.K=!0,qr(this)};function Rt(u){u.T=Date.now()+u.H,Wr(u,u.H)}function Wr(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ft(y(u.aa,u),m)}function Ii(u){u.D&&(h.clearTimeout(u.D),u.D=null)}hn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ti(this.i,this.B),this.M!=2&&(Ln(),rt(17)),qr(this),this.m=2,Hr(this)):Wr(this,this.T-u)};function Hr(u){u.j.I==0||u.K||fo(u.j,u)}function qr(u){Ii(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,_i(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function st(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||fa(v.h,u))){if(!u.L&&fa(v.h,u)&&v.I==3){try{var S=v.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)ho(v),kn(v);else break e;Sr(v),rt(18)}}else v.xa=B[1],0<v.xa-v.K&&B[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ft(y(v.Va,v),6e3));ms(v.h)<=1&&v.ta&&(v.ta=void 0)}else Dn(v,11)}else if((u.L||v.g==u)&&ho(v),!C(m))for(B=v.Ba.g.parse(m),m=0;m<B.length;m++){let Je=B[m];const At=Je[0];if(!(At<=v.K))if(v.K=At,Je=Je[1],v.I==2)if(Je[0]=="c"){v.M=Je[1],v.ba=Je[2];const Pn=Je[3];Pn!=null&&(v.ka=Pn,v.j.info("VER="+v.ka));const Xr=Je[4];Xr!=null&&(v.za=Xr,v.j.info("SVER="+v.za));const Ir=Je[5];Ir!=null&&typeof Ir=="number"&&Ir>0&&(S=1.5*Ir,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Ar=u.g;if(Ar){const go=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(go){var W=S.h;W.g||go.indexOf("spdy")==-1&&go.indexOf("quic")==-1&&go.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(io(W,W.h),W.h=null))}if(S.G){const Aa=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Aa&&(S.wa=Aa,Ye(S.J,S.G,Aa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var ie=u;if(S.na=Ia(S,S.L?S.ba:null,S.W),ie.L){gs(S.h,ie);var De=ie,wt=S.O;wt&&(De.H=wt),De.D&&(Ii(De),Rt(De)),S.g=ie}else Yt(S);v.i.length>0&&Jr(v)}else Je[0]!="stop"&&Je[0]!="close"||Dn(v,7);else v.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Dn(v,7):uo(v):Je[0]!="noop"&&v.l&&v.l.qa(Je),v.A=0)}}Ln(4)}catch{}}var ah=class{constructor(u,m){this.g=u,this.map=m}};function ro(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function da(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ms(u){return u.h?1:u.g?u.g.size:0}function fa(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function io(u,m){u.g?u.g.add(m):u.h=m}function gs(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ro.prototype.cancel=function(){if(this.i=In(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function In(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return R(u.i)}var jl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function An(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const S=u[v].indexOf("=");let B,W=null;S>=0?(B=u[v].substring(0,S),W=u[v].substring(S+1)):B=u[v],m(B,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function pr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof pr?(this.l=u.l,ys(this,u.j),this.o=u.o,this.g=u.g,mr(this,u.u),this.h=u.h,Ai(this,Ea(u.i)),this.m=u.m):u&&(m=String(u).match(jl))?(this.l=!1,ys(this,m[1]||"",!0),this.o=vs(m[2]||""),this.g=vs(m[3]||"",!0),mr(this,m[4]),this.h=vs(m[5]||"",!0),Ai(this,m[6]||"",!0),this.m=vs(m[7]||"")):(this.l=!1,this.i=new ze(null,this.l))}pr.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(_s(m,ma,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(_s(m,ma,!0),"@"),u.push(cn(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(_s(v,v.charAt(0)=="/"?ws:ga,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",_s(v,ya)),u.join("")},pr.prototype.resolve=function(u){const m=Un(this);let v=!!u.j;v?ys(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var S=u.h;if(v)mr(m,u.u);else if(v=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=m.h.lastIndexOf("/");B!=-1&&(S=m.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const W=[];for(let ie=0;ie<B.length;){const De=B[ie++];De=="."?S&&ie==B.length&&W.push(""):De==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),S&&ie==B.length&&W.push("")):(W.push(De),S=!0)}S=W.join("/")}else S=B}return v?m.h=S:v=u.i.toString()!=="",v?Ai(m,Ea(u.i)):v=!!u.m,v&&(m.m=u.m),m};function Un(u){return new pr(u)}function ys(u,m,v){u.j=v?vs(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function mr(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Ai(u,m,v){m instanceof ze?(u.i=m,oo(u.i,u.l)):(v||(m=_s(m,lh)),u.i=new ze(m,u.l))}function Ye(u,m,v){u.i.set(m,v)}function Gr(u){return Ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function vs(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _s(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,pa),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function pa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ma=/[#\/\?@]/g,ga=/[#\?:]/g,ws=/[#\?]/g,lh=/[#\?@]/g,ya=/#/g;function ze(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function gr(u){u.g||(u.g=new Map,u.h=0,u.i&&An(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=ze.prototype,n.add=function(u,m){gr(this),this.i=null,u=yr(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function va(u,m){gr(u),m=yr(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function so(u,m){return gr(u),m=yr(u,m),u.g.has(m)}n.forEach=function(u,m){gr(this),this.g.forEach(function(v,S){v.forEach(function(B){u.call(m,B,S,this)},this)},this)};function _a(u,m){gr(u);let v=[];if(typeof m=="string")so(u,m)&&(v=v.concat(u.g.get(yr(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}n.set=function(u,m){return gr(this),this.i=null,u=yr(this,u),so(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=_a(this,u),u.length>0?String(u[0]):m):m};function wa(u,m,v){va(u,m),v.length>0&&(u.i=null,u.g.set(yr(u,m),R(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var v=m[S];const B=cn(v);v=_a(this,v);for(let W=0;W<v.length;W++){let ie=B;v[W]!==""&&(ie+="="+cn(v[W])),u.push(ie)}}return this.i=u.join("&")};function Ea(u){const m=new ze;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function yr(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function oo(u,m){m&&!u.j&&(gr(u),u.i=null,u.g.forEach(function(v,S){const B=S.toLowerCase();S!=B&&(va(this,S),wa(this,B,v))},u)),u.j=m}function vr(u,m){const v=new En;if(h.Image){const S=new Image;S.onload=_(Ut,v,"TestLoadImage: loaded",!0,m,S),S.onerror=_(Ut,v,"TestLoadImage: error",!1,m,S),S.onabort=_(Ut,v,"TestLoadImage: abort",!1,m,S),S.ontimeout=_(Ut,v,"TestLoadImage: timeout",!1,m,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function _r(u,m){const v=new En,S=new AbortController,B=setTimeout(()=>{S.abort(),Ut(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(W=>{clearTimeout(B),W.ok?Ut(v,"TestPingServer: ok",!0,m):Ut(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(B),Ut(v,"TestPingServer: error",!1,m)})}function Ut(u,m,v,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(v)}catch{}}function Es(){this.g=new hr}function Kr(u){this.i=u.Sb||null,this.h=u.ab||!1}w(Kr,Yn),Kr.prototype.g=function(){return new Cn(this.i,this.h)};function Cn(u,m){ht.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Cn,ht),n=Cn.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Xn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ci(this):Xn(this),this.readyState==3&&Fl(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Ci(this))},n.Na=function(u){this.g&&(this.response=u,Ci(this))},n.ga=function(){this.g&&Ci(this)};function Ci(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Xn(u)}n.setRequestHeader=function(u,m){this.A.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Xn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Cn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ul(u){let m="";return ue(u,function(v,S){m+=S,m+=":",m+=v,m+=`\r
`}),m}function ao(u,m,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Ul(v),typeof u=="string"?v!=null&&cn(v):Ye(u,m,v))}function et(u){ht.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(et,ht);var Bl=/^https?$/i,uh=["POST","PUT"];n=et.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,m,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$r.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){ki(this,W);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)v.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())v.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),B=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(uh,m,void 0)>=0)||S||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ie]of v)this.g.setRequestHeader(W,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(W){ki(this,W)}};function ki(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Di(u),Qr(u)}function Di(u){u.A||(u.A=!0,dt(u,"complete"),dt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,dt(this,"complete"),dt(this,"abort"),Qr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qr(this,!0)),et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Yr(this):this.Xa())},n.Xa=function(){Yr(this)};function Yr(u){if(u.h&&typeof l<"u"){if(u.v&&wr(u)==4)setTimeout(u.Ca.bind(u),0);else if(dt(u,"readystatechange"),wr(u)==4){u.h=!1;try{const W=u.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var S;if(S=W===0){let ie=String(u.D).match(jl)[1]||null;!ie&&h.self&&h.self.location&&(ie=h.self.location.protocol.slice(0,-1)),S=!Bl.test(ie?ie.toLowerCase():"")}v=S}if(v)dt(u,"complete"),dt(u,"success");else{u.o=6;try{var B=wr(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",Di(u)}}finally{Qr(u)}}}}function Qr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||dt(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function wr(u){return u.g?u.g.readyState:0}n.ca=function(){try{return wr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),wi(m)}};function zl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ta(u){const m={};u=(u.g&&wr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(C(u[S]))continue;var v=fr(u[S]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=m[B]||[];m[B]=W,W.push(v)}te(m,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Er(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function lo(u){this.za=0,this.i=[],this.j=new En,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Er("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Er("baseRetryDelayMs",5e3,u),this.Za=Er("retryDelaySeedMs",1e4,u),this.Ta=Er("forwardChannelMaxRetries",2,u),this.va=Er("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ro(u&&u.concurrentRequestLimit),this.Ba=new Es,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=lo.prototype,n.ka=8,n.I=1,n.connect=function(u,m,v,S){rt(0),this.W=u,this.H=m||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Ia(this,null,this.W),Jr(this)};function uo(u){if(co(u),u.I==3){var m=u.V++,v=Un(u.J);if(Ye(v,"SID",u.M),Ye(v,"RID",m),Ye(v,"TYPE","terminate"),Tr(u,v),m=new hn(u,u.j,m),m.M=2,m.A=Gr(Un(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=m.A,v=!0),v||(m.g=Wl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Rt(m)}Is(u)}function kn(u){u.g&&(Ss(u),u.g.cancel(),u.g=null)}function co(u){kn(u),u.v&&(h.clearTimeout(u.v),u.v=null),ho(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Jr(u){if(!da(u.h)&&!u.m){u.m=!0;var m=u.Ea;be||A(),ye||(be(),ye=!0),P.add(m,u),u.D=0}}function $l(u,m){return ms(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ft(y(u.Ea,u,m),po(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new hn(this,this.j,u);let W=this.o;if(this.U&&(W?(W=L(W),Te(W,this.U)):W=this.U),this.u!==null||this.R||(B.J=W,W=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Sa(this,B,m),v=Un(this.J),Ye(v,"RID",u),Ye(v,"CVER",22),this.G&&Ye(v,"X-HTTP-Session-Id",this.G),Tr(this,v),W&&(this.R?m="headers="+cn(Ul(W))+"&"+m:this.u&&ao(v,this.u,W)),io(this.h,B),this.Ra&&Ye(v,"TYPE","init"),this.S?(Ye(v,"$req",m),Ye(v,"SID","null"),B.U=!0,Sn(B,v,null)):Sn(B,v,m),this.I=2}}else this.I==3&&(u?Ts(this,u):this.i.length==0||da(this.h)||Ts(this))};function Ts(u,m){var v;m?v=m.l:v=u.V++;const S=Un(u.J);Ye(S,"SID",u.M),Ye(S,"RID",v),Ye(S,"AID",u.K),Tr(u,S),u.u&&u.o&&ao(S,u.u,u.o),v=new hn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Sa(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),io(u.h,v),Sn(v,S,m)}function Tr(u,m){u.H&&ue(u.H,function(v,S){Ye(m,S,v)}),u.l&&ue({},function(v,S){Ye(m,S,v)})}function Sa(u,m,v){v=Math.min(u.i.length,v);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var B=u.i;let De=-1;for(;;){const wt=["count="+v];De==-1?v>0?(De=B[0].g,wt.push("ofs="+De)):De=0:wt.push("ofs="+De);let Je=!0;for(let At=0;At<v;At++){var W=B[At].g;const Pn=B[At].map;if(W-=De,W<0)De=Math.max(0,B[At].g-100),Je=!1;else try{W="req"+W+"_"||"";try{var ie=Pn instanceof Map?Pn:Object.entries(Pn);for(const[Xr,Ir]of ie){let Ar=Ir;f(Ir)&&(Ar=cr(Ir)),wt.push(W+Xr+"="+encodeURIComponent(Ar))}}catch(Xr){throw wt.push(W+"type="+encodeURIComponent("_badmap")),Xr}}catch{S&&S(Pn)}}if(Je){ie=wt.join("&");break e}}ie=void 0}return u=u.i.splice(0,v),m.G=u,ie}function Yt(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;be||A(),ye||(be(),ye=!0),P.add(m,u),u.A=0}}function Sr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ft(y(u.Da,u),po(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Pi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ft(y(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rt(10),kn(this),Pi(this))};function Ss(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Pi(u){u.g=new hn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Un(u.na);Ye(m,"RID","rpc"),Ye(m,"SID",u.M),Ye(m,"AID",u.K),Ye(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ye(m,"TO",u.ia),Ye(m,"TYPE","xmlhttp"),Tr(u,m),u.u&&u.o&&ao(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Gr(Un(m)),v.u=null,v.R=!0,xe(v,u)}n.Va=function(){this.C!=null&&(this.C=null,kn(this),Sr(this),rt(19))};function ho(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function fo(u,m){var v=null;if(u.g==m){ho(u),Ss(u),u.g=null;var S=2}else if(fa(u.h,m))v=m.G,gs(u.h,m),S=1;else return;if(u.I!=0){if(m.o)if(S==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var B=u.D;S=Mn(),dt(S,new It(S,v)),Jr(u)}else Yt(u);else if(B=m.m,B==3||B==0&&m.X>0||!(S==1&&$l(u,m)||S==2&&Sr(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),B){case 1:Dn(u,5);break;case 4:Dn(u,10);break;case 3:Dn(u,6);break;default:Dn(u,2)}}}function po(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function Dn(u,m){if(u.j.info("Error code "+m),m==2){var v=y(u.bb,u),S=u.Ua;const B=!S;S=new pr(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ys(S,"https"),Gr(S),B?vr(S.toString(),v):_r(S.toString(),v)}else rt(2);u.I=0,u.l&&u.l.pa(m),Is(u),co(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Is(u){if(u.I=0,u.ja=[],u.l){const m=In(u.h);(m.length!=0||u.i.length!=0)&&(F(u.ja,m),F(u.ja,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.oa()}}function Ia(u,m,v){var S=v instanceof pr?Un(v):new pr(v);if(S.g!="")m&&(S.g=m+"."+S.g),mr(S,S.u);else{var B=h.location;S=B.protocol,m=m?m+"."+B.hostname:B.hostname,B=+B.port;const W=new pr(null);S&&ys(W,S),m&&(W.g=m),B&&mr(W,B),v&&(W.h=v),S=W}return v=u.G,m=u.wa,v&&m&&Ye(S,v,m),Ye(S,"VER",u.ka),Tr(u,S),S}function Wl(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new et(new Kr({ab:v})):new et(u.ma),m.Fa(u.L),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hl(){}n=Hl.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function mo(){}mo.prototype.g=function(u,m){return new Bt(u,m)};function Bt(u,m){ht.call(this),this.g=new lo(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Ri(this)}w(Bt,ht),Bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){uo(this.g)},Bt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=cr(u),u=v);m.i.push(new ah(m.Ya++,u)),m.I==3&&Jr(m)},Bt.prototype.N=function(){this.g.l=null,delete this.j,uo(this.g),delete this.g,Bt.Z.N.call(this)};function ql(u){Br.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(ql,Br);function Gl(){ds.call(this),this.status=1}w(Gl,ds);function Ri(u){this.g=u}w(Ri,Hl),Ri.prototype.ra=function(){dt(this.g,"a")},Ri.prototype.qa=function(u){dt(this.g,new ql(u))},Ri.prototype.pa=function(u){dt(this.g,new Gl)},Ri.prototype.oa=function(){dt(this.g,"b")},mo.prototype.createWebChannel=mo.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,R_=function(){return new mo},P_=function(){return Mn()},D_=un,ff={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Jn.NO_ERROR=0,Jn.TIMEOUT=8,Jn.HTTP_ERROR=6,Xu=Jn,Fn.COMPLETE="complete",k_=Fn,no.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",ht.prototype.listen=ht.prototype.J,tl=no,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,C_=et}).apply(typeof Bu<"u"?Bu:typeof self<"u"?self:typeof window<"u"?window:{});const Ny="@firebase/firestore",xy="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new Zf("@firebase/firestore");function Lo(){return qs.logLevel}function le(n,...e){if(qs.logLevel<=Fe.DEBUG){const t=e.map(np);qs.debug(`Firestore (${sa}): ${n}`,...t)}}function di(n,...e){if(qs.logLevel<=Fe.ERROR){const t=e.map(np);qs.error(`Firestore (${sa}): ${n}`,...t)}}function Qo(n,...e){if(qs.logLevel<=Fe.WARN){const t=e.map(np);qs.warn(`Firestore (${sa}): ${n}`,...t)}}function np(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,N_(n,i,t)}function N_(n,e,t){let i=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw di(i),new Error(i)}function Qe(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||N_(e,o,i)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends mi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _I{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class wI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class EI{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new es;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new es,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new es)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new x_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class TI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class SI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new TI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class by{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class II{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,le("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new by(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new by(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=AI(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ue(n,e){return n<e?-1:n>e?1:0}function pf(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),l=e.charAt(i);if(o!==l)return zd(o)===zd(l)?Ue(o,l):zd(o)?1:-1}return Ue(n.length,e.length)}const CI=55296,kI=57343;function zd(n){const e=n.charCodeAt(0);return e>=CI&&e<=kI}function Jo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="__name__";class xr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=xr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ue(e.length,t.length)}static compareSegments(e,t){const i=xr.isNumericId(e),o=xr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?xr.extractNumericId(e).compare(xr.extractNumericId(t)):pf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zi.fromString(e.substring(4,e.length-2))}}class gt extends xr{construct(e,t,i){return new gt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new gt(t)}static emptyPath(){return new gt([])}}const DI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends xr{construct(e,t,i){return new Ht(e,t,i)}static isValidIdentifier(e){return DI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Oy}static keyField(){return new Ht([Oy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ge(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ge(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ge(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(t)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(gt.fromString(e))}static fromName(e){return new we(gt.fromString(e).popFirst(5))}static empty(){return new we(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(n,e,t){if(!t)throw new ge(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RI(n,e,t,i){if(e===!0&&i===!0)throw new ge(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Vy(n){if(!we.isDocumentKey(n))throw new ge(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function b_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ip(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function ts(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ip(n);throw new ge(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Cl(n,e){if(!b_(n))throw new ge(Y.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const h=n[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ge(Y.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=-62135596800,Ly=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Ly);return new lt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<My)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ly}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cl(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-My;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Dt("string",lt._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new lt(0,0))}static max(){return new ke(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=-1;function NI(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(i===1e9?new lt(t+1,0):new lt(t,i));return new ns(o,we.empty(),e)}function xI(n){return new ns(n.readTime,n.key,fl)}class ns{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ns(ke.min(),we.empty(),fl)}static max(){return new ns(ke.max(),we.empty(),fl)}}function bI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==OI)throw n;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):q.reject(t)}static resolve(e){return new q(((t,i)=>{t(e)}))}static reject(e){return new q(((t,i)=>{i(e)}))}static waitFor(e){return new q(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>i(g)))})),h=!0,l===o&&t()}))}static or(e){let t=q.resolve(!1);for(const i of e)t=t.next((o=>o?q.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new q(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((_=>{h[y]=_,++f,f===l&&i(h)}),(_=>o(_)))}}))}static doWhile(e,t){return new q(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function MI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function aa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=-1;function Lc(n){return n==null}function dc(n){return n===0&&1/n==-1/0}function LI(n){return typeof n=="number"&&Number.isInteger(n)&&!dc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="";function jI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jy(e)),e=FI(n.get(t),e);return jy(e)}function FI(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case O_:t+="";break;default:t+=l}}return t}function jy(n){return n+O_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ys(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function V_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zu(this.root,e,this.comparator,!0)}}class zu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Wt.RED,this.left=o??Wt.EMPTY,this.right=l??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Wt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Wt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uy(this.data.getIterator())}getIteratorFrom(e){return new Uy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Vt(this.comparator);return t.data=e,t}}class Uy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new or([])}unionWith(e){let t=new Vt(Ht.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new or(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new M_("Invalid base64 string: "+l):l}})(e);return new Gt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const UI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=UI.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function is(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="server_timestamp",j_="__type__",F_="__previous_value__",U_="__local_write_time__";function op(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[j_])==null?void 0:i.stringValue)===L_}function jc(n){const e=n.mapValue.fields[F_];return op(e)?jc(e):e}function pl(n){const e=rs(n.mapValue.fields[U_].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,t,i,o,l,h,f,g,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=_}}const fc="(default)";class ml{constructor(e,t){this.projectId=e,this.database=t||fc}static empty(){return new ml("","")}get isDefaultDatabase(){return this.database===fc}isEqual(e){return e instanceof ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="__type__",zI="__max__",$u={mapValue:{}},z_="__vector__",pc="value";function ss(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?op(n)?4:WI(n)?9007199254740991:$I(n)?10:11:Ie(28295,{value:n})}function jr(n,e){if(n===e)return!0;const t=ss(n);if(t!==ss(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pl(n).isEqual(pl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=rs(o.timestampValue),f=rs(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return is(o.bytesValue).isEqual(is(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Tt(o.geoPointValue.latitude)===Tt(l.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Tt(o.integerValue)===Tt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=Tt(o.doubleValue),f=Tt(l.doubleValue);return h===f?dc(h)===dc(f):isNaN(h)&&isNaN(f)}return!1})(n,e);case 9:return Jo(n.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Fy(h)!==Fy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!jr(h[g],f[g])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function gl(n,e){return(n.values||[]).find((t=>jr(t,e)))!==void 0}function Xo(n,e){if(n===e)return 0;const t=ss(n),i=ss(e);if(t!==i)return Ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=Tt(l.integerValue||l.doubleValue),g=Tt(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return By(n.timestampValue,e.timestampValue);case 4:return By(pl(n),pl(e));case 5:return pf(n.stringValue,e.stringValue);case 6:return(function(l,h){const f=is(l),g=is(h);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const _=Ue(f[y],g[y]);if(_!==0)return _}return Ue(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Ue(Tt(l.latitude),Tt(h.latitude));return f!==0?f:Ue(Tt(l.longitude),Tt(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return zy(n.arrayValue,e.arrayValue);case 10:return(function(l,h){var I,R,F,O;const f=l.fields||{},g=h.fields||{},y=(I=f[pc])==null?void 0:I.arrayValue,_=(R=g[pc])==null?void 0:R.arrayValue,w=Ue(((F=y==null?void 0:y.values)==null?void 0:F.length)||0,((O=_==null?void 0:_.values)==null?void 0:O.length)||0);return w!==0?w:zy(y,_)})(n.mapValue,e.mapValue);case 11:return(function(l,h){if(l===$u.mapValue&&h===$u.mapValue)return 0;if(l===$u.mapValue)return 1;if(h===$u.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},_=Object.keys(y);g.sort(),_.sort();for(let w=0;w<g.length&&w<_.length;++w){const I=pf(g[w],_[w]);if(I!==0)return I;const R=Xo(f[g[w]],y[_[w]]);if(R!==0)return R}return Ue(g.length,_.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function By(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=rs(n),i=rs(e),o=Ue(t.seconds,i.seconds);return o!==0?o:Ue(t.nanos,i.nanos)}function zy(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Xo(t[o],i[o]);if(l)return l}return Ue(t.length,i.length)}function Zo(n){return mf(n)}function mf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=rs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return is(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=mf(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${mf(t.fields[h])}`;return o+"}"})(n.mapValue):Ie(61005,{value:n})}function Zu(n){switch(ss(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jc(n);return e?16+Zu(e):16;case 5:return 2*n.stringValue.length;case 6:return is(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Zu(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Ys(i.fields,((l,h)=>{o+=l.length+Zu(h)})),o})(n.mapValue);default:throw Ie(13486,{value:n})}}function gf(n){return!!n&&"integerValue"in n}function ap(n){return!!n&&"arrayValue"in n}function $y(n){return!!n&&"nullValue"in n}function Wy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ec(n){return!!n&&"mapValue"in n}function $I(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[B_])==null?void 0:i.stringValue)===z_}function al(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ys(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=al(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=al(n.arrayValue.values[t]);return e}return{...n}}function WI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===zI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(t)}setAll(e){let t=Ht.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=al(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ec(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ys(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Gn(al(this.value))}}function $_(n){const e=[];return Ys(n.fields,((t,i)=>{const o=new Ht([t]);if(ec(i)){const l=$_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new nn(e,0,ke.min(),ke.min(),ke.min(),Gn.empty(),0)}static newFoundDocument(e,t,i,o){return new nn(e,1,t,ke.min(),i,o,0)}static newNoDocument(e,t){return new nn(e,2,t,ke.min(),ke.min(),Gn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,ke.min(),ke.min(),Gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.position=e,this.inclusive=t}}function Hy(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(l.field.isKeyField()?i=we.comparator(we.fromName(h.referenceValue),t.key):i=Xo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function qy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function HI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{}class bt extends W_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new GI(e,t,i):t==="array-contains"?new QI(e,i):t==="in"?new JI(e,i):t==="not-in"?new XI(e,i):t==="array-contains-any"?new ZI(e,i):new bt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new KI(e,i):new YI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xo(t,this.value)):t!==null&&ss(this.value)===ss(t)&&this.matchesComparison(Xo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fr extends W_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fr(e,t)}matches(e){return H_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function H_(n){return n.op==="and"}function q_(n){return qI(n)&&H_(n)}function qI(n){for(const e of n.filters)if(e instanceof Fr)return!1;return!0}function yf(n){if(n instanceof bt)return n.field.canonicalString()+n.op.toString()+Zo(n.value);if(q_(n))return n.filters.map((e=>yf(e))).join(",");{const e=n.filters.map((t=>yf(t))).join(",");return`${n.op}(${e})`}}function G_(n,e){return n instanceof bt?(function(i,o){return o instanceof bt&&i.op===o.op&&i.field.isEqual(o.field)&&jr(i.value,o.value)})(n,e):n instanceof Fr?(function(i,o){return o instanceof Fr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&G_(h,o.filters[f])),!0):!1})(n,e):void Ie(19439)}function K_(n){return n instanceof bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Zo(t.value)}`})(n):n instanceof Fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(K_).join(" ,")+"}"})(n):"Filter"}class GI extends bt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class KI extends bt{constructor(e,t){super(e,"in",t),this.keys=Y_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class YI extends bt{constructor(e,t){super(e,"not-in",t),this.keys=Y_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Y_(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>we.fromName(i.referenceValue)))}class QI extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ap(t)&&gl(t.arrayValue,this.value)}}class JI extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gl(this.value.arrayValue,t)}}class XI extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gl(this.value.arrayValue,t)}}class ZI extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ap(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>gl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function Gy(n,e=null,t=[],i=[],o=null,l=null,h=null){return new e1(n,e,t,i,o,l,h)}function lp(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>yf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Lc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Zo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Zo(i))).join(",")),e.Te=t}return e.Te}function up(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!G_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qy(n.startAt,e.startAt)&&qy(n.endAt,e.endAt)}function vf(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function t1(n,e,t,i,o,l,h,f){return new Fc(n,e,t,i,o,l,h,f)}function Uc(n){return new Fc(n)}function Ky(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function n1(n){return n.collectionGroup!==null}function ll(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Vt(Ht.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new gc(l,i))})),t.has(Ht.keyField().canonicalString())||e.Ie.push(new gc(Ht.keyField(),i))}return e.Ie}function br(n){const e=Pe(n);return e.Ee||(e.Ee=r1(e,ll(n))),e.Ee}function r1(n,e){if(n.limitType==="F")return Gy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new gc(o.field,l)}));const t=n.endAt?new mc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new mc(n.startAt.position,n.startAt.inclusive):null;return Gy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function _f(n,e,t){return new Fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bc(n,e){return up(br(n),br(e))&&n.limitType===e.limitType}function Q_(n){return`${lp(br(n))}|lt:${n.limitType}`}function jo(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>K_(o))).join(", ")}]`),Lc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Zo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Zo(o))).join(",")),`Target(${i})`})(br(n))}; limitType=${n.limitType})`}function zc(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):we.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of ll(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,g){const y=Hy(h,f,g);return h.inclusive?y<=0:y<0})(i.startAt,ll(i),o)||i.endAt&&!(function(h,f,g){const y=Hy(h,f,g);return h.inclusive?y>=0:y>0})(i.endAt,ll(i),o))})(n,e)}function i1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function J_(n){return(e,t)=>{let i=!1;for(const o of ll(n)){const l=s1(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function s1(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?Xo(g,y):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return V_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=new yt(we.comparator);function fi(){return o1}const X_=new yt(we.comparator);function nl(...n){let e=X_;for(const t of n)e=e.insert(t.key,t);return e}function Z_(n){let e=X_;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function js(){return ul()}function ew(){return ul()}function ul(){return new Qs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const a1=new yt(we.comparator),l1=new Vt(we.comparator);function Be(...n){let e=l1;for(const t of n)e=e.add(t);return e}const u1=new Vt(Ue);function c1(){return u1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(e)?"-0":e}}function tw(n){return{integerValue:""+n}}function h1(n,e){return LI(e)?tw(e):cp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(){this._=void 0}}function d1(n,e,t){return n instanceof yc?(function(o,l){const h={fields:{[j_]:{stringValue:L_},[U_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&op(l)&&(l=jc(l)),l&&(h.fields[F_]=l),{mapValue:h}})(t,e):n instanceof yl?rw(n,e):n instanceof vl?iw(n,e):(function(o,l){const h=nw(o,l),f=Yy(h)+Yy(o.Ae);return gf(h)&&gf(o.Ae)?tw(f):cp(o.serializer,f)})(n,e)}function f1(n,e,t){return n instanceof yl?rw(n,e):n instanceof vl?iw(n,e):t}function nw(n,e){return n instanceof vc?(function(i){return gf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class yc extends $c{}class yl extends $c{constructor(e){super(),this.elements=e}}function rw(n,e){const t=sw(e);for(const i of n.elements)t.some((o=>jr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class vl extends $c{constructor(e){super(),this.elements=e}}function iw(n,e){let t=sw(e);for(const i of n.elements)t=t.filter((o=>!jr(o,i)));return{arrayValue:{values:t}}}class vc extends $c{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Yy(n){return Tt(n.integerValue||n.doubleValue)}function sw(n){return ap(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function p1(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof yl&&o instanceof yl||i instanceof vl&&o instanceof vl?Jo(i.elements,o.elements,jr):i instanceof vc&&o instanceof vc?jr(i.Ae,o.Ae):i instanceof yc&&o instanceof yc})(n.transform,e.transform)}class m1{constructor(e,t){this.version=e,this.transformResults=t}}class ci{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ci}static exists(e){return new ci(void 0,e)}static updateTime(e){return new ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Wc{}function ow(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new lw(n.key,ci.none()):new kl(n.key,n.data,ci.none());{const t=n.data,i=Gn.empty();let o=new Vt(Ht.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Js(n.key,i,new or(o.toArray()),ci.none())}}function g1(n,e,t){n instanceof kl?(function(o,l,h){const f=o.value.clone(),g=Jy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Js?(function(o,l,h){if(!tc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Jy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(aw(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(n,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function cl(n,e,t,i){return n instanceof kl?(function(l,h,f,g){if(!tc(l.precondition,h))return f;const y=l.value.clone(),_=Xy(l.fieldTransforms,g,h);return y.setAll(_),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Js?(function(l,h,f,g){if(!tc(l.precondition,h))return f;const y=Xy(l.fieldTransforms,g,h),_=h.data;return _.setAll(aw(l)),_.setAll(y),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((w=>w.field)))})(n,e,t,i):(function(l,h,f){return tc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(n,e,t)}function y1(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=nw(i.transform,o||null);l!=null&&(t===null&&(t=Gn.empty()),t.set(i.field,l))}return t||null}function Qy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Jo(i,o,((l,h)=>p1(l,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class kl extends Wc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Js extends Wc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function aw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Jy(n,e,t){const i=new Map;Qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,f1(h,f,t[o]))}return i}function Xy(n,e,t){const i=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);i.set(o.field,d1(l,h,e))}return i}class lw extends Wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v1 extends Wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&g1(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=cl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=cl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=ew();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=ow(h,f);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,((t,i)=>Qy(t,i)))&&Jo(this.baseMutations,e.baseMutations,((t,i)=>Qy(t,i)))}}class hp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return a1})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new hp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,We;function T1(n){switch(n){case Y.OK:return Ie(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function uw(n){if(n===void 0)return di("GRPC error has no .code"),Y.UNKNOWN;switch(n){case kt.OK:return Y.OK;case kt.CANCELLED:return Y.CANCELLED;case kt.UNKNOWN:return Y.UNKNOWN;case kt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case kt.INTERNAL:return Y.INTERNAL;case kt.UNAVAILABLE:return Y.UNAVAILABLE;case kt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case kt.NOT_FOUND:return Y.NOT_FOUND;case kt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case kt.ABORTED:return Y.ABORTED;case kt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case kt.DATA_LOSS:return Y.DATA_LOSS;default:return Ie(39323,{code:n})}}(We=kt||(kt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=new Zi([4294967295,4294967295],0);function Zy(n){const e=S1().encode(n),t=new A_;return t.update(e),new Uint8Array(t.digest())}function ev(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Zi([t,i],0),new Zi([o,l],0)]}class dp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new rl(`Invalid padding: ${t}`);if(i<0)throw new rl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new rl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new rl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zi.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Zi.fromNumber(i)));return o.compare(I1)===1&&(o=new Zi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Zy(e),[i,o]=ev(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new dp(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=Zy(e),[i,o]=ev(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Dl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Hc(ke.min(),o,new yt(Ue),fi(),Be())}}class Dl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Dl(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class cw{constructor(e,t){this.targetId=e,this.Ce=t}}class hw{constructor(e,t,i=Gt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class tv{constructor(){this.ve=0,this.Fe=nv(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie(38017,{changeType:l})}})),new Dl(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=nv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class A1{constructor(e){this.Ge=e,this.ze=new Map,this.je=fi(),this.Je=Wu(),this.He=Wu(),this.Ye=new yt(Ue)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(vf(l))if(i===0){const h=new we(l.path);this.et(t,h,nn.newNoDocument(h,ke.min()))}else Qe(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=is(i).toUint8Array()}catch(g){if(g instanceof M_)return Qo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new dp(h,o,l)}catch(g){return Qo(g instanceof rl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&vf(f.target)){const g=new we(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,nn.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=Be();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Hc(e,t,this.Ye,this.je,i);return this.je=fi(),this.Je=Wu(),this.He=Wu(),this.Ye=new yt(Ue),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new tv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Vt(Ue),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Vt(Ue),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wu(){return new yt(we.comparator)}function nv(){return new yt(we.comparator)}const C1={asc:"ASCENDING",desc:"DESCENDING"},k1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D1={and:"AND",or:"OR"};class P1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wf(n,e){return n.useProto3Json||Lc(e)?e:{value:e}}function _c(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function R1(n,e){return _c(n,e.toTimestamp())}function Or(n){return Qe(!!n,49232),ke.fromTimestamp((function(t){const i=rs(t);return new lt(i.seconds,i.nanos)})(n))}function fp(n,e){return Ef(n,e).canonicalString()}function Ef(n,e){const t=(function(o){return new gt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function fw(n){const e=gt.fromString(n);return Qe(vw(e),10190,{key:e.toString()}),e}function Tf(n,e){return fp(n.databaseId,e.path)}function $d(n,e){const t=fw(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(mw(t))}function pw(n,e){return fp(n.databaseId,e)}function N1(n){const e=fw(n);return e.length===4?gt.emptyPath():mw(e)}function Sf(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mw(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function rv(n,e,t){return{name:Tf(n,e),fields:t.value.mapValue.fields}}function x1(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(Qe(_===void 0||typeof _=="string",58123),Gt.fromBase64String(_||"")):(Qe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Gt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const _=y.code===void 0?Y.UNKNOWN:uw(y.code);return new ge(_,y.message||"")})(h);t=new hw(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=$d(n,i.document.name),l=Or(i.document.updateTime),h=i.document.createTime?Or(i.document.createTime):ke.min(),f=new Gn({mapValue:{fields:i.document.fields}}),g=nn.newFoundDocument(o,l,h,f),y=i.targetIds||[],_=i.removedTargetIds||[];t=new nc(y,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=$d(n,i.document),l=i.readTime?Or(i.readTime):ke.min(),h=nn.newNoDocument(o,l),f=i.removedTargetIds||[];t=new nc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=$d(n,i.document),l=i.removedTargetIds||[];t=new nc([],l,o,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new E1(o,l),f=i.targetId;t=new cw(f,h)}}return t}function b1(n,e){let t;if(e instanceof kl)t={update:rv(n,e.key,e.value)};else if(e instanceof lw)t={delete:Tf(n,e.key)};else if(e instanceof Js)t={update:rv(n,e.key,e.data),updateMask:z1(e.fieldMask)};else{if(!(e instanceof v1))return Ie(16599,{Vt:e.type});t={verify:Tf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof yc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof yl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof vl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof vc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw Ie(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:R1(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie(27497)})(n,e.precondition)),t}function O1(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(o,l){let h=o.updateTime?Or(o.updateTime):Or(l);return h.isEqual(ke.min())&&(h=Or(l)),new m1(h,o.transformResults||[])})(t,e)))):[]}function V1(n,e){return{documents:[pw(n,e.path)]}}function M1(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=pw(n,o);const l=(function(y){if(y.length!==0)return yw(Fr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((_=>(function(I){return{field:Fo(I.field),direction:F1(I.dir)}})(_)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=wf(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function L1(n){let e=N1(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Qe(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(w){const I=gw(w);return I instanceof Fr&&q_(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(w){return w.map((I=>(function(F){return new gc(Uo(F.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(w){let I;return I=typeof w=="object"?w.value:w,Lc(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(w){const I=!!w.before,R=w.values||[];return new mc(R,I)})(t.startAt));let y=null;return t.endAt&&(y=(function(w){const I=!w.before,R=w.values||[];return new mc(R,I)})(t.endAt)),t1(e,o,h,l,f,"F",g,y)}function j1(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Uo(t.unaryFilter.field);return bt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Uo(t.unaryFilter.field);return bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Uo(t.unaryFilter.field);return bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Uo(t.unaryFilter.field);return bt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return bt.create(Uo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Fr.create(t.compositeFilter.filters.map((i=>gw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function F1(n){return C1[n]}function U1(n){return k1[n]}function B1(n){return D1[n]}function Fo(n){return{fieldPath:n.canonicalString()}}function Uo(n){return Ht.fromServerFormat(n.fieldPath)}function yw(n){return n instanceof bt?(function(t){if(t.op==="=="){if(Wy(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NAN"}};if($y(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Wy(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NAN"}};if($y(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(t.field),op:U1(t.op),value:t.value}}})(n):n instanceof Fr?(function(t){const i=t.getFilters().map((o=>yw(o)));return i.length===1?i[0]:{compositeFilter:{op:B1(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function z1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function vw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t,i,o,l=ke.min(),h=ke.min(),f=Gt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.yt=e}}function W1(n){const e=L1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_f(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.Cn=new q1}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(ns.min())}updateCollectionGroup(e,t,i){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class q1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Vt(gt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Vt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_w=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(_w,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ea(0)}static cr(){return new ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="LruGarbageCollector",G1=1048576;function ov([n,e],[t,i]){const o=Ue(n,t);return o===0?Ue(e,i):o}class K1{constructor(e){this.Ir=e,this.buffer=new Vt(ov),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();ov(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Y1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(sv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){aa(t)?le(sv,"Ignoring IndexedDB error during garbage collection: ",t):await oa(t)}await this.Vr(3e5)}))}}class Q1{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return q.resolve(Mc.ce);const i=new K1(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(iv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,f,g,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(i=w,f=Date.now(),this.removeTargets(e,i,t)))).next((w=>(l=w,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(y=Date.now(),Lo()<=Fe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-_}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:w}))))}}function J1(n,e){return new Q1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.changes=new Qs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&cl(i.mutation,o,or.empty(),lt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const o=js();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=nl();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=js();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=fi();const h=ul(),f=(function(){return ul()})();return t.forEach(((g,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Js)?l=l.insert(y.key,y):_!==void 0?(h.set(y.key,_.mutation.getFieldMask()),cl(_.mutation,y,_.mutation.getFieldMask(),lt.now())):h.set(y.key,or.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,_)=>h.set(y,_))),t.forEach(((y,_)=>f.set(y,new Z1(_,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=ul();let o=new yt(((h,f)=>h-f)),l=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let _=i.get(g)||or.empty();_=f.applyToLocalView(y,_),i.set(g,_);const w=(o.get(f.batchId)||Be()).add(g);o=o.insert(f.batchId,w)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,_=g.value,w=ew();_.forEach((I=>{if(!l.has(I)){const R=ow(t.get(I),i.get(I));R!==null&&w.set(I,R),l=l.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,w))}return q.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return we.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):n1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):q.resolve(js());let f=fl,g=l;return h.next((y=>q.forEach(y,((_,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),l.get(_)?q.resolve():this.remoteDocumentCache.getEntry(e,_).next((I=>{g=g.insert(_,I)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Be()))).next((_=>({batchId:f,changes:Z_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((i=>{let o=nl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=nl();return this.indexManager.getCollectionParents(e,l).next((f=>q.forEach(f,(g=>{const y=(function(w,I){return new Fc(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((w,I)=>{h=h.insert(w,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((g,y)=>{const _=y.getKey();h.get(_)===null&&(h=h.insert(_,nn.newInvalidDocument(_)))}));let f=nl();return h.forEach(((g,y)=>{const _=l.get(g);_!==void 0&&cl(_.mutation,y,or.empty(),lt.now()),zc(t,y)&&(f=f.insert(g,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Or(o.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:W1(o.bundledQuery),readTime:Or(o.readTime)}})(t)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.overlays=new yt(we.comparator),this.qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=js();return q.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),q.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),q.resolve()}getOverlaysForCollection(e,t,i){const o=js(),l=t.length+1,h=new we(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return q.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new yt(((y,_)=>y-_));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=js(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const f=js(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,_)=>f.set(y,_))),!(f.size()>=o)););return q.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new w1(t,i));let l=this.qr.get(t);l===void 0&&(l=Be(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(){this.Qr=new Vt(Ft.$r),this.Ur=new Vt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ft(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new we(new gt([])),i=new Ft(t,e),o=new Ft(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new gt([])),i=new Ft(t,e),o=new Ft(t,e+1);let l=Be();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Ft(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Ue(e.Yr,t.Yr)}static Kr(e,t){return Ue(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(Ft.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new _1(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new Ft(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return q.resolve(h)}lookupMutationBatch(e,t){return q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?sp:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ft(t,0),o=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Vt(Ue);return t.forEach((o=>{const l=new Ft(o,0),h=new Ft(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{i=i.add(f.Yr)}))})),q.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;we.isDocumentKey(l)||(l=l.child(""));const h=new Ft(new we(l),0);let f=new Vt(Ue);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),q.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return q.forEach(t.mutations,(o=>{const l=new Ft(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ft(t,0),o=this.Zr.firstAfterOrEqual(i);return q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.ri=e,this.docs=(function(){return new yt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return q.resolve(i?i.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let i=fi();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():nn.newInvalidDocument(o))})),q.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=fi();const h=t.path,f=new we(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:_}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||bI(xI(_),i)<=0||(o.has(_.key)||zc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return q.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ie(9500)}ii(e,t){return q.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new oA(this)}getSize(e){return q.resolve(this.size)}}class oA extends X1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.persistence=e,this.si=new Qs((t=>lp(t)),up),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new pp,this.targetCount=0,this.ai=ea.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ea(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Pr(t),q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),q.waitFor(l).next((()=>o))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return q.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),q.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return q.resolve(i)}containsKey(e,t){return q.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,t){this.ui={},this.overlays={},this.ci=new Mc(0),this.li=!1,this.li=!0,this.hi=new rA,this.referenceDelegate=e(this),this.Pi=new aA(this),this.indexManager=new H1,this.remoteDocumentCache=(function(o){return new sA(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new $1(t),this.Ii=new tA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new iA(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){le("MemoryPersistence","Starting transaction:",e);const o=new lA(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return q.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class lA extends VI{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Ri=new pp,this.Vi=null}static mi(e){return new mp(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),q.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,(i=>{const o=we.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return q.or([()=>q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class wc{constructor(e,t){this.persistence=e,this.pi=new Qs((i=>jI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=J1(this,t)}static mi(e,t){return new wc(e,t)}Ei(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return q.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?q.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(i++,l.removeEntry(h,ke.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),q.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zu(e.data.value)),t}br(e,t,i){return q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return q.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Be(),o=Be();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new gp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tS()?8:MI(rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new uA;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Lo()<=Fe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Lo()<=Fe.DEBUG&&le("QueryEngine","Query:",jo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Lo()<=Fe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,br(t))):q.resolve())}ys(e,t){if(Ky(t))return q.resolve(null);let i=br(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=_f(t,null,"F"),i=br(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Be(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,_f(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,i,o){return Ky(t)||o.isEqual(ke.min())?q.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?q.resolve(null):(Lo()<=Fe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),jo(t)),this.vs(e,h,t,NI(o,fl)).next((f=>f)))}))}Ds(e,t){let i=new Vt(J_(e));return t.forEach(((o,l)=>{zc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return Lo()<=Fe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",jo(t)),this.ps.getDocumentsMatchingQuery(e,t,ns.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="LocalStore",hA=3e8;class dA{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new yt(Ue),this.xs=new Qs((l=>lp(l)),up),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function fA(n,e,t,i){return new dA(n,e,t,i)}async function Ew(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let g=Be();for(const y of o){h.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}for(const y of l){f.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function pA(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,_){const w=y.batch,I=w.keys();let R=q.resolve();return I.forEach((F=>{R=R.next((()=>_.getEntry(g,F))).next((O=>{const j=y.docVersions.get(F);Qe(j!==null,48541),O.version.compareTo(j)<0&&(w.applyToRemoteDocument(O,y),O.isValidDocument()&&(O.setReadTime(y.commitVersion),_.addEntry(O)))}))})),R.next((()=>f.mutationQueue.removeMutationBatch(g,w)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=Be();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Tw(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function mA(n,e){const t=Pe(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((_,w)=>{const I=o.get(w);if(!I)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,w))));let R=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(Gt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,i)),o=o.insert(w,R),(function(O,j,G){return O.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=hA?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(I,R,_)&&f.push(t.Pi.updateTargetData(l,R))}));let g=fi(),y=Be();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(gA(l,h,e.documentUpdates).next((_=>{g=_.ks,y=_.qs}))),!i.isEqual(ke.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((w=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return q.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function gA(n,e,t){let i=Be(),o=Be();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let h=fi();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(ke.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):le(yp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function yA(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=sp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function vA(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,q.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new Yi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function If(n,e,t){const i=Pe(n),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!aa(h))throw h;le(yp,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function av(n,e,t){const i=Pe(n);let o=ke.min(),l=Be();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,_){const w=Pe(g),I=w.xs.get(_);return I!==void 0?q.resolve(w.Ms.get(I)):w.Pi.getTargetData(y,_)})(i,h,br(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:ke.min(),t?l:Be()))).next((f=>(_A(i,i1(e),f),{documents:f,Qs:l})))))}function _A(n,e,t){let i=n.Os.get(e)||ke.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class lv{constructor(){this.activeTargetIds=c1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wA{constructor(){this.Mo=new lv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new lv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="ConnectivityMonitor";class cv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(uv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(uv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu=null;function Af(){return Hu===null?Hu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hu++,"0x"+Hu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="RestConnection",TA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===fc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=Af(),f=this.zo(e,t.toUriEncodedString());le(Wd,`Sending RPC '${e}' ${h}:`,f,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),_=ra(y);return this.Jo(e,f,g,i,_).then((w=>(le(Wd,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw Qo(Wd,`RPC '${e}' ${h} failed with error: `,w,"url: ",f,"request:",i),w}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=TA[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class AA extends SA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=Af();return new Promise(((f,g)=>{const y=new C_;y.setWithCredentials(!0),y.listenOnce(k_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Xu.NO_ERROR:const w=y.getResponseJson();le(en,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),f(w);break;case Xu.TIMEOUT:le(en,`RPC '${e}' ${h} timed out`),g(new ge(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Xu.HTTP_ERROR:const I=y.getStatus();if(le(en,`RPC '${e}' ${h} failed with status:`,I,"response text:",y.getResponseText()),I>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const F=R==null?void 0:R.error;if(F&&F.status&&F.message){const O=(function(G){const ee=G.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(ee)>=0?ee:Y.UNKNOWN})(F.status);g(new ge(O,F.message))}else g(new ge(Y.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ge(Y.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{le(en,`RPC '${e}' ${h} completed.`)}}));const _=JSON.stringify(o);le(en,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=Af(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=R_(),f=P_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const _=l.join("");le(en,`Creating RPC '${e}' stream ${o}: ${_}`,g);const w=h.createWebChannel(_,g);this.I_(w);let I=!1,R=!1;const F=new IA({Yo:j=>{R?le(en,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(I||(le(en,`Opening RPC '${e}' stream ${o} transport.`),w.open(),I=!0),le(en,`RPC '${e}' stream ${o} sending:`,j),w.send(j))},Zo:()=>w.close()}),O=(j,G,ee)=>{j.listen(G,(oe=>{try{ee(oe)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return O(w,tl.EventType.OPEN,(()=>{R||(le(en,`RPC '${e}' stream ${o} transport opened.`),F.o_())})),O(w,tl.EventType.CLOSE,(()=>{R||(R=!0,le(en,`RPC '${e}' stream ${o} transport closed`),F.a_(),this.E_(w))})),O(w,tl.EventType.ERROR,(j=>{R||(R=!0,Qo(en,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),F.a_(new ge(Y.UNAVAILABLE,"The operation could not be completed")))})),O(w,tl.EventType.MESSAGE,(j=>{var G;if(!R){const ee=j.data[0];Qe(!!ee,16349);const oe=ee,ne=(oe==null?void 0:oe.error)||((G=oe[0])==null?void 0:G.error);if(ne){le(en,`RPC '${e}' stream ${o} received error:`,ne);const be=ne.status;let ye=(function(D){const N=kt[D];if(N!==void 0)return uw(N)})(be),P=ne.message;ye===void 0&&(ye=Y.INTERNAL,P="Unknown error status: "+be+" with message "+ne.message),R=!0,F.a_(new ge(ye,P)),w.close()}else le(en,`RPC '${e}' stream ${o} received:`,ee),F.u_(ee)}})),O(f,D_.STAT_EVENT,(j=>{j.stat===ff.PROXY?le(en,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===ff.NOPROXY&&le(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Hd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(n){return new P1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="PersistentStream";class Iw{constructor(e,t,i,o,l,h,f,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Sw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(di(t.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ge(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(hv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(le(hv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CA extends Iw{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=x1(this.serializer,e),i=(function(l){if(!("targetChange"in l))return ke.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?ke.min():h.readTime?Or(h.readTime):ke.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Sf(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=vf(g)?{documents:V1(l,g)}:{query:M1(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=dw(l,h.resumeToken);const y=wf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(ke.min())>0){f.readTime=_c(l,h.snapshotVersion.toTimestamp());const y=wf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=j1(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Sf(this.serializer),t.removeTarget=e,this.q_(t)}}class kA extends Iw{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=O1(e.writeResults,e.commitTime),i=Or(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Sf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>b1(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{}class PA extends DA{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,Ef(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(Y.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,Ef(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ge(Y.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class RA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(di(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class NA{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Xs(this)&&(le(Gs,"Restarting streams for network reachability change."),await(async function(g){const y=Pe(g);y.Ea.add(4),await Pl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Gc(y)})(this))}))})),this.Ra=new RA(i,o)}}async function Gc(n){if(Xs(n))for(const e of n.da)await e(!0)}async function Pl(n){for(const e of n.da)await e(!1)}function Aw(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ep(t)?wp(t):la(t).O_()&&_p(t,e))}function vp(n,e){const t=Pe(n),i=la(t);t.Ia.delete(e),i.O_()&&Cw(t,e),t.Ia.size===0&&(i.O_()?i.L_():Xs(t)&&t.Ra.set("Unknown"))}function _p(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}la(n).Y_(e)}function Cw(n,e){n.Va.Ue(e),la(n).Z_(e)}function wp(n){n.Va=new A1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),la(n).start(),n.Ra.ua()}function Ep(n){return Xs(n)&&!la(n).x_()&&n.Ia.size>0}function Xs(n){return Pe(n).Ea.size===0}function kw(n){n.Va=void 0}async function xA(n){n.Ra.set("Online")}async function bA(n){n.Ia.forEach(((e,t)=>{_p(n,e)}))}async function OA(n,e){kw(n),Ep(n)?(n.Ra.ha(e),wp(n)):n.Ra.set("Unknown")}async function VA(n,e,t){if(n.Ra.set("Online"),e instanceof hw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(n,e)}catch(i){le(Gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ec(n,i)}else if(e instanceof nc?n.Va.Ze(e):e instanceof cw?n.Va.st(e):n.Va.tt(e),!t.isEqual(ke.min()))try{const i=await Tw(n.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(y);_&&l.Ia.set(y,_.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(Gt.EMPTY_BYTE_STRING,_.snapshotVersion)),Cw(l,g);const w=new Yi(_.target,g,y,_.sequenceNumber);_p(l,w)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){le(Gs,"Failed to raise snapshot:",i),await Ec(n,i)}}async function Ec(n,e,t){if(!aa(e))throw e;n.Ea.add(1),await Pl(n),n.Ra.set("Offline"),t||(t=()=>Tw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(Gs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Gc(n)}))}function Dw(n,e){return e().catch((t=>Ec(n,t,e)))}async function Kc(n){const e=Pe(n),t=os(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sp;for(;MA(e);)try{const o=await yA(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,LA(e,o)}catch(o){await Ec(e,o)}Pw(e)&&Rw(e)}function MA(n){return Xs(n)&&n.Ta.length<10}function LA(n,e){n.Ta.push(e);const t=os(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Pw(n){return Xs(n)&&!os(n).x_()&&n.Ta.length>0}function Rw(n){os(n).start()}async function jA(n){os(n).ra()}async function FA(n){const e=os(n);for(const t of n.Ta)e.ea(t.mutations)}async function UA(n,e,t){const i=n.Ta.shift(),o=hp.from(i,e,t);await Dw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Kc(n)}async function BA(n,e){e&&os(n).X_&&await(async function(i,o){if((function(h){return T1(h)&&h!==Y.ABORTED})(o.code)){const l=i.Ta.shift();os(i).B_(),await Dw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Kc(i)}})(n,e),Pw(n)&&Rw(n)}async function dv(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),le(Gs,"RemoteStore received new credentials");const i=Xs(t);t.Ea.add(3),await Pl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gc(t)}async function zA(n,e){const t=Pe(n);e?(t.Ea.delete(2),await Gc(t)):e||(t.Ea.add(2),await Pl(t),t.Ra.set("Unknown"))}function la(n){return n.ma||(n.ma=(function(t,i,o){const l=Pe(t);return l.sa(),new CA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:xA.bind(null,n),t_:bA.bind(null,n),r_:OA.bind(null,n),H_:VA.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Ep(n)?wp(n):n.Ra.set("Unknown")):(await n.ma.stop(),kw(n))}))),n.ma}function os(n){return n.fa||(n.fa=(function(t,i,o){const l=Pe(t);return l.sa(),new kA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:jA.bind(null,n),r_:BA.bind(null,n),ta:FA.bind(null,n),na:UA.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Kc(n)):(await n.fa.stop(),n.Ta.length>0&&(le(Gs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new Tp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sp(n,e){if(di("AsyncQueue",`${e}: ${n}`),aa(n))return new ge(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{static emptySet(e){return new Wo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=nl(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Wo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(){this.ga=new yt(we.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ta{constructor(e,t,i,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new ta(e,t,Wo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class WA{constructor(){this.queries=pv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Pe(t),l=o.queries;o.queries=pv(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(i)}))})(this,new ge(Y.ABORTED,"Firestore shutting down"))}}function pv(){return new Qs((n=>Q_(n)),Bc)}async function Nw(n,e){const t=Pe(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new $A,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Sp(h,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Ip(t)}async function xw(n,e){const t=Pe(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function HA(n,e){const t=Pe(n);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(i=!0);h.wa=o}}i&&Ip(t)}function qA(n,e,t){const i=Pe(n),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Ip(n){n.Ca.forEach((e=>{e.next()}))}var Cf,mv;(mv=Cf||(Cf={})).Ma="default",mv.Cache="cache";class bw{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ta(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.key=e}}class Vw{constructor(e){this.key=e}}class GA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=J_(e),this.tu=new Wo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new fv,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,w)=>{const I=o.get(_),R=zc(this.query,w)?w:null,F=!!I&&this.mutatedKeys.has(I.key),O=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let j=!1;I&&R?I.data.isEqual(R.data)?F!==O&&(i.track({type:3,doc:R}),j=!0):this.su(I,R)||(i.track({type:2,doc:R}),j=!0,(g&&this.eu(R,g)>0||y&&this.eu(R,y)<0)&&(f=!0)):!I&&R?(i.track({type:0,doc:R}),j=!0):I&&!R&&(i.track({type:1,doc:I}),j=!0,(g||y)&&(f=!0)),j&&(R?(h=h.add(R),l=O?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:h,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((_,w)=>(function(R,F){const O=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:j})}};return O(R)-O(F)})(_.type,w.type)||this.eu(_.doc,w.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new ta(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new Vw(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new Ow(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ta.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ap="SyncEngine";class KA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class YA{constructor(e){this.key=e,this.hu=!1}}class QA{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Qs((f=>Q_(f)),Bc),this.Iu=new Map,this.Eu=new Set,this.du=new yt(we.comparator),this.Au=new Map,this.Ru=new pp,this.Vu={},this.mu=new Map,this.fu=ea.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function JA(n,e,t=!0){const i=Bw(n);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Mw(i,e,t,!0),o}async function XA(n,e){const t=Bw(n);await Mw(t,e,!0,!1)}async function Mw(n,e,t,i){const o=await vA(n.localStore,br(e)),l=o.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await ZA(n,e,l,h==="current",o.resumeToken)),n.isPrimaryClient&&t&&Aw(n.remoteStore,o),f}async function ZA(n,e,t,i,o){n.pu=(w,I,R)=>(async function(O,j,G,ee){let oe=j.view.ru(G);oe.Cs&&(oe=await av(O.localStore,j.query,!1).then((({documents:P})=>j.view.ru(P,oe))));const ne=ee&&ee.targetChanges.get(j.targetId),be=ee&&ee.targetMismatches.get(j.targetId)!=null,ye=j.view.applyChanges(oe,O.isPrimaryClient,ne,be);return yv(O,j.targetId,ye.au),ye.snapshot})(n,w,I,R);const l=await av(n.localStore,e,!0),h=new GA(e,l.Qs),f=h.ru(l.documents),g=Dl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=h.applyChanges(f,n.isPrimaryClient,g);yv(n,t,y.au);const _=new KA(e,t,h);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function eC(n,e,t){const i=Pe(n),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Bc(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await If(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&vp(i.remoteStore,o.targetId),kf(i,o.targetId)})).catch(oa)):(kf(i,o.targetId),await If(i.localStore,o.targetId,!0))}async function tC(n,e){const t=Pe(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),vp(t.remoteStore,i.targetId))}async function nC(n,e,t){const i=uC(n);try{const o=await(function(h,f){const g=Pe(h),y=lt.now(),_=f.reduce(((R,F)=>R.add(F.key)),Be());let w,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let F=fi(),O=Be();return g.Ns.getEntries(R,_).next((j=>{F=j,F.forEach(((G,ee)=>{ee.isValidDocument()||(O=O.add(G))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,F))).next((j=>{w=j;const G=[];for(const ee of f){const oe=y1(ee,w.get(ee.key).overlayedDocument);oe!=null&&G.push(new Js(ee.key,oe,$_(oe.value.mapValue),ci.exists(!0)))}return g.mutationQueue.addMutationBatch(R,y,G,f)})).next((j=>{I=j;const G=j.applyToLocalDocumentSet(w,O);return g.documentOverlayCache.saveOverlays(R,j.batchId,G)}))})).then((()=>({batchId:I.batchId,changes:Z_(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new yt(Ue)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(i,o.batchId,t),await Rl(i,o.changes),await Kc(i.remoteStore)}catch(o){const l=Sp(o,"Failed to persist write");t.reject(l)}}async function Lw(n,e){const t=Pe(n);try{const i=await mA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Qe(h.hu,14607):o.removedDocuments.size>0&&(Qe(h.hu,42227),h.hu=!1))})),await Rl(t,i,e)}catch(i){await oa(i)}}function gv(n,e,t){const i=Pe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Pe(h);g.onlineState=f;let y=!1;g.queries.forEach(((_,w)=>{for(const I of w.Sa)I.va(f)&&(y=!0)})),y&&Ip(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function rC(n,e,t){const i=Pe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new yt(we.comparator);h=h.insert(l,nn.newNoDocument(l,ke.min()));const f=Be().add(l),g=new Hc(ke.min(),new Map,new yt(Ue),h,f);await Lw(i,g),i.du=i.du.remove(l),i.Au.delete(e),Cp(i)}else await If(i.localStore,e,!1).then((()=>kf(i,e,t))).catch(oa)}async function iC(n,e){const t=Pe(n),i=e.batch.batchId;try{const o=await pA(t.localStore,e);Fw(t,i,null),jw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Rl(t,o)}catch(o){await oa(o)}}async function sC(n,e,t){const i=Pe(n);try{const o=await(function(h,f){const g=Pe(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return g.mutationQueue.lookupMutationBatch(y,f).next((w=>(Qe(w!==null,37113),_=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,_,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>g.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);Fw(i,e,t),jw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Rl(i,o)}catch(o){await oa(o)}}function jw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Fw(n,e,t){const i=Pe(n);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function kf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Uw(n,i)}))}function Uw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(vp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Cp(n))}function yv(n,e,t){for(const i of t)i instanceof Ow?(n.Ru.addReference(i.key,e),oC(n,i)):i instanceof Vw?(le(Ap,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Uw(n,i.key)):Ie(19791,{wu:i})}function oC(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(le(Ap,"New document in limbo: "+t),n.Eu.add(i),Cp(n))}function Cp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new we(gt.fromString(e)),i=n.fu.next();n.Au.set(i,new YA(t)),n.du=n.du.insert(t,i),Aw(n.remoteStore,new Yi(br(Uc(t.path)),i,"TargetPurposeLimboResolution",Mc.ce))}}async function Rl(n,e,t){const i=Pe(n),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,g)=>{h.push(i.pu(g,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const w=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=gp.As(g.targetId,y);l.push(w)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(g,y){const _=Pe(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>q.forEach(y,(I=>q.forEach(I.Es,(R=>_.persistence.referenceDelegate.addReference(w,I.targetId,R))).next((()=>q.forEach(I.ds,(R=>_.persistence.referenceDelegate.removeReference(w,I.targetId,R)))))))))}catch(w){if(!aa(w))throw w;le(yp,"Failed to update sequence numbers: "+w)}for(const w of y){const I=w.targetId;if(!w.fromCache){const R=_.Ms.get(I),F=R.snapshotVersion,O=R.withLastLimboFreeSnapshotVersion(F);_.Ms=_.Ms.insert(I,O)}}})(i.localStore,l))}async function aC(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){le(Ap,"User change. New user:",e.toKey());const i=await Ew(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new ge(Y.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Rl(t,i.Ls)}}function lC(n,e){const t=Pe(n),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let o=Be();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function Bw(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rC.bind(null,e),e.Pu.H_=HA.bind(null,e.eventManager),e.Pu.yu=qA.bind(null,e.eventManager),e}function uC(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sC.bind(null,e),e}class Tc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return fA(this.persistence,new cA,e.initialUser,this.serializer)}Cu(e){return new ww(mp.mi,this.serializer)}Du(e){return new wA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tc.provider={build:()=>new Tc};class cC extends Tc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof wc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Y1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new ww((i=>wc.mi(i,t)),this.serializer)}}class Df{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>gv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=aC.bind(null,this.syncEngine),await zA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new WA})()}createDatastore(e){const t=qc(e.databaseInfo.databaseId),i=(function(l){return new AA(l)})(e.databaseInfo);return(function(l,h,f,g){return new PA(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new NA(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>gv(this.syncEngine,t,0)),(function(){return cv.v()?new cv:new EA})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,_){const w=new QA(o,l,h,f,g,y);return _&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Pe(o);le(Gs,"RemoteStore shutting down."),l.Ea.add(5),await Pl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Df.provider={build:()=>new Df};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):di("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="FirestoreClient";class hC{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{le(as,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(le(as,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Sp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function qd(n,e){n.asyncQueue.verifyOperationInProgress(),le(as,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Ew(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function vv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await dC(n);le(as,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>dv(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>dv(e.remoteStore,o))),n._onlineComponents=e}async function dC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(as,"Using user provided OfflineComponentProvider");try{await qd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Y.FAILED_PRECONDITION||o.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Qo("Error using user provided cache. Falling back to memory cache: "+t),await qd(n,new Tc)}}else le(as,"Using default OfflineComponentProvider"),await qd(n,new cC(void 0));return n._offlineComponents}async function $w(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(as,"Using user provided OnlineComponentProvider"),await vv(n,n._uninitializedComponentsProvider._online)):(le(as,"Using default OnlineComponentProvider"),await vv(n,new Df))),n._onlineComponents}function fC(n){return $w(n).then((e=>e.syncEngine))}async function Pf(n){const e=await $w(n),t=e.eventManager;return t.onListen=JA.bind(null,e.syncEngine),t.onUnlisten=eC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tC.bind(null,e.syncEngine),t}function pC(n,e,t={}){const i=new es;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const _=new zw({next:I=>{_.Nu(),h.enqueueAndForget((()=>xw(l,w)));const R=I.docs.has(f);!R&&I.fromCache?y.reject(new ge(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&I.fromCache&&g&&g.source==="server"?y.reject(new ge(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),w=new bw(Uc(f.path),_,{includeMetadataChanges:!0,qa:!0});return Nw(l,w)})(await Pf(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="firestore.googleapis.com",wv=!0;class Ev{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hw,this.ssl=wv}else this.host=e.host,this.ssl=e.ssl??wv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_w;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<G1)throw new ge(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ww(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kp{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ev({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ev(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new _I;switch(i.type){case"firstParty":return new SI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=_v.get(t);i&&(le("ComponentProvider","Removing Datastore"),_v.delete(t),i.terminate())})(this),Promise.resolve()}}function mC(n,e,t,i={}){var y;n=ts(n,kp);const o=ra(e),l=n._getSettings(),h={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(y_(`https://${f}`),v_("Firestore",!0)),l.host!==Hw&&l.host!==f&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:i};if(!Ws(g,h)&&(n._setSettings(g),i.mockUserToken)){let _,w;if(typeof i.mockUserToken=="string")_=i.mockUserToken,w=tn.MOCK_USER;else{_=qT(i.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new ge(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new tn(I)}n._authCredentials=new wI(new x_(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Yc(this.firestore,e,this._query)}}class Ot{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _l(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Cl(t,Ot._jsonSchema))return new Ot(e,i||null,new we(gt.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Dt("string",Ot._jsonSchemaVersion),referencePath:Dt("string")};class _l extends Yc{constructor(e,t,i){super(e,t,Uc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new we(e))}withConverter(e){return new _l(this.firestore,e,this._path)}}function Xa(n,e,...t){if(n=bn(n),arguments.length===1&&(e=rp.newId()),PI("doc","path",e),n instanceof kp){const i=gt.fromString(e,...t);return Vy(i),new Ot(n,null,new we(i))}{if(!(n instanceof Ot||n instanceof _l))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(gt.fromString(e,...t));return Vy(i),new Ot(n.firestore,n instanceof _l?n.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="AsyncQueue";class Sv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Sw(this,"async_queue_retry"),this._c=()=>{const i=Hd();i&&le(Tv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Hd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new es;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!aa(e))throw e;le(Tv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,di("INTERNAL UNHANDLED ERROR: ",Iv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Tp.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ie(47125,{Pc:Iv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Iv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class wl extends kp{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Sv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sv(e),this._firestoreClient=void 0,await e}}}function gC(n,e){const t=typeof n=="object"?n:T_(),i=typeof n=="string"?n:fc,o=tp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=WT("firestore");l&&mC(o,...l)}return o}function Dp(n){if(n._terminated)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yC(n),n._firestoreClient}function yC(n){var i,o,l;const e=n._freezeSettings(),t=(function(f,g,y,_){return new BI(f,g,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Ww(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new hC(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(Gt.fromBase64String(e))}catch(t){throw new ge(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cl(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Dt("string",Kn._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vr._jsonSchemaVersion}}static fromJSON(e){if(Cl(e,Vr._jsonSchema))return new Vr(e.latitude,e.longitude)}}Vr._jsonSchemaVersion="firestore/geoPoint/1.0",Vr._jsonSchema={type:Dt("string",Vr._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cl(e,Mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Mr(e.vectorValues);throw new ge(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mr._jsonSchemaVersion="firestore/vectorValue/1.0",Mr._jsonSchema={type:Dt("string",Mr._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=/^__.*__$/;class _C{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Js(e,this.data,this.fieldMask,t,this.fieldTransforms):new kl(e,this.data,t,this.fieldTransforms)}}function Gw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class Rp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Gw(this.Ac)&&vC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||qc(e)}Cc(e,t,i,o=!1){return new Rp({Ac:e,methodName:t,Dc:i,path:Ht.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function EC(n){const e=n._freezeSettings(),t=qc(n._databaseId);return new wC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TC(n,e,t,i,o,l={}){const h=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);Jw("Data must be an object, but it was:",h,i);const f=Yw(i,h);let g,y;if(l.merge)g=new or(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const w of l.mergeFields){const I=SC(e,w,t);if(!h.contains(I))throw new ge(Y.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);AC(_,I)||_.push(I)}g=new or(_),y=h.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=h.fieldTransforms;return new _C(new Gn(f),g,y)}function Kw(n,e){if(Qw(n=bn(n)))return Jw("Unsupported field value:",e,n),Yw(n,e);if(n instanceof qw)return(function(i,o){if(!Gw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let g=Kw(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=bn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return h1(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=lt.fromDate(i);return{timestampValue:_c(o.serializer,l)}}if(i instanceof lt){const l=new lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_c(o.serializer,l)}}if(i instanceof Vr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Kn)return{bytesValue:dw(o.serializer,i._byteString)};if(i instanceof Ot){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:fp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Mr)return(function(h,f){return{mapValue:{fields:{[B_]:{stringValue:z_},[pc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return cp(f.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${ip(i)}`)})(n,e)}function Yw(n,e){const t={};return V_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ys(n,((i,o)=>{const l=Kw(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Qw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof Vr||n instanceof Kn||n instanceof Ot||n instanceof qw||n instanceof Mr)}function Jw(n,e,t){if(!Qw(t)||!b_(t)){const i=ip(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function SC(n,e,t){if((e=bn(e))instanceof Pp)return e._internalPath;if(typeof e=="string")return Xw(n,e);throw Sc("Field path arguments must be of type string or ",n,!1,void 0,t)}const IC=new RegExp("[~\\*/\\[\\]]");function Xw(n,e,t){if(e.search(IC)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pp(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sc(n,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new ge(Y.INVALID_ARGUMENT,f+n+g)}function AC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class CC extends Zw{data(){return super.data()}}function eE(n,e){return typeof e=="string"?Xw(n,e):e instanceof Pp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class DC{convertValue(e,t="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ys(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[pc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>Tt(h.doubleValue)));return new Mr(t)}convertGeoPoint(e){return new Vr(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=jc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(pl(e));default:return null}}convertTimestamp(e){const t=rs(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=gt.fromString(e);Qe(vw(i),9688,{name:e});const o=new ml(i.get(1),i.get(3)),l=new we(i.popFirst(5));return o.isEqual(t)||di(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class il{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bs extends Zw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(eE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Bs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bs._jsonSchema={type:Dt("string",Bs._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class rc extends Bs{data(e={}){return super.data(e)}}class Ho{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new il(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new rc(this._firestore,this._userDataWriter,i.key,i,new il(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new rc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new il(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new rc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new il(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),_=h.indexOf(f.doc.key)),{type:RC(f.type),doc:g,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ho._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(n){n=ts(n,Ot);const e=ts(n.firestore,wl);return pC(Dp(e),n._key).then((t=>nE(e,n,t)))}Ho._jsonSchemaVersion="firestore/querySnapshot/1.0",Ho._jsonSchema={type:Dt("string",Ho._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class tE extends DC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function kv(n,e,t){n=ts(n,Ot);const i=ts(n.firestore,wl),o=PC(n.converter,e);return xC(i,[TC(EC(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ci.none())])}function NC(n,...e){var g,y,_;n=bn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Av(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Av(e[i])){const w=e[i];e[i]=(g=w.next)==null?void 0:g.bind(w),e[i+1]=(y=w.error)==null?void 0:y.bind(w),e[i+2]=(_=w.complete)==null?void 0:_.bind(w)}let l,h,f;if(n instanceof Ot)h=ts(n.firestore,wl),f=Uc(n._key.path),l={next:w=>{e[i]&&e[i](nE(h,n,w))},error:e[i+1],complete:e[i+2]};else{const w=ts(n,Yc);h=ts(w.firestore,wl),f=w._query;const I=new tE(h);l={next:R=>{e[i]&&e[i](new Ho(h,I,w,R))},error:e[i+1],complete:e[i+2]},kC(n._query)}return(function(I,R,F,O){const j=new zw(O),G=new bw(R,j,F);return I.asyncQueue.enqueueAndForget((async()=>Nw(await Pf(I),G))),()=>{j.Nu(),I.asyncQueue.enqueueAndForget((async()=>xw(await Pf(I),G)))}})(Dp(h),f,o,l)}function xC(n,e){return(function(i,o){const l=new es;return i.asyncQueue.enqueueAndForget((async()=>nC(await fC(i),o,l))),l.promise})(Dp(n),e)}function nE(n,e,t){const i=t.docs.get(e._key),o=new tE(n);return new Bs(n,o,e._key,i,new il(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){sa=o})(ia),Yo(new Hs("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new wl(new EI(i.getProvider("auth-internal")),new II(h,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ge(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(y.options.projectId,_)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Xi(Ny,xy,e),Xi(Ny,xy,"esm2020")})();var bC="firebase",OC="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(bC,OC,"app");function rE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VC=rE,iE=new Il("auth","Firebase",rE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Zf("@firebase/auth");function MC(n,...e){Ic.logLevel<=Fe.WARN&&Ic.warn(`Auth (${ia}): ${n}`,...e)}function ic(n,...e){Ic.logLevel<=Fe.ERROR&&Ic.error(`Auth (${ia}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(n,...e){throw xp(n,...e)}function lr(n,...e){return xp(n,...e)}function Np(n,e,t){const i={...VC(),[e]:t};return new Il("auth","Firebase",i).create(e,{appName:n.name})}function zs(n){return Np(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LC(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ur(n,"argument-error"),Np(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return iE.create(n,...e)}function Ce(n,e,...t){if(!n)throw xp(e,...t)}function li(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ic(e),new Error(e)}function pi(n,e){n||li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function jC(){return Dv()==="http:"||Dv()==="https:"}function Dv(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jC()||XT()||"connection"in navigator)?navigator.onLine:!0}function UC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t){this.shortDelay=e,this.longDelay=t,pi(t>e,"Short delay should be less than long delay!"),this.isMobile=YT()||ZT()}get(){return FC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(n,e){pi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$C=new Nl(3e4,6e4);function Op(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ua(n,e,t,i,o={}){return oE(n,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=Al({key:n.config.apiKey,...h}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:g,...l};return JT()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&ra(n.emulatorConfig.host)&&(y.credentials="include"),sE.fetch()(await aE(n,n.config.apiHost,t,f),y)})}async function oE(n,e,t){n._canInitEmulator=!1;const i={...BC,...e};try{const o=new HC(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw qu(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(n,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw qu(n,"email-already-in-use",h);if(g==="USER_DISABLED")throw qu(n,"user-disabled",h);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Np(n,_,y);Ur(n,_)}}catch(o){if(o instanceof mi)throw o;Ur(n,"network-request-failed",{message:String(o)})}}async function WC(n,e,t,i,o={}){const l=await ua(n,e,t,i,o);return"mfaPendingCredential"in l&&Ur(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function aE(n,e,t,i){const o=`${e}${t}?${i}`,l=n,h=l.config.emulator?bp(n.config,o):`${n.config.apiScheme}://${o}`;return zC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class HC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(lr(this.auth,"network-request-failed")),$C.get())})}}function qu(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=lr(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(n,e){return ua(n,"POST","/v1/accounts:delete",e)}async function Ac(n,e){return ua(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GC(n,e=!1){const t=bn(n),i=await t.getIdToken(e),o=Vp(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:hl(Gd(o.auth_time)),issuedAtTime:hl(Gd(o.iat)),expirationTime:hl(Gd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Gd(n){return Number(n)*1e3}function Vp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ic("JWT malformed, contained fewer than 3 sections"),null;try{const o=f_(t);return o?JSON.parse(o):(ic("Failed to decode base64 JWT payload"),null)}catch(o){return ic("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Pv(n){const e=Vp(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof mi&&KC(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function KC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hl(this.lastLoginAt),this.creationTime=hl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(n){var w;const e=n.auth,t=await n.getIdToken(),i=await El(n,Ac(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=(w=o.providerUserInfo)!=null&&w.length?lE(o.providerUserInfo):[],h=JC(n.providerData,l),f=n.isAnonymous,g=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),y=f?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Nf(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,_)}async function QC(n){const e=bn(n);await Cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JC(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function lE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(n,e){const t=await oE(n,{},async()=>{const i=Al({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,h=await aE(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return n.emulatorConfig&&ra(n.emulatorConfig.host)&&(g.credentials="include"),sE.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZC(n,e){return ua(n,"POST","/v2/accounts:revokeToken",Op(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=Pv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await XC(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new qo;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ce(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qo,this.toJSON())}_performRefresh(){return li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ar{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new YC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Nf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await El(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GC(this,e)}reload(){return QC(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ar({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Cc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(zs(this.auth));const e=await this.getIdToken();return await El(this,qC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:w,emailVerified:I,isAnonymous:R,providerData:F,stsTokenManager:O}=t;Ce(w&&O,e,"internal-error");const j=qo.fromJSON(this.name,O);Ce(typeof w=="string",e,"internal-error"),Hi(i,e.name),Hi(o,e.name),Ce(typeof I=="boolean",e,"internal-error"),Ce(typeof R=="boolean",e,"internal-error"),Hi(l,e.name),Hi(h,e.name),Hi(f,e.name),Hi(g,e.name),Hi(y,e.name),Hi(_,e.name);const G=new ar({uid:w,auth:e,email:o,emailVerified:I,displayName:i,isAnonymous:R,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:j,createdAt:y,lastLoginAt:_});return F&&Array.isArray(F)&&(G.providerData=F.map(ee=>({...ee}))),g&&(G._redirectEventId=g),G}static async _fromIdTokenResponse(e,t,i=!1){const o=new qo;o.updateFromServerResponse(t);const l=new ar({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Cc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?lE(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new qo;f.updateFromIdToken(i);const g=new ar({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Nf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=new Map;function ui(n){pi(n instanceof Function,"Expected a class definition");let e=Rv.get(n);return e?(pi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Rv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uE.type="NONE";const Nv=uE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(n,e,t){return`firebase:${n}:${e}:${t}`}class Go{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=sc(this.userKey,o.apiKey,l),this.fullPersistenceKey=sc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ac(this.auth,{idToken:e}).catch(()=>{});return t?ar._fromGetAccountInfoResponse(this.auth,t,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Go(ui(Nv),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||ui(Nv);const h=sc(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const _=await y._get(h);if(_){let w;if(typeof _=="string"){const I=await Ac(e,{idToken:_}).catch(()=>{});if(!I)break;w=await ar._fromGetAccountInfoResponse(e,I,_)}else w=ar._fromJSON(e,_);y!==l&&(f=w),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Go(l,e,i):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Go(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mE(e))return"Blackberry";if(gE(e))return"Webos";if(hE(e))return"Safari";if((e.includes("chrome/")||dE(e))&&!e.includes("edge/"))return"Chrome";if(pE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function cE(n=rn()){return/firefox\//i.test(n)}function hE(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dE(n=rn()){return/crios\//i.test(n)}function fE(n=rn()){return/iemobile/i.test(n)}function pE(n=rn()){return/android/i.test(n)}function mE(n=rn()){return/blackberry/i.test(n)}function gE(n=rn()){return/webos/i.test(n)}function Mp(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ek(n=rn()){var e;return Mp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function tk(){return eS()&&document.documentMode===10}function yE(n=rn()){return Mp(n)||pE(n)||gE(n)||mE(n)||/windows phone/i.test(n)||fE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(n,e=[]){let t;switch(n){case"Browser":t=xv(rn());break;case"Worker":t=`${xv(rn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ia}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(n,e={}){return ua(n,"GET","/v2/passwordPolicy",Op(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=6;class sk{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ik,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bv(this),this.idTokenSubscription=new bv(this),this.beforeStateQueue=new nk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ui(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ac(this,{idToken:e}),i=await ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(sr(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(zs(this));const t=e?bn(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rk(this),t=new sk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Il("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await ZC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ui(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&MC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Qc(n){return bn(n)}class bv{constructor(e){this.auth=e,this.observer=null,this.addObserver=lS(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ak(n){Lp=n}function lk(n){return Lp.loadJS(n)}function uk(){return Lp.gapiScript}function ck(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(n,e){const t=tp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ws(l,e??{}))return o;Ur(o,"already-initialized")}return t.initialize({options:e})}function dk(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ui);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function fk(n,e,t){const i=Qc(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=_E(e),{host:h,port:f}=pk(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},_=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(Ws(y,i.config.emulator)&&Ws(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,ra(h)?(y_(`${l}//${h}${g}`),v_("Auth",!0)):mk()}function _E(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function pk(n){const e=_E(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Ov(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Ov(h)}}}function Ov(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function mk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return li("not implemented")}_getIdTokenResponse(e){return li("not implemented")}_linkToIdToken(e,t){return li("not implemented")}_getReauthenticationResolver(e){return li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(n,e){return WC(n,"POST","/v1/accounts:signInWithIdp",Op(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="http://localhost";class Ks extends wE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new Ks(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Ko(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ko(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ko(e,t)}buildRequest(){const e={requestUri:gk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Al(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends jp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends xl{constructor(){super("facebook.com")}static credential(e){return Ks._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ks._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ai.credential(t,i)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends xl{constructor(){super("github.com")}static credential(e){return Ks._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gi.credential(e.oauthAccessToken)}catch{return null}}}Gi.GITHUB_SIGN_IN_METHOD="github.com";Gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends xl{constructor(){super("twitter.com")}static credential(e,t){return Ks._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ki.credential(t,i)}catch{return null}}}Ki.TWITTER_SIGN_IN_METHOD="twitter.com";Ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await ar._fromIdTokenResponse(e,i,o),h=Vv(i);return new na({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Vv(i);return new na({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Vv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends mi{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,kc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new kc(e,t,i,o)}}function EE(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?kc._fromErrorAndOperation(n,l,e,i):l})}async function yk(n,e,t=!1){const i=await El(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return na._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(n,e,t=!1){const{auth:i}=n;if(sr(i.app))return Promise.reject(zs(i));const o="reauthenticate";try{const l=await El(n,EE(i,o,e,n),t);Ce(l.idToken,i,"internal-error");const h=Vp(l.idToken);Ce(h,i,"internal-error");const{sub:f}=h;return Ce(n.uid===f,i,"user-mismatch"),na._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ur(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(n,e,t=!1){if(sr(n.app))return Promise.reject(zs(n));const i="signIn",o=await EE(n,i,e),l=await na._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}function wk(n,e,t,i){return bn(n).onIdTokenChanged(e,t,i)}function Ek(n,e,t){return bn(n).beforeAuthStateChanged(e,t)}function Tk(n,e,t,i){return bn(n).onAuthStateChanged(e,t,i)}function Sk(n){return bn(n).signOut()}const Dc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dc,"1"),this.storage.removeItem(Dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=1e3,Ak=10;class SE extends TE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);tk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Ak):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Ik)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}SE.type="LOCAL";const Ck=SE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE extends TE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}IE.type="SESSION";const AE=IE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Jc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await kk(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=Fp("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(w){const I=w;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(_),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function Pk(n){Lr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function Rk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nk(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function xk(){return CE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="firebaseLocalStorageDb",bk=1,Pc="firebaseLocalStorage",DE="fbase_key";class bl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xc(n,e){return n.transaction([Pc],e?"readwrite":"readonly").objectStore(Pc)}function Ok(){const n=indexedDB.deleteDatabase(kE);return new bl(n).toPromise()}function xf(){const n=indexedDB.open(kE,bk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Pc,{keyPath:DE})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Pc)?e(i):(i.close(),await Ok(),e(await xf()))})})}async function Mv(n,e,t){const i=Xc(n,!0).put({[DE]:e,value:t});return new bl(i).toPromise()}async function Vk(n,e){const t=Xc(n,!1).get(e),i=await new bl(t).toPromise();return i===void 0?null:i.value}function Lv(n,e){const t=Xc(n,!0).delete(e);return new bl(t).toPromise()}const Mk=800,Lk=3;class PE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Lk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jc._getInstance(xk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Rk(),!this.activeServiceWorker)return;this.sender=new Dk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xf();return await Mv(e,Dc,"1"),await Lv(e,Dc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Mv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Vk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Lv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Xc(o,!1).getAll();return new bl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Mk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PE.type="LOCAL";const jk=PE;new Nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n,e){return e?ui(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up extends wE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Fk(n){return _k(n.auth,new Up(n),n.bypassAuthState)}function Uk(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),vk(t,new Up(n),n.bypassAuthState)}async function Bk(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),yk(t,new Up(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Fk;case"linkViaPopup":case"linkViaRedirect":return Bk;case"reauthViaPopup":case"reauthViaRedirect":return Uk;default:Ur(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=new Nl(2e3,1e4);async function $k(n,e,t){if(sr(n.app))return Promise.reject(lr(n,"operation-not-supported-in-this-environment"));const i=Qc(n);LC(n,e,jp);const o=RE(i,t);return new Fs(i,"signInViaPopup",e,o).executeNotNull()}class Fs extends NE{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=Fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zk.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="pendingRedirect",oc=new Map;class Hk extends NE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=oc.get(this.auth._key());if(!e){try{const i=await qk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}oc.set(this.auth._key(),e)}return this.bypassAuthState||oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qk(n,e){const t=Yk(e),i=Kk(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Gk(n,e){oc.set(n._key(),e)}function Kk(n){return ui(n._redirectPersistence)}function Yk(n){return sc(Wk,n.config.apiKey,n.name)}async function Qk(n,e,t=!1){if(sr(n.app))return Promise.reject(zs(n));const i=Qc(n),o=RE(i,e),h=await new Hk(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=600*1e3;class Xk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Zk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!xE(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(lr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Jk&&this.cachedEventUids.clear(),this.cachedEventUids.has(jv(e))}saveEventToCache(e){this.cachedEventUids.add(jv(e)),this.lastProcessedEventTime=Date.now()}}function jv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function xE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Zk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(n,e={}){return ua(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nD=/^https?/;async function rD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await eD(n);for(const t of e)try{if(iD(t))return}catch{}Ur(n,"unauthorized-domain")}function iD(n){const e=Rf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!nD.test(t))return!1;if(tD.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=new Nl(3e4,6e4);function Fv(){const n=Lr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function oD(n){return new Promise((e,t)=>{var o,l,h;function i(){Fv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fv(),t(lr(n,"network-request-failed"))},timeout:sD.get()})}if((l=(o=Lr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=Lr().gapi)!=null&&h.load)i();else{const f=ck("iframefcb");return Lr()[f]=()=>{gapi.load?i():t(lr(n,"network-request-failed"))},lk(`${uk()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw ac=null,e})}let ac=null;function aD(n){return ac=ac||oD(n),ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new Nl(5e3,15e3),uD="__/auth/iframe",cD="emulator/auth/iframe",hD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fD(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?bp(e,cD):`https://${n.config.authDomain}/${uD}`,i={apiKey:e.apiKey,appName:n.name,v:ia},o=dD.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Al(i).slice(1)}`}async function pD(n){const e=await aD(n),t=Lr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:fD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hD,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=lr(n,"network-request-failed"),f=Lr().setTimeout(()=>{l(h)},lD.get());function g(){Lr().clearTimeout(f),o(i)}i.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gD=500,yD=600,vD="_blank",_D="http://localhost";class Uv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wD(n,e,t,i=gD,o=yD){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g={...mD,width:i.toString(),height:o.toString(),top:l,left:h},y=rn().toLowerCase();t&&(f=dE(y)?vD:t),cE(y)&&(e=e||_D,g.scrollbars="yes");const _=Object.entries(g).reduce((I,[R,F])=>`${I}${R}=${F},`,"");if(ek(y)&&f!=="_self")return ED(e||"",f),new Uv(null);const w=window.open(e||"",f,_);Ce(w,n,"popup-blocked");try{w.focus()}catch{}return new Uv(w)}function ED(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD="__/auth/handler",SD="emulator/auth/handler",ID=encodeURIComponent("fac");async function Bv(n,e,t,i,o,l){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ia,eventId:o};if(e instanceof jp){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",aS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))h[_]=w}if(e instanceof xl){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(h.scopes=_.join(","))}n.tenantId&&(h.tid=n.tenantId);const f=h;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const g=await n._getAppCheckToken(),y=g?`#${ID}=${encodeURIComponent(g)}`:"";return`${AD(n)}?${Al(f).slice(1)}${y}`}function AD({config:n}){return n.emulator?bp(n,SD):`https://${n.authDomain}/${TD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="webStorageSupport";class CD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AE,this._completeRedirectFn=Qk,this._overrideRedirectResult=Gk}async _openPopup(e,t,i,o){var h;pi((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await Bv(e,t,i,Rf(),o);return wD(e,l,Fp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Bv(e,t,i,Rf(),o);return Pk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(pi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await pD(e),i=new Xk(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Kd,{type:Kd},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Kd];l!==void 0&&t(!!l),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yE()||hE()||Mp()}}const kD=CD;var zv="@firebase/auth",$v="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RD(n){Yo(new Hs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;Ce(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vE(n)},y=new ok(i,o,l,g);return dk(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Yo(new Hs("auth-internal",e=>{const t=Qc(e.getProvider("auth").getImmediate());return(i=>new DD(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi(zv,$v,PD(n)),Xi(zv,$v,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=300,xD=g_("authIdTokenMaxAge")||ND;let Wv=null;const bD=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>xD)return;const o=t==null?void 0:t.token;Wv!==o&&(Wv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function OD(n=T_()){const e=tp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=hk(n,{popupRedirectResolver:kD,persistence:[jk,Ck,AE]}),i=g_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=bD(l.toString());Ek(t,h,()=>h(t.currentUser)),wk(t,f=>h(f))}}const o=p_("auth");return o&&fk(t,`http://${o}`),t}function VD(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}ak({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=lr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",VD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RD("Browser");const ln=(n,e)=>{{const t=e instanceof Error?e.message:String(e);console.error(`${n}: ${t}`)}},lc={apiKey:"AIzaSyCXxatUkVDpVnR0BKkZTNlB_G_3agOfoY0",authDomain:"jpl-vacation-forecast.firebaseapp.com",projectId:"jpl-vacation-forecast",storageBucket:"jpl-vacation-forecast.firebasestorage.app",messagingSenderId:"732269508238",appId:"1:732269508238:web:464689fab6d9d91aeefbdf"};let Za=null,Rc=null,Nc=null;const bE=()=>!!(lc.apiKey&&lc.authDomain&&lc.projectId),OE=()=>{if(!bE())return{app:null,auth:null,db:null};try{return Za||(Za=E_(lc),Rc=OD(Za),Nc=gC(Za)),{app:Za,auth:Rc,db:Nc}}catch(n){return ln("Failed to initialize Firebase",n),{app:null,auth:null,db:null}}},Yd=()=>{if(!Rc){const{auth:n}=OE();return n}return Rc},el=()=>{if(!Nc){const{db:n}=OE();return n}return Nc};class MD{constructor(){Qa(this,"mode","localStorage");Qa(this,"userId",null);Qa(this,"listeners",new Map);Qa(this,"unsubscribers",new Map)}getMode(){return this.mode}setMode(e,t){const i=this.mode==="cloud-sync";this.mode=e,this.userId=t||null,i&&e==="localStorage"&&this.cleanupFirebaseListeners()}async get(e,t){try{const i=window.localStorage.getItem(e);if(i)return JSON.parse(i)}catch(i){ln(`Error reading ${e} from localStorage`,i)}if(this.mode==="cloud-sync"&&this.userId)try{const i=el();if(i){const o=Xa(i,"users",this.userId,"data",e),l=await Cv(o);if(l.exists())return l.data().value}}catch(i){ln(`Error reading ${e} from Firebase`,i)}return t}async set(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(i){ln(`Error writing ${e} to localStorage`,i)}if(this.mode==="cloud-sync"&&this.userId)try{const i=el();if(i){const o=Xa(i,"users",this.userId,"data",e);await kv(o,{value:t,updatedAt:new Date().toISOString()})}}catch(i){ln(`Error writing ${e} to Firebase`,i)}this.notifyListeners(e,t)}subscribe(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),this.mode==="cloud-sync"&&this.userId&&!this.unsubscribers.has(e)&&this.setupFirebaseListener(e),()=>{const i=this.listeners.get(e);if(i&&(i.delete(t),i.size===0)){this.listeners.delete(e);const o=this.unsubscribers.get(e);o&&(o(),this.unsubscribers.delete(e))}}}async syncToCloud(e){if(this.mode!=="cloud-sync"||!this.userId)throw new Error("Cloud sync not enabled");const t=el();if(!t)throw new Error("Firebase not configured");for(const i of e)try{const o=window.localStorage.getItem(i);if(o){const l=JSON.parse(o),h=Xa(t,"users",this.userId,"data",i);await kv(h,{value:l,updatedAt:new Date().toISOString()})}}catch(o){ln(`Error syncing ${i} to Firebase`,o)}}async syncFromCloud(e){if(this.mode!=="cloud-sync"||!this.userId)throw new Error("Cloud sync not enabled");const t=el();if(!t)throw new Error("Firebase not configured");for(const i of e)try{const o=Xa(t,"users",this.userId,"data",i),l=await Cv(o);if(l.exists()){const h=l.data();window.localStorage.setItem(i,JSON.stringify(h.value)),this.notifyListeners(i,h.value)}}catch(o){ln(`Error loading ${i} from Firebase`,o)}}setupFirebaseListener(e){if(!this.userId)return;const t=el();if(t)try{const i=Xa(t,"users",this.userId,"data",e),o=NC(i,l=>{if(l.exists()){const f=l.data().value;window.localStorage.setItem(e,JSON.stringify(f)),this.notifyListeners(e,f)}},l=>{ln(`Firebase listener error for ${e}`,l)});this.unsubscribers.set(e,o)}catch(i){ln(`Error setting up Firebase listener for ${e}`,i)}}notifyListeners(e,t){const i=this.listeners.get(e);i&&i.forEach(o=>{try{o(t)}catch(l){ln("Error in storage listener",l)}})}cleanupFirebaseListeners(){this.unsubscribers.forEach(e=>e()),this.unsubscribers.clear()}}const Nr=new MD;function Qd(n,e,t){const[i,o]=se.useState(()=>{try{const h=window.localStorage.getItem(n);if(h){const f=JSON.parse(h);return t&&!t(f)?(ln(`Validation failed for ${n} in localStorage`,{value:f}),e):f}return e}catch(h){return ln(`Error loading ${n} from localStorage`,h),e}});return se.useEffect(()=>Nr.subscribe(n,f=>{if(t&&!t(f)){ln(`Validation failed for update to ${n}`,{value:f});return}o(f)}),[n,t]),[i,h=>{try{const f=h instanceof Function?h(i):h;o(f),Nr.set(n,f).catch(g=>{ln(`Error saving ${n}`,g)})}catch(f){ln(`Error saving ${n}`,f)}}]}const LD=n=>!(!n||typeof n!="object"||typeof n.startDate!="string"||typeof n.currentBalance!="number"||typeof n.balanceAsOfDate!="string"||!n.workSchedule||typeof n.workSchedule!="object"||!["5/40","9/80"].includes(n.workSchedule.type)||n.personalDayUsedInStartYear!==void 0&&typeof n.personalDayUsedInStartYear!="boolean"),jD=n=>!(!n||typeof n!="object"||typeof n.id!="string"||typeof n.startDate!="string"||typeof n.endDate!="string"||n.description!==void 0&&typeof n.description!="string"||n.personalDayUsed!==void 0&&typeof n.personalDayUsed!="boolean"),FD=n=>Array.isArray(n)?n.every(jD):!1,UD=n=>!(!n||typeof n!="object"||typeof n.name!="string"||typeof n.date!="string"||typeof n.hours!="number"),BD=n=>Array.isArray(n)?n.every(UD):!1,zD=n=>n===null||LD(n),$D=()=>{const[n,e]=Qd("jpl-vacation-user-profile",null,zD),[t,i]=Qd("jpl-vacation-planned-vacations",[],FD),[o,l]=Qd("jpl-vacation-holidays",[],BD);se.useEffect(()=>{n&&n.workSchedule.type==="9/80"&&n.workSchedule.rdoPattern==="even-fridays"&&e({...n,workSchedule:{...n.workSchedule,rdoPattern:"odd-fridays"}})},[n,e]);const h=se.useMemo(()=>{if(!n){const O=new Date;return{startDate:new Date(O.getFullYear(),0,1),endDate:new Date(O.getFullYear()+1,11,31)}}const R=Oe(n.balanceAsOfDate),F=new Date(R.getFullYear()+10,11,31);return{startDate:R,endDate:F}},[n]),f=se.useMemo(()=>n?OT(n,h.startDate,h.endDate,t,o):[],[n,h,t,o]),g=se.useMemo(()=>{if(f.length===0)return[];const R=new Date().getFullYear();return[vy(f,R),vy(f,R+1)]},[f]);return{userProfile:n,setUserProfile:e,plannedVacations:t,addPlannedVacation:R=>{const F={...R,id:crypto.randomUUID()};i([...t,F])},updatePlannedVacation:(R,F)=>{i(t.map(O=>O.id===R?{...O,...F}:O))},deletePlannedVacation:R=>{i(t.filter(F=>F.id!==R))},holidays:o,setHolidays:l,weeklyBalances:f,annualSummaries:g,forecastPeriod:h,canAffordVacation:(R,F)=>{if(!n)return{canAfford:!1,projectedBalance:0};const O=Oe(R.endDate),j=F?t.filter(ee=>ee.id!==F):t,G=VT(n,O,[...j,{...R,id:R.id||"temp"}],o);return{canAfford:G>=0,projectedBalance:G}}}},WD="1.3",HD={2025:[{name:"Christmas",date:"2025-12-25",type:"federal"},{name:"JPL Floating",date:"2025-12-24",type:"jpl"},{name:"JPL Floating",date:"2025-12-23",type:"jpl",scheduleFilter:"9/80-only"},{name:"JPL Floating",date:"2025-12-26",type:"jpl",scheduleFilter:"5/40-only"}],2026:[{name:"New Year's Day",date:"2026-01-01",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2026-01-19",type:"federal"},{name:"Presidents' Day",date:"2026-02-16",type:"federal"},{name:"Memorial Day",date:"2026-05-25",type:"federal"},{name:"Juneteenth",date:"2026-06-19",type:"federal"},{name:"Independence Day",date:"2026-07-03",type:"federal",notes:"Observed"},{name:"Labor Day",date:"2026-09-07",type:"federal"},{name:"Thanksgiving",date:"2026-11-26",type:"federal"},{name:"Day After Thanksgiving (Observed)",date:"2026-11-25",type:"federal",scheduleFilter:"9/80-only"},{name:"Day After Thanksgiving",date:"2026-11-27",type:"federal",scheduleFilter:"5/40-only"},{name:"Christmas (Observed)",date:"2026-12-24",type:"federal",scheduleFilter:"9/80-only"},{name:"Christmas",date:"2026-12-25",type:"federal",scheduleFilter:"5/40-only"},{name:"JPL Floating",date:"2026-01-02",type:"jpl"},{name:"JPL Floating",date:"2026-12-28",type:"jpl"}],2027:[{name:"New Year's Day",date:"2027-01-01",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2027-01-18",type:"federal"},{name:"Presidents' Day",date:"2027-02-15",type:"federal"},{name:"Memorial Day",date:"2027-05-31",type:"federal"},{name:"Juneteenth",date:"2027-06-18",type:"federal"},{name:"Independence Day (Observed)",date:"2027-07-05",type:"federal",notes:"Observed"},{name:"Labor Day",date:"2027-09-06",type:"federal"},{name:"Thanksgiving",date:"2027-11-25",type:"federal"},{name:"Day After Thanksgiving (Observed)",date:"2027-11-24",type:"federal",scheduleFilter:"9/80-only"},{name:"Day After Thanksgiving",date:"2027-11-26",type:"federal",scheduleFilter:"5/40-only"},{name:"Christmas (Observed)",date:"2027-12-23",type:"federal",scheduleFilter:"9/80-only"},{name:"Christmas (Observed)",date:"2027-12-24",type:"federal",scheduleFilter:"5/40-only"},{name:"JPL Floating",date:"2027-12-22",type:"jpl"},{name:"JPL Floating",date:"2027-12-21",type:"jpl",scheduleFilter:"9/80-only"},{name:"JPL Floating",date:"2027-12-23",type:"jpl",scheduleFilter:"5/40-only"}],2028:[{name:"New Year's Day (Observed)",date:"2027-12-31",type:"federal"},{name:"Martin Luther King Jr. Day",date:"2028-01-17",type:"federal"},{name:"Presidents' Day",date:"2028-02-21",type:"federal"},{name:"Memorial Day",date:"2028-05-29",type:"federal"},{name:"Juneteenth",date:"2028-06-19",type:"federal"},{name:"Independence Day",date:"2028-07-04",type:"federal",notes:"Observed"},{name:"Labor Day",date:"2028-09-04",type:"federal"},{name:"Thanksgiving (Observed)",date:"2028-11-24",type:"federal",scheduleFilter:"5/40-only"},{name:"Thanksgiving (Observed)",date:"2028-11-23",type:"federal",scheduleFilter:"9/80-only"},{name:"Day After Thanksgiving (Observed)",date:"2028-11-22",type:"federal",scheduleFilter:"9/80-only"},{name:"Day After Thanksgiving (Observed)",date:"2028-11-2",type:"federal",scheduleFilter:"5/40-only"},{name:"Christmas",date:"2028-12-25",type:"federal"},{name:"JPL Floating",date:"2028-07-03",type:"jpl"},{name:"JPL Floating",date:"2028-12-26",type:"jpl"}]},VE={version:WD,holidays:HD},qD=(n,e,t)=>{const i=[];for(let o=n;o<=e;o++){const l=o.toString(),h=VE.holidays[l];h&&i.push(...h.filter(f=>!f.scheduleFilter||f.scheduleFilter==="All"||!t?!0:t==="5/40"?f.scheduleFilter!=="9/80-only":t==="9/80"?f.scheduleFilter!=="5/40-only":!0).map(f=>({name:f.name,date:f.date})))}return i},GD=(n,e,t)=>({defaultHolidays:se.useMemo(()=>{if(!n)return[];const o=new Date,l=e||o,h=t||new Date(o.getFullYear()+10,11,31),f=l.getFullYear(),g=h.getFullYear();return qD(f,g,n.type).map(_=>({..._,hours:Jf(Oe(_.date),n)}))},[n,e,t])}),Jd=["jpl-vacation-user-profile","jpl-vacation-planned-vacations","theme","jpl-vacation-calendar-view-mode"];function Zc(){const[n,e]=se.useState(null),[t,i]=se.useState(!0),[o,l]=se.useState(null),[h]=se.useState(bE()),[f,g]=se.useState(!1);return se.useEffect(()=>{if(!h){i(!1);return}const w=Yd();if(!w){i(!1);return}const I=Tk(w,async R=>{if(e(R),i(!1),R){Nr.setMode("cloud-sync",R.uid);try{await Nr.syncFromCloud(Jd)}catch{try{await Nr.syncToCloud(Jd)}catch{console.error("Error syncing to cloud")}}finally{g(!0)}}else Nr.setMode("localStorage"),g(!0)});return()=>I()},[h]),{user:n,loading:t,error:o,isFirebaseAvailable:h,initialSyncComplete:f,signInWithGoogle:async()=>{if(!h){l("Firebase is not configured. Cloud sync is not available.");return}l(null),i(!0);try{const w=Yd();if(!w)throw new Error("Firebase auth not initialized");const I=new ai,R=await $k(w,I);Nr.setMode("cloud-sync",R.user.uid),await Nr.syncToCloud(Jd),e(R.user)}catch(w){console.error("Sign in error"),l(w.message||"Failed to sign in"),Nr.setMode("localStorage")}finally{i(!1)}},signOut:async()=>{if(h){l(null),i(!0);try{const w=Yd();if(!w)throw new Error("Firebase auth not initialized");await Sk(w),Nr.setMode("localStorage"),e(null)}catch(w){console.error("Sign out error"),l(w.message||"Failed to sign out")}finally{i(!1)}}}}}const Hv=({onSubmit:n,onBack:e})=>{const[t,i]=se.useState(""),[o,l]=se.useState(""),[h,f]=se.useState(""),[g,y]=se.useState("5/40"),[_,w]=se.useState(!1),R=h&&!(O=>{if(!O)return!0;try{return Oe(O).getDay()===0}catch{return!0}})(h),F=O=>{O.preventDefault();const j={startDate:t,currentBalance:parseFloat(o),balanceAsOfDate:h,workSchedule:{type:g,rdoPattern:g==="9/80"?"odd-fridays":void 0},personalDayUsedInStartYear:_};n(j)};return T.jsxs("div",{className:"user-input-form-container",children:[e&&T.jsx("button",{onClick:e,className:"back-button",type:"button",children:" Back"}),T.jsx("h2",{children:"Welcome to JPL Vacation Forecast"}),T.jsx("p",{children:"Let's set up your vacation tracking profile"}),T.jsxs("form",{onSubmit:F,className:"user-input-form",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"startDate",children:"JPL Start Date"}),T.jsx("input",{type:"date",id:"startDate",value:t,onChange:O=>i(O.target.value),required:!0,autoFocus:!0,"aria-describedby":"startDate-help"}),T.jsx("small",{id:"startDate-help",children:"This determines your vacation accrual rate"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"currentBalance",children:"Current Vacation Balance (hours)"}),T.jsx("input",{type:"number",id:"currentBalance",value:o,onChange:O=>l(O.target.value),min:"0",step:"0.01",required:!0,"aria-describedby":"currentBalance-help"}),T.jsx("small",{id:"currentBalance-help",children:"Include any carryover from previous year"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"balanceAsOfDate",children:"Balance As Of Date"}),T.jsx("input",{type:"date",id:"balanceAsOfDate",value:h,onChange:O=>f(O.target.value),required:!0,"aria-invalid":R?"true":"false","aria-describedby":R?"sunday-warning":"balanceAsOfDate-help"}),R?T.jsx("small",{id:"sunday-warning",className:"warning-text",role:"alert",children:" Warning: Selected date is not a Sunday. Weekly calculations may be inaccurate."}):T.jsx("small",{id:"balanceAsOfDate-help",children:"When was this balance taken? Should be the start of a week (Sunday)"})]}),T.jsxs("div",{className:"form-group checkbox-group",children:[T.jsxs("label",{children:[T.jsx("input",{type:"checkbox",checked:_,onChange:O=>w(O.target.checked),"aria-describedby":"personalDay-help"}),T.jsx("span",{children:"I already used my Personal Day this year"})]}),T.jsxs("small",{id:"personalDay-help",children:["Check this if you took a personal day before ",h||"your balance date"]})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Work Schedule"}),T.jsxs("div",{className:"radio-group",children:[T.jsxs("label",{className:"radio-label",children:[T.jsx("input",{type:"radio",name:"scheduleType",value:"5/40",checked:g==="5/40",onChange:()=>y("5/40")}),T.jsx("span",{children:"5/40 (Five 8-hour days per week)"})]}),T.jsxs("label",{className:"radio-label",children:[T.jsx("input",{type:"radio",name:"scheduleType",value:"9/80",checked:g==="9/80",onChange:()=>y("9/80")}),T.jsx("span",{children:"9/80 (Nine 9-hour days + one 8-hour day over 2 weeks, alternating Friday off)"})]})]})]}),T.jsx("button",{type:"submit",className:"submit-button",children:"Start Forecasting"})]})]})};function ME(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=ME(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function eh(){for(var n,e,t=0,i="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=ME(n))&&(i&&(i+=" "),i+=e);return i}const KD=(n,e,t,i)=>{if(t==="length"||t==="prototype"||t==="arguments"||t==="caller")return;const o=Object.getOwnPropertyDescriptor(n,t),l=Object.getOwnPropertyDescriptor(e,t);!YD(o,l)&&i||Object.defineProperty(n,t,l)},YD=function(n,e){return n===void 0||n.configurable||n.writable===e.writable&&n.enumerable===e.enumerable&&n.configurable===e.configurable&&(n.writable||n.value===e.value)},QD=(n,e)=>{const t=Object.getPrototypeOf(e);t!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,t)},JD=(n,e)=>`/* Wrapped ${n}*/
${e}`,XD=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),ZD=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),eP=(n,e,t)=>{const i=t===""?"":`with ${t.trim()}() `,o=JD.bind(null,i,e.toString());Object.defineProperty(o,"name",ZD);const{writable:l,enumerable:h,configurable:f}=XD;Object.defineProperty(n,"toString",{value:o,writable:l,enumerable:h,configurable:f})};function tP(n,e,{ignoreNonConfigurable:t=!1}={}){const{name:i}=n;for(const o of Reflect.ownKeys(e))KD(n,e,o,t);return QD(n,e),eP(n,e,i),n}const Gu=2147483647,nP=new WeakMap,Xd=new WeakMap,rP=new WeakMap;function iP(n,e){const t=n.get(e);if(t){if(t.maxAge<=Date.now()){n.delete(e);return}return t}}function LE(n,{cacheKey:e,cache:t=new Map,maxAge:i}={}){if(i===0)return n;if(typeof i=="number"&&Number.isFinite(i)){if(i>Gu)throw new TypeError(`The \`maxAge\` option cannot exceed ${Gu}.`);if(i<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const o=function(...l){var _;const h=e?e(l):l[0],f=iP(t,h);if(f)return f.data;const g=n.apply(this,l),y=typeof i=="function"?i(...l):i;if(y!==void 0&&y!==Number.POSITIVE_INFINITY){if(!Number.isFinite(y))throw new TypeError("The `maxAge` function must return a finite number, `0`, or `Infinity`.");if(y<=0)return g;if(y>Gu)throw new TypeError(`The \`maxAge\` function result cannot exceed ${Gu}.`)}if(t.set(h,{data:g,maxAge:y===void 0||y===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:Date.now()+y}),y!==void 0&&y!==Number.POSITIVE_INFINITY){const w=setTimeout(()=>{var R;t.delete(h),(R=Xd.get(o))==null||R.delete(w)},y);(_=w.unref)==null||_.call(w);const I=Xd.get(o)??new Set;I.add(w),Xd.set(o,I)}return g};return tP(o,n,{ignoreNonConfigurable:!0}),nP.set(o,t),rP.set(o,e??(l=>l[0])),o}function sP(n){return typeof n=="string"}function oP(n,e,t){return t.indexOf(n)===e}function aP(n){return n.toLowerCase()===n}function qv(n){return n.indexOf(",")===-1?n:n.split(",")}function bf(n){if(!n)return n;if(n==="C"||n==="posix"||n==="POSIX")return"en-US";if(n.indexOf(".")!==-1){var e=n.split(".")[0],t=e===void 0?"":e;return bf(t)}if(n.indexOf("@")!==-1){var i=n.split("@")[0],t=i===void 0?"":i;return bf(t)}if(n.indexOf("-")===-1||!aP(n))return n;var o=n.split("-"),l=o[0],h=o[1],f=h===void 0?"":h;return"".concat(l,"-").concat(f.toUpperCase())}function lP(n){var e=n===void 0?{}:n,t=e.useFallbackLocale,i=t===void 0?!0:t,o=e.fallbackLocale,l=o===void 0?"en-US":o,h=[];if(typeof navigator<"u"){for(var f=navigator.languages||[],g=[],y=0,_=f;y<_.length;y++){var w=_[y];g=g.concat(qv(w))}var I=navigator.language,R=I&&qv(I);h=h.concat(g,R)}return i&&h.push(l),h.filter(sP).map(bf).filter(oP)}var uP=LE(lP,{cacheKey:JSON.stringify});function cP(n){return uP(n)[0]||null}var jE=LE(cP,{cacheKey:JSON.stringify});function gi(n,e,t){return function(o,l=t){const h=n(o)+l;return e(h)}}function Ol(n){return function(t){return new Date(n(t).getTime()-1)}}function Vl(n,e){return function(i){return[n(i),e(i)]}}function ct(n){if(n instanceof Date)return n.getFullYear();if(typeof n=="number")return n;const e=Number.parseInt(n,10);if(typeof n=="string"&&!Number.isNaN(e))return e;throw new Error(`Failed to get year from date: ${n}.`)}function ls(n){if(n instanceof Date)return n.getMonth();throw new Error(`Failed to get month from date: ${n}.`)}function th(n){if(n instanceof Date)return n.getDate();throw new Error(`Failed to get year from date: ${n}.`)}function ca(n){const e=ct(n),t=e+(-e+1)%100,i=new Date;return i.setFullYear(t,0,1),i.setHours(0,0,0,0),i}const hP=gi(ct,ca,-100),FE=gi(ct,ca,100),Bp=Ol(FE),dP=gi(ct,Bp,-100),UE=Vl(ca,Bp);function us(n){const e=ct(n),t=e+(-e+1)%10,i=new Date;return i.setFullYear(t,0,1),i.setHours(0,0,0,0),i}const BE=gi(ct,us,-10),zp=gi(ct,us,10),nh=Ol(zp),zE=gi(ct,nh,-10),$E=Vl(us,nh);function ha(n){const e=ct(n),t=new Date;return t.setFullYear(e,0,1),t.setHours(0,0,0,0),t}const WE=gi(ct,ha,-1),$p=gi(ct,ha,1),rh=Ol($p),HE=gi(ct,rh,-1),fP=Vl(ha,rh);function Wp(n,e){return function(i,o=e){const l=ct(i),h=ls(i)+o,f=new Date;return f.setFullYear(l,h,1),f.setHours(0,0,0,0),n(f)}}function Zs(n){const e=ct(n),t=ls(n),i=new Date;return i.setFullYear(e,t,1),i.setHours(0,0,0,0),i}const qE=Wp(Zs,-1),Hp=Wp(Zs,1),Ml=Ol(Hp),GE=Wp(Ml,-1),pP=Vl(Zs,Ml);function mP(n,e){return function(i,o=e){const l=ct(i),h=ls(i),f=th(i)+o,g=new Date;return g.setFullYear(l,h,f),g.setHours(0,0,0,0),n(g)}}function Ll(n){const e=ct(n),t=ls(n),i=th(n),o=new Date;return o.setFullYear(e,t,i),o.setHours(0,0,0,0),o}const gP=mP(Ll,1),qp=Ol(gP),yP=Vl(Ll,qp);function KE(n){return th(Ml(n))}var qt={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},vP={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Gp=[0,1,2,3,4,5,6],Zd=new Map;function _P(n){return function(t,i){var o=t||jE();Zd.has(o)||Zd.set(o,new Map);var l=Zd.get(o);return l.has(n)||l.set(n,new Intl.DateTimeFormat(o||void 0,n).format),l.get(n)(i)}}function wP(n){var e=new Date(n);return new Date(e.setHours(12))}function eo(n){return function(e,t){return _P(n)(e,wP(t))}}var EP={day:"numeric"},TP={day:"numeric",month:"long",year:"numeric"},SP={month:"long"},IP={month:"long",year:"numeric"},AP={weekday:"short"},CP={weekday:"long"},kP={year:"numeric"},DP=eo(EP),PP=eo(TP),RP=eo(SP),YE=eo(IP),NP=eo(AP),xP=eo(CP),ih=eo(kP),bP=Gp[0],OP=Gp[5],Gv=Gp[6];function Tl(n,e){e===void 0&&(e=qt.ISO_8601);var t=n.getDay();switch(e){case qt.ISO_8601:return(t+6)%7;case qt.ISLAMIC:return(t+1)%7;case qt.HEBREW:case qt.GREGORY:return t;default:throw new Error("Unsupported calendar type.")}}function VP(n){var e=ca(n);return ct(e)}function MP(n){var e=us(n);return ct(e)}function Of(n,e){e===void 0&&(e=qt.ISO_8601);var t=ct(n),i=ls(n),o=n.getDate()-Tl(n,e);return new Date(t,i,o)}function LP(n,e){e===void 0&&(e=qt.ISO_8601);var t=e===qt.GREGORY?qt.GREGORY:qt.ISO_8601,i=Of(n,e),o=ct(n)+1,l,h;do l=new Date(o,0,t===qt.ISO_8601?4:1),h=Of(l,e),o-=1;while(n<h);return Math.round((i.getTime()-h.getTime())/(864e5*7))+1}function $s(n,e){switch(n){case"century":return ca(e);case"decade":return us(e);case"year":return ha(e);case"month":return Zs(e);case"day":return Ll(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function jP(n,e){switch(n){case"century":return hP(e);case"decade":return BE(e);case"year":return WE(e);case"month":return qE(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function QE(n,e){switch(n){case"century":return FE(e);case"decade":return zp(e);case"year":return $p(e);case"month":return Hp(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function FP(n,e){switch(n){case"decade":return BE(e,-100);case"year":return WE(e,-10);case"month":return qE(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function UP(n,e){switch(n){case"decade":return zp(e,100);case"year":return $p(e,10);case"month":return Hp(e,12);default:throw new Error("Invalid rangeType: ".concat(n))}}function JE(n,e){switch(n){case"century":return Bp(e);case"decade":return nh(e);case"year":return rh(e);case"month":return Ml(e);case"day":return qp(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function BP(n,e){switch(n){case"century":return dP(e);case"decade":return zE(e);case"year":return HE(e);case"month":return GE(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function zP(n,e){switch(n){case"decade":return zE(e,-100);case"year":return HE(e,-10);case"month":return GE(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function Kv(n,e){switch(n){case"century":return UE(e);case"decade":return $E(e);case"year":return fP(e);case"month":return pP(e);case"day":return yP(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function $P(n,e,t){var i=[e,t].sort(function(o,l){return o.getTime()-l.getTime()});return[$s(n,i[0]),JE(n,i[1])]}function XE(n,e,t){return t.map(function(i){return(e||ih)(n,i)}).join("  ")}function WP(n,e,t){return XE(n,e,UE(t))}function ZE(n,e,t){return XE(n,e,$E(t))}function HP(n){return n.getDay()===new Date().getDay()}function e0(n,e){e===void 0&&(e=qt.ISO_8601);var t=n.getDay();switch(e){case qt.ISLAMIC:case qt.HEBREW:return t===OP||t===Gv;case qt.ISO_8601:case qt.GREGORY:return t===Gv||t===bP;default:throw new Error("Unsupported calendar type.")}}var Rr="react-calendar__navigation";function qP(n){var e=n.activeStartDate,t=n.drillUp,i=n.formatMonthYear,o=i===void 0?YE:i,l=n.formatYear,h=l===void 0?ih:l,f=n.locale,g=n.maxDate,y=n.minDate,_=n.navigationAriaLabel,w=_===void 0?"":_,I=n.navigationAriaLive,R=n.navigationLabel,F=n.next2AriaLabel,O=F===void 0?"":F,j=n.next2Label,G=j===void 0?"":j,ee=n.nextAriaLabel,oe=ee===void 0?"":ee,ne=n.nextLabel,be=ne===void 0?"":ne,ye=n.prev2AriaLabel,P=ye===void 0?"":ye,A=n.prev2Label,D=A===void 0?"":A,N=n.prevAriaLabel,x=N===void 0?"":N,M=n.prevLabel,C=M===void 0?"":M,Ve=n.setActiveStartDate,je=n.showDoubleView,Ge=n.view,$e=n.views,re=$e.indexOf(Ge)>0,ue=Ge!=="century",te=jP(Ge,e),L=ue?FP(Ge,e):void 0,H=QE(Ge,e),Te=ue?UP(Ge,e):void 0,Ee=(function(){if(te.getFullYear()<0)return!0;var He=BP(Ge,e);return y&&y>=He})(),Ne=ue&&(function(){if(L.getFullYear()<0)return!0;var He=zP(Ge,e);return y&&y>=He})(),Re=g&&g<H,X=ue&&g&&g<Te;function he(){Ve(te,"prev")}function de(){Ve(L,"prev2")}function Se(){Ve(H,"next")}function Me(){Ve(Te,"next2")}function vt(He){var On=(function(){switch(Ge){case"century":return WP(f,h,He);case"decade":return ZE(f,h,He);case"year":return h(f,He);case"month":return o(f,He);default:throw new Error("Invalid view: ".concat(Ge,"."))}})();return R?R({date:He,label:On,locale:f||jE()||void 0,view:Ge}):On}function St(){var He="".concat(Rr,"__label");return T.jsxs("button",{"aria-label":w,"aria-live":I,className:He,disabled:!re,onClick:t,style:{flexGrow:1},type:"button",children:[T.jsx("span",{className:"".concat(He,"__labelText ").concat(He,"__labelText--from"),children:vt(e)}),je?T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"".concat(He,"__divider"),children:"  "}),T.jsx("span",{className:"".concat(He,"__labelText ").concat(He,"__labelText--to"),children:vt(H)})]}):null]})}return T.jsxs("div",{className:Rr,children:[D!==null&&ue?T.jsx("button",{"aria-label":P,className:"".concat(Rr,"__arrow ").concat(Rr,"__prev2-button"),disabled:Ne,onClick:de,type:"button",children:D}):null,C!==null&&T.jsx("button",{"aria-label":x,className:"".concat(Rr,"__arrow ").concat(Rr,"__prev-button"),disabled:Ee,onClick:he,type:"button",children:C}),St(),be!==null&&T.jsx("button",{"aria-label":oe,className:"".concat(Rr,"__arrow ").concat(Rr,"__next-button"),disabled:Re,onClick:Se,type:"button",children:be}),G!==null&&ue?T.jsx("button",{"aria-label":O,className:"".concat(Rr,"__arrow ").concat(Rr,"__next2-button"),disabled:X,onClick:Me,type:"button",children:G}):null]})}var Bo=function(){return Bo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Bo.apply(this,arguments)},GP=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function Yv(n){return"".concat(n,"%")}function Kp(n){var e=n.children,t=n.className,i=n.count,o=n.direction,l=n.offset,h=n.style,f=n.wrap,g=GP(n,["children","className","count","direction","offset","style","wrap"]);return T.jsx("div",Bo({className:t,style:Bo({display:"flex",flexDirection:o,flexWrap:f?"wrap":"nowrap"},h)},g,{children:se.Children.map(e,function(y,_){var w=l&&_===0?Yv(100*l/i):null;return se.cloneElement(y,Bo(Bo({},y.props),{style:{flexBasis:Yv(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:w,marginInlineStart:w,marginInlineEnd:0}}))})}))}function KP(n,e,t){return e&&e>n?e:t&&t<n?t:n}function Sl(n,e){return e[0]<=n&&e[1]>=n}function YP(n,e){return n[0]<=e[0]&&n[1]>=e[1]}function t0(n,e){return Sl(n[0],e)||Sl(n[1],e)}function Qv(n,e,t){var i=t0(e,n),o=[];if(i){o.push(t);var l=Sl(n[0],e),h=Sl(n[1],e);l&&o.push("".concat(t,"Start")),h&&o.push("".concat(t,"End")),l&&h&&o.push("".concat(t,"BothEnds"))}return o}function QP(n){return Array.isArray(n)?n[0]!==null&&n[1]!==null:n!==null}function JP(n){if(!n)throw new Error("args is required");var e=n.value,t=n.date,i=n.hover,o="react-calendar__tile",l=[o];if(!t)return l;var h=new Date,f=(function(){if(Array.isArray(t))return t;var R=n.dateType;if(!R)throw new Error("dateType is required when date is not an array of two dates");return Kv(R,t)})();if(Sl(h,f)&&l.push("".concat(o,"--now")),!e||!QP(e))return l;var g=(function(){if(Array.isArray(e))return e;var R=n.valueType;if(!R)throw new Error("valueType is required when value is not an array of two dates");return Kv(R,e)})();YP(g,f)?l.push("".concat(o,"--active")):t0(g,f)&&l.push("".concat(o,"--hasActive"));var y=Qv(g,f,"".concat(o,"--range"));l.push.apply(l,y);var _=Array.isArray(e)?e:[e];if(i&&_.length===1){var w=i>g[0]?[g[0],i]:[i,g[0]],I=Qv(w,f,"".concat(o,"--hover"));l.push.apply(l,I)}return l}function sh(n){for(var e=n.className,t=n.count,i=t===void 0?3:t,o=n.dateTransform,l=n.dateType,h=n.end,f=n.hover,g=n.offset,y=n.renderTile,_=n.start,w=n.step,I=w===void 0?1:w,R=n.value,F=n.valueType,O=[],j=_;j<=h;j+=I){var G=o(j);O.push(y({classes:JP({date:G,dateType:l,hover:f,value:R,valueType:F}),date:G}))}return T.jsx(Kp,{className:e,count:i,offset:g,wrap:!0,children:O})}function oh(n){var e=n.activeStartDate,t=n.children,i=n.classes,o=n.date,l=n.formatAbbr,h=n.locale,f=n.maxDate,g=n.maxDateTransform,y=n.minDate,_=n.minDateTransform,w=n.onClick,I=n.onMouseOver,R=n.style,F=n.tileClassName,O=n.tileContent,j=n.tileDisabled,G=n.view,ee=se.useMemo(function(){var ne={activeStartDate:e,date:o,view:G};return typeof F=="function"?F(ne):F},[e,o,F,G]),oe=se.useMemo(function(){var ne={activeStartDate:e,date:o,view:G};return typeof O=="function"?O(ne):O},[e,o,O,G]);return T.jsxs("button",{className:eh(i,ee),disabled:y&&_(y)>o||f&&g(f)<o||(j==null?void 0:j({activeStartDate:e,date:o,view:G})),onClick:w?function(ne){return w(o,ne)}:void 0,onFocus:I?function(){return I(o)}:void 0,onMouseOver:I?function(){return I(o)}:void 0,style:R,type:"button",children:[l?T.jsx("abbr",{"aria-label":l(h,o),children:t}):t,oe]})}var Vf=function(){return Vf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Vf.apply(this,arguments)},XP=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Jv="react-calendar__century-view__decades__decade";function ZP(n){var e=n.classes,t=e===void 0?[]:e,i=n.currentCentury,o=n.formatYear,l=o===void 0?ih:o,h=XP(n,["classes","currentCentury","formatYear"]),f=h.date,g=h.locale,y=[];return t&&y.push.apply(y,t),y.push(Jv),ca(f).getFullYear()!==i&&y.push("".concat(Jv,"--neighboringCentury")),T.jsx(oh,Vf({},h,{classes:y,maxDateTransform:nh,minDateTransform:us,view:"century",children:ZE(g,l,f)}))}var Mf=function(){return Mf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Mf.apply(this,arguments)},Xv=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function eR(n){var e=n.activeStartDate,t=n.hover,i=n.showNeighboringCentury,o=n.value,l=n.valueType,h=Xv(n,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),f=VP(e),g=f+(i?119:99);return T.jsx(sh,{className:"react-calendar__century-view__decades",dateTransform:us,dateType:"decade",end:g,hover:t,renderTile:function(y){var _=y.date,w=Xv(y,["date"]);return T.jsx(ZP,Mf({},h,w,{activeStartDate:e,currentCentury:f,date:_}),_.getTime())},start:f,step:10,value:o,valueType:l})}var Lf=function(){return Lf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Lf.apply(this,arguments)};function tR(n){function e(){return T.jsx(eR,Lf({},n))}return T.jsx("div",{className:"react-calendar__century-view",children:e()})}var jf=function(){return jf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},jf.apply(this,arguments)},nR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},Zv="react-calendar__decade-view__years__year";function rR(n){var e=n.classes,t=e===void 0?[]:e,i=n.currentDecade,o=n.formatYear,l=o===void 0?ih:o,h=nR(n,["classes","currentDecade","formatYear"]),f=h.date,g=h.locale,y=[];return t&&y.push.apply(y,t),y.push(Zv),us(f).getFullYear()!==i&&y.push("".concat(Zv,"--neighboringDecade")),T.jsx(oh,jf({},h,{classes:y,maxDateTransform:rh,minDateTransform:ha,view:"decade",children:l(g,f)}))}var Ff=function(){return Ff=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Ff.apply(this,arguments)},e_=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function iR(n){var e=n.activeStartDate,t=n.hover,i=n.showNeighboringDecade,o=n.value,l=n.valueType,h=e_(n,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),f=MP(e),g=f+(i?11:9);return T.jsx(sh,{className:"react-calendar__decade-view__years",dateTransform:ha,dateType:"year",end:g,hover:t,renderTile:function(y){var _=y.date,w=e_(y,["date"]);return T.jsx(rR,Ff({},h,w,{activeStartDate:e,currentDecade:f,date:_}),_.getTime())},start:f,value:o,valueType:l})}var Uf=function(){return Uf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Uf.apply(this,arguments)};function sR(n){function e(){return T.jsx(iR,Uf({},n))}return T.jsx("div",{className:"react-calendar__decade-view",children:e()})}var Bf=function(){return Bf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Bf.apply(this,arguments)},oR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},t_=function(n,e,t){if(t||arguments.length===2)for(var i=0,o=e.length,l;i<o;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return n.concat(l||Array.prototype.slice.call(e))},aR="react-calendar__year-view__months__month";function lR(n){var e=n.classes,t=e===void 0?[]:e,i=n.formatMonth,o=i===void 0?RP:i,l=n.formatMonthYear,h=l===void 0?YE:l,f=oR(n,["classes","formatMonth","formatMonthYear"]),g=f.date,y=f.locale;return T.jsx(oh,Bf({},f,{classes:t_(t_([],t,!0),[aR],!1),formatAbbr:h,maxDateTransform:Ml,minDateTransform:Zs,view:"year",children:o(y,g)}))}var zf=function(){return zf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},zf.apply(this,arguments)},n_=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function uR(n){var e=n.activeStartDate,t=n.hover,i=n.value,o=n.valueType,l=n_(n,["activeStartDate","hover","value","valueType"]),h=0,f=11,g=ct(e);return T.jsx(sh,{className:"react-calendar__year-view__months",dateTransform:function(y){var _=new Date;return _.setFullYear(g,y,1),Zs(_)},dateType:"month",end:f,hover:t,renderTile:function(y){var _=y.date,w=n_(y,["date"]);return T.jsx(lR,zf({},l,w,{activeStartDate:e,date:_}),_.getTime())},start:h,value:i,valueType:o})}var $f=function(){return $f=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},$f.apply(this,arguments)};function cR(n){function e(){return T.jsx(uR,$f({},n))}return T.jsx("div",{className:"react-calendar__year-view",children:e()})}var Wf=function(){return Wf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Wf.apply(this,arguments)},hR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},ef="react-calendar__month-view__days__day";function dR(n){var e=n.calendarType,t=n.classes,i=t===void 0?[]:t,o=n.currentMonthIndex,l=n.formatDay,h=l===void 0?DP:l,f=n.formatLongDate,g=f===void 0?PP:f,y=hR(n,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),_=y.date,w=y.locale,I=[];return i&&I.push.apply(I,i),I.push(ef),e0(_,e)&&I.push("".concat(ef,"--weekend")),_.getMonth()!==o&&I.push("".concat(ef,"--neighboringMonth")),T.jsx(oh,Wf({},y,{classes:I,formatAbbr:g,maxDateTransform:qp,minDateTransform:Ll,view:"month",children:h(w,_)}))}var Hf=function(){return Hf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Hf.apply(this,arguments)},r_=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function fR(n){var e=n.activeStartDate,t=n.calendarType,i=n.hover,o=n.showFixedNumberOfWeeks,l=n.showNeighboringMonth,h=n.value,f=n.valueType,g=r_(n,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),y=ct(e),_=ls(e),w=o||l,I=Tl(e,t),R=w?0:I,F=(w?-I:0)+1,O=(function(){if(o)return F+42-1;var j=KE(e);if(l){var G=new Date;G.setFullYear(y,_,j),G.setHours(0,0,0,0);var ee=7-Tl(G,t)-1;return j+ee}return j})();return T.jsx(sh,{className:"react-calendar__month-view__days",count:7,dateTransform:function(j){var G=new Date;return G.setFullYear(y,_,j),Ll(G)},dateType:"day",hover:i,end:O,renderTile:function(j){var G=j.date,ee=r_(j,["date"]);return T.jsx(dR,Hf({},g,ee,{activeStartDate:e,calendarType:t,currentMonthIndex:_,date:G}),G.getTime())},offset:R,start:F,value:h,valueType:f})}var n0="react-calendar__month-view__weekdays",tf="".concat(n0,"__weekday");function pR(n){for(var e=n.calendarType,t=n.formatShortWeekday,i=t===void 0?NP:t,o=n.formatWeekday,l=o===void 0?xP:o,h=n.locale,f=n.onMouseLeave,g=new Date,y=Zs(g),_=ct(y),w=ls(y),I=[],R=1;R<=7;R+=1){var F=new Date(_,w,R-Tl(y,e)),O=l(h,F);I.push(T.jsx("div",{className:eh(tf,HP(F)&&"".concat(tf,"--current"),e0(F,e)&&"".concat(tf,"--weekend")),children:T.jsx("abbr",{"aria-label":O,title:O,children:i(h,F).replace(".","")})},R))}return T.jsx(Kp,{className:n0,count:7,onFocus:f,onMouseOver:f,children:I})}var xc=function(){return xc=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},xc.apply(this,arguments)},i_=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t},s_="react-calendar__tile";function mR(n){var e=n.onClickWeekNumber,t=n.weekNumber,i=T.jsx("span",{children:t});if(e){var o=n.date,l=n.onClickWeekNumber,h=n.weekNumber,f=i_(n,["date","onClickWeekNumber","weekNumber"]);return T.jsx("button",xc({},f,{className:s_,onClick:function(g){return l(h,o,g)},type:"button",children:i}))}else{n.date,n.onClickWeekNumber,n.weekNumber;var f=i_(n,["date","onClickWeekNumber","weekNumber"]);return T.jsx("div",xc({},f,{className:s_,children:i}))}}function gR(n){var e=n.activeStartDate,t=n.calendarType,i=n.onClickWeekNumber,o=n.onMouseLeave,l=n.showFixedNumberOfWeeks,h=(function(){if(l)return 6;var y=KE(e),_=Tl(e,t),w=y-(7-_);return 1+Math.ceil(w/7)})(),f=(function(){for(var y=ct(e),_=ls(e),w=th(e),I=[],R=0;R<h;R+=1)I.push(Of(new Date(y,_,w+R*7),t));return I})(),g=f.map(function(y){return LP(y,t)});return T.jsx(Kp,{className:"react-calendar__month-view__weekNumbers",count:h,direction:"column",onFocus:o,onMouseOver:o,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:g.map(function(y,_){var w=f[_];if(!w)throw new Error("date is not defined");return T.jsx(mR,{date:w,onClickWeekNumber:i,weekNumber:y},y)})})}var qf=function(){return qf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},qf.apply(this,arguments)},yR=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};function vR(n){if(n)for(var e=0,t=Object.entries(vP);e<t.length;e++){var i=t[e],o=i[0],l=i[1];if(l.includes(n))return o}return qt.ISO_8601}function _R(n){var e=n.activeStartDate,t=n.locale,i=n.onMouseLeave,o=n.showFixedNumberOfWeeks,l=n.calendarType,h=l===void 0?vR(t):l,f=n.formatShortWeekday,g=n.formatWeekday,y=n.onClickWeekNumber,_=n.showWeekNumbers,w=yR(n,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function I(){return T.jsx(pR,{calendarType:h,formatShortWeekday:f,formatWeekday:g,locale:t,onMouseLeave:i})}function R(){return _?T.jsx(gR,{activeStartDate:e,calendarType:h,onClickWeekNumber:y,onMouseLeave:i,showFixedNumberOfWeeks:o}):null}function F(){return T.jsx(fR,qf({calendarType:h},w))}var O="react-calendar__month-view";return T.jsx("div",{className:eh(O,_?"".concat(O,"--weekNumbers"):""),children:T.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[R(),T.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[I(),F()]})]})})}var zo=function(){return zo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},zo.apply(this,arguments)},Ku="react-calendar",uc=["century","decade","year","month"],wR=["decade","year","month","day"],Yp=new Date;Yp.setFullYear(1,0,1);Yp.setHours(0,0,0,0);var ER=new Date(864e13);function sl(n){return n instanceof Date?n:new Date(n)}function r0(n,e){return uc.slice(uc.indexOf(n),uc.indexOf(e)+1)}function TR(n,e,t){var i=r0(e,t);return i.indexOf(n)!==-1}function Qp(n,e,t){return n&&TR(n,e,t)?n:t}function i0(n){var e=uc.indexOf(n);return wR[e]}function SR(n,e){var t=Array.isArray(n)?n[e]:n;if(!t)return null;var i=sl(t);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(n));return i}function s0(n,e){var t=n.value,i=n.minDate,o=n.maxDate,l=n.maxDetail,h=SR(t,e);if(!h)return null;var f=i0(l),g=(function(){switch(e){case 0:return $s(f,h);case 1:return JE(f,h);default:throw new Error("Invalid index value: ".concat(e))}})();return KP(g,i,o)}var Jp=function(n){return s0(n,0)},o0=function(n){return s0(n,1)},IR=function(n){return[Jp,o0].map(function(e){return e(n)})};function a0(n){var e=n.maxDate,t=n.maxDetail,i=n.minDate,o=n.minDetail,l=n.value,h=n.view,f=Qp(h,o,t),g=Jp({value:l,minDate:i,maxDate:e,maxDetail:t})||new Date;return $s(f,g)}function AR(n){var e=n.activeStartDate,t=n.defaultActiveStartDate,i=n.defaultValue,o=n.defaultView,l=n.maxDate,h=n.maxDetail,f=n.minDate,g=n.minDetail,y=n.value,_=n.view,w=Qp(_,g,h),I=e||t;return I?$s(w,I):a0({maxDate:l,maxDetail:h,minDate:f,minDetail:g,value:y||i,view:_||o})}function nf(n){return n&&(!Array.isArray(n)||n.length===1)}function Yu(n,e){return n instanceof Date&&e instanceof Date&&n.getTime()===e.getTime()}var CR=se.forwardRef(function(e,t){var i=e.activeStartDate,o=e.allowPartialRange,l=e.calendarType,h=e.className,f=e.defaultActiveStartDate,g=e.defaultValue,y=e.defaultView,_=e.formatDay,w=e.formatLongDate,I=e.formatMonth,R=e.formatMonthYear,F=e.formatShortWeekday,O=e.formatWeekday,j=e.formatYear,G=e.goToRangeStartOnSelect,ee=G===void 0?!0:G,oe=e.inputRef,ne=e.locale,be=e.maxDate,ye=be===void 0?ER:be,P=e.maxDetail,A=P===void 0?"month":P,D=e.minDate,N=D===void 0?Yp:D,x=e.minDetail,M=x===void 0?"century":x,C=e.navigationAriaLabel,Ve=e.navigationAriaLive,je=e.navigationLabel,Ge=e.next2AriaLabel,$e=e.next2Label,re=e.nextAriaLabel,ue=e.nextLabel,te=e.onActiveStartDateChange,L=e.onChange,H=e.onClickDay,Te=e.onClickDecade,Ee=e.onClickMonth,Ne=e.onClickWeekNumber,Re=e.onClickYear,X=e.onDrillDown,he=e.onDrillUp,de=e.onViewChange,Se=e.prev2AriaLabel,Me=e.prev2Label,vt=e.prevAriaLabel,St=e.prevLabel,He=e.returnValue,On=He===void 0?"start":He,Pt=e.selectRange,Vn=e.showDoubleView,yi=e.showFixedNumberOfWeeks,ht=e.showNavigation,dt=ht===void 0?!0:ht,_n=e.showNeighboringCentury,cs=e.showNeighboringDecade,vi=e.showNeighboringMonth,to=vi===void 0?!0:vi,ur=e.showWeekNumbers,hs=e.tileClassName,_i=e.tileContent,cr=e.tileDisabled,wi=e.value,hr=e.view,Yn=se.useState(f),no=Yn[0],wn=Yn[1],Br=se.useState(null),ds=Br[0],un=Br[1],zr=se.useState(Array.isArray(g)?g.map(function(xe){return xe!==null?sl(xe):null}):g!=null?sl(g):null),Mn=zr[0],Ei=zr[1],Ln=se.useState(y),Qn=Ln[0],rt=Ln[1],It=i||no||AR({activeStartDate:i,defaultActiveStartDate:f,defaultValue:g,defaultView:y,maxDate:ye,maxDetail:A,minDate:N,minDetail:M,value:wi,view:hr}),ft=(function(){var xe=(function(){return Pt&&nf(Mn)?Mn:wi!==void 0?wi:Mn})();return xe?Array.isArray(xe)?xe.map(function(Ze){return Ze!==null?sl(Ze):null}):xe!==null?sl(xe):null:null})(),En=i0(A),Xe=Qp(hr||Qn,M,A),sn=r0(M,A),jn=Pt?ds:null,Ti=sn.indexOf(Xe)<sn.length-1,dr=sn.indexOf(Xe)>0,Jn=se.useCallback(function(xe){var Ze=(function(){switch(On){case"start":return Jp;case"end":return o0;case"range":return IR;default:throw new Error("Invalid returnValue.")}})();return Ze({maxDate:ye,maxDetail:A,minDate:N,value:xe})},[ye,A,N,On]),Fn=se.useCallback(function(xe,Ze){wn(xe);var it={action:Ze,activeStartDate:xe,value:ft,view:Xe};te&&!Yu(It,xe)&&te(it)},[It,te,ft,Xe]),$r=se.useCallback(function(xe,Ze){var it=(function(){switch(Xe){case"century":return Te;case"decade":return Re;case"year":return Ee;case"month":return H;default:throw new Error("Invalid view: ".concat(Xe,"."))}})();it&&it(xe,Ze)},[H,Te,Ee,Re,Xe]),Tn=se.useCallback(function(xe,Ze){if(Ti){$r(xe,Ze);var it=sn[sn.indexOf(Xe)+1];if(!it)throw new Error("Attempted to drill down from the lowest view.");wn(xe),rt(it);var Kt={action:"drillDown",activeStartDate:xe,value:ft,view:it};te&&!Yu(It,xe)&&te(Kt),de&&Xe!==it&&de(Kt),X&&X(Kt)}},[It,Ti,te,$r,X,de,ft,Xe,sn]),cn=se.useCallback(function(){if(dr){var xe=sn[sn.indexOf(Xe)-1];if(!xe)throw new Error("Attempted to drill up from the highest view.");var Ze=$s(xe,It);wn(Ze),rt(xe);var it={action:"drillUp",activeStartDate:Ze,value:ft,view:xe};te&&!Yu(It,Ze)&&te(it),de&&Xe!==xe&&de(it),he&&he(it)}},[It,dr,te,he,de,ft,Xe,sn]),fr=se.useCallback(function(xe,Ze){var it=ft;$r(xe,Ze);var Kt=Pt&&!nf(it),Rt;if(Pt)if(Kt)Rt=$s(En,xe);else{if(!it)throw new Error("previousValue is required");if(Array.isArray(it))throw new Error("previousValue must not be an array");Rt=$P(En,it,xe)}else Rt=Jn(xe);var Wr=!Pt||Kt||ee?a0({maxDate:ye,maxDetail:A,minDate:N,minDetail:M,value:Rt,view:Xe}):null;Ze.persist(),wn(Wr),Ei(Rt);var Ii={action:"onChange",activeStartDate:Wr,value:Rt,view:Xe};if(te&&!Yu(It,Wr)&&te(Ii),L)if(Pt){var Hr=nf(Rt);if(!Hr)L(Rt||null,Ze);else if(o){if(Array.isArray(Rt))throw new Error("value must not be an array");L([Rt||null,null],Ze)}}else L(Rt||null,Ze)},[It,o,Jn,ee,ye,A,N,M,te,L,$r,Pt,ft,En,Xe]);function hn(xe){un(xe)}function Si(){un(null)}se.useImperativeHandle(t,function(){return{activeStartDate:It,drillDown:Tn,drillUp:cn,onChange:fr,setActiveStartDate:Fn,value:ft,view:Xe}},[It,Tn,cn,fr,Fn,ft,Xe]);function fs(xe){var Ze=xe?QE(Xe,It):$s(Xe,It),it=Ti?Tn:fr,Kt={activeStartDate:Ze,hover:jn,locale:ne,maxDate:ye,minDate:N,onClick:it,onMouseOver:Pt?hn:void 0,tileClassName:hs,tileContent:_i,tileDisabled:cr,value:ft,valueType:En};switch(Xe){case"century":return T.jsx(tR,zo({formatYear:j,showNeighboringCentury:_n},Kt));case"decade":return T.jsx(sR,zo({formatYear:j,showNeighboringDecade:cs},Kt));case"year":return T.jsx(cR,zo({formatMonth:I,formatMonthYear:R},Kt));case"month":return T.jsx(_R,zo({calendarType:l,formatDay:_,formatLongDate:w,formatShortWeekday:F,formatWeekday:O,onClickWeekNumber:Ne,onMouseLeave:Pt?Si:void 0,showFixedNumberOfWeeks:typeof yi<"u"?yi:Vn,showNeighboringMonth:to,showWeekNumbers:ur},Kt));default:throw new Error("Invalid view: ".concat(Xe,"."))}}function ps(){return dt?T.jsx(qP,{activeStartDate:It,drillUp:cn,formatMonthYear:R,formatYear:j,locale:ne,maxDate:ye,minDate:N,navigationAriaLabel:C,navigationAriaLive:Ve,navigationLabel:je,next2AriaLabel:Ge,next2Label:$e,nextAriaLabel:re,nextLabel:ue,prev2AriaLabel:Se,prev2Label:Me,prevAriaLabel:vt,prevLabel:St,setActiveStartDate:Fn,showDoubleView:Vn,view:Xe,views:sn}):null}var Sn=Array.isArray(ft)?ft:[ft];return T.jsxs("div",{className:eh(Ku,Pt&&Sn.length===1&&"".concat(Ku,"--selectRange"),Vn&&"".concat(Ku,"--doubleView"),h),ref:oe,children:[ps(),T.jsxs("div",{className:"".concat(Ku,"__viewContainer"),onBlur:Pt?Si:void 0,onMouseLeave:Pt?Si:void 0,children:[fs(),Vn?fs(!0):null]})]})}),$o=(n=>(n.REGULAR="regular",n.RDO="rdo",n.HOLIDAY="holiday",n.PLANNED_VACATION="planned_vacation",n.WEEKEND="weekend",n))($o||{});const kR=(n,e,t,i,o,l)=>{const h=new Map,f=new Map;t.forEach(w=>f.set(w.date,w));const g=new Map;n.forEach(w=>{const I=nt(Oe(w.weekEndDate));g.set(I,w)});const y=e.map(w=>{const I=Oe(w.startDate);return{original:w,start:I.getTime(),end:Oe(w.endDate).getTime(),startDateKey:nt(I)}}),_=Yf(o,l);for(const w of _){const I=nt(w),R=w.getTime(),F=[];bc(w)&&F.push($o.WEEKEND);const O=Oc(w,i);O&&F.push($o.RDO);const j=f.get(I);j&&F.push($o.HOLIDAY);const G=y.find(ne=>R>=ne.start&&R<=ne.end);G&&F.push($o.PLANNED_VACATION);let ee,oe;if(w.getDay()===0){const ne=g.get(I);ee=ne==null?void 0:ne.endingBalance,oe=ne==null?void 0:ne.accrued}h.set(I,{date:w,types:F,hours:Jf(w,i),vacationHours:G?Xf(G.original,i,t):void 0,balance:ee,accrualRate:oe,isInVacation:!!G,vacationId:G==null?void 0:G.original.id,isHoliday:!!j,holidayName:j==null?void 0:j.name,isRDO:O,isPersonalDayStart:(G==null?void 0:G.original.personalDayUsed)&&G.startDateKey===I})}return h},DR=({dayInfo:n,isInSelectionRange:e,isSelectionStart:t,isSelectionEnd:i})=>n?T.jsxs("div",{className:"calendar-tile-content",title:n.holidayName,children:[T.jsxs("div",{className:"day-indicators",children:[n.isPersonalDayStart&&T.jsx("span",{className:"indicator personal-day",title:"Personal Day Applied",children:"P"}),n.isInVacation&&T.jsx("span",{className:"indicator vacation",title:"Planned Vacation",children:"V"}),n.isHoliday&&T.jsx("span",{className:"indicator holiday",title:n.holidayName,children:"H"}),n.isRDO&&T.jsx("span",{className:"indicator rdo",title:"Regular Day Off",children:"R"})]}),n.balance!==void 0&&T.jsxs("div",{className:`balance-display ${n.balance<0?"negative":n.balance>=c_?"at-max":n.balance>xT?"warning":n.balance<=bT?"low-warning":"positive"}`,title:n.accrualRate!==void 0?`Accrual rate: +${n.accrualRate.toFixed(2)} hours`:void 0,children:[n.balance.toFixed(1),"h"]}),e&&T.jsx("div",{className:"selection-overlay"}),t&&T.jsx("div",{className:"selection-start-marker"}),i&&T.jsx("div",{className:"selection-end-marker"})]}):null,PR=l_.memo(DR),RR=({vacation:n,isOpen:e,workSchedule:t,holidays:i,onSave:o,onDelete:l,onClose:h,canAffordVacation:f})=>{const[g,y]=se.useState(""),[_,w]=se.useState(""),[I,R]=se.useState(""),[F,O]=se.useState(!1),[j,G]=se.useState(""),[ee,oe]=se.useState(!1);se.useEffect(()=>{n&&(y(n.startDate),w(n.endDate),R(n.description||""),O(n.personalDayUsed||!1),G(""),oe(!1))},[n]);const ne=se.useMemo(()=>{if(!g||!_)return 0;try{const A=Us(Oe(g),Oe(_),t,i);return F?Math.max(0,A-8):A}catch{return 0}},[g,_,t,i,F]),be=()=>{if(!n)return;if(!g||!_){G("Both start and end dates are required");return}if(Oe(_)<Oe(g)){G("End date must be after start date");return}const{canAfford:A,projectedBalance:D}=f({startDate:g,endDate:_,personalDayUsed:F},n.id);if(!A){G(`Cannot afford this change. Need ${ne}h, will have ${D.toFixed(2)}h`);return}o(n.id,{startDate:g,endDate:_,description:I.trim()||void 0,personalDayUsed:F}),h()},ye=()=>{if(n){if(!ee){oe(!0);return}l(n.id),h()}},P=()=>{oe(!1),h()};return!e||!n?null:T.jsx("div",{className:"modal-overlay",onClick:P,children:T.jsxs("div",{className:"modal-content",onClick:A=>A.stopPropagation(),children:[T.jsx("h2",{children:"Edit Vacation"}),T.jsxs("form",{onSubmit:A=>{A.preventDefault(),be()},children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"edit-start-date",children:"Start Date"}),T.jsx("input",{type:"date",id:"edit-start-date",value:g,onChange:A=>y(A.target.value),required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"edit-end-date",children:"End Date"}),T.jsx("input",{type:"date",id:"edit-end-date",value:_,onChange:A=>w(A.target.value),required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"edit-description",children:"Description (optional)"}),T.jsx("input",{type:"text",id:"edit-description",value:I,onChange:A=>R(A.target.value),placeholder:"e.g., Summer vacation"})]}),T.jsx("div",{className:"form-group checkbox-group",children:T.jsxs("label",{children:[T.jsx("input",{type:"checkbox",checked:F,onChange:A=>O(A.target.checked)}),"Use Personal Day (8h credit)"]})}),T.jsxs("div",{className:"hours-estimate","aria-live":"polite",children:[T.jsx("strong",{children:"Hours needed:"})," ",ne.toFixed(2)]}),j&&T.jsx("div",{className:"error-message",children:j}),T.jsxs("div",{className:"modal-actions",children:[T.jsx("button",{type:"button",onClick:ye,className:"delete-button",children:ee?"Confirm Delete":"Delete"}),T.jsxs("div",{className:"right-actions",children:[T.jsx("button",{type:"button",onClick:P,className:"cancel-button",children:"Cancel"}),T.jsx("button",{type:"submit",className:"save-button",children:"Save Changes"})]})]})]})]})})},NR=({vacations:n,workSchedule:e,holidays:t,onEdit:i,onDelete:o})=>{const l=se.useMemo(()=>{if(n.length===0)return[];const g={};return n.forEach(_=>{const w=Oe(_.startDate).getFullYear();g[w]||(g[w]=[]),g[w].push(_)}),Object.keys(g).map(_=>{const w=parseInt(_,10),I=g[w];return{year:w,vacations:I?I.sort((R,F)=>R.startDate.localeCompare(F.startDate)):[]}}).sort((_,w)=>_.year-w.year)},[n]),h=g=>Oe(g).toLocaleDateString("en-US",{month:"short",day:"numeric"}),f=g=>{const y=Oe(g.startDate),_=Oe(g.endDate),w=Math.ceil((_.getTime()-y.getTime())/(1e3*60*60*24))+1;return w===1?"1 day":`${w} days`};return n.length===0?null:T.jsxs("div",{className:"vacation-list-by-year",children:[T.jsx("h3",{children:"Planned Vacations"}),l.map(g=>T.jsxs("div",{className:"vacation-year-group",children:[T.jsx("h4",{className:"vacation-year-header",children:g.year}),T.jsx("div",{className:"vacation-table-wrapper",children:T.jsxs("table",{className:"vacation-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Dates"}),T.jsx("th",{children:"Description"}),T.jsx("th",{children:"Duration"}),T.jsx("th",{children:"Vacation Hours"}),T.jsx("th",{children:"Actions"})]})}),T.jsx("tbody",{children:g.vacations.map(y=>T.jsxs("tr",{children:[T.jsxs("td",{className:"vacation-dates",children:[h(y.startDate)," - ",h(y.endDate)]}),T.jsx("td",{className:"vacation-description",children:y.description||T.jsx("span",{className:"no-description",children:""})}),T.jsx("td",{className:"vacation-duration",children:f(y)}),T.jsxs("td",{className:"vacation-hours",children:[Xf(y,e,t).toFixed(1),"h"]}),T.jsxs("td",{className:"vacation-actions",children:[T.jsx("button",{onClick:()=>i(y),className:"action-button edit-button",title:"Edit vacation",children:"Edit"}),T.jsx("button",{onClick:()=>o(y.id),className:"action-button delete-button",title:"Delete vacation",children:"Delete"})]})]},y.id))})]})})]},g.year))]})},l0=(n,e)=>{const t=nt(n);return e.some(i=>i.date===t)},Qu=(n,e,t)=>bc(n)||Oc(n,e)?!0:l0(n,t),rf=(n,e,t,i)=>{const o=new Date(n);o.setDate(o.getDate()-1);const l=Qu(n,t,i)&&!Qu(o,t,i),h=new Date(e);h.setDate(h.getDate()+1);const f=Qu(e,t,i)&&!Qu(h,t,i);return l&&f},sf=(n,e,t,i)=>{let o;i===0?o=t>=4?3:1.5:o=Math.min(n,5);const l=o/5*50,h=e?25:0,f=Math.min(Math.log(t)/Math.log(14)*25,25);return l+h+f},Ju=(n,e)=>{const t=nt(n),i=e.find(o=>o.date===t);return i?i.name:null},of=(n,e,t,i)=>{const o=Yf(n,e);let l=0,h=0,f=0;for(const g of o)bc(g)?l++:l0(g,i)?h++:Oc(g,t)&&f++;return{weekends:l,holidays:h,rdos:f}},af=(n,e,t,i)=>{const o=[],l=new Date(n);l.setDate(l.getDate()-1);const h=new Date(e);h.setDate(h.getDate()+1);const f=Ju(l,i),g=Ju(h,i),y=Ju(n,i),_=Ju(e,i);return f&&o.push(`${f} on ${nt(l)}`),g&&o.push(`${g} on ${nt(h)}`),y&&!f&&o.push(`starts on ${y}`),_&&!g&&o.push(`ends on ${_}`),t.weekends>0&&o.push(`includes ${t.weekends} weekend day${t.weekends>1?"s":""}`),t.holidays>0&&o.push(`${t.holidays} holiday${t.holidays>1?"s":""}`),t.rdos>0&&o.push(`${t.rdos} RDO${t.rdos>1?"s":""}`),o.length>0?o.join(", "):"Extends weekend"},xR=(n,e,t,i=1)=>{const o=[];for(let h=1;h<=14;h++){const f=new Date(n);if(f.setDate(f.getDate()-h),f<new Date)continue;const g=Us(f,n,e,t),y=h+1;let _;if(g===0)y>=4?_=999:_=10;else{const w=e.type==="9/80"?9:8,I=g/w;_=y/I}if(_>=i){const w=of(f,n,e,t),I=af(f,n,w,t),R=rf(f,n,e,t),F=sf(_,R,y,g);o.push({id:`before-${nt(n)}-${h}`,startDate:nt(f),endDate:nt(n),totalDays:y,vacationHours:g,efficiency:_,score:F,isBracketed:R,context:I,freeDays:w})}}for(let h=1;h<=14;h++){const f=new Date(n);f.setDate(f.getDate()+h);const g=Us(n,f,e,t),y=h+1;let _;if(g===0)y>=4?_=999:_=10;else{const w=e.type==="9/80"?9:8,I=g/w;_=y/I}if(_>=i){const w=of(n,f,e,t),I=af(n,f,w,t),R=rf(n,f,e,t),F=sf(_,R,y,g);o.push({id:`after-${nt(n)}-${h}`,startDate:nt(n),endDate:nt(f),totalDays:y,vacationHours:g,efficiency:_,score:F,isBracketed:R,context:I,freeDays:w})}}for(let h=1;h<=9;h++)for(let f=1;f<=9;f++){const g=new Date(n);g.setDate(g.getDate()-h);const y=new Date(n);if(y.setDate(y.getDate()+f),g<new Date)continue;const _=Us(g,y,e,t),w=h+f+1;let I;if(_===0)w>=4?I=999:I=10;else{const R=e.type==="9/80"?9:8,F=_/R;I=w/F}if(I>=i){const R=of(g,y,e,t),F=af(g,y,R,t),O=rf(g,y,e,t),j=sf(I,O,w,_);o.push({id:`around-${nt(n)}-${h}-${f}`,startDate:nt(g),endDate:nt(y),totalDays:w,vacationHours:_,efficiency:I,score:j,isBracketed:O,context:F,freeDays:R})}}return o},bR=(n,e,t)=>{if(t.type!=="9/80"||!t.rdoPattern)return[];const i=[],o=new Date(n);for(;o<=e;)o.getDay()===5&&Oc(o,t)&&i.push(new Date(o)),o.setDate(o.getDate()+1);return i},OR=(n,e,t=new Date,i=new Date(new Date().setFullYear(new Date().getFullYear()+1)),o=[],l=10)=>{const h=[],f=[];for(const F of e){const O=Oe(F.date);O>=t&&O<=i&&f.push(O)}const g=bR(t,i,n);f.push(...g);const y=new Date(t);for(;y<=i;)y.getDay()===5&&f.push(new Date(y)),y.getDay()===1&&f.push(new Date(y)),y.setDate(y.getDate()+1);for(const F of f){const O=xR(F,n,e,1.5);h.push(...O)}const _=new Map;for(const F of h){const O=`${F.startDate}-${F.endDate}`,j=_.get(O);(!j||F.score>j.score)&&_.set(O,F)}const w=o.map(F=>({start:Oe(F.startDate),end:Oe(F.endDate)}));return Array.from(_.values()).filter(F=>{const O=Oe(F.startDate),j=Oe(F.endDate);return!w.some(G=>O<=G.end&&j>=G.start)}).sort((F,O)=>O.score-F.score).slice(0,l)},VR=({userProfile:n,holidays:e,plannedVacations:t,onSelectRecommendation:i})=>{const[o,l]=se.useState(!1),h=new Date().getMonth()>=9?new Date().getFullYear()+1:new Date().getFullYear(),[f,g]=se.useState(h),[y,_]=se.useState("all"),w=se.useMemo(()=>{const O=new Date(f,0,1),j=new Date(f,11,31);let ee=OR(n.workSchedule,e,O>new Date?O:new Date,j,t,1e4);return y==="short"?ee=ee.filter(oe=>oe.totalDays<=7):y==="medium"?ee=ee.filter(oe=>oe.totalDays>=8&&oe.totalDays<=14):y==="long"&&(ee=ee.filter(oe=>oe.totalDays>14)),ee.slice(0,10)},[n.workSchedule,e,t,f,y]),I=se.useMemo(()=>{const O=new Date,j=O.getFullYear();return O.getMonth()>=9?[j+1,j+2,j+3]:[j,j+1,j+2]},[]),R=(O,j)=>{const G=Oe(O),ee=Oe(j),oe={month:"short",day:"numeric",year:"numeric"},ne=G.toLocaleDateString("en-US",oe),be=ee.toLocaleDateString("en-US",oe);return`${ne} - ${be}`},F=O=>O>=80?{text:"Excellent",className:"excellent"}:O>=65?{text:"Great",className:"great"}:O>=50?{text:"Good",className:"good"}:{text:"Fair",className:"fair"};return o?T.jsxs("div",{className:"vacation-recommender",children:[T.jsxs("div",{className:"recommender-header",children:[T.jsxs("div",{className:"header-content",children:[T.jsxs("h2",{children:[T.jsx("span",{className:"icon",children:""}),"Vince's Top Picks!"]}),T.jsx("p",{className:"subtitle",children:"Maximize your time off by booking around holidays, weekends, and RDOs"})]}),T.jsx("button",{className:"collapse-button",onClick:()=>l(!1),"aria-label":"Hide recommendations",children:""})]}),T.jsxs("div",{className:"year-selector",children:[T.jsx("label",{children:"Show recommendations for:"}),T.jsx("div",{className:"year-buttons",children:I.map(O=>T.jsx("button",{className:f===O?"active":"",onClick:()=>g(O),children:O},O))})]}),T.jsxs("div",{className:"trip-length-filter",children:[T.jsx("label",{children:"Trip length:"}),T.jsxs("div",{className:"filter-buttons",children:[T.jsx("button",{className:y==="all"?"active":"",onClick:()=>_("all"),children:"All"}),T.jsx("button",{className:y==="short"?"active":"",onClick:()=>_("short"),children:"Short (1 wk)"}),T.jsx("button",{className:y==="medium"?"active":"",onClick:()=>_("medium"),children:"Medium (1-2 wks)"}),T.jsx("button",{className:y==="long"?"active":"",onClick:()=>_("long"),children:"Long (2+ wks)"})]})]}),w.length===0?T.jsxs("div",{className:"no-recommendations",children:[T.jsxs("p",{children:["No high-value vacation opportunities found for ",f,"."]}),T.jsx("p",{className:"hint",children:"Try selecting a different year or check your holiday calendar."})]}):T.jsxs("div",{className:"recommendations-list",children:[T.jsxs("div",{className:"list-header",children:[T.jsxs("span",{className:"header-label",children:["Top ",w.length," Opportunities"]}),T.jsxs("div",{className:"header-definitions",children:[T.jsx("span",{className:"efficiency-hint",children:"Efficiency = Days off  Work days used"}),T.jsx("span",{className:"bracketed-hint",children:"Bracketed = Starts/ends on free day with workdays outside"})]})]}),w.map((O,j)=>{const G=F(O.score);return T.jsxs("div",{className:"recommendation-card",children:[T.jsxs("div",{className:"card-header",children:[T.jsxs("div",{className:"rank-badge",children:["#",j+1]}),T.jsx("div",{className:"date-range",children:R(O.startDate,O.endDate)}),T.jsx("div",{className:`efficiency-badge ${G.className}`,children:G.text})]}),T.jsxs("div",{className:"card-stats",children:[T.jsxs("div",{className:"stat",children:[T.jsx("span",{className:"stat-value",children:O.totalDays}),T.jsx("span",{className:"stat-label",children:"days off"})]}),T.jsx("div",{className:"stat-divider",children:"for"}),T.jsxs("div",{className:"stat",children:[T.jsx("span",{className:"stat-value",children:O.vacationHours}),T.jsx("span",{className:"stat-label",children:"hours"})]}),T.jsx("div",{className:"stat-divider",children:"="}),T.jsxs("div",{className:"stat",children:[T.jsx("span",{className:"stat-value",children:O.efficiency===999?"":`${O.efficiency.toFixed(1)}x`}),T.jsx("span",{className:"stat-label",children:"value"})]})]}),T.jsxs("div",{className:"score-breakdown",children:[T.jsx("div",{className:"score-header",children:T.jsxs("span",{className:"score-title",children:["Composite Score: ",O.score.toFixed(1)]})}),T.jsxs("div",{className:"score-components",children:[T.jsxs("div",{className:"score-component",children:[T.jsx("div",{className:"score-bar-container",children:T.jsx("div",{className:"score-bar efficiency-bar",style:{width:`${Math.min(O.vacationHours===0?(O.totalDays>=4?3:1.5)/5*100:Math.min(O.efficiency,5)/5*100,100)}%`}})}),T.jsx("span",{className:"score-label",children:"Efficiency (50%)"})]}),T.jsxs("div",{className:"score-component",children:[T.jsx("div",{className:"score-bar-container",children:T.jsx("div",{className:"score-bar bracketing-bar",style:{width:O.isBracketed?"100%":"0%"}})}),T.jsx("span",{className:"score-label",children:"Bracketing (25%)"})]}),T.jsxs("div",{className:"score-component",children:[T.jsx("div",{className:"score-bar-container",children:T.jsx("div",{className:"score-bar length-bar",style:{width:`${Math.min(Math.log(O.totalDays)/Math.log(14)*100,100)}%`}})}),T.jsx("span",{className:"score-label",children:"Length (25%)"})]})]})]}),O.context&&T.jsx("div",{className:"card-context",children:O.context}),T.jsxs("div",{className:"card-breakdown",children:[O.isBracketed&&T.jsx("span",{className:"free-day-tag bracketed",children:"Bracketed"}),O.freeDays.weekends>0&&T.jsxs("span",{className:"free-day-tag weekend",children:[O.freeDays.weekends," weekend day",O.freeDays.weekends>1?"s":""]}),O.freeDays.holidays>0&&T.jsxs("span",{className:"free-day-tag holiday",children:[O.freeDays.holidays," holiday",O.freeDays.holidays>1?"s":""]}),O.freeDays.rdos>0&&T.jsxs("span",{className:"free-day-tag rdo",children:[O.freeDays.rdos," RDO",O.freeDays.rdos>1?"s":""]})]}),T.jsx("button",{className:"select-button",onClick:()=>i(O),children:"Add to Calendar"})]},O.id)})]}),T.jsx("div",{className:"recommender-footer",children:T.jsxs("p",{className:"tip",children:[T.jsx("strong",{children:"How it works:"}),' Recommendations are scored using a composite formula: 50% efficiency (days off  work days), 25% bracketing bonus (starts/ends on a free day with workdays outside), and 25% trip length. "Bracketed" vacations maximize your time off by beginning the day after your last workday and ending the day before your next workday.']})})]}):T.jsx("div",{className:"vacation-recommender-collapsed",children:T.jsxs("button",{className:"expand-button",onClick:()=>l(!0),"aria-label":"Show vacation recommendations",children:[T.jsx("span",{className:"icon",children:""}),T.jsx("span",{className:"text",children:"See Vince's Top Picks!"}),T.jsx("span",{className:"badge",children:w.length})]})})},MR=({weeklyBalances:n,plannedVacations:e,holidays:t,userProfile:i,onAddVacation:o,onUpdateVacation:l,onDeleteVacation:h,canAffordVacation:f})=>{const[g,y]=se.useState("idle"),[_,w]=se.useState(null),[I,R]=se.useState(null),[F,O]=se.useState(null),[j,G]=se.useState(!1),[ee,oe]=se.useState(""),[ne,be]=se.useState(()=>localStorage.getItem("jpl-vacation-calendar-view-mode")||"2-month"),[ye,P]=se.useState(window.innerWidth>=768),[A,D]=se.useState(new Date),[N,x]=se.useState(null);se.useEffect(()=>{const X=()=>{ne==="2-month"&&P(window.innerWidth>=768)};return window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[ne]);const M=se.useMemo(()=>{if(n.length===0){const de=new Date;return{start:new Date(de.getFullYear(),de.getMonth()-1,1),end:new Date(de.getFullYear(),de.getMonth()+3,0)}}const X=n[0],he=n[n.length-1];return{start:Oe(X.weekStartDate),end:Oe(he.weekEndDate)}},[n]),C=se.useMemo(()=>kR(n,e,t,i.workSchedule,M.start,M.end),[n,e,t,i.workSchedule,M]),je=se.useCallback(()=>g==="selecting"&&_&&I?{start:_<I?_:I,end:_<I?I:_}:null,[g,_,I])(),Ge=X=>{const he=nt(X),de=C.get(he);if(de!=null&&de.isInVacation&&de.vacationId){const Se=e.find(Me=>Me.id===de.vacationId);if(Se){O(Se),G(!0),$e();return}}if(g==="idle"){y("selecting"),w(X),oe("");return}if(g==="selecting"&&_){const[Se,Me]=X<_?[X,_]:[_,X],{canAfford:vt,projectedBalance:St}=f({startDate:nt(Se),endDate:nt(Me)});if(!vt){const He=Us(Se,Me,i.workSchedule,t);oe(`Insufficient balance. Need ${He}h, will have ${St.toFixed(2)}h`),$e();return}o({startDate:nt(Se),endDate:nt(Me)}),$e()}},$e=()=>{y("idle"),w(null),R(null),oe("")};se.useEffect(()=>{const X=he=>{he.key==="Escape"&&$e()};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[]);const re=se.useCallback(({date:X,view:he,activeStartDate:de})=>{if(he!=="month")return!1;const Se=de.getMonth(),Me=de.getFullYear(),vt=new Date(Me,Se+1,0);if(X<new Date(Me,Se,1))return!0;const St=vt.getDay(),He=St===6?0:(6-St+7)%7,On=new Date(Me,Se,vt.getDate()+He);return X>On},[]),ue=se.useCallback(({date:X,activeStartDate:he})=>{const de=he.getMonth(),Se=he.getFullYear(),Me=new Date(Se,de+1,0);return X>Me},[]),te=se.useCallback(({date:X,view:he,activeStartDate:de})=>{if(he!=="month")return"";const Se=[];if(re({date:X,view:he,activeStartDate:de}))return Se.push("react-calendar__tile--hidden"),Se.join(" ");ue({date:X,activeStartDate:de})&&Se.push("react-calendar__tile--next-month");const Me=C.get(nt(X));if(Me!=null&&Me.isInVacation&&Se.push("react-calendar__tile--vacation"),Me!=null&&Me.isHoliday&&Se.push("react-calendar__tile--holiday"),Me!=null&&Me.isRDO&&Se.push("react-calendar__tile--rdo"),Me!=null&&Me.types.includes($o.WEEKEND)&&Se.push("react-calendar__tile--weekend"),je){const vt=X.getTime(),St=je.start.getTime(),He=je.end.getTime();vt>=St&&vt<=He&&Se.push("react-calendar__tile--in-selection"),vt===St&&Se.push("react-calendar__tile--selection-start"),vt===He&&Se.push("react-calendar__tile--selection-end")}return Se.join(" ")},[C,je,re,ue]),L=se.useCallback(({date:X,view:he})=>{if(he!=="month")return null;const de=C.get(nt(X)),Se=je&&X>=je.start&&X<=je.end,Me=_&&X.getTime()===_.getTime(),vt=I&&X.getTime()===I.getTime();return T.jsx("div",{className:"calendar-tile-wrapper",onMouseEnter:()=>{g==="selecting"&&_&&R(X)},children:T.jsx(PR,{dayInfo:de,isInSelectionRange:!!Se,isSelectionStart:!!Me,isSelectionEnd:!!vt&&g==="selecting"})})},[C,je,_,I,g]),H=()=>{D(new Date)},Te=se.useMemo(()=>{const X=new Date,he=A.getMonth(),de=A.getFullYear();return he===X.getMonth()&&de===X.getFullYear()},[A]),Ee=X=>{be(X),localStorage.setItem("jpl-vacation-calendar-view-mode",X),X==="2-month"&&P(window.innerWidth>=768)},Ne=X=>{const{canAfford:he,projectedBalance:de}=f({startDate:X.startDate,endDate:X.endDate});if(!he){oe(`Insufficient balance. Need ${X.vacationHours}h, will have ${de.toFixed(2)}h`);return}o({startDate:X.startDate,endDate:X.endDate,description:`Recommended: ${X.context}`}),D(Oe(X.startDate))},Re=se.useMemo(()=>{const X=ne==="12-month"?12:ne==="6-month"?6:2,he=[],de=new Date(A);for(let Se=0;Se<X;Se++){const Me=new Date(de.getFullYear(),de.getMonth()+Se,1);he.push(Me)}return he},[A,ne,ye]);return T.jsxs("div",{className:"calendar-view",children:[T.jsxs("div",{className:"banner-container",children:[g==="selecting"&&T.jsx("div",{className:"selection-banner",children:T.jsxs("span",{children:["Selecting vacation: Click the end date or"," ",T.jsx("button",{onClick:$e,className:"cancel-link",children:"Cancel"})]})}),ee&&T.jsxs("div",{className:"error-banner",role:"alert",children:[ee,T.jsx("button",{onClick:()=>oe(""),className:"close-error",children:""})]})]}),T.jsxs("div",{className:"calendar-header-controls",children:[T.jsxs("div",{className:"view-toggle-buttons",children:[T.jsx("button",{onClick:()=>Ee("2-month"),className:`view-toggle-button ${ne==="2-month"?"active":""}`,children:"2-Month View"}),T.jsx("button",{onClick:()=>Ee("6-month"),className:`view-toggle-button ${ne==="6-month"?"active":""}`,children:"6-Month View"}),T.jsx("button",{onClick:()=>Ee("12-month"),className:`view-toggle-button ${ne==="12-month"?"active":""}`,children:"12-Month View"})]}),T.jsx("button",{onClick:H,className:"jump-to-today-button",disabled:Te,children:"Jump to Today"})]}),T.jsxs("div",{className:"calendar-navigation-controls",children:[T.jsx("button",{onClick:()=>{const X=new Date(A.getFullYear(),A.getMonth()-1,1);x("backward"),D(X),setTimeout(()=>x(null),600)},className:"calendar-nav-button",children:" Previous"}),T.jsx("button",{onClick:()=>{const X=new Date(A.getFullYear(),A.getMonth()+1,1);x("forward"),D(X),setTimeout(()=>x(null),600)},className:"calendar-nav-button",children:"Next "})]}),T.jsx("div",{className:`${ne==="12-month"?"twelve-month-grid":ne==="6-month"?"six-month-grid":"two-month-grid"} ${N?`slide-${N}`:""}`,children:Re.map((X,he)=>T.jsxs("div",{className:`${ne==="12-month"?"twelve-month-calendar":ne==="6-month"?"six-month-calendar":"two-month-calendar"}`,children:[T.jsx("div",{className:`${ne==="12-month"?"twelve-month-calendar-header":ne==="6-month"?"six-month-calendar-header":"two-month-calendar-header"}`,children:X.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),T.jsx(CR,{showDoubleView:!1,showNeighboringMonth:!0,selectRange:!1,tileContent:L,tileClassName:te,onClickDay:Ge,minDetail:"month",maxDetail:"month",locale:"en-US",activeStartDate:X,showNavigation:!1})]},he))}),T.jsx(VR,{userProfile:i,holidays:t,plannedVacations:e,onSelectRecommendation:Ne}),T.jsx(RR,{vacation:F,isOpen:j,workSchedule:i.workSchedule,holidays:t,onSave:l,onDelete:h,onClose:()=>{G(!1),O(null)},canAffordVacation:f}),T.jsx(NR,{vacations:e,workSchedule:i.workSchedule,holidays:t,onEdit:X=>{O(X),G(!0)},onDelete:h})]})},LR=()=>T.jsxs("div",{className:"calendar-legend",children:[T.jsx("h3",{children:"Legend"}),T.jsxs("div",{className:"legend-items",children:[T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-indicator vacation",children:"V"}),T.jsx("span",{className:"legend-label",children:"Planned Vacation"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-indicator holiday",children:"H"}),T.jsx("span",{className:"legend-label",children:"Holiday"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-indicator rdo",children:"R"}),T.jsx("span",{className:"legend-label",children:"RDO (9/80)"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-indicator personal-day",children:"P"}),T.jsx("span",{className:"legend-label",children:"Personal Day"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-box weekend"}),T.jsx("span",{className:"legend-label",children:"Weekend"})]}),T.jsxs("div",{className:"legend-item",children:[T.jsx("span",{className:"legend-box balance-positive"}),T.jsx("span",{className:"legend-label",children:"Balance (on Sundays)"})]})]})]}),Gf=({context:n})=>{const[e,t]=se.useState(!1),i=()=>{t(!e)},l=n==="welcome"?{summary:"Your vacation data is stored privately on your device. Optionally sync across devices with Google.",details:T.jsxs("ul",{className:"privacy-details-list",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"Local Storage:"})," Your data is stored in your browser's localStorage, which is private to this device and not shared with anyone."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Optional Cloud Sync:"})," You can optionally enable cloud sync via your Google account to access your data across devices."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"No Third-Party Access:"})," We don't use analytics, tracking, or share your data with any third parties."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Data Collected:"})," JPL start date, current vacation balance, planned vacations, and work schedule preferences."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Your Control:"})," You can reset or delete all your data at any time using the reset button in the app."]})]})}:{summary:"Cloud sync uses your Google account to securely sync data across devices.",details:T.jsxs("ul",{className:"privacy-details-list",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"Google Authentication:"})," Sign in securely using your Google account credentials."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Firebase Platform:"})," Data is synced via Google Firebase, ensuring enterprise-grade security."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Encryption:"})," Your data is encrypted both in transit and at rest."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Access Control:"})," Only you can access your data via your Google account. No one else has access."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Data Synced:"})," Your vacation profile and planned vacations are synced across devices."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Disconnect Anytime:"})," You can disable cloud sync at any time. Your local data will remain on your device."]})]})};return T.jsxs("div",{className:"privacy-notice",children:[T.jsxs("div",{className:"privacy-summary",children:[T.jsx("span",{className:"privacy-icon",children:""}),T.jsx("span",{className:"privacy-text",children:l.summary}),T.jsx("button",{onClick:i,className:"privacy-toggle","aria-expanded":e,"aria-label":e?"Hide privacy details":"Show privacy details",children:e?"Show Less":"Learn More"})]}),e&&T.jsx("div",{className:"privacy-details",children:l.details})]})};function jR({isOpen:n=!0,onClose:e}){const{user:t,loading:i,error:o,isFirebaseAvailable:l,signInWithGoogle:h,signOut:f}=Zc();return!l||!n?null:i?T.jsxs("div",{className:"cloud-sync-settings loading",children:[e&&T.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),T.jsx("p",{children:"Loading..."})]}):t?T.jsxs("div",{className:"cloud-sync-settings signed-in",children:[e&&T.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),T.jsxs("div",{className:"sync-status",children:[T.jsx("div",{className:"sync-icon",children:""}),T.jsxs("div",{className:"sync-info",children:[T.jsx("div",{className:"sync-title",children:"Cloud Sync Enabled"}),T.jsx("div",{className:"sync-email",children:t.email}),T.jsx("div",{className:"sync-description",children:"Your vacation data is automatically synced across all your devices"})]})]}),T.jsx(Gf,{context:"cloudsync"}),T.jsx("button",{onClick:f,className:"sign-out-button",children:"Disable Cloud Sync"}),o&&T.jsx("div",{className:"error-message",children:o})]}):T.jsxs("div",{className:"cloud-sync-settings signed-out",children:[e&&T.jsx("button",{onClick:e,className:"close-button","aria-label":"Close",children:""}),T.jsxs("div",{className:"sync-promo",children:[T.jsx("div",{className:"sync-icon",children:""}),T.jsxs("div",{className:"sync-info",children:[T.jsx("div",{className:"sync-title",children:"Enable Cloud Sync"}),T.jsx("div",{className:"sync-description",children:"Sign in with Google to sync your vacation data across multiple devices and browsers"})]})]}),T.jsx(Gf,{context:"cloudsync"}),T.jsx("button",{onClick:h,className:"sign-in-button",children:"Sign in with Google"}),o&&T.jsx("div",{className:"error-message",children:o})]})}function FR({onClick:n}){const{user:e,isFirebaseAvailable:t}=Zc();if(!t)return null;const i=!!e,o=i?"Synced":"Sync",l=i?"Cloud sync enabled - Click to manage":"Click to enable cloud sync";return T.jsxs("button",{className:"sync-status-indicator",title:l,onClick:n,children:[T.jsx("span",{className:"sync-icon",children:""}),T.jsx("span",{className:"sync-text",children:o})]})}const UR=({onNewUser:n})=>{const{signInWithGoogle:e,error:t,loading:i,isFirebaseAvailable:o}=Zc(),[l,h]=se.useState(!1),f=async()=>{h(!0);try{await e()}catch{console.error("Sign-in error"),h(!1)}};return T.jsx("div",{className:"welcome-screen",children:T.jsxs("div",{className:"welcome-content",children:[T.jsx("h2",{children:"Welcome to JPL Vacation Forecast"}),T.jsx("p",{className:"welcome-subtitle",children:"Track your vacation balance and plan your time off"}),T.jsx(Gf,{context:"welcome"}),T.jsxs("div",{className:"user-choice-container",children:[T.jsxs("div",{className:"choice-card",children:[T.jsx("div",{className:"choice-icon",children:""}),T.jsx("h3",{children:"New User"}),T.jsx("p",{children:"Set up your vacation tracking profile"}),T.jsx("button",{onClick:n,className:"choice-button primary-button",disabled:l,children:"Get Started"})]}),o&&T.jsxs("div",{className:"choice-card",children:[T.jsx("div",{className:"choice-icon",children:""}),T.jsx("h3",{children:"Existing User"}),T.jsx("p",{children:"Sign in to sync your data across devices"}),T.jsx("button",{onClick:f,className:"choice-button secondary-button",disabled:i||l,children:l?"Signing in...":"Sign in with Google"})]})]}),t&&T.jsx("div",{className:"error-message",children:t}),!o&&T.jsx("div",{className:"info-message",children:"Cloud sync is not available. You can still use the app with local storage only."})]})})},o_=({message:n="Loading..."})=>T.jsx("div",{className:"loading-screen",children:T.jsxs("div",{className:"loading-content",children:[T.jsx("div",{className:"spinner"}),T.jsx("p",{className:"loading-message",children:n})]})}),BR=()=>{const{userProfile:n,setUserProfile:e,plannedVacations:t,addPlannedVacation:i,updatePlannedVacation:o,deletePlannedVacation:l,holidays:h,setHolidays:f,weeklyBalances:g,forecastPeriod:y,canAffordVacation:_}=$D(),{defaultHolidays:w}=GD((n==null?void 0:n.workSchedule)??null,y.startDate,y.endDate),{user:I,loading:R,initialSyncComplete:F}=Zc(),[O,j]=se.useState(()=>localStorage.getItem("theme")==="dark"),[G,ee]=se.useState(!0),[oe,ne]=se.useState(!1);se.useEffect(()=>{I&&F&&ee(!1)},[I,F]),se.useEffect(()=>{const P=document.documentElement;O?(P.classList.add("dark"),localStorage.setItem("theme","dark")):(P.classList.remove("dark"),localStorage.setItem("theme","light"))},[O]);const be=()=>{j(!O)};se.useEffect(()=>{if(!n||w.length===0)return;const P="jpl-vacation-holidays-version",A=localStorage.getItem(P),D=VE.version,N=()=>{f(w),localStorage.setItem(P,D)};if(h.length===0){N();return}if(A!==D){N();return}if(h.length!==w.length||h.some((C,Ve)=>{const je=w[Ve];return!je||C.date!==je.date||C.hours!==je.hours})){N();return}h.some(C=>C.date&&C.date.startsWith("2027"))||N()},[n,h,w,f]);const ye=()=>R?T.jsx(o_,{message:"Checking authentication..."}):n?T.jsxs("div",{className:"dashboard",children:[T.jsx("div",{className:"dashboard-header",children:T.jsx("button",{onClick:()=>e(null),className:"reset-button",children:"Reset Profile"})}),T.jsx(jR,{isOpen:G,onClose:()=>ee(!1)}),T.jsx(LR,{}),T.jsx(MR,{weeklyBalances:g,plannedVacations:t,holidays:h,userProfile:n,onAddVacation:i,onUpdateVacation:o,onDeleteVacation:l,canAffordVacation:_})]}):I&&!n?F?T.jsx(Hv,{onSubmit:e,onBack:()=>ne(!1)}):T.jsx(o_,{message:"Loading your data..."}):oe?T.jsx(Hv,{onSubmit:e,onBack:()=>ne(!1)}):T.jsx(UR,{onNewUser:()=>ne(!0)});return T.jsxs("div",{className:"app",children:[T.jsx("header",{className:"app-header",children:T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[T.jsx("h1",{children:"JPL Vacation Forecast "}),T.jsxs("div",{style:{display:"flex",gap:"12px",marginLeft:"auto",alignItems:"center"},children:[T.jsx(FR,{onClick:()=>ee(!G)}),T.jsx("button",{onClick:be,className:"reset-button","aria-label":O?"Switch to light mode":"Switch to dark mode",children:O?" Light Mode":" Dark Mode"})]})]})}),T.jsx("main",{className:"app-main",children:ye()})]})},u0=document.getElementById("root");if(!u0)throw new Error("Failed to find the root element");kT.createRoot(u0).render(T.jsx(l_.StrictMode,{children:T.jsx(BR,{})}));
